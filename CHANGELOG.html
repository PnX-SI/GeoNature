<!doctype html>
<html class="no-js" lang="fr" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Recherche" href="search.html" /><link rel="next" title="API REFERENCES" href="api-references.html" /><link rel="prev" title="Auteurs" href="authors.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>CHANGELOG - Documentation GeoNature 2.15.4</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Documentation GeoNature 2.15.4</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/LogoGeonature.jpg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Documentation GeoNature 2.15.4</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">Manuel utilisateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">Manuel administrateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">D√©veloppement</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Auteurs</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">CHANGELOG</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api-references.html">API REFERENCES</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API REFERENCES</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="autoapi/geonature/index.html">geonature</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of geonature</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/app/index.html">geonature.app</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/geonature/core/index.html">geonature.core</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of geonature.core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/admin/index.html">geonature.core.admin</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of geonature.core.admin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/admin/admin/index.html">geonature.core.admin.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/admin/utils/index.html">geonature.core.admin.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/command/index.html">geonature.core.command</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of geonature.core.command</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/__main__/index.html">geonature.core.command.__main__</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/create_gn_module/index.html">geonature.core.command.create_gn_module</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/main/index.html">geonature.core.command.main</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/core/errors/index.html">geonature.core.errors</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/index.html">geonature.core.gn_commons</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/admin/index.html">geonature.core.gn_commons.admin</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/medias/index.html">geonature.core.gn_commons.medias</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.medias</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/medias/routes/index.html">geonature.core.gn_commons.medias.routes</a></li>
</ul>
</li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/index.html">geonature.core.gn_commons.models</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/additional_fields/index.html">geonature.core.gn_commons.models.additional_fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/base/index.html">geonature.core.gn_commons.models.base</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/repositories/index.html">geonature.core.gn_commons.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/routes/index.html">geonature.core.gn_commons.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/schemas/index.html">geonature.core.gn_commons.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/tasks/index.html">geonature.core.gn_commons.tasks</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/validation/index.html">geonature.core.gn_commons.validation</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.validation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/validation/routes/index.html">geonature.core.gn_commons.validation.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_meta/index.html">geonature.core.gn_meta</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/index.html">geonature.core.gn_meta.models</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/aframework/index.html">geonature.core.gn_meta.models.aframework</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/commons/index.html">geonature.core.gn_meta.models.commons</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/datasets/index.html">geonature.core.gn_meta.models.datasets</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/repositories/index.html">geonature.core.gn_meta.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/routes/index.html">geonature.core.gn_meta.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/schemas/index.html">geonature.core.gn_meta.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/index.html">geonature.core.gn_monitoring</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of geonature.core.gn_monitoring</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/models/index.html">geonature.core.gn_monitoring.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/routes/index.html">geonature.core.gn_monitoring.routes</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/index.html">geonature.core.gn_permissions</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of geonature.core.gn_permissions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/admin/index.html">geonature.core.gn_permissions.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/commands/index.html">geonature.core.gn_permissions.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/decorators/index.html">geonature.core.gn_permissions.decorators</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/models/index.html">geonature.core.gn_permissions.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/routes/index.html">geonature.core.gn_permissions.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/schemas/index.html">geonature.core.gn_permissions.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/tools/index.html">geonature.core.gn_permissions.tools</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/index.html">geonature.core.gn_profiles</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of geonature.core.gn_profiles</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/models/index.html">geonature.core.gn_profiles.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/routes/index.html">geonature.core.gn_profiles.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/tasks/index.html">geonature.core.gn_profiles.tasks</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/index.html">geonature.core.gn_synthese</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/index.html">geonature.core.gn_synthese.imports</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/actions/index.html">geonature.core.gn_synthese.imports.actions</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/geo/index.html">geonature.core.gn_synthese.imports.geo</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/plot/index.html">geonature.core.gn_synthese.imports.plot</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/models/index.html">geonature.core.gn_synthese.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/module/index.html">geonature.core.gn_synthese.module</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/routes/index.html">geonature.core.gn_synthese.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/schemas/index.html">geonature.core.gn_synthese.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/synthese_config/index.html">geonature.core.gn_synthese.synthese_config</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/index.html">geonature.core.gn_synthese.utils</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/blurring/index.html">geonature.core.gn_synthese.utils.blurring</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/orm/index.html">geonature.core.gn_synthese.utils.orm</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/process/index.html">geonature.core.gn_synthese.utils.process</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/query_select_sqla/index.html">geonature.core.gn_synthese.utils.query_select_sqla</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/index.html">geonature.core.imports</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of geonature.core.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/actions/index.html">geonature.core.imports.actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/admin/index.html">geonature.core.imports.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/blueprint/index.html">geonature.core.imports.blueprint</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/index.html">geonature.core.imports.checks</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/index.html">geonature.core.imports.checks.dataframe</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.dataframe</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/cast/index.html">geonature.core.imports.checks.dataframe.cast</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/core/index.html">geonature.core.imports.checks.dataframe.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/dates/index.html">geonature.core.imports.checks.dataframe.dates</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/geometry/index.html">geonature.core.imports.checks.dataframe.geometry</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/utils/index.html">geonature.core.imports.checks.dataframe.utils</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/checks/errors/index.html">geonature.core.imports.checks.errors</a></li>
<li class="toctree-l6 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/index.html">geonature.core.imports.checks.sql</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.sql</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/core/index.html">geonature.core.imports.checks.sql.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/extra/index.html">geonature.core.imports.checks.sql.extra</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/geo/index.html">geonature.core.imports.checks.sql.geo</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/nomenclature/index.html">geonature.core.imports.checks.sql.nomenclature</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/parent/index.html">geonature.core.imports.checks.sql.parent</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/utils/index.html">geonature.core.imports.checks.sql.utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/commands/index.html">geonature.core.imports.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/config_schema/index.html">geonature.core.imports.config_schema</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/logs/index.html">geonature.core.imports.logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/models/index.html">geonature.core.imports.models</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/routes/index.html">geonature.core.imports.routes</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of geonature.core.imports.routes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/fields/index.html">geonature.core.imports.routes.fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/imports/index.html">geonature.core.imports.routes.imports</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/mappings/index.html">geonature.core.imports.routes.mappings</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/schemas/index.html">geonature.core.imports.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/tasks/index.html">geonature.core.imports.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/templates/index.html">geonature.core.imports.templates</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/utils/index.html">geonature.core.imports.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/notifications/index.html">geonature.core.notifications</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of geonature.core.notifications</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/admin/index.html">geonature.core.notifications.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/models/index.html">geonature.core.notifications.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/routes/index.html">geonature.core.notifications.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/tasks/index.html">geonature.core.notifications.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/utils/index.html">geonature.core.notifications.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/sensitivity/index.html">geonature.core.sensitivity</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of geonature.core.sensitivity</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/models/index.html">geonature.core.sensitivity.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/routes/index.html">geonature.core.sensitivity.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/utils/index.html">geonature.core.sensitivity.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/taxonomie/index.html">geonature.core.taxonomie</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of geonature.core.taxonomie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/taxonomie/admin/index.html">geonature.core.taxonomie.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/taxonomie/schemas/index.html">geonature.core.taxonomie.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/users/index.html">geonature.core.users</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of geonature.core.users</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/models/index.html">geonature.core.users.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/register_post_actions/index.html">geonature.core.users.register_post_actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/routes/index.html">geonature.core.users.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/middlewares/index.html">geonature.middlewares</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/tasks/index.html">geonature.tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/geonature/utils/index.html">geonature.utils</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of geonature.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/celery/index.html">geonature.utils.celery</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/command/index.html">geonature.utils.command</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/config/index.html">geonature.utils.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/config_schema/index.html">geonature.utils.config_schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/env/index.html">geonature.utils.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/errors/index.html">geonature.utils.errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/filemanager/index.html">geonature.utils.filemanager</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/logs/index.html">geonature.utils.logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/metaclass_utils/index.html">geonature.utils.metaclass_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/module/index.html">geonature.utils.module</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/schema/index.html">geonature.utils.schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/sentry/index.html">geonature.utils.sentry</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsgeometrytools/index.html">geonature.utils.utilsgeometrytools</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsmails/index.html">geonature.utils.utilsmails</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsrequests/index.html">geonature.utils.utilsrequests</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilstoml/index.html">geonature.utils.utilstoml</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/CHANGELOG.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Lien vers cette rubrique">¬∂</a></h1>
<section id="id1">
<h2>2.15.4 (2025-02-25)<a class="headerlink" href="#id1" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Import] Acc√©l√©ration du temps de suppression d‚Äôun import avec l‚Äôajout d‚Äôun index sur les colonnes <code class="docutils literal notranslate"><span class="pre">id_import</span></code> des tables <code class="docutils literal notranslate"><span class="pre">pr_occhab.t_stations</span></code>, <code class="docutils literal notranslate"><span class="pre">pr_occhab.t_habitats</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (#3390 par &#64;jacquesfize et &#64;dba-sig-sfepm).</p></li>
<li><p>[Synthese] La mise √† jour de la date de validation dans la synth√®se est effective (#3371, #1040 par &#64;jacquesfize)</p></li>
<li><p>[Import] Le param√®tre <code class="docutils literal notranslate"><span class="pre">CHECK_PRIVATE_JDD_BLURING</span></code> est maintenant d√©sactiv√© par d√©faut (#3391 par &#64;camillemonchicourt)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Synthese] Correction de la prise en compte de <code class="docutils literal notranslate"><span class="pre">size_hierarchy</span></code> dans le mode maille de la Synth√®se lorsque le floutage est activ√© (#3380 par &#64;Pierre-Narcisi)</p></li>
<li><p>[Benchmark] Correction des <em>fixtures</em> de benchmark des routes de la Synth√®se avec floutage (#3381 par &#64;jacquesfize)</p></li>
<li><p>[Synthese] Correction de l‚Äôaffichage des statuts dans la fiche d‚Äôobservation et dans la fiche de taxon (#3384 par &#64;jacquesfize et #3394 par &#64;edelclaux)</p></li>
<li><p>[Import] Correction du nom de fichier dans le template du rapport d‚Äôimport (<code class="docutils literal notranslate"><span class="pre">images/logo_structure.jpg</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">images/logo_structure.png</span></code>) (#3389 par &#64;jacquesfize)</p></li>
</ul>
</section>
<section id="id2">
<h2>2.15.3 (2025-02-14)<a class="headerlink" href="#id2" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synthese] Affichage des <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code>, <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> et du <code class="docutils literal notranslate"><span class="pre">nom_cite</span></code> dans les fiches d‚Äôobservation et les fiches taxon (#3334 par &#64;edelclaux).</p></li>
<li><p>[Documentation] La compilation de documentation est effectu√©e √† chaque merge dans la branche principale (<code class="docutils literal notranslate"><span class="pre">master</span></code>) (#3338 par &#64;jacquesfize)</p></li>
<li><p>[Import] Ajout d‚Äôune barre de progression dans l‚Äôimport Occhab (#2928 par &#64;Pierre-Narcisi)</p></li>
<li><p>[TaxHub] Mise √† jour de TaxHub en version 2.1.2</p></li>
<li><p>[Authentification] Mise √† jour UsersHub-autentification-module en version 3.0.2</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[TaxHub] Correction de la synchonisation avec Occtax-mobile (https://github.com/PnX-SI/TaxHub/pull/599 par &#64;amandine-sahl)</p></li>
<li><p>[TaxHub] Ajout d‚Äôun bouton TaxHub dans le menu lat√©ral (#3368 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction du nombre d‚Äôentit√©s valides des donn√©es import√©es (#3336, #3355 par &#64;jacquesfize)</p></li>
<li><p>[Import] Suppression des param√®tres de configuration inutiles dans la nouvelle version (#3341 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction la barre de progression pour l‚Äôimport dans la synth√®se (#2928 par &#64;Pierre-Narcisi)</p></li>
<li><p>[Authentification] Correction des valeurs dans <code class="docutils literal notranslate"><span class="pre">defaut_config.toml.sample</span></code> (#3339 par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction du lien de l‚Äôacc√®s public (#3353 par &#64;VincentCauchois)</p></li>
<li><p>[Synth√®se] Correction de l‚Äôordre d‚Äôaffichage des observations sensibles (#3354 par &#64;VincentCauchois et &#64;Christophe-Ramet; #3249).</p></li>
<li><p>[Synth√®se] Correction de la recherche dans la Synthese avec un ou plusieurs filtres parmi ¬´¬†Listes rouges¬†¬ª (#3351 par &#64;VincentCauchois et &#64;Christophe-Ramet).</p></li>
<li><p>[Synth√®se] Correction de la recherche avec filtre par g√©om√©trie avec des SRID diff√©rents (#3324 par &#64;jbrieuclp et &#64;jacquesfize)</p></li>
<li><p>[M√©tadonn√©es] Correction du rafraichissement du formulaire de recherche (#3365 par &#64;jacquesfize)</p></li>
<li><p>[Documentation] R√©int√©gration de la documentation sur l‚Äôauthentification avec un fournisseur d‚Äôidentit√© externe (#3338 par &#64;jacquesfize)</p></li>
<li><p>[D√©veloppement] Correction des mod√®les SQLAlchemy pour pouvoir utiliser le mode debug (#3346 par &#64;jacquesfize)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous les aviez d√©fini, enlevez les param√®tres <code class="docutils literal notranslate"><span class="pre">INSTANCE_BOUNDING_BOX</span></code>, <code class="docutils literal notranslate"><span class="pre">ENABLE_BOUNDING_BOX_CHECK</span></code>, <code class="docutils literal notranslate"><span class="pre">ALLOW_FIELD_MAPPING</span></code>, <code class="docutils literal notranslate"><span class="pre">DEFAULT_FIELD_MAPPING_ID</span></code>, <code class="docutils literal notranslate"><span class="pre">DISPLAY_CHECK_BOX_MAPPED_FIELD</span></code> de votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Ces derniers ne sont plus pris en compte depuis la version 2.15.x.</p>
</section>
<section id="id3">
<h2>2.15.2 (2025-01-16)<a class="headerlink" href="#id3" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Accueil] Optimisation du calcul des statistiques (#3309, par &#64;dba-sig-sfepm et &#64;jacquesfize)</p></li>
<li><p>[Profils de taxon] Am√©lioration, homog√©n√©isation et mise en coh√©rence des param√®tres d‚Äôactivation ou non des profils de taxons (#3311, par &#64;edelclaux)</p></li>
<li><p>[TaxHub] Mise √† jour de TaxHub en version 2.1.1 (#3321, par &#64;amandine-sahl et &#64;jacquesfize)</p></li>
<li><p>[Documentation] Compl√©ments de la documentation du module Validation et de la sensibilit√© (#3317, par &#64;camillemonchicourt)</p></li>
<li><p>[D√©veloppement] Red√©marrage automatique du backend quand un fichier de configuration <code class="docutils literal notranslate"><span class="pre">.toml</span></code> est modifi√© (#3316, par &#64;jacquesfize)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Accueil] Correction de la prise en compte de la port√©e des permissions dans le calcul des statistiques (#3166, par &#64;jacquesfize et &#64;edelclaux)</p></li>
<li><p>[Sensibilit√©] Correction du comptage du nombre de r√®gles supprim√©es dans la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">remove-referential</span></code> (#3323, par &#64;jacquesfize)</p></li>
<li><p>[Synth√®se] Correction de la disparition du filtre par <code class="docutils literal notranslate"><span class="pre">id_import</span></code> apr√®s l‚Äôaffichage d‚Äôune fiche observation (par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction des redirections du module Admin lors de l‚Äôauthentification (#3322, par &#64;jacquesfize)</p></li>
<li><p>[M√©tadonn√©es] Correction d‚Äôune r√©gression de performances de la r√©cup√©ration des JDD, introduite dans la 2.15.1 (#3320, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Authentification] La configuration des providers n‚Äôest plus accessible depuis la route <code class="docutils literal notranslate"><span class="pre">gn_commons/config</span></code> (#3330 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction d‚Äôerreurs dans l‚Äôinterface de correspondance des champs (#3329, par &#64;Pierre-Narcisi)</p></li>
</ul>
</section>
<section id="id4">
<h2>2.15.1 (2025-01-10)<a class="headerlink" href="#id4" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[M√©tadonn√©es] Am√©lioration de la recherche libre des m√©tadonn√©es en cherchant chaque mot ind√©pendamment (#3295, par &#64;jbrieuclp)</p></li>
<li><p>[FicheTaxon] Am√©lioration de l‚Äôaffichage de la photo du taxon sur les fiches taxon (#3287, par &#64;edelclaux)</p></li>
<li><p>[Documentation] Conversion du changelog en format markdown (#3297, par &#64;jacquesfize)</p></li>
<li><p>[Documentation] Compl√©ment et mise en forme de la documentation et publication sur Readthedocs (#3306, par &#64;jacquesfize)</p></li>
<li><p>[D√©veloppement] Ajout d‚Äôun fichier <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> pour faciliter l‚Äôusage des commandes de d√©veloppement (#3300, par &#64;jacquesfize &amp; &#64;edelclaux)</p></li>
<li><p>[Installation] Ajout des nouvelles mailles INPN lors de l‚Äôinstallation de GeoNature (#3293, par &#64;jacquesfize)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Discussions] Correction de la pagination quand on filtre les discussions de la page d‚Äôaccueil sur ¬´¬†Mes discussions¬†¬ª (#3288, par &#64;edelclaux)</p></li>
<li><p>[Discussions] Correction des performances de la requ√™te de r√©cup√©ration des discussions (#3307, par &#64;jacquesfize)</p></li>
<li><p>[M√©tadonn√©es] Correction du nombre de taxons sur les fiches des cadres d‚Äôacquisition (#3228, par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction des redirections lors de l‚Äôauthentification (#3305, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la s√©lection automatique du JDD lors de l‚Äôimport depuis la fiche d‚Äôun JDD (#3293, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la mise √† jour des mappings publics (#3293, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la sauvegarde des checkbox dans le mapping des champs (#3293, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Import] Correction de la s√©lection des champs <code class="docutils literal notranslate"><span class="pre">auto_generate</span></code> (#3293, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Import] Correction du template des notifications d‚Äôun import termin√© (#3310 par &#64;jacquesfize)</p></li>
</ul>
</section>
<section id="pavo-cristatus-2025-12-11">
<h2>2.15.0 - Pavo cristatus ü¶ö (2025-12-11)<a class="headerlink" href="#pavo-cristatus-2025-12-11" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>‚è© En bref</strong></p>
<ul class="simple">
<li><p>Nouvelle version de TaxHub (2.0.0) int√©gr√©e √† GeoNature</p></li>
<li><p>Fiche de taxon enrichie int√©grant l‚Äôactuel profil mais aussi une synth√®se g√©ographique, les informations taxonomiques ainsi qu‚Äôune liste des statuts de protection</p></li>
<li><p>Module Import int√©gr√© √† GeoNature</p></li>
<li><p>Import de donn√©es vers le module Occhab</p></li>
<li><p>Derni√®res discussions list√©es sur la page d‚Äôaccueil</p></li>
</ul>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[TaxHub] Int√©gration de TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/2.0.0">2.0.0 Release Note</a>) √† GeoNature (#3280)</p>
<ul>
<li><p>La gestion des taxons est maintenant int√©gr√©e dans le module Admin de GeoNature.</p></li>
</ul>
</li>
<li><p>[Import] Refonte et int√©gration du module Import dans GeoNature (#3269)</p>
<ul>
<li><p>Ajout d‚Äôune nouvelle destination d‚Äôimport de donn√©es : Occhab</p></li>
<li><p>Ajout de la possibilit√© d‚Äô√©tendre les destinations disponibles pour l‚Äôimport de donn√©es vers d‚Äôautres modules. <a class="reference external" href="https://docs.geonature.fr/development.html#integrer-limport-de-donnees-dans-votre-module">Documentation de d√©veloppement</a> d√©di√©e √† ce sujet</p></li>
<li><p>Ajout d‚Äôun bouton pour importer des donn√©es directement depuis le module de destination (Synth√®se et Occhab actuellement)</p></li>
<li><p>Evolution des permissions : la cr√©ation d‚Äôun import d√©pend de l‚Äôaction C sur le module Import et de l‚Äôaction C dans le module de destination (Synth√®se et/ou Occhab)</p></li>
<li><p>Plusieurs am√©liorations : de nouveaux contr√¥les des donn√©es, un rapport d‚Äôimport revu et int√©gration de nouveaux tests frontends</p></li>
<li><p>Int√©gration et compl√©ment de la documentation utilisateur et administrateur du module dans la documentation de GeoNature</p></li>
</ul>
</li>
<li><p>[Authentification] Possibilit√© de se connecter √† GeoNature avec d‚Äôautres fournisseurs d‚Äôidentit√© (#3111)</p>
<ul>
<li><p>Plusieurs protocoles de connexion int√©gr√©s activables et param√©trables : OAuth, CAS INPN, UserHub</p></li>
<li><p>Possibilit√© de se connecter sur d‚Äôautres instances GeoNature</p></li>
</ul>
</li>
<li><p>[Synth√®se] Enrichissement de la fiche taxon (#2981, #3131, #3187, #3175)</p>
<ul>
<li><p>Affichage de la synth√®se g√©ographique d‚Äôun taxon</p></li>
<li><p>Affichage du statut de protection du taxon</p></li>
<li><p>Affichage des informations taxonomiques pr√©sentes dans Taxref</p></li>
<li><p>Ajout d‚Äôun lien vers la fiche du taxon depuis la liste des observations de la Synth√®se (#2718)</p></li>
</ul>
</li>
<li><p>[Synth√®se] Possibilit√© de partager une URL de redirection vers un onglet (d√©tails, taxonomie, discussion, validation, etc.) de la fiche d‚Äôune observation (#3169)</p></li>
<li><p>[Accueil] Ajout d‚Äôun bloc <code class="docutils literal notranslate"><span class="pre">Discussions</span></code> sur la page d‚Äôaccueil, d√©sactivable avec le param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_LATEST_DISCUSSIONS</span></code> (#3138)</p>
<ul>
<li><p>Filtrable sur les discussions dans lesquelles l‚Äôutilisateur authentifi√© a particip√©, ou associ√© √† une des observations dont il est : soit l‚Äôobservateur ou l‚Äôop√©rateur de la saisie (#3194)</p></li>
</ul>
</li>
<li><p>[Occhab] Remplacement du champ <code class="docutils literal notranslate"><span class="pre">is_habitat_complex</span></code> par le nouveau champ <code class="docutils literal notranslate"><span class="pre">id_nomenclature_type_habitat</span></code> et int√©gration de la nomenclature SINP associ√©e (voir MosaiqueValue dans la version 2 du standard Occurrences d‚Äôhabitats du SINP) (#3125)</p></li>
<li><p>[Occhab] Affichage de l‚ÄôUUID de la station dans sa fiche d√©tail (#3247)</p></li>
<li><p>[Occhab] Am√©lioration de l‚Äôexport des donn√©es en revoyant la vue <code class="docutils literal notranslate"><span class="pre">pr_occhab.v_export_sinp</span></code> (#3122)</p></li>
<li><p>[M√©tadonn√©es] Possibilit√© de supprimer un cadre d‚Äôacquisition vide (#1673)</p></li>
<li><p>[Occtax] Ajout du nom de lieu dans le d√©tail d‚Äôun relev√© (#3145)</p></li>
<li><p>[RefGeo] De nouvelles mailles INPN sur la France m√©tropolitaine (2km, 20km, 50km) sont disponibles (https://github.com/PnX-SI/RefGeo/releases/tag/1.5.4)</p></li>
<li><p>[Monitoring] Ajout de la gestion de la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_observations</span></code> directement dans GeoNature (#2824)</p></li>
<li><p>La synchronisation avec le service MTD de l‚ÄôINPN n‚Äôest plus int√©gr√©e dans le code de GeoNature, elle a √©t√© d√©plac√©e dans un module externe (https://github.com/PnX-SI/mtd_sync)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚ÄôURL des modules externes dans le menu lat√©ral (#3093)</p></li>
<li><p>Correction des erreurs d‚Äôex√©cution de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> (#3216)</p></li>
<li><p>Correction du placement des tooltips pour le composant <code class="docutils literal notranslate"><span class="pre">ng-select</span></code> (#3142)</p></li>
<li><p>Correction de l‚Äôinterrogation des profils dans Occtax (#3156)</p></li>
<li><p>Correction de l‚Äôaffichage du lieu dans les fiches des relev√©s Occtax (#3145)</p></li>
<li><p>Correction de l‚Äôexport Occhab avec des champs additionnels vides (#2837)</p></li>
<li><p>Correction d‚Äôun soucis de duplication des g√©om√©tries quand on modifie un polygone (#3195)</p></li>
<li><p>Correction de la recherche avanc√©e par zonage dans le module M√©tadonn√©es (#3250)</p></li>
<li><p>Correction d‚Äôun scroll non souhait√© dans l‚Äôinterface du module Synth√®se (#3233)</p></li>
<li><p>Correction de l‚Äôaffichage des acteurs dans les fiches des observations de la Synth√®se (#3086)</p></li>
<li><p>Correction du chargement des champs additionnels de type Nomenclature (#3082)</p></li>
<li><p>Correction des filtres taxonomiques avanc√©s dans le mdoule Synth√®se (#3087)</p></li>
<li><p>Correction de l‚Äôaffichage des boutons radio quand ceux-ci sont obligatoires (#3210)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> (#3208)</p></li>
<li><p>Correction de la redirection vers la page d‚Äôauthentification quand on acc√®de au module Admin sans √™tre authentifi√© (#3171)</p></li>
<li><p>Correction du scroll du menu lat√©ral dans le module Admin (#3145)</p></li>
<li><p>Correction de l‚Äôaper√ßu des m√©dias de type PDF (#3260)</p></li>
<li><p>Corrections diverses de la documentation</p></li>
<li><p>Ajout d‚Äôun action Github permettant de lancer les tests depuis des modules externes (#3232)</p></li>
<li><p>Lancement de <code class="docutils literal notranslate"><span class="pre">pytest</span></code> sans <em>benchmark</em> ne n√©cessite plus l‚Äôajout de <code class="docutils literal notranslate"><span class="pre">--benchmark-skip</span></code> (#3183)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous utilisez GeoNature-citizen, attendez qu‚Äôune version de celui-ci compatible avec TaxHub 2.x soit disponible.</p></li>
<li><p>Si vous mettez √† jour GeoNature :</p></li>
</ul>
<p><strong>Avant la mise √† jour de GeoNature :</strong></p>
<ul class="simple">
<li><p>Ajouter l‚Äôextension <code class="docutils literal notranslate"><span class="pre">ltree</span></code> √† votre base de donn√©es : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">&lt;nom_basededonnee_de_votregeonature&gt;</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">ltree;&quot;</span></code></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez-le √† jour en version 1.0.0 minimum</p></li>
<li><p>Si vous utilisez le module Monitoring, les champs <code class="docutils literal notranslate"><span class="pre">id_digitizer</span></code> des tables <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code>, <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> est d√©sormais obligatoire. Assurez-vous qu‚Äôils soient peupl√©s avant de lancer la mise √† jour de GeoNature (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_monitoring.t_base_visits</span> <span class="pre">tbv</span> <span class="pre">WHERE</span> <span class="pre">id_digitiser</span> <span class="pre">IS</span> <span class="pre">NULL;</span> <span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_monitoring.t_base_sites</span> <span class="pre">tbs</span> <span class="pre">WHERE</span> <span class="pre">id_digitiser</span> <span class="pre">IS</span> <span class="pre">NULL;</span></code>).</p></li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Apr√®s la mise √† jour de GeoNature :</strong></p>
<ul>
<li><p>L‚Äôapplication TaxHub a √©t√© integr√©e dans le module ¬´¬†Admin¬†¬ª de GeoNature (#3280) :</p>
<ul>
<li><p>Les permissions bas√©es sur les profils 1-6 ont √©t√© rapatri√©es et adapt√©es au mod√®le de permissions de GeoNature.
TaxHub est d√©sormais un ¬´¬†module¬†¬ª GeoNature et dispose des objets de permissions <code class="docutils literal notranslate"><span class="pre">TAXONS</span></code>, <code class="docutils literal notranslate"><span class="pre">THEMES</span></code>, <code class="docutils literal notranslate"><span class="pre">LISTES</span></code> et <code class="docutils literal notranslate"><span class="pre">ATTRIBUTS</span></code>. Les utilisateurs ayant anciennement des droits 6 dans TaxHub ont toutes les permissions sur les objets pr√©-cit√©s. Les personnes ayant des droits inf√©rieurs √† 6 et ayant un compte sur TaxHub ont maintenant des permissions sur l‚Äôobjet <code class="docutils literal notranslate"><span class="pre">TAXON</span></code> (voir et √©diter des taxons = ajouter des m√©dias et des attributs)</p></li>
<li><p>L‚ÄôAPI de TaxHub est d√©sormais disponible √† l‚ÄôURL <code class="docutils literal notranslate"><span class="pre">&lt;URL_GEONATURE&gt;/api/taxhub/api/</span></code> (le suffixe <code class="docutils literal notranslate"><span class="pre">/api</span></code> est une r√©trocompatibilit√© et sera enlev√© de mani√®re transparente dans les prochaines versions)</p></li>
<li><p>Le param√®tre <code class="docutils literal notranslate"><span class="pre">API_TAXHUB</span></code> de GeoNature est d√©sormais obsol√®te (d√©duit de <code class="docutils literal notranslate"><span class="pre">API_ENDPOINT</span></code>) et peut √™tre retir√© du fichier de configuration de GeoNature</p></li>
<li><p>Si vous utilisez Occtax-mobile, veillez √† modifier son param√®tre <code class="docutils literal notranslate"><span class="pre">taxhub_url</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">/geonature/backend/media/mobile/occtax/settings.json</span></code>, pour mettre la valeur <code class="docutils literal notranslate"><span class="pre">&lt;URL_GEONATURE&gt;/api/taxhub</span></code>. Idem dans le param√®tre <code class="docutils literal notranslate"><span class="pre">TAXHUB_URL</span></code> de GeoNature-atlas si vous utilisez celui-ci.</p></li>
<li><p>Les m√©dias ont √©t√© d√©plac√©s automatiquement du dossier <code class="docutils literal notranslate"><span class="pre">/static/medias/</span></code> de TaxHub vers le dossier <code class="docutils literal notranslate"><span class="pre">/backend/media/taxhub/</span></code> de GeoNature. En cons√©quence, les URL des m√©dias des taxons ont chang√©. Vous devez donc le r√©percuter les param√®tres de vos √©ventuelles applications qui les utilisent (<code class="docutils literal notranslate"><span class="pre">REMOTE_MEDIAS_URL</span></code> et <code class="docutils literal notranslate"><span class="pre">REMOTE_MEDIAS_PATH</span></code> de la configuration de GeoNature-atlas par exemple).</p></li>
<li><p>L‚Äôint√©gration de TaxHub dans GeoNature entraine la suppression de son service systemd d√©di√© et la configuration Apache sp√©cifique de TaxHub. Les logs de TaxHub sont √©galement d√©sormais centralis√©s dans le fichier de log de GeoNature.</p></li>
<li><p>L‚Äôapplication TaxHub ind√©pendante n‚Äôest plus utilis√©e, effectuez donc les actions suivantes :</p>
<ul class="simple">
<li><p>Supprimez la branche alembic taxhub : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">downgrade</span> <span class="pre">taxhub-standalone&#64;base</span></code></p></li>
<li><p>Supprimez le dossier sp√©cifique de l‚Äôancien TaxHub (√† priori dans <code class="docutils literal notranslate"><span class="pre">/home/monuser/taxhub/</span></code>)</p></li>
</ul>
</li>
<li><p>Les commandes de TaxHub sont maintenant accessibles depuis la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>, par exemple :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>taxref<span class="w"> </span>migrate-to-v17<span class="w"> </span><span class="c1"># flask taxref migrate-to-v17</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Le module Import a √©t√© int√©gr√© dans le coeur de GeoNature (#3269)</p>
<ul class="simple">
<li><p>Si vous aviez install√© le module externe Import, l‚Äôancienne version a √©t√© d√©sinstall√©e lors de la mise √† jour de GeoNature.</p></li>
<li><p>Si vous n‚Äôaviez pas install√© le module externe Import, il sera disponible apr√®s la mise √† jour de GeoNature. Vous pouvez configurer les permissions de vos utilisateurs si vous souhaitez qu‚Äôils acc√©dent au module Import.</p></li>
<li><p>La gestion des permissions du module Import et des JDD qui lui sont associ√©s a √©volu√©. La migration de ces donn√©es est g√©r√©e automatiquement lors de la mise √† jour de GeoNature pour garantir un fonctionnement identique du module Import.</p></li>
<li><p>Reporter l‚Äô√©ventuelle configuration de votre module Import dans le fichier de configuration de GeoNature (dans le bloc <code class="docutils literal notranslate"><span class="pre">[IMPORT]</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, voir le fichier d‚Äôexemple <code class="docutils literal notranslate"><span class="pre">default_config.toml.example</span></code>)</p></li>
</ul>
</li>
<li><p>Si vous souhaitez int√©grer les nouvelles mailles INPN, vous pouvez √©x√©cuter ces commandes :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_2</span><span class="nd">@head</span>  <span class="c1"># Insertion des mailles 2x2km m√©tropole, fournies par l‚ÄôINPN</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_20</span><span class="nd">@head</span>  <span class="c1"># Insertion des mailles 20x20km m√©tropole, fournies par l‚ÄôINPN</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_50</span><span class="nd">@head</span> <span class="c1"># Insertion des mailles 50x50km m√©tropole, fournies par l‚ÄôINPN</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;amandine-sahl, &#64;Pierre-Narcisi, &#64;jacquesfize, &#64;TheoLechemia, &#64;bouttier, &#64;andriacap, &#64;edelclaux, &#64;JulienCorny, &#64;VincentCauchois, &#64;CynthiaBorotPNV, &#64;JeromeMaruejouls, &#64;jbrieuclp, &#64;blaisegeo, &#64;lpofredc, &#64;amillemonchicourt, &#64;ch-cbna</p>
</section>
<section id="id5">
<h2>2.14.2 (2024-05-28)<a class="headerlink" href="#id5" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise √† jour de d√©pendances critiques (#3054)</p></li>
<li><p>Mise √† jour de NodeJS en version 20 (#2997)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôerreurs dans les fichiers de traductions du frontend (#3026)</p></li>
<li><p>Correction de la fermeture des sessions SQLAlchemy lanc√©es par Celery (#3050, #3062 )</p></li>
<li><p>[CAS-INPN] Fix du syst√®me d‚Äôauthentification au CAS de l‚ÄôINPN (#2866)</p></li>
<li><p>[Monitoring] Correction de la requ√™te SQLAlchemy de r√©cup√©ration des aires de sites (#2984)</p></li>
<li><p>[Occtax] Correction de la transformation de la valeur par d√©faut dans les champs additionnels d‚ÄôOcctax (#2978, #3011, #3017)</p></li>
<li><p>[RefGeo] Correction du filtre <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la route <code class="docutils literal notranslate"><span class="pre">/geo/areas</span></code> (#3057, PnX-SI/RefGeo#26)</p></li>
</ul>
</section>
<section id="id6">
<h2>2.14.1 (2024-04-29)<a class="headerlink" href="#id6" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Possibilit√© d‚Äôajouter des colonnes suppl√©mentaires √† la liste de r√©sultats via le param√®tre <code class="docutils literal notranslate"><span class="pre">ADDITIONAL_COLUMNS_FRONTEND</span></code>. Ces champs sont masqu√©s par d√©faut et controlables depuis l‚Äôinterface (#2946)</p></li>
<li><p>[Synth√®se] Possiblit√© d‚Äôajouter des exports personnalis√©s bas√©s sur des vues SQL via le param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVATIONS_CUSTOM_VIEWS</span></code> (#2955)</p></li>
<li><p>[DynamicForm] Possibilit√© de d√©finir une valeur par d√©faut sur le composant <code class="docutils literal notranslate"><span class="pre">bool_checkbox</span></code> (#2819)</p></li>
<li><p>[Documentation] Simplification, automatisation et documentation du changement de l‚ÄôURL de l‚ÄôAPI de GeoNature au niveau du frontend (#2936)</p></li>
<li><p>[Configuration] Enrichissement des URI autoris√©s de connexion √† la BDD PostgreSQL (#2947)</p></li>
<li><p>[TaxHub] Mise √† jour de TaxHub en version 1.14.0, incluant par d√©faut Taxref v17, BDC statuts v17 et r√©f√©rentiel de sensibilit√© v17</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Occtax] Correction de l‚Äôinversion des valeurs par d√©faut de 2 nomenclatures (#2822)</p></li>
<li><p>[Synth√®se] Correction du lien de renvoi vers le module de saisie d‚Äôune observation (#2907)</p></li>
<li><p>[Validation] Correction de l‚Äôenregistrement d‚Äôune validation quand l‚Äôutilisateur a des permissions avec une port√©e limit√©e (#2958)</p></li>
<li><p>[Occhab] Prise en compte des permissions utilisateurs dans l‚Äôaffichage des boutons d‚Äôactions (info, √©dition, suppression) dans la liste de stations du module Occhab (#2942)</p></li>
<li><p>[MTD] Am√©lioration des performances de la synchronisation avec le service MTD (#2922)</p></li>
<li><p>Correction du double chargement des fond de carte (#2902)</p></li>
<li><p>[Synth√®se] Am√©lioration des performances de la liste des zonages dans les filtres de la synth√®se (#2977 &amp; https://github.com/PnX-SI/RefGeo/pull/22)</p></li>
<li><p>Correction de la redirection du bouton ¬´¬†Accueil¬†¬ª quand GeoNature est d√©ploy√© sur une URL avec un suffixe (#2934)</p></li>
<li><p>Correction de la connexion avec le CAS de l‚ÄôINPN (#2866)</p></li>
<li><p>Correction d‚Äôune mauvaise synchronisation du cookie et du JWT via une MAJ de pypnusershub (PnX-SI/UsersHub-authentification-module#94)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Suppression de l‚Äôutilisation du composant <code class="docutils literal notranslate"><span class="pre">ngx-mat-select-search</span></code> (#2826 &amp; #2827)</p></li>
<li><p>[Occtax] Il n‚Äôest plus obligatoire de poster le champs <code class="docutils literal notranslate"><span class="pre">additionnal_fields</span></code> au niveau de l‚ÄôAPI des relev√©s, taxons et d√©nombrements (#2937)</p></li>
<li><p>Suppression des branches et ajout d‚Äôadresses relatives dans <code class="docutils literal notranslate"><span class="pre">.gitmodules</span></code> (#2959)</p></li>
<li><p>Lint et doc HTML/CSS (#2890 &amp; #2960)</p></li>
<li><p>Correction de l‚Äôh√©ritage des composants <code class="docutils literal notranslate"><span class="pre">GenericFormComponent</span></code> (#2961)</p></li>
<li><p>Utilisation de <code class="docutils literal notranslate"><span class="pre">pytest-benchmark</span></code> pour l‚Äô√©valuation automatique de performances des routes (#2896)</p></li>
<li><p>Utilisation de <code class="docutils literal notranslate"><span class="pre">marshmallow</span></code> pour la validation des donn√©es renvoy√©es par la route <code class="docutils literal notranslate"><span class="pre">get_observations_for_web</span></code> et ajout du contr√¥le de la pr√©sence des champs obligatoires (#2950)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Les param√®tres de la synth√®se permettant de sp√©cifier le nom de certaines colonnes de la vue d‚Äôexport sont d√©pr√©ci√©s (<code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_DIGITISER_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_GEOJSON_4326_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_GEOJSON_LOCAL_COL</span></code>).</p></li>
<li><p>Si vous aviez surcouch√© la vue par d√©faut <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>, il est recommand√© de ne plus le faire et de plut√¥t utiliser le nouveau param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVATIONS_CUSTOM_VIEWS</span></code> permettant de se cr√©er ses propres vues d‚Äôexport personnalis√©es. Voir ¬´¬†Export des observations¬†¬ª dans la documentation du module Synth√®se (https://docs.geonature.fr/admin-manual.html#module-synthese)</p></li>
<li><p>Vous pouvez mettre √† jour TaxHub en version 1.14.0 (ou plus si compatible) et mettre √† jour Taxref en version 17, ainsi que la BDC statuts et le r√©f√©rentiel de sensibilit√©</p></li>
<li><p>Vous pouvez mettre √† jour UsersHub en version 2.4.2 (ou plus si compatible)</p></li>
</ul>
</section>
<section id="talpa-europaea-2024-02-28">
<h2>2.14.0 - Talpa europaea üëì (2024-02-28)<a class="headerlink" href="#talpa-europaea-2024-02-28" title="Lien vers cette rubrique">¬∂</a></h2>
<p>Cette nouvelle version de GeoNature propose de nouvelles fonctionnalit√©s comme le floutage de donn√©es sensibles dans le module Synth√®se ainsi qu‚Äôun syst√®me de validation automatique des donn√©es bas√© sur les profils de taxons.<br />
Elle int√©gre aussi plusieurs mises √† jour des versions des librairies python utilis√©es comme Flask (3.0) et SQLAlchemy (1.4).</p>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Le support de Debian 10 a √©t√© arr√™t√©, votre serveur doit √™tre en Debian 11 ou 12</p></li>
<li><p>Mettre √† jour TaxHub en version 1.13.3 (ou plus) et optionnellement UsersHub (2.4.0 ou plus)</p></li>
<li><p>Si vous les utilisez, mettez √† jour les modules Import (version 2.3.0), Export (version 1.7.0), Monitoring (version 0.7.2) et Dashboard (version 1.5.0), avec la nouvelle proc√©dure consistant uniquement √† t√©l√©charger, d√©zipper et renommer les dossiers des modules</p></li>
<li><p>Si vous utilisez d‚Äôautres modules externes, v√©rifiez qu‚Äôils disposent d‚Äôune version compatible avec GeoNature 2.14 (SQLAlchemy 1.4, Python 3.9 minimum, supression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code>)</p></li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez les fonds IGN, mettez √† jour les URL des flux dans votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> (#2789)</p></li>
</ul>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Floutage des donn√©es sensibles (#2558)</p>
<ul>
<li><p>Il est d√©sormais possible de d√©finir un filtre ¬´¬†Flouter les donn√©es sensibles¬†¬ª sur les actions <em>Lire</em> et <em>Exporter</em> du module Synth√®se</p></li>
<li><p>Pour les utilisateurs qui ont ce filtre de permission appliqu√©, les donn√©es sensibles seront flout√©es lors de leur affichage ou de leur export dans le module Synth√®se, en fonction des mailles ou zonages d√©finis dans les r√®gles de sensibilit√© du SINP</p></li>
<li><p>En mode Mailles, les donn√©es sensibles dont la g√©om√©trie flout√©e est plus grande que la maille affich√©e sont exclues</p></li>
<li><p>Dans l‚Äôonglet ¬´¬†Zonage¬†¬ª des fiches des observations de la Synth√®se, on affiche uniquement les zonages plus grands que la g√©om√©trie flout√©e des donn√©es sensibles</p></li>
<li><p>Si un utilisateur dispose de permissions filtr√©es sur les donn√©es sensibles, alors les filtres par zonage s‚Äôappuie sur une intersection spatiale avec les g√©om√©tries flout√©es pour ne pas renvoyer d‚Äôinformations plus pr√©cises sur les donn√©es flout√©es</p></li>
<li><p>La documentation sur le sensibilit√© des donn√©es a √©t√© compl√©t√©e : https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite)</p></li>
<li><p>Le param√®tre <code class="docutils literal notranslate"><span class="pre">BLUR_SENSITIVE_OBSERVATIONS</span></code> permet de basculer sur l‚Äôexclusion des donn√©es sensibles plut√¥t que leur floutage, comme impl√©ment√© dans la version 2.13</p></li>
</ul>
</li>
<li><p>[Validation] Fonction de validation automatique bas√©e sur les profils de taxons (non activ√©e par d√©faut et surcouchable avec une fonction sp√©cifique) (#2600)</p></li>
<li><p>[Synth√®se] Ajout des groupes 3 INPN dans les filtres et les exports de la Synth√®se (#2621, #2637)</p></li>
<li><p>[Occtax] Ajout de la possibilit√© d‚Äôassocier des nomenclatures √† des groupes 3 INPN (#2684)</p></li>
<li><p>[Authentification] Possibilit√© d‚Äôajouter des liens externes (#2917)</p></li>
<li><p>[Carte] Mise √† jour des exemples d‚ÄôURL de fonds de carte IGN (#2789)</p></li>
<li><p>[RefGeo] R√©percussion du remplacement du champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> par <code class="docutils literal notranslate"><span class="pre">geom_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#2809)</p></li>
<li><p>[Documentation] Ajout de diagrammes d‚Äôarchitecture dans la documentation (#2760)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôaffichage du nom du module quand on revient √† la page d‚Äôaccueil (#2795)</p></li>
<li><p>[Synth√®se] Correction de l‚Äôaffichage du nom du taxon observ√© quand les profils de taxons sont d√©sactiv√©s (#2820)</p></li>
<li><p>[Carte] Conservation de la g√©om√©trie existante lorsqu‚Äôon annule la modification d‚Äôune g√©om√©trie (#2778)</p></li>
<li><p>[M√©tadonn√©es] Correction de l‚Äôaffichage du type de financement sur les fiches d√©tail des CA et JDD (#2840)</p></li>
<li><p>[Occhab] Correction des permissions avec port√©e limit√©e (#2909)</p></li>
<li><p>[Occtax] Correction de la suppression d‚Äôun champ additionnel (#2923)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Mise √† jour vers SQLAlchemy 1.4 (#1812)</p></li>
<li><p>Mise √† jour vers Flask 3 (#2751)</p></li>
<li><p>Mise √† jour de Black en version 24 (#2879)</p></li>
<li><p>Suppression des modules d√©pr√©ci√©s : <code class="docutils literal notranslate"><span class="pre">utilsgeometry.py</span></code>, <code class="docutils literal notranslate"><span class="pre">utilssqlalchemy.py</span></code>, <code class="docutils literal notranslate"><span class="pre">config_manager.py</span></code> (#2751)</p></li>
<li><p>Int√©gration de la documentation automatique des composants Frontend (avec <code class="docutils literal notranslate"><span class="pre">compodoc</span></code>) et des fonctions et classes du backend (avec <code class="docutils literal notranslate"><span class="pre">sphinx-autoapi</span></code>) (#2765)</p></li>
<li><p>Abandon du syst√®me d‚Äôauthentification par cookie, sauf pour le module Admin. Le token d‚Äôauthentification (JWT) est maintenant pass√© dans chaque appel √† l‚ÄôAPI dans le header HTTP ¬´¬†Authorization Bearer¬†¬ª. Il est aussi fourni par la route de login du sous-module d‚Äôauthentification et stock√© dans le localStorage (#2586, #2161, #490, #2574)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code> (#2747)</p></li>
<li><p>Passage du param√®tre <code class="docutils literal notranslate"><span class="pre">--line-length</span></code> de Black de 99 √† 100 caract√®res (#2847)</p></li>
<li><p>Modification de <code class="docutils literal notranslate"><span class="pre">TModules</span></code> pour √©viter de lever l‚Äôerreur de polymorphisme de SQLAlchemy (#2792)</p></li>
<li><p>Fin du support de Debian 10 et de Python 3.7 (#1787)</p></li>
<li><p>Changement de l‚Äôensemble des requ√™tes SQLAlchemy au style 2.0 (#2751)</p></li>
<li><p>Augmentation du nombre de tests unitaires dans : <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">occtax</span></code>, <code class="docutils literal notranslate"><span class="pre">occhab</span></code>, <code class="docutils literal notranslate"><span class="pre">synthese</span></code> (#2751)</p></li>
<li><p>Modification des <code class="docutils literal notranslate"><span class="pre">fixtures</span></code> : <code class="docutils literal notranslate"><span class="pre">datasets</span></code>, <code class="docutils literal notranslate"><span class="pre">stations</span></code> + <code class="docutils literal notranslate"><span class="pre">user</span></code>(#2751). Possibilit√© de cr√©er des utilisateurs de tests avec des permissions plus fines (#2915)</p></li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;amandine-sahl, &#64;Pierre-Narcisi, &#64;jacquesfize, &#64;TheoLechemia, &#64;bouttier, &#64;mvergez, &#64;andriacap, &#64;edelclaux, &#64;VincentCauchois, &#64;MoulinZ, &#64;pierre56, &#64;camillemonchicourt</p>
</section>
<section id="id7">
<h2>2.13.4 (2023-12-15)<a class="headerlink" href="#id7" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Ajout des colonnes <code class="docutils literal notranslate"><span class="pre">group[1,2,3]_inpn</span></code> √† la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_web_app</span></code> (#2798, par &#64;andriacap)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[M√©tadonn√©es] Masquage des r√©f√©rences bibliograhpiques dans le formulaire des cadres d‚Äôacquisition en attendant la finalisation du d√©veloppement du backend (#2562, par &#64;DonovanMaillard)</p></li>
<li><p>[Occtax] Correction du probl√®me de chargement de la liste de JDD lors de la cr√©ation d‚Äôun relev√© (#2815, par &#64;andriacap)</p></li>
<li><p>[Synth√®se et validation] Ajout de la m√©thode de d√©termination dans la fiche d√©tail d‚Äôune observation (#2785, par &#64;DonovanMaillard)</p></li>
<li><p>[Frontend] Correction de la prise en compte des filtres dans le composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2777, par &#64;joelclems)</p></li>
<li><p>[Synth√®se] Optimisation du chargement de l‚Äôaffichage des observations group√©es par maille (#2766, par &#64;mvergez)</p></li>
<li><p>[Accueil] Optimisation du chargement des statistiques g√©n√©rales (#2771, par &#64;mvergez)</p></li>
<li><p>[Synth√®se] Correction et enrichissement de la configuration des colonnes affich√©es dans la liste des observations (#2749, par &#64;mvergez)</p></li>
<li><p>[Synth√®se] Correction de la recherche par attribut TaxHub de type ¬´¬†multiselect¬†¬ª (#2767, par &#64;mvergez)</p></li>
<li><p>[Occtax] Tri alphab√©tique de la liste des ¬´¬†Mes lieux¬†¬ª (#2805, par &#64;DonovanMaillard)</p></li>
<li><p>[Documentation] Corrections et compl√©ments de la documentation d‚Äôadministrateur (#2812, par &#64;marie-laure-cen)</p></li>
</ul>
</section>
<section id="id8">
<h2>2.13.3 (2023-10-17)<a class="headerlink" href="#id8" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[M√©tadonn√©es] Correction de l‚Äôaffichage des descriptions dans les fiches des cadres d‚Äôacquisition (#2716, par &#64;mvergez)</p></li>
<li><p>[Admin] Correction de la modification des permissions sensibles (#2697, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synth√®se] Correction de la documentation du param√®tre <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code> (#1892, par &#64;camillemonchicourt)</p></li>
<li><p>[M√©dias] Conservation de la rotation des images des vignettes (#2742, par &#64;MathRdt)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Utilisation du fichier <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> pour les tests automatiques des contributions dans la branche <code class="docutils literal notranslate"><span class="pre">master</span></code> (#2739, par &#64;Pierre-Narcisi)</p></li>
<li><p>D√©placement des d√©pendances de d√©veloppement des types Leaflet vers les d√©pendances de production (#2744, par &#64;TheoLechemia)</p></li>
<li><p>Prise en compte du param√®tre <code class="docutils literal notranslate"><span class="pre">creatableInModule</span></code> du composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> dans les dynamic forms (#2736, par &#64;amandine-sahl)</p></li>
</ul>
</section>
<section id="id9">
<h2>2.13.2 (2023-09-28)<a class="headerlink" href="#id9" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Ajout d‚Äôun filtre par module de provenance (#2670, par &#64;andriacap)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction des d√©connexions non effectives dans les versions 2.13.0 et 2.13.1 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction des permissions v√©rifi√©es pour pouvoir supprimer un signalement en prenant en compte le C du module Validation, et non pas le R qui n‚Äôexiste pas sur ce module (#2710, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de l‚ÄôAPI des applications mobiles quand le chemin de l‚ÄôAPK est absolu (#2708, par &#64;joelclems)</p></li>
<li><p>Correction des permissions des listes de JDD dans les modules de saisie (Occtax, Occhab, Import) en prenant en compte la port√©e du C du module, et pas seulement du R du module M√©tadonn√©es (#2712, par &#64;Pierre-Narcisi)</p></li>
<li><p>Utilisation de l‚Äôheure locale du serveur pour lancer les taches Celery (#2725, par &#64;bouttier)</p></li>
<li><p>Fermeture des connexions √† la BDD √† la fin des taches Celery (#2724, par &#64;bouttier)</p></li>
<li><p>Correction de l‚Äôaffichage du bouton permettant d‚Äôimporter directement depuis la fiche d‚Äôun JDD, n√©cessitant la version 2.2.3 du module Import (#2713, par &#64;bouttier)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Ajout du th√®me Bootstrap au composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2727, par &#64;TheoLechemia)</p></li>
<li><p>Docker : utilisation de python 3.11 (#2728, par &#64;bouttier)</p></li>
<li><p>D√©placement du <code class="docutils literal notranslate"><span class="pre">DispatcherMiddleware</span></code> apr√®s les fichiers statiques customis√©s (#2720, par &#64;bouttier)</p></li>
<li><p>Suppression du script <code class="docutils literal notranslate"><span class="pre">03b_populate_db_for_test.sh</span></code> (#2726, par &#64;bouttier)</p></li>
</ul>
<p><strong>üìù Documentation</strong></p>
<ul class="simple">
<li><p>Mise √† jour de la documentation suite aux √©volutions des permissions dans la 2.13.0 (par &#64;camillemonchicourt)</p></li>
</ul>
</section>
<section id="id10">
<h2>2.13.1 (2023-09-15)<a class="headerlink" href="#id10" title="Lien vers cette rubrique">¬∂</a></h2>
<p>L‚Äôinstallation de GeoNature (ainsi que ses 4 modules externes principaux, TaxHub et UsersHub) avec Docker est d√©sormais complet et fonctionnel. Voir la documentation sur https://docs.geonature.fr/installation.html#docker.<br />
C‚Äôest la mani√®re la plus simple de d√©ployer GeoNature avec ses 4 modules externes principaux (Import, Export, Dashboard, Monitoring) mais aussi de les mettre √† jour, avec seulement quelques lignes de commandes, √† partir des images construites automatiquement et du fichier <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> global, fourni dans le d√©p√¥t <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services">GeoNature-Docker-services</a>.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Am√©lioration de l‚Äôaffichage des taxons en passant √† la ligne quand ils sont trop longs (#2690, par &#64;JulienCorny)</p></li>
<li><p>Am√©lioration du <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> de GeoNature (#2623, par &#64;joelclems et &#64;bouttier)</p></li>
<li><p>Ne pas renvoyer les modules d√©sactiv√©s dans la route <code class="docutils literal notranslate"><span class="pre">/modules</span></code> (#2693, par &#64;bouttier)</p></li>
<li><p>Mise √† jour de TaxHub en version 1.12.1 (#2623, par &#64;joelclems)</p></li>
<li><p>Mise √† jour de Utils-Flask-SQLAlchemy en version 0.3.6 et UsersHub-authentification-module en version 1.6.10 (#2704, par &#64;TheoLechemia)</p></li>
<li><p>Mise √† jour de diff√©rentes d√©pendances Python (#2704, par &#64;TheoLechemia)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction des d√©connexions non effectives sur la 2.13.0 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction de la configuration NGINX des pr√©fixes quand GeoNature est d√©ploy√© avec Docker (#2698, par &#64;bouttier)</p></li>
<li><p>Correction des permissions v√©rifi√©es pour pouvoir supprimer un signalement en prenant en compte le R du module Validation, et non pas le V du module Synth√®se (#2705, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de l‚Äô√©pinglage des observations qui √©tait encore partag√© entre utilisateurs, et non pas individuels (#2702, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synth√®se] Correction de la recherche de taxons avec des accents (#2676, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synth√®se] Correction des couleurs des mailles quand on clique sur diff√©rentes mailles successivement en mode maille (#2677, par &#64;Pierre-Narcisi)</p></li>
</ul>
<p><strong>üìù Documentation</strong></p>
<ul class="simple">
<li><p>Documentation de la nouvelle interface d‚Äôadministration des permissions (#2605, par &#64;camillemonchicourt), disponible sur https://docs.geonature.fr/user-manual.html#admin</p></li>
<li><p>Mise √† jour de la documentation d‚Äôinstallation Docker suite √† la sortie d‚Äôun Docker Compose complet et fonctionnel sur <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services/">GeoNature-Docker-services</a> (#2703)</p></li>
<li><p>Correction de petites fautes d‚Äôorthographe (#2674, par &#64;omahs)</p></li>
<li><p>Correction du template d‚Äôissue (#2700, par &#64;mvergez)</p></li>
</ul>
</section>
<section id="carpodacus-erythrinus-2023-08-23">
<h2>2.13.0 - <a class="reference external" href="https://www.ecrins-parcnational.fr/breve/roselin-gondouins">Carpodacus erythrinus</a> üê§ (2023-08-23)<a class="headerlink" href="#carpodacus-erythrinus-2023-08-23" title="Lien vers cette rubrique">¬∂</a></h2>
<ul class="simple">
<li><p>R√©vision globale des permissions pour pouvoir leur associer d‚Äôautres types de filtres (sensibilit√© notamment), les simplifier et clarifier en supprimant l‚Äôh√©ritage et en d√©finissant les permissions disponibles pour chaque module.</p></li>
<li><p>Possibilit√© de filtrer les donn√©es dans la Synth√®se selon leur sensibilit√©, mais sans floutage pour le moment (√† venir), en affichant ou non les donn√©es sensibles selon les permissions de l‚Äôutilisateur.</p></li>
<li><p>V√©rifiez que vos modules soient compatibles avec le nouveau m√©canisme de d√©claration des permissions disponibles. C‚Äôest le cas pour les modules Import, Export, Dashboard, Monitorings et Zones humides.</p></li>
<li><p>Cette nouvelle version est compatible avec Debian 12. Le support de Debian 10 sera arr√™t√© prochainement.</p></li>
</ul>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Refonte compl√®te des permissions (#2487)</p>
<ul>
<li><p>Suppression de l‚Äôh√©ritage des permissions du module ¬´¬†GeoNature¬†¬ª vers les autres modules, et de l‚Äôobjet ¬´¬†All¬†¬ª vers les √©ventuels autres objets des modules. Chaque permission dans un module doit d√©sormais √™tre d√©finie explicitement. Cela entraine de devoir d√©finir plus de permissions (√† l‚Äôinstallation d‚Äôun nouveau module notamment) mais aussi de les rendre plus lisibles, additives et explicites (#2474)</p></li>
<li><p>Evolution du mod√®le de donn√©es des permissions pour √©largir les possibilit√©s de filtrage des permissions au-del√† de l‚Äôappartenance (anciennement nomm√©e port√©e ou scope) (#2472)</p></li>
<li><p>Suppression des permissions ayant une appartenance de niveau 0 (Aucune donn√©e). En effet, en supprimant l‚Äôh√©ritage des permissions et en les d√©finissant par module de mani√®re explicite, si un groupe ou utilisateur n‚Äôa aucune permission sur un module, alors il n‚Äôy acc√®de pas et ne le voit pas dans le menu lat√©ral. Si il a n‚Äôimporte quelle permission sur un module, alors il y acc√®de.</p></li>
<li><p>Suppression du filtre d‚Äôappartenance de niveau 3 (Toutes les donn√©es). En effet, celui-ci est d√©sormais redondant avec l‚Äôajout d‚Äôune permission sans filtre.</p></li>
<li><p>D√©finition des permissions disponibles dans chaque module dans la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_permissions.t_permissions_available</span></code>, pour ne proposer que des permissions qui ont un usage quand on ajoute ou modifie les permissions d‚Äôun utilisateur (#2489)</p></li>
<li><p>Refonte de l‚Äôinterface d‚Äôadministration des permissions (Flask-admin) ne proposant que les permissions disponibles, affichant les permissions explicites d‚Äôun utilisateur et calculant celles effectives provenant d‚Äôun groupe auquel il appartient (#2605)</p></li>
<li><p>Optimisation et agr√©gation des permissions</p></li>
<li><p>[Synth√®se] Ajout d‚Äôun filtre sur la sensibilit√© des donn√©es, permettant de les afficher et de les exporter ou non √† un groupe ou utilisateurs (pas de floutage pour le moment) (#2504 / #2584)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">permissions</span> <span class="pre">supergrant</span></code> permettant d‚Äôajouter toutes les permissions disponibles √† un utilisateur ou groupe super-administrateur (#2557)</p></li>
<li><p>Ajout de la v√©rification des permissions manquantes sur diff√©rentes routes (#2542 / #1863)</p></li>
</ul>
</li>
<li><p>Ajout de notifications quand un commentaire est ajout√© sur une observation (#2460)</p></li>
<li><p>Am√©lioration des performances de la recherche de taxons dans Occtax et dans la Synth√®se (#2592 / https://github.com/PnX-SI/TaxHub/issues/384)</p></li>
<li><p>Support de Debian 12 (avec Python 3.11, PostgreSQL 15 et PostGIS 3.3) (#1787)</p></li>
<li><p>[Admin] Fixer la barre de navigation du menu lat√©ral et possibilit√© de la rabbatre (#2556)</p></li>
<li><p>[Synth√®se] Ajout d‚Äôun filtre par source (#2513)</p></li>
<li><p>[Synth√®se] Ajout d‚Äôun filtre par <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> (#2516)</p></li>
<li><p>[Synth√®se] Recherche des observateurs multiples et insensible aux accents (#2568)</p></li>
<li><p>[Occtax] Ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">EXPANDED_TAXON_ADVANCED_DETAILS</span></code> permettant d‚Äôouvrir par d√©faut les champs avanc√©s du formulaire de renseignement du taxon (#2446)</p></li>
<li><p>Conservation du fond de carte utilis√© quand on navigue dans les modules (#2619)</p></li>
<li><p>Suppression des m√©dias orphelins bascul√©e dans une tache Celery Beat lanc√©e automatiquement toutes les nuits (<code class="docutils literal notranslate"><span class="pre">clean_attachments</span></code>), et non plus √† l‚Äôajout ou suppression d‚Äôun autre m√©dia (#2436)</p></li>
<li><p>Ajout d‚Äôune documentation utilisateur sur le module M√©tadonn√©es - https://docs.geonature.fr/user-manual.html#metadonnees (#2662)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Occtax] Correction du d√©placement du marqueur de localisation poncutelle d‚Äôun relev√© (#2554 et #2552)</p></li>
<li><p>[Occtax] Correction du centrage sur la carte quand on modifie un relev√©</p></li>
<li><p>[Occtax] Correction de l‚Äôaffichage de la g√©om√©trie du pr√©c√©dent relev√© quand on enchaine des relev√©s de type polygone puis point (#2657)</p></li>
<li><p>Correction de la s√©lection automatique des valeurs par d√©faut num√©riques dans les champs de type ¬´¬†Liste d√©roulante (Select)¬†¬ª des formulaires dynamiques (#2540)</p></li>
<li><p>Correction de la gestion des entiers pour les champs additionnels de type ¬´¬†checkbox¬†¬ª (#2518)</p></li>
<li><p>Correction de l‚Äôenvoi √† plusieurs destinataires des emails de demande de cr√©ation de compte (#2389)</p></li>
<li><p>R√©cup√©ration du contenu du champs ¬´¬†Organisme¬†¬ª dans le formulaire de demande de cr√©ation de compte (#1760)</p></li>
<li><p>Am√©lioration des messages lors de la demande de cr√©ation de compte (#2575)</p></li>
<li><p>Correction du graphique dans l‚Äôexport PDF des cadres d‚Äôacquisition (#2618)</p></li>
<li><p>[Synth√®se] Correction de l‚Äôaffichage des g√©om√©tries de type multipoint (#2536)</p></li>
<li><p>[Synth√®se] Correction des filtres par d√©faut (#2634)</p></li>
<li><p>[Synth√®se] Correction des filtres g√©ographiques multiples (#2639)</p></li>
<li><p>[M√©tadonn√©es] Correction de l‚Äôaffichage du formulaire de filtres avanc√©s (#2649)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>D√©coupage du script <code class="docutils literal notranslate"><span class="pre">install/03_create_db.sh</span></code> en 2 (avec la cr√©ation du fichier <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db.sh</span></code>) notamment pour am√©liorer la dockerisation de GeoNature (#2544)</p></li>
<li><p>Ajout d‚Äôun script <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db_for_test.sh</span></code> pouvant √™tre utilis√© par la CI de test des modules GeoNature (#2544)</p></li>
<li><p>Ajout d‚Äôun script <code class="docutils literal notranslate"><span class="pre">install/assets/docker_startup.sh</span></code> pour lancer les migrations Alembic depuis le docker de GeoNature (#2544)</p></li>
<li><p>Cr√©ation d‚Äôun fichier <code class="docutils literal notranslate"><span class="pre">install/assets/db/add_pg_extensions.sql</span></code> regroupant la cr√©ation des extensions PostgreSQL (#2544)</p></li>
<li><p>Am√©lioration de <code class="docutils literal notranslate"><span class="pre">APPLICATION_ROOT</span></code> pour qu‚Äôil fonctionne en mode d√©veloppement (#2546)</p></li>
<li><p>Am√©lioration des mod√®les de la Synth√®se pour prendre en compte les valeurs par d√©faut des nomenclatures (#2524)</p></li>
<li><p>Meilleure portabilit√© des scripts dans les diff√©rents syst√®mes Unix (#2435)</p></li>
<li><p>Mise √† jour des d√©pendances Python (#2596)</p></li>
<li><p>Documentation de d√©veloppement des permissions (#2585)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Mettre √† jour TaxHub en version 1.12.0 (ou plus) et optionnellement UsersHub</p></li>
<li><p>Si vous les utilisez, mettez √† jour les modules Import, Export, Monitoring et Dashboard dans leurs versions compatibles avec GeoNature 2.13, avec la nouvelle proc√©dure consistant uniquement √† t√©l√©charger, d√©zipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Si vous utilisez d‚Äôautres modules externes, v√©rifiez qu‚Äôils disposent d‚Äôune version compatible avec GeoNature 2.13, ou faites-les √©voluer pour qu‚Äôils d√©clarent leurs permissions disponibles (exemple : #2543)</p></li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Les permissions existantes sur vos diff√©rents groupes et utilisateurs sont r√©cup√©r√©es et remises √† plat automatiquement sans syst√®me d‚Äôh√©ritage. V√©rifiez cependant les permissions apr√®s la mise √† jour de vos groupes et utilisateurs.</p></li>
<li><p>D√©sormais, quand vous installerez un nouveau module (ou sous-module), pour le voir affich√© dans le menu et y avoir acc√®s, il faudra lui appliquer des permissions aux groupes ou utilisateurs qui doivent y acc√©der.</p></li>
</ul>
<p>‚úÖ Exemple de proc√©dure de mise √† jour depuis une version 2.12 : https://geonature.fr/documents/procedures/2023-10-GN-212to213.txt</p>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;TheoLechemia / &#64;VincentCauchois / &#64;Pierre-Narcisi / &#64;joelclems / &#64;andriacap / &#64;mvergez / &#64;JulienCorny / &#64;MathRdt / &#64;DonovanMaillard / &#64;camillemonchicourt</p>
</section>
<section id="id11">
<h2>2.12.3 (2023-05-09)<a class="headerlink" href="#id11" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Correction du filtre des observations √©pingl√©es pour ne remonter que celles de l‚Äôutilisateur connect√© (#2507 par &#64;mvergez)</p></li>
<li><p>[Synth√®se] Correction de la recherche g√©ographique avec chargement d‚Äôun fichier local (#2522 par &#64;bouttier et &#64;mvergez)</p></li>
<li><p>[Admin] Correction d‚Äôune r√©gression des performances d‚Äô√©dition des permissions (#2523 par &#64;bouttier)</p></li>
<li><p>Compl√©ments de la documentation (page maintenance, migration avec git, configuratrion dynamique, #2526, #2501, #2503 par &#64;camillemonchicourt)</p></li>
<li><p>[M√©tadonn√©es] Correction des droits de modification des cadres d‚Äôacquisition</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> (#2525 par &#64;bouttier)</p></li>
<li><p>Correction du downgrade d‚Äôune migration Alembic d‚ÄôOcctax (#2500 par &#64;JulienCorny)</p></li>
<li><p>Correction et ation de la page de maintenance (#2535)</p></li>
<li><p>Correction de la synchronisation des JDD et de l‚Äôassociation aux modules (#2532 par &#64;VincentCauchois)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.cruved_scope_for_user_in_module</span></code> est remplac√©e par <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.get_scopes_by_action</span></code></p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous utilisez la page de maintenance, celle-ci a √©t√© revue, <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">r√©f√©rez vous √† la documentation</a> afin de la mettre √† jour.</p>
<p>Si vous utilisiez des champs additionnels avec des checkbox, lors de leur changement de type (recommand√© dans les notes de version de la 2.12.0) il est important que les valeurs du champ <code class="docutils literal notranslate"><span class="pre">field_values</span></code> continue √† avoir des ¬´¬†string¬†¬ª dans la cl√© values : [{¬´¬†label¬†¬ª: ¬´¬†Un¬†¬ª, ¬´¬†value¬†¬ª: ¬´¬†1¬†¬ª}] sans quoi il y aura des probl√®me √† l‚Äô√©dition. Pour les nouveaux champs additionnels, il est cependant bien possible de mettre des entiers dans la cl√© <code class="docutils literal notranslate"><span class="pre">value</span></code> [{¬´¬†label¬†¬ª: ¬´¬†Un¬†¬ª, ¬´¬†value¬†¬ª: 1}]</p>
</section>
<section id="id12">
<h2>2.12.2 (2023-04-18)<a class="headerlink" href="#id12" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Synth√®se : ajout d‚Äôun filtre sur les observations avec ou sans commentaire (#2469, par &#64;mvergez)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Synth√®se - mode maille : r√©cup√©ration des observations hors r√©f√©rentiel de mailles pour affichage dans la liste, garantissant ainsi un nombre d‚Äôobservations indentique entre le mode point et le mode maille (#2495, par &#64;TheoLechemia)</p></li>
<li><p>Synth√®se : correction des filtres m√©dias / √©pinglage / signalement / commentaires pour fonctionner √©galement de mani√®re n√©gative (#2469)</p></li>
<li><p>Backoffice des permissions :</p>
<ul>
<li><p>Correction du module lors du contr√¥le d‚Äôacc√®s (#2483, par &#64;VincentCauchois)</p></li>
<li><p>Correction de la gestion du CRUVED des r√¥les sans permissions (#2496)</p></li>
</ul>
</li>
<li><p>Commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> :</p>
<ul>
<li><p>Correction de la d√©tection du module_code (#2482)</p></li>
<li><p>Reload de la config apr√®s l‚Äôex√©cution de <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> (#2493)</p></li>
</ul>
</li>
<li><p>Occhab : tri des stations par date (#2477)</p></li>
<li><p>Validation : correction des filtres avanc√©s (#2470, par &#64;joelclems)</p></li>
<li><p>Admin : contr√¥le du R pour l‚Äôacc√®s en lecture (#2491)</p></li>
<li><p>Admin : rajout de l‚Äôobjet NOTIFICATIONS afin de pouvoir en d√©finir ses permissions (#2490)</p></li>
<li><p>Login : d√©sactivation du spinner apr√®s une tentative de login √©chou√©e</p></li>
</ul>
</section>
<section id="id13">
<h2>2.12.1 (2023-04-11)<a class="headerlink" href="#id13" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise √† jour de quelques d√©pendances python (#2438, par &#64;MathRdt)</p></li>
<li><p>Mise √† jour de Utils-Flask-SQLAlchemy en version 0.3.3</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction et ations des performances des recherches par statut de protection, notamment quand elles sont associ√©es √† une recherche g√©ographique (#2450, par &#64;amandine-sahl)</p></li>
<li><p>Correction d‚Äôune r√©gression des performances lors de la r√©cup√©ration des JDD (#2462, par &#64;mvergez)</p></li>
<li><p>Correction de jointures manquantes pour le calcul des permissions lors de la r√©cup√©ration des JDD (#2463, par &#64;mvergez)</p></li>
<li><p>Correction des champs additionnels de type liste (#2447, par &#64;TheoLechemia)</p></li>
<li><p>Correction d‚Äôune incompatibilit√© Python 3.7 (#2464, par &#64;TheoLechemia)</p></li>
<li><p>Suppression en cascade des permissions et associations aux sites lors de la suppresion d‚Äôun module (#2466, par &#64;jbrieuclp &amp; &#64;VincentCauchois)</p></li>
<li><p>Mise √† jour des habitats dans la Synth√®se quand ils sont modifi√©s dans un relev√© Occtax (#2468, par &#64;JulienCorny)</p></li>
</ul>
</section>
<section id="cyathea-borbonica-2023-03-27">
<h2>2.12.0 - Cyathea borbonica üå¥ (2023-03-27)<a class="headerlink" href="#cyathea-borbonica-2023-03-27" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>‚è© En bref</strong></p>
<ul class="simple">
<li><p>Affichage agr√©g√© des observations dans la Synth√®se (performances et lisibilit√©) (#1847 et #1878)</p></li>
<li><p>Filtres par d√©faut dans la Synth√®se (#2261)</p></li>
<li><p>Optimisation des performances des exports de la Synth√®se (#1434)</p></li>
<li><p>Optimisation du chargement des jeux de donn√©es dans le module M√©tadonn√©es pour en er les performances (#2004)</p></li>
<li><p>Int√©gration par d√©faut de Taxref v16, BDC statuts v16 et r√©f√©rentiel de sensibilit√© v16</p></li>
<li><p>Possibilit√© de g√©rer les tables des applications mobiles et des modules depuis le module ¬´¬†Admin¬†¬ª</p></li>
<li><p>Configuration dynamique sans rebuild (#2205)</p></li>
<li><p>Centralisation de la configuration des modules dans GeoNature (#2423)</p></li>
<li><p>Historisation des suppressions dans la Synth√®se, n√©cessaire pour GN2PG notamment (#789)</p></li>
<li><p>R√©organisation des dossiers pour simplifier la customisation et les mises √† jour (#2306)</p></li>
<li><p>Stabilisation de la dockerisation (#2206)</p></li>
<li><p>Refactorisation d‚ÄôOcchab, module de r√©f√©rence et documentation d√©veloppeurs associ√©e</p></li>
<li><p>Refactorisation des permissions (simplification, optimisation, centralisation, performances, tests)</p></li>
<li><p>Mise √† jour d‚ÄôAngular en version 15 (#2154)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Si vous utilisez des modules sp√©cifiques (hors Import, Export, Dashboard, Monitoring), v√©rifiez qu‚Äôils disposent d‚Äôune version compatible avec GeoNature 2.12 (compatibilit√© Angular 15, r√©vision des permissions, configuration dynamique)</p></li>
<li><p>Si vous les utilisez, mettre √† jour les modules Import en version 2.1.0 (ou plus), Export en version 1.4.0, Dashboard en version 1.3.0 (ou plus) et Monitoring en version 0.5.0 (ou plus) avec la nouvelle proc√©dure consistant uniquement √† t√©l√©charger, d√©zipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Mettez √† jour TaxHub en version 1.11 (ou plus)</p></li>
<li><p>La vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code> d√©finissant la structure et le contenu des exports de la Synth√®se a √©t√© modifi√©e pour √™tre optimis√©e. Si vous l‚Äôaviez customis√©e, report√©e vos modifications manuellement apr√®s la mise √† jour de GeoNature</p></li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> se charge de d√©placer automatiquement les diff√©rents fichiers suite √† la r√©organisation des dossiers (customisation, m√©dias, mobile, configuration centralis√©e des modules)</p></li>
<li><p>Les m√©dias (incluant les fichiers d‚ÄôOcctax-mobile) sont d√©plac√©s dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/media/</span></code></p></li>
<li><p>Il n‚Äôest plus n√©cessaire de rebuilder le frontend ni de recharger GeoNature manuellement √† chaque modification de la configuration de GeoNature ou de ses modules</p></li>
<li><p>Les taches automatis√©es sont d√©sormais g√©r√©es par Celery Beat et install√©es avec GeoNature. Si vous aviez mis en place des crons pour mettre √† jour les profils de taxons (ou les donn√©es du module Dashboard, ou les exports planifi√©s du module Export), supprimez les (dans <code class="docutils literal notranslate"><span class="pre">/etc/cron.d/geonature</span></code> ou <code class="docutils literal notranslate"><span class="pre">crontab</span> <span class="pre">-e</span></code>) car ils ne sont plus utiles</p></li>
<li><p>Il est fortement conseill√© d‚Äôutiliser la configuration Apache g√©n√©r√©e par d√©faut dans <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> et de l‚Äôinclure dans votre vhost (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature.conf</span></code> et/ou <code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature-le-ssl.conf</span></code>), en suivant la <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">documentation d√©di√©e</a></p></li>
<li><p>Si vous aviez customis√© la page d‚Äôaccueil de GeoNature en modifiant les composants <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/footer/footer.component.html</span></code> ceux-ci ont √©t√© supprim√©s au profit de param√®tres de configuration. Il vous faut donc d√©placer votre customisation dans les param√®tres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code> de la nouvelle section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> de la configuration de GeoNature.
Vous pouvez renseigner du code HTML sur plusieurs lignes en le pla√ßant entre triple quote (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;&quot;&quot;</span></code>).</p></li>
<li><p>Les param√®tres de configuration suivants ont √©t√© supprim√©s et doivent √™tre retir√©s de votre fichier de configuration (<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>) s‚Äôils sont pr√©sents :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> (si vous aviez renomm√© votre logo, d√©placez le dans <code class="docutils literal notranslate"><span class="pre">geonature/custom/images/logo_structure.png</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPLOAD_FOLDER</span></code> (si vous l‚Äôaviez d√©plac√©, renommez votre dossier d‚Äôupload en <code class="docutils literal notranslate"><span class="pre">attachments</span></code> et placez-le dans le dossier des m√©dias (<code class="docutils literal notranslate"><span class="pre">geonature/backend/media/</span></code> par d√©faut, param√©trable via <code class="docutils literal notranslate"><span class="pre">MEDIA_FOLDER</span></code>))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BASE_DIR</span></code></p></li>
</ul>
</li>
<li><p>Occtax et champs additionnels :</p>
<ul>
<li><p>Les champs additionnels de type <code class="docutils literal notranslate"><span class="pre">bool_radio</span></code> ne sont plus support√©s.
Si vous utilisiez ce type de widget dans vos champs additionnels d‚ÄôOcctax, ils seront automatiquement remplac√©s par un widget de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>.
Vous devez changer le champs <code class="docutils literal notranslate"><span class="pre">field_values</span></code> sur le mod√®le suivant : <code class="docutils literal notranslate"><span class="pre">[{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">vrai&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">true</span> <span class="pre">},</span> <span class="pre">{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">faux&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">false</span> <span class="pre">}]</span></code>.</p></li>
<li><p>Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent d√©sormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)<br />
La r√©trocompatibilit√© avec des listes simples est maintenue, mais vous √™tes invit√©s √† modifier ces champs dans le backoffice.<br />
Pour conserver le bon affichage lors de l‚Äô√©dition des donn√©es, renseignez l‚Äôancienne valeur deux fois dans la cl√© <code class="docutils literal notranslate"><span class="pre">value</span></code> et la cl√© <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></li>
</ul>
</li>
</ul>
<p>‚úÖ Exemple de proc√©dure de mise √† jour depuis une version 2.11 : https://geonature.fr/documents/procedures/2023-04-GN-211to212.txt</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul>
<li><p>Configuration dynamique du frontend : le frontend r√©cup√®re dynamiquement sa configuration depuis le backend. Pour cela, il n√©cessite uniquement l‚Äôadresse de l‚Äô<code class="docutils literal notranslate"><span class="pre">API_ENDPOINT</span></code> qui doit √™tre renseign√©e dans le fichier <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/config.json</span></code>. En cons√©quence, il n‚Äôest plus n√©cessaire de rebuilder le frontend lors d‚Äôune modification de la configuration de GeoNature ou de ses modules (#2205)</p></li>
<li><p>Personnalisation de la page d‚Äôaccueil : ajout d‚Äôune section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> contenant les param√®tres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code>. Ceux-ci peuvent contenir du code HTML qui est charg√© dynamiquement avec la configuration, √©vitant ainsi la n√©cessit√© d‚Äôun rebuild du frontend (#2300)</p></li>
<li><p>Synth√®se : Agr√©gation des observations ayant la m√™me g√©om√©trie pour ne les charger qu‚Äôune seule fois, et ainsi am√©liorer les performances et la lisibilit√© (#1847)</p></li>
<li><p>Synth√®se : Possibilit√© d‚Äôafficher les donn√©es agr√©g√©es par maille (#1878). La fonctionnalit√© est configurable avec les param√®tres suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[SYNTHESE]</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_ENABLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;M10&quot;</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_BY_DEFAULT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">    </span><span class="c1"># affichage group√© par d√©faut</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_LEGEND_CLASSES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">.   # voir fichier de configuration d‚Äôexemple</span>
</pre></div>
</div>
</li>
<li><p>Synth√®se : Possibilit√© de d√©finir des filtres par d√©faut avec le param√®tre <code class="docutils literal notranslate"><span class="pre">SYNTHESE.DEFAULT_FILTERS</span></code> (#2261)</p></li>
<li><p>M√©tadonn√©es : Chargement des jeux de donn√©es seulement quand on clique sur un cadre d‚Äôacquisition dans la liste des m√©tadonn√©es, pour am√©liorer les performances du module, en ne chargeant pas tous les jeux de donn√©es par d√©faut (#2004)</p></li>
<li><p>Champs additionnels : Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent d√©sormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)</p></li>
<li><p>Admin : Possibilit√© de g√©rer la table des applications mobiles (<code class="docutils literal notranslate"><span class="pre">t_mobile_apps</span></code>) dans le module ¬´¬†Admin¬†¬ª de GeoNature, notamment pour faciliter la gestion des mises √† jour de Occtax-mobile (#2352)</p></li>
<li><p>Possibilit√© de configurer les modules (picto, doc, label) directement depuis le module Admin (#2409)</p></li>
<li><p>Possibilit√© d‚Äôafficher un bouton de g√©olocalisation sur les cartes des formulaires Occtax et Occhab (#2338), activable avec le param√®tre suivant :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[MAPCONFIG]</span>
<span class="w">    </span><span class="n">GEOLOCATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</li>
<li><p>Profils mis √† jour automatiquement par Celery Beat, toutes les nuits par d√©faut (#2412)</p></li>
<li><p>Ajout de l‚Äôint√©gration de Redis √† l‚Äôoutil de logs Sentry, pour am√©liorer la pr√©cisions des traces</p></li>
<li><p>Possibilit√© de d√©finir des r√®gles de notifications par d√©faut, s‚Äôappliquant aux utilisateurs n‚Äôayant pas de r√®gle sp√©cifique. Pour cela, il suffit d‚Äôins√©rer une r√®gle dans la table <code class="docutils literal notranslate"><span class="pre">gn_notifications.t_notifications_rules</span></code> avec <code class="docutils literal notranslate"><span class="pre">id_role=NULL</span></code> (#2267)</p></li>
<li><p>Publication automatique de deux images Docker <code class="docutils literal notranslate"><span class="pre">geonature-backend</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature-frontend</span></code> (#2206). Leur utilisation n‚Äôa pas encore √©t√© √©prouv√©e et leur utilisation en production n‚Äôest de ce fait pas recommand√©e.</p></li>
<li><p>Am√©lioration de la fiabilit√© du processus de migration</p></li>
<li><p>Ajout d‚Äôun index sur la colonne <code class="docutils literal notranslate"><span class="pre">gn_synthese.cor_area_synthese.id_area</span></code>. La colonne <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> est d√©j√† couverte par l‚Äôindex multiple <code class="docutils literal notranslate"><span class="pre">(id_synthese,</span> <span class="pre">id_area)</span></code>.</p></li>
<li><p>Int√©gration de TaxRef v16 et du r√©f√©rentiel de sensibilit√© associ√© pour les nouvelles installations de GeoNature</p></li>
<li><p>√âvolution de la gestion des fichiers statiques et des m√©dias (#2306) :</p>
<ul>
<li><p>S√©paration des fichiers statiques (applicatif, fournis par GeoNature) et des fichiers m√©dias (g√©n√©r√©s par l‚Äôapplications). Sont d√©plac√©s du dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code> vers le dossier <code class="docutils literal notranslate"><span class="pre">backend/media</span></code> les sous-dossiers suivants : <code class="docutils literal notranslate"><span class="pre">medias</span></code>, <code class="docutils literal notranslate"><span class="pre">exports</span></code>, <code class="docutils literal notranslate"><span class="pre">geopackages</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile</span></code>, <code class="docutils literal notranslate"><span class="pre">pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">shapefiles</span></code>. De plus, l‚Äôancien dossier <code class="docutils literal notranslate"><span class="pre">medias</span></code> est renomm√© <code class="docutils literal notranslate"><span class="pre">attachments</span></code>.</p></li>
<li><p>Ajout des param√®tres de configuration suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">ROOT_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dossier absolu du backend&quot;</span>
<span class="n">STATIC_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;static&quot;</span><span class="w">    </span><span class="c1"># dossier absolu ou relatif √† ROOT_PATH</span>
<span class="n">STATIC_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/static&quot;</span><span class="w">      </span><span class="c1"># URL d‚Äôacc√®s aux fichiers statiques</span>
<span class="n">MEDIA_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;media&quot;</span><span class="w">      </span><span class="c1"># dossier absolu ou relatif √† ROOT_PATH</span>
<span class="n">MEDIA_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/media&quot;</span><span class="w">        </span><span class="c1"># URL d‚Äôacc√®s aux m√©dias</span>
</pre></div>
</div>
</li>
<li><p>Ajout d‚Äôun dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> √† la racine de GeoNature et du param√®tre associ√© <code class="docutils literal notranslate"><span class="pre">CUSTOM_STATIC_FOLDER</span></code>. Les fichiers statiques r√©clam√©s sont cherch√©s en priorit√© dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code>, puis, si non trouv√©s, dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>. Ainsi, si besoin de modifier un fichier statique, on placera un fichier du m√™me nom dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> plut√¥t que de modifier le fichier original (par exemple, <code class="docutils literal notranslate"><span class="pre">custom/images/logo_structure.png</span></code>). Voir la <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#customisation">documentation sur la customisation</a>.</p></li>
<li><p>Retrait du pr√©fixe <code class="docutils literal notranslate"><span class="pre">static/media/</span></code> aux chemins d‚Äôacc√®s des fichiers joints (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias.media_path</span></code>)</p></li>
<li><p>Retrait du pr√©fixe <code class="docutils literal notranslate"><span class="pre">static/mobile/</span></code> aux chemins d‚Äôacc√®s des APK des applications mobiles (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps.relative_path_apk</span></code>)</p></li>
<li><p>Certains fichiers statiques sont renomm√©s :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">static/css/custom.css</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">static/css/metadata_pdf_custom.css</span></code></p></li>
</ul>
</li>
<li><p>Certains assets du frontend sont d√©plac√©s vers les fichiers statiques du backend pour profiter du m√©canisme de customisation :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">backend/static/css/frontend.css</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/favicon.ico</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">backend/static/images/favicon.ico</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/login_background.jpg</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">backend/static/images/login_background.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_sidebar.jpg</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_sidebar.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_structure.png</span></code> ‚Üí <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_structure.png</span></code></p></li>
</ul>
</li>
<li><p>Le lien symbolique <code class="docutils literal notranslate"><span class="pre">static/images/logo_structure.jpg</span></code> est supprim√© au profit de l‚Äôutilisation de <code class="docutils literal notranslate"><span class="pre">logo_sidebar.jpg</span></code></p></li>
<li><p>Les d√©placements mentionn√©s ci-dessus sont effectu√©s par le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code></p></li>
</ul>
</li>
<li><p>Mise √† jour des d√©pendances :</p>
<ul class="simple">
<li><p>TaxHub 1.11.1</p></li>
<li><p>UsersHub 2.3.3</p></li>
<li><p>UsersHub-authentification-module 1.6.5</p></li>
<li><p>Habref-api-module 0.3.2</p></li>
<li><p>Nomenclature-api-module 1.5.4</p></li>
<li><p>RefGeo 1.3.0</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.2</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.7</p></li>
</ul>
</li>
<li><p>Refonte des permissions et suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_roles_permissions</span></code> qui posait des probl√®mes de performances du nombre d‚Äôutilisateurs (#2196 et #2360)</p></li>
<li><p>La recherche du fichier de configuration des modules sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (code du module en minuscule) dans le r√©pertoire de configuration de GeoNature devient prioritaire devant l‚Äôutilisation du fichier <code class="docutils literal notranslate"><span class="pre">conf_gn_module.toml</span></code> dans le r√©pertoire de configuration du module.
Le script de mise √† jour d√©place les fichiers de configuration des modules vers le dossier centralis√© de configuration de GeoNature (#2423)</p></li>
<li><p>Rechargement automatique de GeoNature quand on modifie un fichier de configuration d‚Äôun module dans l¬†¬ª dossier centralis√© (#2418)</p></li>
<li><p>√âvolution de la configuration Apache <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> pour activer la compression gzip des r√©ponses de l‚ÄôAPI (#2266) et pour servir les m√©dias et les fichiers statiques par Apache (#2430).
√Ä reporter dans votre configuration Apache si celle-ci n‚Äôimporte pas cette configuration fournie par d√©faut.</p></li>
<li><p>Le script de mise √† jour (<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) peut prendre en argument le chemin vers l‚Äôancienne installation GeoNature.
Il peut s‚Äôagir du m√™me dossier que la nouvelle installation GeoNature (cas d‚Äôune mise √† jour d‚Äôun dossier GeoNature avec Git).</p></li>
<li><p>Ajout d‚Äôune historisation des suppressions de la synth√®se √† travers un trigger peuplant la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_log_synthese</span></code> (#789)
Une API <code class="docutils literal notranslate"><span class="pre">/synthese/log</span></code> permet d‚Äôobtenir l‚Äôhistorique des insertions, mises √† jour et suppressions dans la synth√®se (notamment utile pour GN2PG).</p></li>
<li><p>Am√©lioration de la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> qui d√©tecte d√©sormais automatiquement le code du module (#2396)</p></li>
<li><p>Synth√®se : Optimisation de la requ√™te par statuts de protection (#2329)</p></li>
<li><p>Occtax : Optimisation des triggers de calcul automatique des altitudes pour ne les lancer que quand la g√©om√©trie du relev√© est modifi√©e (#2137)</p></li>
<li><p>Occtax et Occhab : Ajout d‚Äôune pastille indiquant le nombre de filtres activ√©s</p></li>
<li><p>Am√©lioration du message renvoy√© √† l‚Äôutilisateur en cas de Timout (#2417)</p></li>
<li><p>Am√©lioration du composant g√©n√©rique de selection d‚Äôun jeu de donn√©es, en selectionnant automatiquement le JDD si la liste n‚Äôen contient qu‚Äôun et que le champs est obligatoire (#1049)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Synth√®se : changement du type de <code class="docutils literal notranslate"><span class="pre">entity_source_pk_value</span></code> de <code class="docutils literal notranslate"><span class="pre">Integer</span></code> √† <code class="docutils literal notranslate"><span class="pre">Unicode</span></code> dans le mod√®le pour correspondre √† la base de donn√©es</p></li>
<li><p>Correction de l‚Äôacc√®s public automatique activable avec <code class="docutils literal notranslate"><span class="pre">?access=public</span></code> dans l‚ÄôURL (#1650)</p></li>
<li><p>Correction de la fonctionnalit√© de r√©cup√©ration du mot de passe</p></li>
<li><p>Correction de la commande d‚Äôimport du r√©f√©rentiel sensibilit√© pour correctement g√©rer les crit√®res comportementales</p></li>
<li><p>Occtax : correction du filtre sur les organismes</p></li>
<li><p>Synth√®se : correction d‚Äôun probl√®me de performance de l‚Äôexport (vue <code class="docutils literal notranslate"><span class="pre">v_synthese_for_export</span></code>) (#1434)</p></li>
<li><p>Correction d‚Äôun probl√®me de d√©tection de l‚Äôemplacement des modules avec les versions r√©centes de <code class="docutils literal notranslate"><span class="pre">pip</span></code> (#2365, #2364)</p></li>
<li><p>Occhab : correction du CRUVED sur la liste des jeux de donn√©es ouvert √† la saisie</p></li>
<li><p>Occtax : correction du contr√¥le des dates du formulaire d‚Äô√©dition des relev√©s (#2318)</p></li>
<li><p>Correction des acteurs dans les exports PDF des m√©tadonn√©es (#2034)</p></li>
<li><p>Correction des graphiques dans les exports PDF des cadres d‚Äôacquisition (#2231)</p></li>
<li><p>Correction du script de synchronisation des m√©tadonn√©es depuis MTD INPN (#2314)</p></li>
<li><p>Correction de l‚Äôappel en double de la route des notifications (#2356)</p></li>
<li><p>Correction de l‚ÄôURL vers la documentation depuis la page d‚Äôaccueil</p></li>
<li><p>Correction du formulaire Occtax quand un relev√© n‚Äôa pas d‚Äù<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> (#2421)</p></li>
<li><p>Correction de l‚Äôaffichage des tooltips sur la liste des obsrvations de la Synth√®se (#2348)</p></li>
<li><p>Correction du chargement des dates d√©but et date fin quand on modifie un relev√© dans Occtax ou une station dans OCchab (#2071)</p></li>
<li><p>Correction de la r√©cup√©ration des emails dans l‚Äôinterface ¬´¬†Mon compte¬†¬ª (#2346)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Suppression du support du param√®tre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du d√©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2162)</p></li>
<li><p>Suppression des param√®tres <code class="docutils literal notranslate"><span class="pre">redirect_on_expiration</span></code> et <code class="docutils literal notranslate"><span class="pre">redirect_on_invalid_token</span></code> du d√©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2360)</p></li>
<li><p>Remplacement des usages du param√®tre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du d√©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> par <code class="docutils literal notranslate"><span class="pre">get_scope</span></code> dans le code de GeoNature et des modules <em>contrib</em> (#2164, #2199)</p></li>
<li><p>Suppression de multiples fonctions du package <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools</span></code>, notamment la classe <code class="docutils literal notranslate"><span class="pre">UserCruved</span></code>¬†; se reporter √† la documentation d√©veloppeur afin de conna√Ætre les fonctions utilisables dans votre code (#2360)</p></li>
<li><p>Migration GeoNature : le venv est mis √† jour plut√¥t que d‚Äô√™tre supprim√© et recr√©√© (#2332)</p></li>
<li><p>Les erreurs de validation Marshmallow sont automatiquement converties en erreur 400 (BadRequest)</p></li>
<li><p>Les modules <em>contrib</em> doivent √©galement √™tre format√©s avec <code class="docutils literal notranslate"><span class="pre">prettier</span></code></p></li>
<li><p>Fiabilisation des exports PDF (#2232)</p></li>
<li><p>Le composant de carte <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code> a un nouvel input <code class="docutils literal notranslate"><span class="pre">geolocation</span></code> permettant d‚Äôactiver le bouton de g√©olocalisation</p></li>
<li><p>Ajout du mixin <code class="docutils literal notranslate"><span class="pre">geonature.utils.schema.CruvedSchemaMixin</span></code> permettant d‚Äôajouter la propri√©t√© (exclue par d√©faut) <code class="docutils literal notranslate"><span class="pre">cruved</span></code> √† un sch√©ma Marshmallow</p></li>
<li><p>L‚Äôacc√®s aux param√®tre de configuration ne se fait plus √† partir des fichiers g√©n√©r√©s <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> (GeoNature) ou <code class="docutils literal notranslate"><span class="pre">ModuleConfig</span></code> (modules), mais uniquement √† partir du <code class="docutils literal notranslate"><span class="pre">ConfigService</span></code> en charge de la r√©cup√©ration dynamique de la configuration (#2205).</p></li>
<li><p>Mise √† jour d‚ÄôAngular version 12 √† 15 et mise √† jour de nombreuses d√©pendances frontend (#2154)</p></li>
<li><p>Nettoyage des d√©pendances frontend de GeoNature. Si vous utilisiez certaines d√©pendances supprim√©es de GeoNature dans vos modules, vous devez les rajouter dans un fichier <code class="docutils literal notranslate"><span class="pre">package-lock.json</span></code> dans le dossier frontend de votre module.</p></li>
<li><p>Suppression de la route obsol√®te <code class="docutils literal notranslate"><span class="pre">/config</span></code></p></li>
<li><p>Ajout du context manager <code class="docutils literal notranslate"><span class="pre">start_sentry_child</span></code> permettant de rapporter dans les traces Sentry le temps d‚Äôex√©cution de certaines t√¢ches co√ªteuses (#2289)</p></li>
<li><p>Refactorisation du module Occhab (#2324) avec passage √† Marshmallow.
Ajout √† cette occasion de plusieurs fonctions et classes utilitaires au d√©p√¥t <em>Utils-Flask-SQLAlchemy-Geo</em>.
Suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_releve_occtax</span></code>.
Module de r√©f√©rence pour les d√©veloppements et documentation associ√©e (#2331)</p></li>
<li><p>D√©placement des routes g√©ographiques et des tests associ√©s vers le d√©p√¥t <em>RefGeo</em> (#2342)</p></li>
<li><p>Am√©lioration des tests des permissions</p></li>
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">get_scopes_by_module</span></code> cherche dans le contexte applicatif (variable <code class="docutils literal notranslate"><span class="pre">g</span></code>) la pr√©sence de <code class="docutils literal notranslate"><span class="pre">g.current_module</span></code> et <code class="docutils literal notranslate"><span class="pre">g.current_object</span></code> lorsqu‚Äôils ne sont pas fournis en param√®tre.</p></li>
<li><p>Travaux en cours : compatibilit√© SQLAlchemy 1.3 &amp; 1.4 / Flask-SQLAlchemy 2 &amp; 3 (#1812)</p></li>
<li><p>Mise √† jour de Chart.js de la version 2 √† 4</p></li>
<li><p>Possibilit√© de d√©finir l‚ÄôURL par d√©faut de la documentation d‚Äôun module par un entrypoint nomm√© <code class="docutils literal notranslate"><span class="pre">doc_url</span></code></p></li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;ch-cbna / &#64;bouttier / &#64;TheoLechemia / &#64;jpm-cbna / &#64;bastyen / &#64;Gaetanbrl / &#64;VincentCauchois / &#64;joelclems / &#64;amandine-sahl / &#64;andriacap / &#64;mvergez / &#64;DonovanMaillard / &#64;dece / &#64;lpofredc / &#64;MathRdt / &#64;gildeluermoz / &#64;maximetoma / &#64;pierre56 / &#64;cecchi-a / &#64;jbrieuclp / &#64;camillemonchicourt</p>
</section>
<section id="id14">
<h2>2.11.2 (2023-01-19)<a class="headerlink" href="#id14" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun import manquant dans un fichier de migration des donn√©es d‚Äôexemple d‚ÄôOcctax (#2285)</p></li>
<li><p>Correction d‚Äôun probl√®me de l‚Äôinstallation globale en mode d√©veloppement</p></li>
</ul>
</section>
<section id="id15">
<h2>2.11.1 (2023-01-18)<a class="headerlink" href="#id15" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la documentation de la sensibilit√© (#2234)</p></li>
<li><p>Correction de l‚Äôacc√®s aux notifications lorsque la gestion des comptes utilisateurs est activ√©e</p></li>
<li><p>Correction des migrations Alembic des donn√©es d‚Äôexemple Occtax afin de supporter les migrations depuis GeoNature ‚â§ 2.9 (#2240, #2248)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> afin de supporter les anciens modules dont le passage √† Alembic n√©cessite un stamp manuel</p></li>
</ul>
</section>
<section id="ilex-aquifolium-2022-12-21">
<h2>2.11.0 - Ilex aquifolium üéÑ (2022-12-21)<a class="headerlink" href="#ilex-aquifolium-2022-12-21" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>‚è© En bref</strong></p>
<ul class="simple">
<li><p>Utilisation de la BDC statuts dans la Synth√®se pour les filtres et infos sur les statuts des esp√®ces</p></li>
<li><p>Mise √† jour des r√®gles de sensibilit√© du SINP</p></li>
<li><p>Notifications (changement de statut de validation de mes observations)</p></li>
<li><p>Filtre des m√©tadonn√©es par zonage g√©ographique</p></li>
<li><p>Affichage de zonages sur les cartes (depuis le ref_geo, un WMS, un WFS ou un GeoJSON)</p></li>
<li><p>Suppression du support des modules non packag√©s</p></li>
<li><p>Simplification et am√©lioration des commandes d‚Äôinstallation et de mise √† jour des modules</p></li>
<li><p>Am√©lioration du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> de mise √† jour de GeoNature</p></li>
<li><p>Nettoyage du frontend et am√©lioration de la s√©paration backend/frontend</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul>
<li><p>Mettre √† jour TaxHub en version 1.10.7</p></li>
<li><p>Si vous utilisez des modules sp√©cifiques (hors Import, Export, Dashboard, Monitoring), v√©rifiez qu‚Äôils disposent d‚Äôune version packag√©e compatible avec GeoNature 2.11 (#2058)</p></li>
<li><p>Si vous aviez mis en place l‚Äôacc√®s public √† GeoNature, adaptez sa configuration avec le nouveau param√®tre unique <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Attention, le script de migration de la version 2.11 a une r√©gression et ne r√©cup√®re plus automatiquement la configuration des modules fournis avec GeoNature (Occtax, Occhab, Validation). Rapatriez manuellement vos √©ventuels fichiers de configuration de ces modules si vous en avez cr√©√© :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>geonature_old/contrib/occtax/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/occtax/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_validation/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_validation/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_occhab/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_occhab/config/conf_gn_module.toml
</pre></div>
</div>
</li>
<li><p>Si vous les utilisez, mettre √† jour les modules Dashboard en version 1.2.1 (ou plus) et Monitoring en version 0.4.0 (ou plus), <strong>apr√®s</strong> la mise √† jour de GeoNature</p></li>
<li><p>Vous pouvez d√©sactiver les textes de la BDC statuts ne correspondant par √† votre territoire.
Voir rubrique ¬´¬†5. Configurer les filtres des statuts de protection et des listes rouges¬†¬ª de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>Vous pouvez mettre √† jour vos r√®gles de sensibilit√© si vous utilisez TaxRef versions 14 ou 15 :</p>
<ul>
<li><p>D√©sinstallez les r√®gles fournies par Alembic :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>~/geonature/backend/venv/bin/activate
geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_sensitivity_inpn@base
</pre></div>
</div>
</li>
<li><p>Vous n‚Äôavez probablement plus besoin des anciennes r√©gions que vous pouvez alors supprimer de votre r√©f√©rentiel g√©ographique :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_geo_fr_regions_1970@base
</pre></div>
</div>
</li>
<li><p>Assurez-vous que votre r√©f√©rientiel g√©ographique contienne les d√©partements :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>upgrade<span class="w"> </span>ref_geo_fr_departments@head
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v15, ins√©rez les nouvelles r√®gles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;R√©f√©rentiel sensibilit√© TAXREF v15 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401875<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV15_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V15_31032022/RefSensibilite_15.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v14, ins√©rez les nouvelles r√®gles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;R√©f√©rentiel sensibilit√© TAXREF v14 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401876<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV14_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V14_31032022/RefSensibilite_14.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>Rafra√Æchissez la vue mat√©rialis√©e pr√©-calculant les taxons enfants :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>refresh-rules-cache
</pre></div>
</div>
</li>
<li><p>Relancez le calcul de la sensibilit√© des observations de la synth√®se :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>update-synthese
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<p>‚úÖ Exemple de proc√©dure de mise √† jour depuis une version 2.9 : https://geonature.fr/documents/procedures/2023-01-GN-29to211.txt</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>[Synth√®se] Ajout de filtres sur les statuts de protection et les listes rouges dans le fen√™tre de recherche avanc√©e bas√©s sur la <a class="reference external" href="https://inpn.mnhn.fr/programme/base-de-connaissance-statuts/presentation">BDC Statuts</a>.
Ajout des param√®tres de configuration <code class="docutils literal notranslate"><span class="pre">STATUS_FILTERS</span></code> et <code class="docutils literal notranslate"><span class="pre">RED_LISTS_FILTERS</span></code> dans la section <code class="docutils literal notranslate"><span class="pre">SYNTHESE</span></code>. Il est possible de modifier les listes et statuts affich√©s comme indiqu√© dans la documentation de la configuration du module SYNTHESE. (#1492)</p></li>
<li><p>[Synth√®se] Affichage dans la fiche d‚Äôune observation, onglet <em>Taxonomie</em>, des informations issues de la <em>BDC Statuts</em> (statuts de protection, listes rouges) en rapport avec le taxon et l‚Äôemplacement g√©ographique de l‚Äôobservation s√©lectionn√©e (#1492)</p></li>
<li><p>[Synth√®se] L‚Äôexport des statuts de protection est maintenant bas√© sur les donn√©es de la <em>BDC Statuts</em> (#1492)</p></li>
<li><p>Documentation dans la rubrique ¬´¬†5. Configurer les filtres des statuts de protection et des listes rouges¬†¬ª de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>Possibilit√© d‚Äôafficher des zonages sur les cartes (#974).
Ces derniers peuvent provenir :</p>
<ul>
<li><p>d‚Äôun flux WMS ou WFS</p></li>
<li><p>d‚Äôun fichier ou flux GeoJSON</p></li>
<li><p>du r√©f√©rentiel g√©ographique interne
Les couches sont configurables via le param√®tre <code class="docutils literal notranslate"><span class="pre">REF_LAYERS</span></code> de la section <code class="docutils literal notranslate"><span class="pre">MAPCONFIG</span></code>.
Par d√©faut un WMS des limites administrativs de l‚ÄôIGN et un WMS des ZNIEFF 1 continentales en m√©tropole sont affich√©s.</p></li>
</ul>
</li>
<li><p>Ajout d‚Äôun m√©canisme de notifications (#1873).
L‚Äôutilisateur peut choisir de souscrire, pour chaque type de notificaton, s‚Äôil veut √™tre notifi√© dans GeoNature et/ou par e-mail.
Les templates de notifications peuvent √™tre modifi√©s par l‚Äôadministrateur dans le module Admin.
Actuellement seule la notification du changement du statut de validation des observations est impl√©ment√©e.
Les fonctionnalit√©s de notifications sont activ√©es par d√©faut, mais peuvent √™tre d√©sactiv√©es globalement en passant le param√®tre de GeoNature <code class="docutils literal notranslate"><span class="pre">NOTIFICATIONS_ENABLED</span></code> √† <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Recherche des m√©tadonn√©es par emprise g√©ographique des observations (#1768)
Le param√®tre <code class="docutils literal notranslate"><span class="pre">METADATA_AREA_FILTERS</span></code> permet de sp√©cifier les types de zonages g√©ographiques disponibles √† la recherche (communes, d√©partements et r√©gions activ√©s par d√©faut).</p></li>
<li><p>Mise √† jour des r√®gles de sensibilit√© des observations (incluant les r√®gles nationales et r√©gionales mises √† plat au niveau des d√©partements) pour TaxRef version 14 et 15 (#1891)</p></li>
<li><p>Int√©gration et mise √† jour de la documentation sur les r√©gles et le calcul de la sensibilit√©</p></li>
<li><p>Ajout de sous-commandes pour la gestion du r√©f√©rentiel de sensibilit√© :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> : information sur les r√®gles pr√©sentes dans la base de donn√©es</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">remove-referential</span></code> : supprimer les r√®gles d‚Äôune source donn√©e</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">add-referential</span></code> : ajouter de nouvelles r√®gles
Les nouvelles installations de GeoNature reposent sur l‚Äôutilisation de ces commandes pour fournir les r√®gles SINP de sensibilit√© du 31/03/2022.
Ces derni√®res sont fournies √† l‚Äô√©chelle du d√©partement et non plus des anciennes r√©gions.
La branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_sensitivity_inpn</span></code> ne doit plus √™tre utilis√©e et sera supprim√©e dans une prochaine version de GeoNature.</p></li>
</ul>
</li>
<li><p>Deux Dockerfiles permettant de g√©n√©rer une image frontend et une image backend ont √©t√© int√©gr√©s.
La dockerisation de GeoNature reste toutefois un travail en cours, et l‚Äôutilisation de ces images n‚Äôest pas encore officiellement support√©e (#2206)</p></li>
<li><p>Les colonnes <code class="docutils literal notranslate"><span class="pre">id_source</span></code> de la synth√®se et <code class="docutils literal notranslate"><span class="pre">id_module</span></code> des relev√©s Occtax sont d√©sormais <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> (#2186)</p></li>
<li><p>Suppression de la section <code class="docutils literal notranslate"><span class="pre">[PUBLIC_ACCESS]</span></code> dans les param√®tres de configuration, remplac√©e par un unique param√®tre <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Blocage de la possibilit√© de modifier son compte pour l‚Äôutilisateur public (#2218)</p></li>
<li><p>Possibilit√© d‚Äôacc√©der directement √† une page de GeoNature avec l‚Äôutilisateur public, sans passer par la page d‚Äôauthentification (#1650)</p></li>
<li><p>Support de la configuration par variable d‚Äôenvironnement pr√©fix√©e par <code class="docutils literal notranslate"><span class="pre">GEONATURE_</span></code> (<em>e.g</em> <code class="docutils literal notranslate"><span class="pre">GEONATURE_SQLALCHEMY_DATABASE_URI</span></code>). Les param√®tres d√©finis ainsi peuvent √™tre exclus de la configuration TOML, y compris les param√®tres obligatoires</p></li>
<li><p>Activation de <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/periodic-tasks.html">Celery Beat</a> permettant de lancer des t√¢ches p√©riodiquement</p></li>
<li><p>Mise √† jour des d√©pendances :</p>
<ul>
<li><p>TaxHub 1.10.7</p></li>
<li><p>UsersHub</p></li>
<li><p>UsersHub-authentification-module 1.6.2</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.1</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.6</p></li>
</ul>
</li>
<li><p>Modules GeoNature et s√©paration backend/frontend (#2088) :</p>
<ul>
<li><p>Suppression du support des modules non packag√©s (#2058).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">install-packaged-gn-module</span></code> devient <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>.</p></li>
<li><p>Suppression des param√®tres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules, (#2165).</p></li>
<li><p>Recherche de la configuration des modules √©galement dans le dossier <code class="docutils literal notranslate"><span class="pre">config</span></code> de GeoNature, sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (le code du module √©tant en minuscule).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-module-configuration</span></code> est renomm√©e <code class="docutils literal notranslate"><span class="pre">generate-frontend-module-config</span></code> par homog√©n√©it√© avec la commande <code class="docutils literal notranslate"><span class="pre">generate-frontend-config</span></code>.</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-configuration</span></code> g√©n√®re la configuration frontend de tous les modules actifs en plus de la configuration GeoNature (puis lance le build du frontend).</p></li>
<li><p>Les liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> sont supprim√©s au profit de liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">frontend/external_modules</span></code> pointant directement vers le dossier <code class="docutils literal notranslate"><span class="pre">frontend</span></code> des modules consid√©r√©s. Ces liens sont cr√©√©s par la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>. Le processus de migration convertit automatiquement vos liens symboliques existants.</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> permettant d‚Äôins√©rer le module dans la table <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> et de monter sa branche Alembic afin de cr√©er ou mettre √† jour son sch√©ma de base de donn√©es.
Il n‚Äôest pas n√©cessaire de lancer cette commande manuellement pour les modules install√©s avec la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> sauf lorsque cette derni√®re est appel√©e avec le param√®tre <code class="docutils literal notranslate"><span class="pre">--upgrade-db=false</span></code>.</p></li>
<li><p>Les assets frontend ne sont plus collect√©s dans un dossier portant le nom du module. Le mainteneur du module doit donc cr√©er cette arborescence lui-m√™me.</p></li>
</ul>
</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Installation d‚Äôune d√©pendance Debian manquante pour Cypress (#2125)</p></li>
<li><p>Les fichiers de service systemd ont √©t√© corrig√©s pour fonctionner sur une machine sans PostgreSQL (BDD sur un autre h√¥te)</p></li>
<li><p>La <em>BDC Statuts</em> est maintenance charg√©e lors de l‚Äôint√©gration continue juste apr√®s le chargement des d√©partements (#1492)</p></li>
<li><p>Ajout de l‚Äô<code class="docutils literal notranslate"><span class="pre">id_module</span></code> aux relev√©s des donn√©es d‚Äôexemple Occtax</p></li>
<li><p>Correction du chargement du module Validation (#2183)</p></li>
<li><p>Correction du script de migration pour g√©rer la migration de l‚Äôensemble des modules externes</p></li>
<li><p>Correction de la gestion du protocole (http / https) lors des redirections automatique de Flask (redirection en cas de slash manquant en fin d‚ÄôURL)</p></li>
<li><p>Rafra√Æchissement du cache des r√®gles de sensibilit√© en fin d‚Äôinstallation</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Nettoyage du frontend : d√©pendances, configuration Angular</p></li>
<li><p>R√©vision importante de la documentation, de d√©veloppement notamment</p></li>
<li><p>Les fichiers <code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code> et <code class="docutils literal notranslate"><span class="pre">tsconfig.app.json</span></code> n‚Äôont plus besoin d‚Äô√™tre g√©n√©r√©s (#2088)</p></li>
<li><p>Suppression des param√®tres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules √† r√©percuter dans les modules (#2165)</p></li>
<li><p>Homog√©n√©isation de la configuration entre <code class="docutils literal notranslate"><span class="pre">current_app.config</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature.utils.config.config</span></code></p></li>
<li><p>Compilation en production sans AOT (#1855)</p></li>
<li><p>L‚Äôinstallation du backend, du frontend et des modules peut d√©sormais √™tre faite sans disposer de la BDD (#1359)</p></li>
<li><p>Ajout de UsersHub aux d√©pendances (d√©veloppement uniquement)</p></li>
<li><p>Correction du chemin du marqueur Leaflet (#2223)</p></li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;jpm-cbna / &#64;pierrejego / &#64;Gaetanbrl / &#64;amandine-sahl / &#64;VincentCauchois / &#64;antoinececchimnhn / &#64;metourneau / &#64;bouttier / &#64;TheoLechemia / &#64;camillemonchicourt</p>
</section>
<section id="id16">
<h2>2.10.4 (2022-11-30)<a class="headerlink" href="#id16" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Mise √† jour du RefGeo en version 1.2.1 afin de corriger une
r√©gression des performances dans la synth√®se</p></li>
<li><p>Correction de la g√©n√©ration du rapport de sensibilit√© dans les
fiches des m√©tadonn√©es</p></li>
<li><p>Correction d‚Äôun filtre de permissions sur les jeux de donn√©es
(#2160)</p></li>
<li><p>Correction des boutons d‚Äôajout de donn√©es dans les jeux de donn√©es
(#2152)</p></li>
<li><p>Ajout d‚Äôune d√©pendance √† GeoNature dans les migrations Occtax pour
corriger un probl√®me al√©atoire lors du passage des migrations
(#2178)</p></li>
</ul>
</section>
<section id="id17">
<h2>2.10.3 (2022-11-15)<a class="headerlink" href="#id17" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Optimisation d‚Äôune migration Occtax particuli√®rement lente en
d√©sactivant temporairement les triggers (#2138)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonctionnalit√© d‚Äôinscription des utilisateurs
(#1874)</p></li>
<li><p>Correction d‚Äôune r√©gression des performances de la routes <code class="docutils literal notranslate"><span class="pre">/modules</span></code>
(#2136)</p></li>
</ul>
</section>
<section id="id18">
<h2>2.10.2 (2022-11-09)<a class="headerlink" href="#id18" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Documentation de la fonctionnalit√© de duplication d‚ÄôOcctax</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script de migration pour g√©n√©rer la configuration
frontend des modules</p></li>
<li><p>Correction des triggers d‚ÄôOcctax pour correctement identifier la
bonne source</p></li>
</ul>
</section>
<section id="id19">
<h2>2.10.1 (2022-11-08)<a class="headerlink" href="#id19" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">DISABLED_MODULES</span></code></p></li>
<li><p>Installation des d√©pendances frontend des modules dans le dossier
frontend des modules eux-m√™mes</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> ignore les modules dont le chargement a
rencontr√© une erreur (#2109)</p></li>
<li><p>Correction et am√©lioration du script de mise √† jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#2110)</p></li>
<li><p>Correction de la commande d‚Äôinstallation des modules non packag√©s
avec le routing dynamique (#2107)</p></li>
<li><p>Correction du message de confirmation d‚Äôenregistrement d‚Äôun cadre
d‚Äôacquisition (#2108)</p></li>
<li><p>Correction d‚Äôune r√©gression de la 2.10.0 sur la route de
r√©cup√©ration des jeux de donn√©es impactant Occtax-mobile</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Passez directement √† cette version plut√¥t que la 2.10.0, mais en
suivant les notes de version de la 2.10.0, en vous aidant
√©ventuellement de l‚Äôexemple de migration.</p></li>
</ul>
</section>
<section id="alouatta-macconnelli-2022-11-02">
<h2>2.10.0 - Alouatta macconnelli üêí (2022-11-02)<a class="headerlink" href="#alouatta-macconnelli-2022-11-02" title="Lien vers cette rubrique">¬∂</a></h2>
<ul class="simple">
<li><p><strong>Angular 12, tests automatis√©s frontend et backend</strong></p></li>
<li><p><strong>Discussions, signalement, partage, √©pinglage d‚Äôune occurrence</strong></p></li>
</ul>
<p>üîß Passage de la version 7 √† 12 d‚ÄôAngular. Avant de mettre √† jour
GeoNature sur cette version, v√©rifiez que les modules que vous utilisez
sont disponibles dans une version compatible avec GeoNature 2.10.0 ou
plus (compatibilit√© Angular 12).</p>
<p>Modules compatibles √† date de la publication de la version 2.10 de
GeoNature :</p>
<ul class="simple">
<li><p>Import</p></li>
<li><p>Export</p></li>
<li><p>Dashboard</p></li>
<li><p>Monitoring</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p><strong>Avant</strong> de mettre √† jour GeoNature :</p>
<ul>
<li><p>Mettre √† jour les versions de TaxHub (1.10.4) et UsersHub
(2.3.1), sans la partie migration de la base de donn√©es avec
Alembic (elle sera faite lors de la mise √† jour de GeoNature)</p></li>
<li><p>Mettre √† jour les modules compatibles avec GeoNature 2.10, en
vous limitant aux √©tapes ¬´¬†T√©l√©chargement de la nouvelle version
du module¬†¬ª, ¬´¬†Renommage des r√©pertoires¬†¬ª et ¬´¬†Rapatriement de
la configuration¬†¬ª. La compilation de chaque module sera faite
automatiquement lors de la mise √† jour de GeoNature</p></li>
<li><p>Les nouveaux fichiers de logs seront plac√©s dans le dossier
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/</span></code>. Vous pouvez archiver ou supprimer les
anciens fichiers de log (<code class="docutils literal notranslate"><span class="pre">/var/log/geonature.log*</span></code>).</p></li>
<li><p>Supprimer les param√®tres de configuration qui ont disparu s‚Äôils
sont pr√©sents dans votre fichier de configuration
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code></p></li>
</ul>
</li>
<li><p>Installation du worker Celery : il vous faut installer le broker
<code class="docutils literal notranslate"><span class="pre">redis</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>redis
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Suivez la proc√©dure de mise √† jour classique de GeoNature
(<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Suivez les √©ventuelles notes de version sp√©cifiques des modules
install√©s (SQL de migration de leur sch√©ma de BDD, stamp Alembic de
la BDD)</p></li>
</ul>
<p>‚úÖ Un <a class="reference external" href="https://geonature.fr/documents/procedures/2022-11-GN-210-Migrate.txt">exemple de migration compl√®te de GeoNature 2.9 √† 2.10, ses
d√©pendances et ses modules principaux est disponible</a>
(pour information et √† adapter √† votre contexte).</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibilit√© de dupliquer le module Occtax (#621)</p></li>
<li><p>Am√©lioration des fiches des observations dans les modules Synth√®se
et Validation (#1474)</p></li>
<li><p>Ajout d‚Äôun permalien sur les fiches des observations dans les
modules Synth√®se et Validation (#1727)</p></li>
<li><p>Signaler une occurrence et param√®tre <code class="docutils literal notranslate"><span class="pre">ALERT_MODULES</span></code> associ√©
(#1750)</p></li>
<li><p>Epingler une occurrence et son param√®tre <code class="docutils literal notranslate"><span class="pre">PIN_MODULES</span></code> associ√©
(#1819)</p></li>
<li><p>Discussions sur une occurrence et ses param√®tres
<code class="docutils literal notranslate"><span class="pre">DISCUSSION_MODULES</span></code> et <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MAX_LENGTH</span></code> associ√©s (#1731)</p></li>
<li><p>Mise √† jour d‚ÄôAngular de la version 7 √† 12 et des d√©pendances
javascript li√©es (#1547)</p></li>
<li><p>Mise en place de tests automatis√©s frontend avec Cypress, simulant
les actions de l‚Äôutilisateur et v√©rifiant la conformit√© des
r√©sultats dans les modules Occtax, Synth√®se et M√©tadonn√©es</p></li>
<li><p>Renforcement et nettoyage des tests automatis√©s backend
(augmentation de la couverture de code de 49,8% √† 63,1%)</p></li>
<li><p>Documentation de l‚Äôutilisation et de la mise en place des tests
automatis√©s backend et frontend.</p></li>
<li><p>Simplification du CRUVED minimum pour acc√©der √† GeoNature, ne
n√©cessitant plus d‚Äôavoir obligatoirement un CRUVED d√©fini au niveau
global de GeoNature (#1622)</p></li>
<li><p>[M√©tadonn√©es] Remplacement de la liste des imports par la liste
des sources dans la fiche des JDD (#1249)</p></li>
<li><p>[M√©tadonn√©es] Lister les cadres d‚Äôacquisition par ordre
alphab√©tique</p></li>
<li><p>[Admin] Am√©lioration de l‚Äôinterface (#2101)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">status</span></code> permettant de lister les
migrations Alembic, leurs d√©pendances et identifier celles qui ont
√©t√© appliqu√©es ou non (#1574)</p></li>
<li><p>Ajout d‚Äôun worker Celery pour l‚Äôex√©cution de t√¢ches asynchrones</p></li>
<li><p>D√©placement du fichier de log GeoNature vers
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/geonature.log</span></code>.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.cor_sensitivity_synthese</span></code> et
des triggers associ√©s (#1710)</p></li>
<li><p>Suppression du param√®tre <code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code>
permettant d‚Äôajouter le filtre sur l‚Äôobservers_txt en ILIKE sur
les port√©e 1 et 2 du CRUVED</p></li>
<li><p>Documentation : Ajout d‚Äôexemples de configuration pour utiliser les
fonds IGN (#1703)</p></li>
<li><p>Documentation : Compl√©ment de la documentation sur les calculs de la
sensibilit√©</p></li>
<li><p>Suppression du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code>. Le SRID
local est fourni √† l‚Äôinstallation, puis auto-d√©tect√© depuis la base
de donn√©es √† l‚Äôusage.</p></li>
<li><p>Suppression du param√®tre de configuration
<code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code>.</p></li>
<li><p>[Occtax] R√©vision du style des fiches d‚Äôinformation des relev√©s
(#1876)</p></li>
<li><p>[Occtax] Ajout des valeurs par d√©faut directement dans la base de
donn√©es (#1857)</p></li>
<li><p>[Monitoring] Ajout d‚Äôun trigger calculant automatiquement
l‚Äôaltitude des sites</p></li>
<li><p>[Profils] Ajout des param√®tres <code class="docutils literal notranslate"><span class="pre">default_spatial_precision</span></code>,
<code class="docutils literal notranslate"><span class="pre">default_temporal_precision_days</span></code> et <code class="docutils literal notranslate"><span class="pre">default_active_life_stage</span></code>
dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.t_parameters</span></code>, rempla√ßant les valeurs par
d√©faut d√©finies au niveau du r√®gne dans la table
<code class="docutils literal notranslate"><span class="pre">gn_profiles.cor_taxons_parameters</span></code></p></li>
<li><p>Ajout d‚Äôune couche d‚Äôobjets lin√©aires dans le r√©f√©rentiel
g√©ographique (<a class="reference external" href="https://github.com/PnX-SI/RefGeo/pull/4">https://github.com/PnX-SI/RefGeo/pull/4</a>)</p></li>
<li><p>Installation de la version 15 de Taxref par d√©faut lors des
nouvelles installations</p></li>
<li><p>Possibilit√© de limiter la recherche de lieux √† un ou plusieurs pays
avec le param√®tre <code class="docutils literal notranslate"><span class="pre">OSM_RESTRICT_COUNTRY_CODES</span></code> (#2010)</p></li>
<li><p>On ne peut pas fermer un cadre d‚Äôacquisition qui ne contient que
des jeux de donn√©es sans donn√©es</p></li>
<li><p>Rechargement (<code class="docutils literal notranslate"><span class="pre">reload</span></code>) automatique de GeoNature quand on modifie la
configuration de GeoNature (#2045)</p></li>
<li><p>Red√©marrage (<code class="docutils literal notranslate"><span class="pre">restart</span></code>) automatique du worker Celery lors du
red√©marrage de GeoNature (#2045)</p></li>
<li><p>Synth√®se : ajout d‚Äôun message lors du chargement des donn√©es
(#1637)</p></li>
<li><p>Cartes : Faire remonter la g√©om√©trie de l‚Äôobjet selectionn√© dans la
liste (#2036)</p></li>
<li><p>Ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code>, suite √† la suppression du
param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> (#1635)</p></li>
<li><p>[Metadonn√©es] Formulaire des CA : correction de la saisie des CA
parents (#2097)</p></li>
<li><p>[Accueil] Am√©lioration du formatage des nombres dans le bloc de
statistiques (#2085)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Remise en place de la rotation automatique des fichiers de logs
(#1627)</p></li>
<li><p>[OCCTAX] Ajout des valeurs par d√©faut des nomenclatures au niveau
de la base de donn√©es (#1857)</p></li>
<li><p>[OCCTAX] Correction d‚Äôun bug d‚Äô√©dition de g√©om√©trie non pris en
compte</p></li>
<li><p>Map List: √† la selection d‚Äôune ligne dans le tableau, placement de
la g√©om√©trie correspondante au dessus des autres g√©om√©tries (#2036)</p></li>
<li><p>Correction de l‚ÄôURL pour la mise √† jour des mots de passe (#1620)</p></li>
<li><p>Statistiques sur la page d‚Äôaccueil : utilisation des bonnes
permissions (action R du module SYNTHESE). Les donn√©es et la carte
sont masqu√©es si les permissions sont manquantes.</p></li>
<li><p>Am√©lioration du responsive de la page d‚Äôaccueil (#1682)</p></li>
<li><p>Correction de l‚Äôint√©gration des r√©gions quand GeoNature n‚Äôest pas
install√© avec la projection 2154 (#1695)</p></li>
<li><p>[Occtax] Correction de l‚Äôaffichage de la liste tronqu√©e des
habitats (#1701)</p></li>
<li><p>Correction du style des tooltips (#1775)</p></li>
<li><p>[Validation] Correction du filtre par observations disposant d‚Äôun
m√©dia (#1757)</p></li>
<li><p>[Validation] Chargement des observations ayant un UUID uniquement</p></li>
<li><p>[Synth√®se] Am√©lioration de la liste dans la recherche des taxons
(#1803)</p></li>
<li><p>Correction des URL et redirection de renouvellement du mot de passe
(#1810 / #1620)</p></li>
<li><p>Correction du CSS du bloc introduction de la page d‚Äôaccueil
(#1824)</p></li>
<li><p>Suppression de l‚Äôacc√®s √† la gestion du compte pour l‚Äôutilisateur
¬´¬†public¬†¬ª (#1844)</p></li>
<li><p>R√©duction du niveau de logs de l‚Äôoutil Fiona pour am√©liorer les
performances des exports en format SIG (#1875)</p></li>
<li><p>Correction de la concat√©nation des champs additionnels au niveau des
triggers de Occtax vers Synth√®se et correction des donn√©es dans la
Synth√®se (#1467)</p></li>
<li><p>Correction des donn√©es dans la Synth√®se suite au probl√®me
d‚Äôenregistrement des d√©nombrements dans Occtax, corrig√© dans la
version 2.9.0 (#1479)</p></li>
<li><p>Correction des triggers de Occtax vers Synth√®se lors de la
modification de d√©nombrements multiples et correction des donn√©es
dans la Synth√®se (#1821)</p></li>
<li><p>Modification du script de d√©marrage <code class="docutils literal notranslate"><span class="pre">systemd</span></code> pour lancer GeoNature
et son worker Celery apr√®s PostgreSQL (#1970)</p></li>
<li><p>Correction de l‚Äôinstallation de psycopg2 (#1994)</p></li>
<li><p>Correction de la route de r√©cup√©ration des jeux de donn√©es quand on
lui passe plusieurs filtres</p></li>
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code> en cas
de valeurs nulles</p></li>
<li><p>[OCCTAX] Correction d‚Äôun bug d‚Äô√©dition de g√©om√©trie non pris en
compte (#2023)</p></li>
<li><p>[OCCTAX] Correction de l‚Äôaffichage des dates en utilisant l‚ÄôUTC
pour √©viter les soucis de fuseaux horaires diff√©rents entre le
serveur et le navigateur de l‚Äôutilisateur (#2005)</p></li>
<li><p>[M√©tadonn√©es] Correction de l‚Äôaffichage des boutons de cr√©ation
d‚Äôun JDD et d‚Äôun CA seulement si l‚Äôutilisateur en a les droits
(#1822)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Mise √† jour d‚ÄôAngular de la version 7 √† 12 √† r√©percuter dans les
modules sp√©cifiques (<a class="reference external" href="https://update.angular.io/?v=7.2-12.0">https://update.angular.io/?v=7.2-12.0</a>)</p></li>
<li><p>Mise √† jour des d√©pendances backend et frontend</p></li>
<li><p>Mise √† jour de Flask version 1.1 √† 2.2</p></li>
<li><p>Routage dynamique des modules, supprimant la n√©cessit√© de g√©n√©rer le
fichier de routage du frontend (#2059)</p></li>
<li><p>Ajout de Celery pour les traitements asynchrones</p></li>
<li><p>Possibilit√© de configurer GeoNature avec un fichier python en
d√©finissant le nom du module dans la variable d‚Äôenvironnement
<code class="docutils literal notranslate"><span class="pre">GEONATURE_SETTINGS</span></code></p></li>
<li><p>Utilisation de la pagination fournit par Flask-SQLAlchemy pour
<code class="docutils literal notranslate"><span class="pre">get_color_taxon()</span></code></p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_exports.t_config_export</span></code> et du sch√©ma
<code class="docutils literal notranslate"><span class="pre">gn_exports</span></code> cr√©√©s par GeoNature (si le module Export n‚Äôest pas
d√©j√† install√©) (#1642)</p></li>
<li><p>Suppression des commandes GeoNature <code class="docutils literal notranslate"><span class="pre">dev-front</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend-build</span></code>
(#1800, #2088) :</p></li>
<li><p>R√©tablissement de l‚Äôutilisation de <code class="docutils literal notranslate"><span class="pre">nvm</span></code> pour installer NodeJS
(#1726)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">default-config</span></code></p></li>
<li><p>Externalisation du <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>, de son sch√©ma de donn√©es et de ses
mod√®les en tant que module ind√©pendant dans un d√©p√¥t d√©di√© (#228)</p></li>
<li><p>Int√©gration des r√©gions par d√©faut lors de l‚Äôinstallation de
GeoNature</p></li>
<li><p>Am√©lioration des composants frontend DynamicForm</p></li>
<li><p>Possibilit√© de filtrer le composant frontend ¬´¬†nomenclature¬†¬ª par
r√®gne ou Goup2INPN</p></li>
<li><p>Am√©lioration du style des tooltips (#1717)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">refresh-rules-cache</span></code>
pour rafraichir la vue mat√©rialis√©
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules_cd_ref</span></code> (√† lancer √† chaque
modification de r√®gles dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules</span></code>)</p></li>
<li><p>La configuration du module n‚Äôest pas √©cras√©e lors d‚Äôune
r√©installation de ce dernier</p></li>
<li><p>Suppression de la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_decode_nomenclatures</span></code></p></li>
<li><p>G√©n√©ration automatique de la documentation quand on publie une
nouvelle version</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">ref_geo</span> <span class="pre">info</span></code> qui compte le nombre
de zonages par type</p></li>
<li><p>Suppression des d√©pendances ¬´¬†geog¬†¬ª et ¬´¬†numpy¬†¬ª en utilisation la
fonction PostGIS <code class="docutils literal notranslate"><span class="pre">ST_DWithin</span></code> pour la recherche par cercle (#1972)</p></li>
<li><p>La variable d‚Äôenvironnement <code class="docutils literal notranslate"><span class="pre">DATA_DIRECTORY</span></code> permet de d√©finir un
dossier pour la mise en cache et r√©utilisation des ressources
t√©l√©charg√©es lors de la cr√©ation de la base de donn√©es</p></li>
<li><p>Chargement de la configuration des modules packag√©s directement lors
de l‚Äôimport du module <code class="docutils literal notranslate"><span class="pre">config</span></code> (avant m√™me l‚Äôappel √† <code class="docutils literal notranslate"><span class="pre">create_app</span></code>)
(#2055)</p></li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;antoinececchimnhn / &#64;TheoLechemia / &#64;jpm-cbna /
&#64;mvergez / &#64;ophdlv / &#64;Adrien-Pajot / &#64;Gaetanbrl / &#64;pierrejego /
&#64;jbrieuclp / &#64;amandine-sahl / &#64;joelclems / &#64;metourneau /
&#64;gildeluermoz / &#64;camillemonchicourt</p>
</section>
<section id="id20">
<h2>2.9.2 (2022-02-15)<a class="headerlink" href="#id20" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Optimisation du nombre d‚Äôinformations renvoy√©es par l‚ÄôAPI pour les
utilisateurs et les organismes</p></li>
<li><p>Ajout d‚Äôune commande pour relancer le calcul de la sensibilit√©,
utile en cas de modification du r√©f√©rentiel de sensibilit√© :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">update-synthese</span></code>. Elle s‚Äôappuie sur la
fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code>.</p></li>
<li><p>Le niveau de diffusion dans la synth√®se n‚Äôest plus calcul√©
automatiquement √† partir du niveau de sensibilit√© (#1711)</p></li>
<li><p>Le niveau de sensibilit√© tient compte du comportement de
l‚Äôoccurrence (<code class="docutils literal notranslate"><span class="pre">OCC_COMPORTEMENT</span></code>), en plus du statut biologique
(<code class="docutils literal notranslate"><span class="pre">STATUT_BIO</span></code>)</p></li>
<li><p>Optimisation du recalcul de la sensibilit√© lors de la mise √† jour de
la synth√®se (trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>)</p></li>
<li><p>Ajout de tests unitaires sur les fonctions de calcul de la
sensibilit√©</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôune r√©gression sur la r√©cup√©ration de la liste des
taxons (#1672)</p></li>
<li><p>Correction de l‚Äôauthentification au CAS de l‚ÄôINPN</p></li>
<li><p>Correction du calcul de la sensibilit√© (#1284) :</p>
<ul>
<li><p>Gestion correcte de la pr√©sence de plusieurs r√®gles avec et sans
crit√®re statut biologique</p></li>
<li><p>Utilisation de la r√®gle la plus sensible quand plusieurs r√®gles
s‚Äôappliquent</p></li>
</ul>
</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>La correction de la fonction de calcul de la sensibilit√© est suivie
d‚Äôun recalcul automatique du niveau de sensibilit√© des donn√©es
pr√©sentes dans la synth√®se. Si vous ne souhaitez pas proc√©der √† ce
recalcul, ajoutez le param√®tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">recompute-sensitivity=false</span></code> lors
de la mise √† jour de la base de donn√©es avec la commande
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code> (lanc√©e automatiquement par le script
<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x recompute-sensitivity=false
</pre></div>
</div>
</li>
<li><p>Le niveau de diffusion des donn√©es dans la synth√®se est remis √†
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> si celui-ci √©quivaut au niveau de sensibilit√©. Seuls les
niveaux de diffusion qui diff√©rent sont laiss√©s intacts. Si vous
souhaitez rectifier vous-m√™mes vos niveaux de diffusion et ne pas
les remettre √† <code class="docutils literal notranslate"><span class="pre">NULL</span></code> quand ils sont √©quivalents au niveau de
sensibilit√©, vous pouvez ajouter le param√®tre
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">clear-diffusion-level=false</span></code> lors de la mise √† jour de la base
de donn√©es :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x clear-diffusion-level=false
</pre></div>
</div>
<p>Si vous redescendez √† l‚Äô√©tat ant√©rieur de votre base de donn√©es, les
niveaux de diffusion seront restaur√©s √† partir du niveau de
sensibilit√© ; vous pouvez √©viter ceci avec
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">restore-diffusion-level=false</span></code>.</p>
</li>
</ul>
</section>
<section id="id21">
<h2>2.9.1 (2022-01-27)<a class="headerlink" href="#id21" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Utilisation du param√®tre <code class="docutils literal notranslate"><span class="pre">page</span></code> de Flask √† la place du param√®tre
maison <code class="docutils literal notranslate"><span class="pre">offset</span></code> pour la pagination des routes (r√©tro-compatible)</p></li>
<li><p>Installation de TaxHub en version 1.9.4 (version corrective) par
d√©faut</p></li>
<li><p>Ajout du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code> (par d√©faut
<code class="docutils literal notranslate"><span class="pre">GN</span></code>) (#1635)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚ÄôURL de r√©initialisation de mot passe envoy√©e par
email (#1620)</p></li>
<li><p>Correction d‚Äôun probl√®me d‚Äôauthentification avec le CAS</p></li>
<li><p>Occtax : Correction des listes d√©roulantes masqu√©es dans le bloc
d√©nombrement, en rajoutant un scroll</p></li>
<li><p>Correction de l‚ÄôURL de l‚ÄôAPI de TaxHub (slash final manquant) pour
l‚Äôaffichage des photos sur la fiche d‚Äôun profil de taxon</p></li>
<li><p>Correction de la synchronisation des m√©tadonn√©es depuis MTD</p></li>
<li><p>Correction de la g√©n√©ration du token quand on utilise le CAS de
l‚ÄôINPN pour se connecter √† GeoNature</p></li>
<li><p>Correction des permissions trop restrictives d‚Äôacc√®s aux donn√©es de
la synth√®se</p></li>
<li><p>Correction de la pagination de la route <code class="docutils literal notranslate"><span class="pre">/color_taxon</span></code> en rajoutant
un ordonnancement par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> et <code class="docutils literal notranslate"><span class="pre">id_area</span></code> (utilis√© par
Occtax-mobile)</p></li>
<li><p>Contournement d‚Äôun probl√®me de redirection incorrecte par l‚ÄôAPI de
TaxHub lorsque celui-ci est mal configur√© (#1438, #1616)</p></li>
</ul>
</section>
<section id="actias-luna-2022-01-13">
<h2>2.9.0 - Actias luna ü¶ã (2022-01-13)<a class="headerlink" href="#actias-luna-2022-01-13" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Profils de taxons</strong></p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Construction automatique d‚Äôune fiche d‚Äôidentit√© (profil) par taxon
gr√¢ce aux observations valid√©es pr√©sentes dans la base de donn√©es
(altitude min/max, distribution spatiale, date de premi√®re/derni√®re
observation, nombre de donn√©es valides, ph√©nologie) (#917 par
&#64;DonovanMaillard, &#64;lepontois, &#64;Adrien-Pajot, &#64;TheoLechemia,
&#64;bouttier, &#64;amandine-sahl, &#64;jpm-cbna)</p>
<ul>
<li><p>Cr√©ation d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_profiles</span></code> dans la BDD contenant les
tables, les vues, les fonctions et les param√®tres de calcul des
profils de taxons
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql">https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql</a>)
(#1103)</p></li>
<li><p>Mise en place de l‚ÄôAPI des profils de taxons (#1104)</p></li>
<li><p>Affichage des scores de chaque observation par rapport au profil
du taxon dans la liste des observations du module Validation,
ainsi que dans les fiches d√©tails des observations dans les
modules Synth√®se et Validation (#1105)</p></li>
<li><p>Ajout de filtres des observations par score ou crit√®re des
profils de taxon dans le module Validation (#1105)</p></li>
<li><p>Ajout d‚Äôune alerte de contextualisation d‚Äôune observation par
rapport au profil de taxon, lors de sa saisie dans le module
Occtax</p></li>
<li><p>Mise en place de param√®tres pour activer ou non les profils de
taxons, param√©trer leurs r√®gles et d√©finir les statut de
validation pris en compte pour le calcul des profils
(¬´¬†Certain-tr√®s probable¬†¬ª et ¬´¬†Probable¬†¬ª par d√©faut)</p></li>
<li><p>Documentation des profils de taxons et de leur param√®trage
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#profils-de-taxons">https://docs.geonature.fr/admin-manual.html#profils-de-taxons</a>)</p></li>
<li><p>Suppression de la vue mat√©rialis√©e
<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code> et de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon()</span></code> qui n‚Äô√©taient
pas utilis√©es</p></li>
</ul>
</li>
<li><p>[OCCTAX] Ajout d‚Äôun bouton permettant d‚Äôannuler la modification
d‚Äôun taxon (#1508 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Ajout de valeurs par d√©faut aux champs additionnels
(<code class="docutils literal notranslate"><span class="pre">gn_commons.t_additional_fields.default_value</span></code>)</p></li>
<li><p>[OCCTAX] Ajout d‚Äôun filtre avanc√© par <code class="docutils literal notranslate"><span class="pre">id_releve</span></code></p></li>
<li><p>[SYNTHESE] Ajout d‚Äôun filtre avanc√© par UUID d‚Äôobservation
(#973)</p></li>
<li><p>Am√©lioration des listes d√©roulantes en passant √† la librairie
<code class="docutils literal notranslate"><span class="pre">ng-select2</span></code> pour les composants multiselects (#616
par &#64;jbrieuclp)</p></li>
<li><p>Gestion du r√©f√©rentiel des r√©gions par Alembic (#1475)</p></li>
<li><p>Ajout des anciennes r√©gions (1970-2016), inactives par d√©faut, mais
utiles pour les r√®gles r√©gionales de sensibilit√©</p></li>
<li><p>Gestion du r√©f√©rentiel de sensibilit√© (r√®gles nationales et
r√©gionales) par Alembic (#1576)</p></li>
<li><p>Ajout d‚Äôune documentation sur le calcul de la sensibilit√© des
observations
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite">https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite</a>,
par &#64;mvergez)</p></li>
<li><p>[SYNTHESE] Am√©lioration de la fen√™tre de limite d‚Äôaffichage
atteinte (#1520 par &#64;jpm-cbna)</p></li>
<li><p>[OCCHAB] Utilisation de tout Habref par d√©faut si aucune liste
d‚Äôhabitats n‚Äôest renseign√©e dans la configuration du module</p></li>
<li><p>[METADONNEES] Attribuer des droits √† un utilisateur sur un JDD si
il a des droits sur son cadre d‚Äôacquisition</p></li>
<li><p>Association automatique et param√©trable des jeux de donn√©es
personnels auto-g√©n√©r√©s √† des modules (Occtax par d√©faut) (#1555)</p></li>
<li><p>Utilisation du C du CRUVED de l‚Äôutilisateur pour lister les jeux de
donn√©es dans lesquels il peut ajouter des donn√©es dans les
diff√©rents modules (et non plus le R du CRUVED sur GeoNature)
(#659)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[OCCTAX] Correction de l‚Äôenregistrement des d√©nombrements lors de
l‚Äôenchainement des relev√©s (#1479 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Correction du filtre du champs ¬´¬†Habitat¬†¬ª par typologie
d‚Äôhabitat</p></li>
<li><p>[ADMIN] Correction de l‚Äôaffichage du module (#1427
par &#64;jbrieuclp)</p></li>
<li><p>[ADMIN] S√©curisation du module (#839)</p></li>
<li><p>[VALIDATION] Corrections de la validation des observations (#1485
/ #1529)</p></li>
<li><p>[METADONNEES] Am√©lioration des performances (#1559)</p></li>
<li><p>[METADONNEES] Correction de la suppression des JDD</p></li>
<li><p>[METADONNEES] Correction de l‚Äôexport PDF des JDD (#1544)</p></li>
<li><p>[METADONNEES] Correction des permissions (#1528)</p></li>
<li><p>[METADONNEES] Correction de la recherche avanc√©e</p></li>
<li><p>[SYNTHESE] Correction de la recherche sur les champs g√©n√©riques de
type nombre entier (#1519 par &#64;jpm-cbna)</p></li>
<li><p>[SYNTHESE] Correction des permissions</p></li>
<li><p>[SYNTHESE] Correction du lien entre les filtres CA et JDD (#1530)</p></li>
<li><p>[OCCHAB] Correction du chargement de la configuration, des fiches
info et de la modification d‚Äôune station</p></li>
<li><p>[METADONNEES] Am√©liorations des performances et des contr√¥les du
formulaire des acteurs pour les JDD et les CA (par &#64;joelclems)</p></li>
<li><p>Correction de la redirection vers le formulaire de login en cas de
cookie corrompu (#1550 par &#64;antoinececchimnhn)</p></li>
<li><p>Correction de la cr√©ation de compte utilisateur (#1527)</p></li>
<li><p>Mise √† jour du module Habref-api-module pour corrections de
certaines donn√©es d‚ÄôHabref</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Migration vers la librairie <code class="docutils literal notranslate"><span class="pre">gn-select2</span></code> pour les listes d√©roulantes
des formulaires (#616 / #1285 par &#64;jbrieuclp)</p></li>
<li><p>Documentation de d√©veloppement backend revue et compl√©t√©e (#1559,
<a class="reference external" href="https://docs.geonature.fr/development.html#developpement-backend">https://docs.geonature.fr/development.html#developpement-backend</a>)</p></li>
<li><p>Am√©lioration de nombreuses routes et fonctions du backend</p></li>
<li><p>Ajouts de tests automatis√©s du backend</p></li>
<li><p>Mise en place d‚Äôune int√©gration continue pour ex√©cuter
automatiquement les tests backend et leur couverture de code avec
GitHub Actions, √† chaque commit ou pull request dans les branches
<code class="docutils literal notranslate"><span class="pre">develop</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code> (#1568,
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/actions">https://github.com/PnX-SI/GeoNature/actions</a>)</p></li>
<li><p>[VALIDATION] Suppression des vues SQL et optimisation des routes</p></li>
<li><p>G√©n√©ration automatique et al√©atoire du param√®tre <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p>[SYNTHESE] Remplacement de <code class="docutils literal notranslate"><span class="pre">as_literal</span></code> par <code class="docutils literal notranslate"><span class="pre">json.loads</span></code>, plus
performant (par &#64;antoinececchimnhn)</p></li>
<li><p>Possibilit√© de filter la route <code class="docutils literal notranslate"><span class="pre">synthese/taxa_distribution</span></code> par
<code class="docutils literal notranslate"><span class="pre">id_source</span></code> (#1446 par &#64;mvergez)</p></li>
<li><p>Factorisation du composant <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code> avec le composant
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Ajout du composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> dans dynamic-form</p></li>
<li><p>Ajout d‚Äôun input <code class="docutils literal notranslate"><span class="pre">valueFieldName</span></code> aux composants <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code>.</p></li>
<li><p>Mise √† jour de nombreuses d√©pendances</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>La liste des JDD dans les modules de saisie (Occtax, Occhab,
Monitoring et Import) se base d√©sormais sur le C du CRUVED de
l‚Äôutilisateur au niveau du module (ou du C du CRUVED de GeoNature
si l‚Äôutilisateur n‚Äôa pas de CRUVED sur le module), au lieu du R de
GeoNature jusqu‚Äô√† pr√©sent. Vous devrez donc potentiellement adapter
vos permissions √† ce changement de comportement (#659)</p></li>
<li><p>Si vous avez surcouch√© le param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code>
de la section <code class="docutils literal notranslate"><span class="pre">[SYNTHESE]</span></code>, veuillez remplacer <code class="docutils literal notranslate"><span class="pre">id_type</span></code> par
<code class="docutils literal notranslate"><span class="pre">type_code</span></code> (voir <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">id_type</span> <span class="o">=</span> <span class="mi">25</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">type_code</span> <span class="o">=</span> <span class="s2">&quot;COM&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Si vous aviez modifi√© les colonnes de la liste des observations du
module Validation en adaptant la vue
<code class="docutils literal notranslate"><span class="pre">gn_validation.v_synthese_validation_forwebapp</span></code>, celle-ci a √©t√©
supprim√©e et il suffit d√©sormais d‚Äôindiquer les colonnes souhait√©es
dans la configuration du module. Voir documentation
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles">http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles</a>)</p></li>
<li><p>Les nouvelles fonctionnalit√©s li√©es aux profils de taxons
n√©cessitent de rafraichir des vues materialis√©es √† intervalles
r√©guliers et donc de cr√©er une t√¢che planfi√©e (cron). Voir
documentation
(<a class="reference external" href="https://docs.geonature.fr/installation.html#taches-planifiees">https://docs.geonature.fr/installation.html#taches-planifiees</a>)</p></li>
<li><p>Les r√©gions sont maintenant disponibles via des migrations Alembic.
Si vous poss√©dez d√©j√† les r√©gions, vous pouvez l‚Äôindiquer √† Alembic
:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_geo@head
geonature db stamp d02f4563bebe
</pre></div>
</div>
</li>
<li><p>Le r√©f√©rentiel de sensibilit√© est d√©sormais disponible via une
migration Alembic. Celui-ci n√©cessite le r√©f√©rentiel des r√©gions
(branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions</span></code>), ainsi que le r√©f√©rentiel des
anciennes r√©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions_1970</span></code>) ‚Äì
l‚Äôinstallation de ces r√©f√©rentiels est automatique avec
l‚Äôinstallation des r√®gles de sensibilit√©.</p>
<ul>
<li><p>Si vous poss√©dez d√©j√† le r√©f√©rentiel, vous pouvez l‚Äôindiquer √†
Alembic :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db stamp 7dfd0a813f86
</pre></div>
</div>
</li>
<li><p>Si vous avez install√© GeoNature 2.8.X, le r√©f√©rentiel de
sensibilit√© n‚Äôa pas √©t√© install√© automatiquement. Vous pouvez
l‚Äôinstaller manuellement :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_sensitivity_inpn@head
</pre></div>
</div>
</li>
</ul>
<p>Par d√©faut, seule les r√®gles nationales sont activ√©es, vous laissant
le soin d‚Äôactiver vos r√®gles locales en base vous-m√™me. Vous pouvez
√©galement demander, lors de l‚Äôinstallation du r√©f√©rentiel, √† activer
(resp. d√©sactiver) toutes les r√®gles en ajout √† la commande Alembic
l‚Äôoption <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=true</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=false</span></code>).</p>
</li>
<li><p>Si vous souhaitez surcoucher les param√®tres par d√©faut de Gunicorn
(app_name, timeout‚Ä¶), depuis le passage √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code> dans la
version 2.8.0, c‚Äôest d√©sormais √† faire dans un fichier <code class="docutils literal notranslate"><span class="pre">environ</span></code> √†
la racine du dossier de votre GeoNature (#1588,
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#parametres-gunicorn">https://docs.geonature.fr/admin-manual.html#parametres-gunicorn</a>)</p></li>
<li><p>Si vous les utilisez, mettez √† jour les modules Import, Export et
Monitoring dans leurs derni√®res versions compatibles avec le version
2.9.0 de GeoNature</p></li>
</ul>
</section>
<section id="id22">
<h2>2.8.1 (2021-10-17)<a class="headerlink" href="#id22" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout de l‚Äôindication du d√©partement au formulaire des communes
(#1480)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">group2inpn</span></code> et <code class="docutils literal notranslate"><span class="pre">regne</span></code> au formulaire des
nomenclatures (#1481)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
<li><p>Mise-√†-jour corrective de <a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.7">UsersHub-authentification-module
1.5.7</a></p></li>
</ul>
</section>
<section id="vaccinium-myrtillus-2021-10-18">
<h2>2.8.0 - Vaccinium myrtillus üåø (2021-10-18)<a class="headerlink" href="#vaccinium-myrtillus-2021-10-18" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Gestion de la base de donn√©es avec Alembic</strong></p>
<p>‚ö†Ô∏è Avant de mettre √† jour GeoNature, v√©rifiez que les modules que vous
utilisez disposent d‚Äôune version compatible avec la 2.8.0, suite au
passage √† la version 3 de Marshmallow.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Support de Debian 11 / Python 3.9</p></li>
<li><p>Passage de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code></p></li>
<li><p>Gestion de la base de donn√©es et de ses √©volutions avec Alembic
(#880)</p></li>
<li><p>Mise √† jour de la proc√©dure d‚Äôinstallation afin d‚Äôutiliser Alembic
(#880)</p></li>
<li><p>R√©vision et r√©organisation des scripts et de la documentation
d‚Äôinstallation</p></li>
<li><p>Passage √† la version 3 de Marshmallow (#1451)</p></li>
<li><p>Suppression du param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code>, celui-ci est automatiquement
d√©termin√© √† partir de la base de donn√©es et du code de l‚Äôapplication</p></li>
<li><p>Ajout d‚Äôun index sur le champs <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code></p></li>
<li><p>Mise √† jour des d√©pendances</p>
<ul>
<li><p><a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub
1.9.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.6">UsersHub-authentification-module
1.5.6</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/releases/tag/1.4.4">Nomenclature-api-module
1.4.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Habref-api-module/releases/tag/0.2.0">Habref-api-module
0.2.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy/releases/tag/0.2.4">Utils-Flask-SQLAlchemy
0.2.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo/releases/tag/0.2.1">Utils-Flask-SQLAlchemy-Geo
0.2.1</a></p></li>
</ul>
</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Corrections et am√©liorations des formulaires dynamiques et des
champs additionnels</p></li>
<li><p>Correction de l‚Äôenvoi d‚Äôemail lors de la r√©cup√©ration du mot de
passe (#1471)</p></li>
<li><p>Occtax : Correction du focus sur le champs ¬´¬†taxon¬†¬ª quand on
enchaine les taxons (#1462)</p></li>
<li><p>Occtax : Correction du formulaire de modification quand le relev√©
est une ligne ou un polygone (#1461)</p></li>
<li><p>Occtax : Correction de la conservation de la date quand on enchaine
les relev√©s (#1442)</p></li>
<li><p>Occtax : Correction du param√®tre d‚Äôexport des champs additionnels
(#1440)</p></li>
<li><p>Synth√®se : correction de la recherche par jeu de donn√©es (#1494)</p></li>
<li><p>Correction de l‚Äôaffichage des longues listes d√©roulantes dans les
champs additionnels (#1442)</p></li>
<li><p>Mise √† jour de la table <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> lors de l‚Äôajout de
nouvelles zones via un trigger sur la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1433)</p></li>
<li><p>Correction de l‚Äôexport PDF des fiches de m√©tadonn√©es (#1449)</p></li>
<li><p>Jeux de donn√©es : correction de l‚Äôaffichage des imports sources</p></li>
<li><p>Correction de la configuration Apache et de la gestion par flask
d‚Äôun GeoNature accessible sur un pr√©fix (e.g. <code class="docutils literal notranslate"><span class="pre">/geonature</span></code>) (#1463)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
<li><p>Correction des champs additionnels de type boutons radios (#1464 et
#1472)</p></li>
<li><p>Occtax : Correction du contr√¥le des heures quand on est sur 2 mois
distincts (#1468)</p></li>
<li><p>Suppression de nombreux identifiants en dur dans les scripts SQL de
cr√©ation de la BDD</p></li>
<li><p>Correction du trigger d‚ÄôOcctax vers la Synth√®se pour le champs
<code class="docutils literal notranslate"><span class="pre">Comportement</span></code> (#1469)</p></li>
<li><p>Correction des fonctions <code class="docutils literal notranslate"><span class="pre">get_default_nomenclature_value</span></code></p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> (#1488)</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> pour r√©cup√©rer le fichier
<code class="docutils literal notranslate"><span class="pre">custom.scss</span></code> depuis son nouvel emplacement (#1430)</p></li>
<li><p>Correction du param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code></p></li>
<li><p>M√©tadonn√©es : Suppression en cascade sur les tables
<code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_territory</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_protocol</span></code>
(#1452)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code> :
rechargement des entry points apr√®s installation avec pip d‚Äôun
module packag√©</p></li>
<li><p>Correction d‚Äôun bug lors de l‚Äôajout d‚Äôun cadre d‚Äôacquisition</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Mise √† jour de plusieurs d√©pendances</p></li>
<li><p>Packetage des modules fournis avec GeoNature</p></li>
<li><p>L‚Äôutilisateur connect√© est maintenant accessible via
<code class="docutils literal notranslate"><span class="pre">g.current_user</span></code></p></li>
<li><p>Nettoyage et refactoring divers</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Mettre √† jour <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases/tag/2.2.1">UsersHub en version
2.2.1</a> et
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub en version
1.9.0</a> (si vous
les utilisez) <strong>en sautant leur √©tape de passage √† Alembic</strong> (car la
mise √† jour de GeoNature se charge d√©sormais de mettre √† jour aussi
les sch√©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>)</p></li>
<li><p>Suppression de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> :</p>
<ul class="simple">
<li><p>Stopper GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">stop</span> <span class="pre">geonature2</span></code></p></li>
<li><p>Supprimer le fichier de configuration supervisor de GeoNature :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code></p></li>
<li><p>Si supervisor n‚Äôest plus utilis√© par aucun service (r√©pertoire
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/</span></code> vide), il peut √™tre d√©sinstall√©
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span> <span class="pre">supervisor</span></code>)</p></li>
</ul>
</li>
<li><p>Suivre la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Passage √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code> :</p>
<ul class="simple">
<li><p>Copier le fichier <code class="docutils literal notranslate"><span class="pre">install/assets/geonature.service</span></code> dans
<code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code></p></li>
<li><p>√âditer <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/geonature.service</span></code> et remplacer les
variables <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> (votre utilisateur linux courant) et
<code class="docutils literal notranslate"><span class="pre">${BASE_DIR}</span></code> (chemin absolu du r√©pertoire de GeoNature) par les
valeurs appropri√©es</p></li>
<li><p>Lancer la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code></p></li>
<li><p>Pour d√©marrer GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">geonature</span></code></p></li>
<li><p>Pour lancer GeoNature automatiquement au d√©marrage du serveur :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">geonature</span></code></p></li>
</ul>
</li>
<li><p>Correction de la configuration Apache : si vous servez GeoNature sur
un pr√©fixe (typiquement <code class="docutils literal notranslate"><span class="pre">/geonature/api</span></code>), assurez vous que ce
pr√©fixe figure bien √©galement √† la fin des directives <code class="docutils literal notranslate"><span class="pre">ProxyPass</span></code> et
<code class="docutils literal notranslate"><span class="pre">ProxyPassReverse</span></code> comme dans l‚Äôexemple suivant :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/geonature/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/geonature/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/geonature/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Si vous servez GeoNature sur un sous-domaine, v√©rifiez ou modifier
la configuration Apache :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Pensez √† recharger Apache si vous √™tes amen√© √† en changer la
configuration : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">reload</span> <span class="pre">apache2</span></code></p>
</li>
<li><p>Passage √† Alembic :</p>
<ul class="simple">
<li><p>S‚Äôassurer d‚Äôavoir une base de donn√©es de GeoNature en version
2.7.5</p></li>
<li><p>Si vous avez UsersHub install√©, ajoutez dans votre configuration
GeoNature la section suivante (en adaptant le chemin) :</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ALEMBIC]</span>
<span class="na">VERSION_LOCATIONS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;/path/to/usershub/app/migrations/versions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Entrer dans le virtualenv afin d‚Äôavoir la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
disponible : <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">backend/venv/bin/activate</span></code></p></li>
<li><p>Ex√©cuter les commandes suivantes afin d‚Äôindiquer √† Alembic
l‚Äô√©tat de votre base de donn√©es :</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>f06cc80cc8ba<span class="w">  </span><span class="c1"># GeoNature 2.7.5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>0dfdbfbccd63<span class="w">  </span><span class="c1"># r√©f√©rentiel g√©ographique des communes</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>3fdaa1805575<span class="w">  </span><span class="c1"># r√©f√©rentiel g√©ographique des d√©partements</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>586613e2faeb<span class="w">  </span><span class="c1"># r√©f√©rentiel g√©ographique des mailles 1√ó1</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>7d6e98441e4c<span class="w">  </span><span class="c1"># r√©f√©rentiel g√©ographique des mailles 5√ó5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>ede150d9afd9<span class="w">  </span><span class="c1"># r√©f√©rentiel g√©ographique des mailles 10√ó10</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>1715cf31a75d<span class="w">  </span><span class="c1"># MNT de l‚ÄôIGN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si vous aviez d√©j√† intall√© certains modules, vous devez
l‚Äôindiquer √† Alembic :</p>
<ul>
<li><p>Module <em>Occtax</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">f57107d2d0ad</span></code></p></li>
<li><p>Module <em>Occhab</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">2984569d5df6</span></code></p></li>
</ul>
</li>
<li><p>Mettre sa base de donn√©es √† jour avec Alembic :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
</ul>
<p>Pour plus d‚Äôinformation sur l‚Äôutilisation d‚ÄôAlembic, voir la
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#administration-avec-alembic">documentation administrateur de
GeoNature</a>.</p>
</li>
</ul>
</section>
<section id="id23">
<h2>2.7.5 (2021-07-28)<a class="headerlink" href="#id23" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Compatibilit√© avec Occtax-mobile 1.3. Possibilit√© d‚Äôajouter la
query string <code class="docutils literal notranslate"><span class="pre">fields</span></code> sur la route <code class="docutils literal notranslate"><span class="pre">meta/datasets</span></code> pour choisir les
champs renvoy√©s par l‚ÄôAPI</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id24">
<h2>2.7.4 (2021-07-23)<a class="headerlink" href="#id24" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun import manquant entrainant un probl√®me de
compilation du frontend (#1424)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id25">
<h2>2.7.3 (2021-07-22)<a class="headerlink" href="#id25" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>M√©tadonn√©es : ajout des param√®tres <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_DS</span></code> et
<code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_AF</span></code> pour limiter les r√¥les utilisables au
niveau des jeux de donn√©es et des cadres d‚Äôacquisition (#1417)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">mtd_sync</span></code> qui permet de synchroniser les
m√©tadonn√©es de toute une instance depuis le flux MTD du SINP</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôaffichage des jeux de donn√©es sur les fiches des
cadres d‚Äôacquisition (#1410)</p></li>
<li><p>Doc : Pr√©cision des OS support√©s (Debian 10 uniquement en
production)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Support des commandes Flask au niveau de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
(<code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code>‚Ä¶)</p></li>
<li><p>Ajout des sous-modules en tant que d√©pendances</p></li>
<li><p>Ajout d‚Äôune commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id26">
<h2>2.7.2 (2021-07-05)<a class="headerlink" href="#id26" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>OCCTAX : correction de la v√©rification du CRUVED (#1413)</p></li>
<li><p>OCCTAX : correction du d√©grisement du formulaire au chargement de la
fonctionnalit√© ¬´¬†mes lieux¬†¬ª (#1414)</p></li>
<li><p>OCCTAX : D√©placement des champs additionnels pour les d√©nombrements
avant les m√©dias (#1409)</p></li>
<li><p>Suppression des champs additionnels de type ¬´¬†taxonomy¬†¬ª qui
n‚Äô√©taient pas support√©s</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql</a>)</p></li>
</ul>
</section>
<section id="id27">
<h2>2.7.1 (2021-07-02)<a class="headerlink" href="#id27" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Installation des d√©pendances javascript des modules lors de la
migration de version de GeoNature (#1252)</p></li>
<li><p>Installation de la version 1.8.1 de TaxHub par d√©faut √† la place de
la 1.8.0</p></li>
<li><p>Int√©gration de la documentation permettant de mettre en place
l‚Äôacc√®s public √† GeoNature</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="androsace-delphinensis-2021-06-30">
<h2>2.7.0 - Androsace delphinensis üåº (2021-06-30)<a class="headerlink" href="#androsace-delphinensis-2021-06-30" title="Lien vers cette rubrique">¬∂</a></h2>
<p>N√©cessite la version 1.8.x de TaxHub.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Compatible avec TaxHub 1.8.x qui inclut notamment la migration
(optionnelle) vers Taxref version 14 et l‚Äôajout de la BDC statuts</p></li>
<li><p>Installation globale migr√©e de Taxref version 13 √† 14</p></li>
<li><p>Occtax : Possibilit√© d‚Äôajouter des champs additionels par JDD ou
globaux au module et documentation li√©e (#1007)</p></li>
<li><p>Occtax/Synthese : Ajout des champs additionnels dans les exports
(#1114)</p></li>
<li><p>Occtax/Synthese : Affichage des champs additionnels dans les fiches
info</p></li>
<li><p>Customisation : possibilit√© de changer le CSS sans rebuilder
l‚Äôapplication</p></li>
<li><p>Admin : Cr√©ation d‚Äôun backoffice d‚Äôadministration des champs
additionels (#1007)</p></li>
<li><p>Admin : Cr√©ation d‚Äôune documentation d‚Äôadministration des champs
additionnels (#1007)</p></li>
<li><p>Occtax : Possibilit√© de d√©sactiver la recherche de taxon par liste
(#1315)</p></li>
<li><p>Occtax : Par d√©faut la recherche de taxon n‚Äôinterroge pas une liste
mais tout Taxref, si aucune liste de taxons n‚Äôa √©t√© sp√©cifi√©e dans
la configuration du module Occtax (voir notes de version) (#1315)</p></li>
<li><p>Occtax/Metadonn√©es : possibilit√© d‚Äôassocier une liste de taxons √†
un JDD (impl√©ment√© uniquement dans Occtax) (#1315)</p></li>
<li><p>Occtax : Possibilit√© d‚Äôajouter les infos sur les m√©dias dans les
exports (param√®tre <code class="docutils literal notranslate"><span class="pre">ADD_MEDIA_IN_EXPORT</span></code>) (#1326)</p></li>
<li><p>Occtax : Possibilit√© de param√©trer l‚Äôaffichage des champs du
composant MEDIA dans OCCTAX (param√®tre <code class="docutils literal notranslate"><span class="pre">MEDIA_FIELDS_DETAILS</span></code> -
#1287)</p></li>
<li><p>Occtax : Possibilit√© de filtrer la liste des habitats du formulaire
avec les nouveaux param√®tres <code class="docutils literal notranslate"><span class="pre">ID_LIST_HABITAT</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_TYPO_HABITAT</span></code></p></li>
<li><p>Occtax : Possibilit√© d‚Äôouvrir le module avec un JDD pr√©-selectionn√©
en passant le param√®tre <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code> dans l‚ÄôURL (#1071)</p></li>
<li><p>Accueil : R√©organisation des blocs (#1375)</p></li>
<li><p>Accueil : Ajout d‚Äôun param√®tre controlant la fr√©quence de MAJ du
cache des statistiques de la page d‚Äôaccueil (<code class="docutils literal notranslate"><span class="pre">STAT_BLOC_TTL</span></code>, par
d√©faut 1h: 3600 secondes) (#1320)</p></li>
<li><p>Am√©lioration des performances de r√©cup√©ration des modules et du
CRUVED</p></li>
<li><p>Monitoring : Ajout d‚Äôun trigger garantissant la coh√©rence entre
<code class="docutils literal notranslate"><span class="pre">date_min</span></code> et <code class="docutils literal notranslate"><span class="pre">date_max</span></code> et historisation de la table
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_visit_observer</span></code> (#1247)</p></li>
<li><p>La page d‚Äôauthentification affiche d√©sormais le nom de
l‚Äôapplication (<code class="docutils literal notranslate"><span class="pre">appName</span></code>) d√©fini dans la configuration de GeoNature
(#1277)</p></li>
<li><p>Possibilit√© d‚Äôouvrir l‚Äôacc√®s √† GeoNature sans authentification
(voir documentation d‚Äôadministration) (#1323)</p></li>
<li><p>M√©tadonn√©es : Optimisation du temps de chargement des listes des CA
et JDD (#1291)</p></li>
<li><p>M√©tadonn√©es : Passage de la version 1.3.9 du standard SINP √† la
version 1.3.10 et ajout des champs li√©s dans les formulaires
(#1291)</p></li>
<li><p>M√©tadonn√©es : R√©vision du design la partie ¬´¬†Acteurs¬†¬ª du formulaire
et mise √† part de l‚Äôacteur de type ¬´¬†Contact principal¬†¬ª,
obligatoire dans le standard SINP</p></li>
<li><p>M√©tadonn√©es : Ordonnancement des JDD par leur nom</p></li>
<li><p>M√©tadonn√©es : Ajout de la suppression en cascade au niveau des
tables des CA et des JDD</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun message quand un CA ou JDD n‚Äôa pas
d‚Äôacteur (#1404)</p></li>
<li><p>Synth√®se et validation : Ajout d‚Äôun filtre avanc√©
<code class="docutils literal notranslate"><span class="pre">Poss√®de</span> <span class="pre">des</span> <span class="pre">m√©dias</span></code> (#1179, #1338, #1180)</p></li>
<li><p>Synth√®se : Affichage du contenu json du champs des donn√©es
additionnelles, dans la fiche d√©tail d‚Äôune observation</p></li>
<li><p>Synth√®se : Ajout de la possibilit√© d‚Äôafficher la colonne
¬´¬†Effectif¬†¬ª dans la liste des observations</p></li>
<li><p>DynamicForm : enrichissement des formulaires dynamiques pour les
m√©dias, l‚Äôajout de liens externes</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© de la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">area_code</span></code> dans <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#1270)</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© du champs <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code></p></li>
<li><p>Mise √† jour des versions de nombreuses d√©pendances Python et
Javascript</p></li>
<li><p>Support du gestionnaire d‚Äôerreurs Sentry</p></li>
<li><p>Compression des images</p></li>
<li><p>Ajout d‚Äôun script permettant d‚Äôidentifier les doublons dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/duplicates_deletion</span></code> (#1324)</p></li>
<li><p>Validation : possibilit√© de passer des fonctions dans la liste des
colonnes affich√©es (pour d√©coder une nomenclature)</p></li>
<li><p>Validation : Les param√®tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code> et
<code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> sont regroup√©s en un seul param√®tre
nomm√© <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : Correction d‚Äôun bug sur le champs observateur lors de la
modification d‚Äôun relev√© (#1177)</p></li>
<li><p>Occtax : Renseignement par d√©faut de l‚Äôutilisateur connect√© √† la
cr√©ation d‚Äôun relev√© en mode ¬´¬†observers_txt¬†¬ª (#1292)</p></li>
<li><p>Occtax : D√©placement des boutons d‚Äôaction √† gauche dans la liste
des taxons d‚Äôun relev√© pour √©viter qu‚Äôils soient masqu√©s quand les
noms de taxon sont longs (#1299 et #1337)</p></li>
<li><p>Occtax : Correction de la possibilit√© de modifier un relev√© si U=1
(#1365)</p></li>
<li><p>Occtax : Suppression du zoom quand on localise le relev√© (#1317)</p></li>
<li><p>Occtax : Correction du nombre de lignes affich√©es apr√®s une
recherche</p></li>
<li><p>Occtax : Correction de la suppression d‚Äôun habitat lors de la
modification d‚Äôun relev√© (#1296)</p></li>
<li><p>Occtax : Correction des champs ¬´¬†Habitat¬†¬ª et ¬´¬†Lieu¬†¬ª quand on
enchaine des relev√©s (#1191)</p></li>
<li><p>Occtax : Correction de l‚Äôenchainement des saisies (#1300)</p></li>
<li><p>Occtax : Correction de l‚Äôaffichage des taxons quand le nom est long
(#1299, #1337)</p></li>
<li><p>Occtax : Correction de l‚Äôobservateur par d√©faut en mode
<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code></p></li>
<li><p>Occtax : Correction des messages d‚Äôinformation multiples (#1367)</p></li>
<li><p>Occtax : Correction de la mise √† jour du ¬´¬†digitiser¬†¬ª lors d‚Äôune
√©dition de relev√© (#1392)</p></li>
<li><p>Occtax : Correction du trigger alimentant les observateurs de la
synth√®se depuis Occtax (#1399)</p></li>
<li><p>M√©tadonn√©es : Correction de la suppression d‚Äôun JDD sans donn√©es,
depuis la liste des JDD (#1312)</p></li>
<li><p>M√©tadonn√©es : Correction de la r√©cup√©ration des valeurs de
nomenclature depuis MTD n‚Äôexistant pas dans GeoNature (#1297)</p></li>
<li><p>Authentification : Redirection vers la page login apr√®s une p√©riode
d‚Äôinactivit√© (#1193)</p></li>
<li><p>R√©solution des probl√®mes de permission sur le fichier
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> (#1003)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Possibilit√© d‚Äôutiliser la commande <code class="docutils literal notranslate"><span class="pre">flask</span></code> (eg <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">shell</span></code>)</p></li>
<li><p>Pr√©paration de l‚Äôutilisation d‚ÄôAlembic pour la gestion des
migrations de la structure de la BDD (#880)</p></li>
<li><p>Possibilit√© d‚Äôimporter des modules packag√©s (#1272)</p></li>
<li><p>R√©organisation des fichiers <code class="docutils literal notranslate"><span class="pre">requirements</span></code> et installation des
branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> des d√©pendances du fichier <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></p></li>
<li><p>Simplification de la gestion des erreurs</p></li>
<li><p>Cr√©ation de templates pour les configurations Apache de GeoNature,
TaxHub et UsersHub, utilis√©s par le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Ajout du plugon <code class="docutils literal notranslate"><span class="pre">leaflet-image</span></code></p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">type</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> pour
g√©rer le polymorphisme, utilis√© dans le module Monitoring</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">meta_create_date</span></code> et <code class="docutils literal notranslate"><span class="pre">meta_update_date</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code></p></li>
<li><p>Diverses am√©liorations mineures de l‚Äôarchitecture du code</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul>
<li><p>Mettez √† jour TaxHub 1.8.x avant d‚Äôeffectuer la mise √† jour de
GeoNature : <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez le √† jour en version
0.2.4 minimum avant de mettre √† jour GeoNature</p></li>
<li><p>Si vous n‚Äôaviez pas renseign√© de valeur pour le param√®tre
<code class="docutils literal notranslate"><span class="pre">id_taxon_list</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code> du module Occtax, la
liste 100 n‚Äôest plus pass√©e par defaut et le module va rechercher
sur tout Taxref. Si vous souhaitez utiliser une liste de taxons dans
la saisie Occtax, veuillez renseigner l‚Äôidentifiant de votre liste
dans la configuration du module</p></li>
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql</a>)</p></li>
<li><p>Le script SQL de mise √† jour va supprimer et recr√©er les vues
<code class="docutils literal notranslate"><span class="pre">pr_occtax.v_export_occtax</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>
pour y int√©grer les champs additionnels. Si vous aviez modifi√© ces
vues, adaptez le script de mise √† jour de GeoNature 2.6.2 √† 2.7.0,
ou r√©percuter vos modifications apr√®s la mise √† jour, √† appliquer
aussi dans votre √©ventuelle surcouche des param√®tres
<code class="docutils literal notranslate"><span class="pre">default_columns_export</span></code> (dans
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code>) et <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code>
(dans <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>)</p></li>
<li><p>Le fichier de customisation CSS a √©t√© d√©plac√© de
<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/custom.scss</span></code> vers
<code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> pour pouvoir √™tre modifi√© sans
devoir rebuilder l‚Äôapplication. Son d√©placement est fait
automatiquement lors de la mise √† jour de GeoNature. Si vous avez
customis√© les styles dans ce fichier et notamment fait r√©f√©rence √†
d‚Äôautres fichiers, v√©rifiez ou adaptez leurs chemins</p></li>
<li><p>Si vous aviez renseigner un des deux param√®tres
<code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> dans le
module Validation, il est n√©cessaire de les remplacer par le nouveau
param√®tre <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
<li><p>Modifier dans le fichier
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>, remplacer
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> par <code class="docutils literal notranslate"><span class="pre">supervisor.log</span></code> dans la variable
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s|\(stdout_logfile = .*\)/gn_errors.log|\1/supervisor.log|&#39;</span><span class="w"> </span>/etc/supervisor/conf.d/geonature-service.conf
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>reload
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id28">
<h2>2.6.2 (2021-02-15)<a class="headerlink" href="#id28" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Metadonn√©es : correction d‚Äôun bug sur la fiche JDD si le module
d‚Äôimport n‚Äôest pas install√©</p></li>
<li><p>Metadonn√©es : correction de l‚Äôaffichage de certains champs sur la
fiche des cadres d‚Äôacquisition</p></li>
<li><p>Metadonn√©es : la recherche rapide n‚Äôest plus sensible √† la casse
casse</p></li>
</ul>
</section>
<section id="id29">
<h2>2.6.1 (2021-02-11)<a class="headerlink" href="#id29" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_tri_cal_sensi_diff_level_on_each_statement()</span></code> non
compatible avec PostgreSQL 10 (#1255)</p></li>
<li><p>Synth√®se : correction de l‚Äôaffichage du filtre ¬´¬†statut de
validation¬†¬ª (#1267)</p></li>
<li><p>Permissions : correction de l‚ÄôURL de redirection apr√®s
l‚Äô√©dition des permissions (#1253)</p></li>
<li><p>Pr√©cision de la documentation de mise √† jour de GeoNature (#1251)</p></li>
<li><p>Ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dans le fichier
d‚Äôexemple de configuration (#1066 par &#64;jbdesbas)</p></li>
<li><p>S√©curit√© : suppression d‚Äôune route inutile</p></li>
<li><p>Correction de l‚ÄôURL de la doc sur la page d‚Äôaccueil</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script de mise √† jour de la BDD du sous-module de
nomenclature :
https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature
(https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql)</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature
(http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application)</p></li>
</ul>
</section>
<section id="saxifraga-2021-02-04">
<h2>2.6.0 - Saxifraga üå∏ (2021-02-04)<a class="headerlink" href="#saxifraga-2021-02-04" title="Lien vers cette rubrique">¬∂</a></h2>
<p>N√©cessite Debian 10, car cette nouvelle version n√©cessite PostgreSQL 10
minimum (qui n‚Äôest pas fourni par d√©faut avec Debian 9) pour les
triggers d√©clench√©s ¬´¬†on each statement¬†¬ª, plus performants.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Sensibilit√© : Ajout d‚Äôun trigger sur la synth√®se d√©clenchant
automatiquement le calcul de la sensibilit√© des observations et
calculant ensuite leur niveau de diffusion (si celui-ci est NULL) en
fonction de la sensibilit√© (#413 et #871)</p></li>
<li><p>Ajout du format GeoPackage (GPKG) pour les exports SIG, plus simple,
plus l√©ger, plus performant et unique que le SHAPEFILE. Les exports
au format SHP restent pour le moment utilis√©s par d√©faut (modifiable
dans la configuration des modules Occtax, Occhab et Synth√®se)
(#898)</p></li>
<li><p>Performances : Suppression du trigger le plus lourd calculant les
couleurs des taxons par unit√©s g√©ographiques. Il est remplac√© par
une vue utilisant le nouveau param√®tre
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>, d√©finissant le
code du type de zonage √† utiliser pour les unit√©s g√©ographiques dans
Occtax-mobile (Mailles de 5km par d√©faut) (#997)</p></li>
<li><p>Performances : Am√©lioration du trigger de la Synth√®se calculant les
zonages d‚Äôune observation en ne faisant un <code class="docutils literal notranslate"><span class="pre">ST_Touches()</span></code> seulement
si l‚Äôobservation n‚Äôest pas un point et en le passant
<code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">each</span> <span class="pre">statement</span></code> (#716)</p></li>
<li><p>M√©tadonn√©es : Refonte de la liste des CA et JDD avec l‚Äôajout
d‚Äôinformations et d‚Äôactions, ainsi qu‚Äôune recherche avanc√©e
(#889)</p></li>
<li><p>M√©tadonn√©es : R√©vision des fiches info des CA et JDD avec l‚Äôajout
d‚Äôactions, du tableau des imports et du t√©l√©chargement des rapports
d‚ÄôUUID et de sensibilit√© (#889)</p></li>
<li><p>M√©tadonn√©es: Ajout de la fonctionnalit√© de fermeture (d√©pot) au
niveau du CA (qui ferme tous les JDD du CA), seulement si le CA a au
moins un JDD. D√©sactiv√©e par d√©faut via le param√®tre
<code class="docutils literal notranslate"><span class="pre">ENABLE_CLOSE_AF</span></code> (#889 par &#64;alainlaupinmnhn)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôenvoyer un email automatique au
cr√©ateur et √† l‚Äôutilisateur d‚Äôun CA quand celui-ci est ferm√©
(#889)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôajouter un titre sp√©cifique aux exports
PDF des CA quand ceux-ci sont ferm√©s, par exemple pour en faire un
certificat (#889)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôimporter directement dans un JDD actif
depuis le module M√©tadonn√©es, d√©sactiv√© par d√©faut (#889)</p></li>
<li><p>M√©tadonn√©es : Am√©lioration des possibilit√©s de customisation des PDF
des fiches de m√©tadonn√©es</p></li>
<li><p>M√©tadonn√©es : Am√©lioration des fiches d√©tail des CA et JDD et ajout
de la liste des imports dans les fiches des JDD (#889)</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun spinner lors du chargement de la liste des
m√©tadonn√©es et parall√©lisation du calcul du nombre de donn√©es par
JDD (#1231)</p></li>
<li><p>Synth√®se : Possibilit√© d‚Äôouvrir le module avec un JDD
pr√©selectionn√© (<code class="docutils literal notranslate"><span class="pre">&lt;URL_GeoNature&gt;/#/synthese?id_dataset=2</span></code>) et ajout
d‚Äôun lien direct depuis le module M√©tadonn√©es (#889)</p></li>
<li><p>Synth√®se : ajout de web service pour le calcul du nombre
d‚Äôobservations par un param√®tre donn√© (JDD, module, observateur),
et du calcul de la bounding-box par jeu de donn√©es</p></li>
<li><p>Synthese : ajout d‚Äôun filtre avanc√© <code class="docutils literal notranslate"><span class="pre">Poss√®de</span> <span class="pre">m√©dias</span></code></p></li>
<li><p>Exports au format SHP remplac√©s par d√©faut par le format GeoPackage
(GPKG) plus simple, plus l√©ger, plus performant et unique. Les
exports SHP restent activables dans la configuration des modules
(#898)</p></li>
<li><p>Occtax : ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_VERNACULAR_NAME</span></code> qui contr√¥le
l‚Äôaffichage du nom vernaculaire vs nom complet sur les interfaces
(Defaut = true: afffiche le nom vernaculaire)</p></li>
<li><p>Validation : Pr√©remplir l‚Äôemail √† l‚Äôobservateur avec des
informations param√©trables sur l‚Äôoccurrence (date, nom du taxon,
commune, m√©dias) (#981)</p></li>
<li><p>Validation : Possibilit√© de param√®trer les colonnes affich√©es dans
la liste des observations (#980)</p></li>
<li><p>Possibilit√© de customiser le logo principal (GeoNature par d√©faut)
dans <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/</span></code></p></li>
<li><p>Ajout d‚Äôun champs json <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code>
(#1111)</p></li>
<li><p>Compl√©ment des scripts de migration des donn√©es depuis GINCO
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/</span></code>)</p></li>
<li><p>Barre de navigation : Mention plus g√©n√©rique et g√©n√©rale des auteurs
et contributeurs</p></li>
<li><p>Redirection vers le formulaire d‚Äôauthentification si on tente
d‚Äôacc√©der √† une page directement sans √™tre authentifi√© et sans
passer par le frontend (#1193)</p></li>
<li><p>Connexion √† MTD : possibilit√© de filtrer les JDD par instance, avec
le param√®tre <code class="docutils literal notranslate"><span class="pre">ID_INSTANCE_FILTER</span></code>, par exemple pour ne r√©cup√©rer que
les JDD de sa r√©gion (#1195)</p></li>
<li><p>Connexion √† MTD : r√©cup√©ration du cr√©ateur et des acteurs (#922,
#1008 et #1196)</p></li>
<li><p>Connexion √† MTD : r√©cup√©ration du nouveau champs
<code class="docutils literal notranslate"><span class="pre">statutDonneesSource</span></code> pour indiquer si le JDD est d‚Äôorigine
publique ou priv√©e</p></li>
<li><p>Cr√©ation d‚Äôune commande GeoNature permettant de r√©cup√©rer les JDD,
CA et acteurs depuis le webservice MTD de l‚ÄôINPN, en refactorisant
les outils existants d‚Äôimport depuis ce webservice</p></li>
<li><p>Ajout de contraintes d‚Äôunicit√© sur certains champs des tables de
m√©tadonn√©es et de la table des sources (#1215)</p></li>
<li><p>Cr√©ation d‚Äôun script permettant de remplacer les r√®gles de
sensibilit√© nationales et r√©gionales, par les r√®gles d√©partementales
plus pr√©cises (<code class="docutils literal notranslate"><span class="pre">data/scripts/sensi/import_sensi_depobio.sh</span></code>),
uniquement utilis√© pour DEPOBIO pour le moment, en attendant de
clarifier dans une prochaine release le fonctionnement que l‚Äôon
retient par d√©faut dans GeoNature (#413)</p></li>
<li><p>Cr√©ation d‚Äôun script permettant d‚Äôimporter les r√©gions dans le
r√©f√©rentiel g√©ographique (<code class="docutils literal notranslate"><span class="pre">data/migrations/insert_reg.sh</span></code>)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occhab : Export SIG (GPKG ou SHP) corrig√© (#898)</p></li>
<li><p>Meilleur nettoyage des sessions enregistr√©es dans le navigateur
(#1178)</p></li>
<li><p>Correction des droits CRUVED et de leur h√©ritage (#1170)</p></li>
<li><p>Synth√®se : Retour du bouton pour revenir √† l‚Äôobservation dans son
module d‚Äôorigine (Occtax par exemple) depuis la fiche info d‚Äôune
observation (#1147)</p></li>
<li><p>Synth√®se : Suppression du message ¬´¬†Aucun historique de validation¬†¬ª
quand une observation n‚Äôa pas encore de validation (#1147)</p></li>
<li><p>Synth√®se : Correction du CRUVED sur le R = 1 (ajout des JDD de
l‚Äôutilisateur)</p></li>
<li><p>Synth√®se : Correction de l‚Äôexport des statuts bas√© sur une
recherche g√©ographique (#1203)</p></li>
<li><p>Occtax : Correction de l‚Äôerreur de chargement de l‚Äôobservateur
lors de la modification d‚Äôun relev√© (#1177)</p></li>
<li><p>Occtax : Suppression de l‚Äôobligation de remplir les champs
¬´¬†D√©terminateur¬†¬ª et ¬´¬†M√©thode de d√©termination¬†¬ª</p></li>
<li><p>M√©tadonn√©es : Suppression du graphique de r√©partition des esp√®ces
dans les exports PDF car il √©tait partiellement fonctionnel</p></li>
<li><p>Synth√®se : Fonction <code class="docutils literal notranslate"><span class="pre">import_row_from_table</span></code>, test sur
<code class="docutils literal notranslate"><span class="pre">LOWER(tbl_name)</span></code></p></li>
<li><p>Redirection vers le formulaire d‚Äôauthentification si l‚Äôon essaie
d‚Äôacc√©der √† une URL sans √™tre authentifi√© et sans passer par le
frontend (#1193)</p></li>
<li><p>Script d‚Äôinstallation globale : prise en compte du param√®tre
<code class="docutils literal notranslate"><span class="pre">install_grid_layer</span></code> permettant d‚Äôint√©grer ou non les mailles dans
le <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> lors de l‚Äôinstallation initiale (#1133)</p></li>
<li><p>Synth√®se : Changement de la longueur du champs <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> de
la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (de 255 √† 5000 caract√®res)</p></li>
<li><p>Sensibilit√© : Corrections des contraintes NOT VALID (#1245)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql</a>)</p></li>
<li><p>Toutes les nouvelles donn√©es int√©gr√©es dans le Synth√®se auront leur
niveau de sensibilit√© et de diffusion calcul√©s automatiquement. Vous
pouvez ajouter ou d√©sactiver des r√®gles de sensibilit√© dans la table
<code class="docutils literal notranslate"><span class="pre">gn_sensivity.t_sensitivity_rules</span></code></p></li>
<li><p>Vous pouvez aussi ex√©cuter le script qui va calculer automatiquement
le niveau de sensibilit√© et de diffusion de toutes les donn√©es d√©j√†
pr√©sentes dans la Synth√®se, √©ventuellement en l‚Äôadaptant √† votre
contexte :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql</a></p></li>
<li><p>Mettez √† jour de la longueur du champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese.reference_biblio</span></code> √† 5000 charact√®res. Ex√©cutez
la commande suivante dans la console :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">geonature2db</span> <span class="pre">-c</span> <span class="pre">&quot;UPDATE</span> <span class="pre">pg_attribute</span> <span class="pre">SET</span> <span class="pre">atttypmod</span> <span class="pre">=</span> <span class="pre">5004</span> <span class="pre">WHERE</span> <span class="pre">attrelid</span> <span class="pre">=</span> <span class="pre">'gn_synthese.synthese'::regclass</span> <span class="pre">AND</span> <span class="pre">attname</span> <span class="pre">=</span> <span class="pre">'reference_biblio';&quot;</span></code></p></li>
<li><p>Ex√©cuter le script de mise √† jour de la BDD du sous-module de
nomenclature :
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql</a></p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez Occtax-mobile, vous pouvez modifier la valeur du
nouveau param√®tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>
pour lui indiquer le code du type de zonage que vous utilisez pour
les unit√©s g√©ographiques (mailles de 5km par d√©faut)</p></li>
<li><p>Si vous disposez du module d‚Äôimport, vous devez le mettre √† jour en
version 1.1.1</p></li>
</ul>
</section>
<section id="id30">
<h2>2.5.5 (2020-11-19)<a class="headerlink" href="#id30" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun composant fil d‚Äôariane (#1143)</p></li>
<li><p>Ajout de la possiblit√© de d√©sactiver les composants <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> (#1142)</p></li>
<li><p>Ajout de tests sur les routes pour assurer la compatibilit√© avec les
applications mobiles</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug de r√©cup√©ration du CRUVED sur les modules
(#1146)</p></li>
<li><p>Correction des validateurs sur les preuves d‚Äôexistence (#1134)</p></li>
<li><p>Correction de la r√©cup√©ration des dossiers dans <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>
dans le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code></p></li>
<li><p>Correction de l‚Äôaffichage de l‚Äôutilisateur dans la navbar
lorsqu‚Äôon est connect√© via le CAS INPN</p></li>
</ul>
</section>
<section id="id31">
<h2>2.5.4 (2020-11-17)<a class="headerlink" href="#id31" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout de scripts <code class="docutils literal notranslate"><span class="pre">sql</span></code> et <code class="docutils literal notranslate"><span class="pre">sh</span></code> de restauration des medias dans
<code class="docutils literal notranslate"><span class="pre">data/medias</span></code> (#1148)</p></li>
<li><p>Ajout d‚Äôun service pour pouvoir r√©cup√©rer les informations sur
l‚Äôutilisateur connect√©</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction des m√©dias qui sont actuellement tous supprim√©s
automatiquement apr√®s 24h, et non pas seulement ceux orphelins
(#1148)</p></li>
<li><p>Correction des permissions sur les fiches info des relev√©s dans
Occtax avec la d√©sactivation du bouton de modification du relev√©
quand l‚Äôutilisateur n‚Äôen a pas les droits</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous aviez associ√© des m√©dias √† des observations dans Occtax ou
autre et qu‚Äôils ont √©t√© supprim√©s, vous pouvez les retrouver dans
la table d‚Äôhistorisation des actions
(<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_commons.t_history_actions</span> <span class="pre">WHERE</span> <span class="pre">table_content-&gt;'id_media'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span> <span class="pre">AND</span> <span class="pre">operation_type</span> <span class="pre">=</span> <span class="pre">'D'</span></code>)</p></li>
<li><p>Pour restaurer les m√©dias supprim√©s depuis la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_history_actions</span></code> vous pouvez :</p>
<ul>
<li><p>ex√©cuter le script SQL <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sql</span></code> qui va
recr√©er les m√©dias supprim√©s dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code></p></li>
<li><p>ex√©cuter le script BASH <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sh</span></code>
(<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">/home/`whoami`/geonature/data/medias/restore_medias.sh</span></code>
en <code class="docutils literal notranslate"><span class="pre">sudo</span></code> si besoin) qui va renommer des fichiers supprim√©s en
supprimant le pr√©fixe <code class="docutils literal notranslate"><span class="pre">deleted_</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id32">
<h2>2.5.3 (2020-11-04)<a class="headerlink" href="#id32" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise en place de l‚Äôh√©ritage du CRUVED au niveau des objets des
modules (#1028)</p></li>
<li><p>R√©vision de l‚Äôexport des observations de la Synth√®se (noms plus
lisibles, ajout des communes et d‚Äôinformations taxonomiques,
compl√©ment des champs existants (#755)</p></li>
<li><p>Ajout d‚Äôun param√®tre permettant d‚Äôajouter un message personnalis√©
√† la fin des emails (inscriptions, exports‚Ä¶) (#1050
par &#64;jpm-cbna)</p></li>
<li><p>Ajout d‚Äôune alerte de d√©pr√©ciation sur les fonctions
<code class="docutils literal notranslate"><span class="pre">utils-sqlalchemy</span></code> pr√©sentes dans GeoNature</p></li>
<li><p>Ajout d‚Äôun widget de type ¬´¬†HTML¬†¬ª dans les formulaires dynamiques,
permettant d‚Äôajouter des informations dans un formulaire (#1043 et
#1068 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© d‚Äôajouter un texte d‚Äôaide sur les champs
des formulaires dynamiques (#1065 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de d√©finir un min et un max au composant
commun <code class="docutils literal notranslate"><span class="pre">date</span></code> (#1069 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de d√©finir le nombre de lignes du composant
commun <code class="docutils literal notranslate"><span class="pre">textarea</span></code> (#1067 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de contr√¥ler par une expression r√©guli√®re le
contenu d‚Äôun champs de type <code class="docutils literal notranslate"><span class="pre">text</span></code> des formulaires dynamiques
(#1073 par &#64;FlorentRICHARD44)</p></li>
<li><p>Ajout de la possibilit√© de masquer certains champs du composant
<code class="docutils literal notranslate"><span class="pre">media</span></code> (#1072, #1078 et #1083 par &#64;metourneau)</p></li>
<li><p>Ajout d‚Äôun spinner sur les statistiques de la page d‚Äôaccueil
(#1086 par &#64;jpm-cbna)</p></li>
<li><p>Ajout d‚Äôun composant d‚Äôautocomplete multiselect <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code>
permettant de rechercher des taxons dans tout l‚Äôarbre taxonomique
et de limiter la recherche √† un rang</p></li>
<li><p>Possibilit√© d‚Äôajouter plusieurs cartes sur la m√™me page √† l‚Äôaide
du composant <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code></p></li>
<li><p>Homog√©n√©isation du style du code et documentation des pratiques de
d√©veloppement</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôaffichage des noms des validateurs sur la liste
dans le module validation (#1091 par &#64;lpofredc)</p></li>
<li><p>Corrections mineures de l‚Äôexport des observations de la Synth√®se
(#1108)</p></li>
<li><p>Synth√®se : Correction du masquage de la recherche par arbre
taxonomique (#1057 par &#64;jpm-cbna)</p></li>
<li><p>Ajout du champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_biogeo_status</span></code> dans la Synthese
(correspondance standard : statut biog√©ographique). La BDD est
remplie avec la valeur par d√©faut de la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.default_nomenclature_value</span></code> (valeur = non renseign√©e)</p></li>
<li><p>Accueil : Correction de l‚Äôaffichage du nom du module (#1087)</p></li>
<li><p>Correction du trigger de mise √† jour d‚ÄôOcctax vers la Synth√®se
(champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> non mis √† jour) (#1117 par &#64;jbrieuclp)</p></li>
<li><p>Correction du param√®tre stockant la version de Taxref, pass√© √† 13.0
pour les nouvelles installations (#1097 par &#64;RomainBaghi)</p></li>
<li><p>Correction de l‚Äôaffichage en double des markers dans Leaflet.draw
(#1095 par &#64;FlorentRICHARD44)</p></li>
<li><p>Synth√®se : Correction des filtres avanc√©s par technique
d‚Äôobservation et m√©thode de d√©termination (#1110 par &#64;jbrieuclp)</p></li>
<li><p>Recr√©ation du fichier de configuration √† chaque installation (#1074
par &#64;etot)</p></li>
<li><p>Annulation de l‚Äôinsertion du module lorsqu‚Äôune erreur est lev√©e √†
l‚Äôinstallation d‚Äôun module</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>D√©sormais les objets des modules (par exemple les objets
‚ÄôPermissions‚Äô et ‚ÄôNomenclatures‚Äô du module ‚ÄôADMIN‚Äô) h√©ritent
automatiquement des permissions d√©finies au niveau du module parent
et √† d√©faut au niveau de GeoNature (#1028). Il s‚Äôagit d‚Äôune
√©volution de mise en coh√©rence puisque les modules h√©ritaient d√©j√†
des permissions de GeoNature, mais pas leurs objets. Si vous avez
d√©fini des permissions particuli√®res aux niveaux des objets,
v√©rifier leur coh√©rence avec le nouveau fonctionnement. NB : si vous
aviez mis des droits R=0 pour un groupe au module ‚ÄôADMIN‚Äô, les
utilisateurs de ce groupe ne pourront pas acc√©der aux sous-modules
‚Äôpermissions‚Äô et ‚Äônomenclatures‚Äô.</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql</a>).
Attention, si vous avez customis√© les vues des exports Occtax et
Synth√®se, elles seront supprim√©es et recr√©es automatiquement par le
script SQL de mise √† jour de la BDD de GeoNature pour int√©grer leurs
√©volutions r√©alis√©es dans cette nouvelle version. R√©visez
√©ventuellement ces vues avant et/ou apr√®s la mise √† jour.</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
<li><p>Les noms de colonnes de l‚Äôexport de la Synth√®se ont √©t√© enti√®rement
revus dans la vue fournie par d√©faut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouch√© le
param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, v√©rifiez les noms des colonnes.</p></li>
<li><p>V√©rifiez que la valeur du param√®tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> correspond bien √† votre version actuelle
de Taxref (11.0 ou 13.0).</p></li>
</ul>
</section>
<section id="id33">
<h2>2.5.2 (2020-10-13)<a class="headerlink" href="#id33" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : correction du probl√®me d‚Äôinstallation du module dans le
fichier <code class="docutils literal notranslate"><span class="pre">schemas.py</span></code></p></li>
<li><p>Synthese : correction de la fonctions SQL
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table</span></code> et r√©percussion dans le fichier
<code class="docutils literal notranslate"><span class="pre">gn_synthese/process.py</span></code></p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql</a>)</p></li>
</ul>
</section>
<section id="id34">
<h2>2.5.1 (2020-10-06)<a class="headerlink" href="#id34" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> d√©finissant si les
adresses email des observateurs sont affich√©es ou non dans les
fiches info des observations des modules Synth√®se et Validation
(#1066)</p></li>
<li><p>Occtax : correction de l‚Äôaffichage du champs ¬´¬†Technique de
collecte Campanule¬†¬ª (#1059)</p></li>
<li><p>Occtax : correction du fichier d‚Äôexemple de configuration
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml.example</span></code> (#1059)</p></li>
<li><p>Occtax : param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> renomm√©
<code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> et d√©sactiv√© par d√©faut (#1060)</p></li>
<li><p>Occtax : quand le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> est d√©sactiv√©,
remise en place du fonctionnement de l‚Äôoutil ¬´¬†Echainer les
relev√©s¬†¬ª. Dans ce cas, quand on enchaine les relev√©s, on conserve
le JDD, les observateurs, les dates et heures d‚Äôun relev√© √†
l‚Äôautre (#1060)</p></li>
<li><p>Occtax : correction de l‚Äôobservateur par d√©faut en mode
<code class="docutils literal notranslate"><span class="pre">observers_as_txt</span></code></p></li>
<li><p>Verification des UUID : autoriser toutes les versions (#1063)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="manidae-2020-09-30">
<h2>2.5.0 - Manidae (2020-09-30)<a class="headerlink" href="#manidae-2020-09-30" title="Lien vers cette rubrique">¬∂</a></h2>
<p>Occtax v2 et m√©dias</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Refonte de l‚Äôergonomie et du fonctionnement du module de saisie
Occtax (#758 et #860 par &#64;jbrieuclp et &#64;TheoLechemia)</p>
<ul>
<li><p>Enregistrement continu au fur et √† mesure de la saisie d‚Äôun
relev√©</p></li>
<li><p>D√©coupage en 2 onglets (Un pour le relev√© et un onglet pour les
taxons)</p></li>
<li><p>Am√©lioration de la liste des taxons saisis sur un relev√© (#635
et #682)</p></li>
<li><p>Am√©lioration de la saisie au clavier</p></li>
<li><p>Zoom r√©alis√© dans la liste des relev√© conserv√© quand on saisit
un nouveau relev√© (#436 et #912)</p></li>
<li><p>Filtres conserv√©s quand on revient √† la liste des relev√©s
(#772)</p></li>
<li><p>Possibilit√© de conserver les informations saisies entre 2 taxons
ou relev√©s, d√©sactivable avec le param√®tre
<code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> (#692)</p></li>
<li><p>Correction de la mise √† jour des dates de d√©but et de fin
(#977)</p></li>
<li><p>Affichage d‚Äôune alerte si on saisit 2 fois le m√™me taxon sur un
m√™me relev√©</p></li>
<li><p>Fiche d‚Äôinformation d‚Äôun relev√© compl√©t√©e et mise √† jour</p></li>
</ul>
</li>
<li><p>Passage de la version 1.2.1 √† la version 2.0.0 du standard
Occurrences de taxon (dans les modules Occtax, Synth√®se et
Validation) (#516)</p>
<ul>
<li><p>Ajout des champs ¬´¬†Comportement¬†¬ª, ¬´¬†NomLieu¬†¬ª, ¬´¬†Habitat¬†¬ª,
¬´¬†M√©thode de regroupement¬†¬ª, ¬´¬†Type de regroupement¬†¬ª et
¬´¬†Profondeur¬†¬ª</p></li>
<li><p>Ajout du champs ¬´¬†Pr√©cision¬†¬ª dans Occtax et suppression de sa
valeur par d√©faut √† 100 m</p></li>
<li><p>Renommage du champs ¬´¬†M√©thode d‚Äôobservation¬†¬ª en ¬´¬†Technique
d‚Äôobservation¬†¬ª</p></li>
<li><p>Suppression du champs ¬´¬†Technique d‚Äôobservation¬†¬ª actuel de la
synth√®se</p></li>
<li><p>Renommage du champs ¬´¬†Technique d‚Äôobservation¬†¬ª actuel
d‚ÄôOcctax en ¬´¬†Technique de collecte Campanule¬†¬ª</p></li>
<li><p>Ajout et mise √† jour de quelques nomenclatures</p></li>
<li><p>Ajout d‚Äôun document de suivi de l‚Äôimpl√©mentation du standard
Occurrences de taxon dans GeoNature
(<code class="docutils literal notranslate"><span class="pre">docs/implementation_gn_standard_occtax2.0.ods</span></code>) (#516)</p></li>
</ul>
</li>
<li><p>Passage de la version 1.3.9 √† la version 1.3.10 du standard de
M√©tadonn√©es. Mise √† jour des nomenclatures ¬´¬†CA_OBJECTIFS¬†¬ª et mise
√† jour des m√©tadonn√©es existantes en cons√©quence
(par &#64;DonovanMaillard)</p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">addtional_data</span></code> de type <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code>, en pr√©vision de l‚Äôajout des champs
additionnels dans Occtax et Synth√®se (#1007)</p></li>
<li><p>Mise en place de la gestion transversale et g√©n√©rique des m√©dias
(images, audios, vid√©os, PDF‚Ä¶) dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code> et le
Dynamic-Form (#336) et impl√©mentation dans le module Occtax
(d√©sactivables avec le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MEDIAS</span></code>) (#620
par &#64;joelclems)</p></li>
<li><p>Mise en place de miniatures et d‚Äôaper√ßus des m√©dias, ainsi que de
nombreux contr√¥les des fichiers et de leurs formats</p></li>
<li><p>Affichage des m√©dias dans les fiches d‚Äôinformation des modules de
saisie, ainsi que dans les modules Synth√®se et Validation</p></li>
<li><p>Ajout de la fonctionnalit√© ¬´¬†Mes lieux¬†¬ª (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_places</span></code>),
permettant de stocker la g√©om√©trie de ieux individuels fr√©quemment
utilis√©s, impl√©ment√©e dans le module cartographique d‚ÄôOcctax
(d√©sactivable avec le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MY_PLACES</span></code>) (#246
par &#64;metourneau)</p></li>
<li><p>Tri de l‚Äôordre des modules dans le menu lat√©ral par ordre
alphab√©tique par d√©faut et possibilit√© de les ordonner avec le
nouveau champs <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules.module_order</span></code> (#787
par &#64;alainlaupinmnhn)</p></li>
<li><p>Arr√™t du support de l‚Äôinstallation packag√©e sur Debian 9 et Ubuntu
16 pour passer √† Python version 3.6 et plus</p></li>
<li><p>Prise en charge de PostGIS 3 et notamment l‚Äôinstallation de
l‚Äôextension <code class="docutils literal notranslate"><span class="pre">postgis_raster</span></code> (#946 par &#64;jpm-cbna)</p></li>
<li><p>Cr√©ation de compte : Envoi automatique d‚Äôun email √† l‚Äôutilisateur
quand son compte est valid√©. N√©cessite la version 2.1.3 de UsersHub
(#862 et #1035 par &#64;jpm-cbna)</p></li>
</ul>
<p><strong>Ajouts mineurs</strong></p>
<ul class="simple">
<li><p>Homog√©n√©isation des styles des boutons (#1026)</p></li>
<li><p>Factorisation du code des fiches infos d‚Äôune observation dans les
modules Synth√®se et Validation (#1053)</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun param√®tre permettant de d√©finir le nombre
de CA affich√©s sur la page (100 par d√©faut)</p></li>
<li><p>M√©tadonn√©es : Tri des CA et JDD par ordre alphab√©tique</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> dans la table des CA
et des JDD, utilis√© en plus des acteurs pour le CRUVED des JDD
(#921)</p></li>
<li><p>Dynamic-Form : Ajout d‚Äôun composant ¬´¬†select¬†¬ª prenant une API en
entr√©e (#1029)</p></li>
<li><p>Dynamic-Form : Ajout de la possibilit√© d‚Äôafficher une d√©finition
d‚Äôun champs sous forme de tooltip</p></li>
<li><p>CAS INPN : Redirection vers la page de connexion de GeoNature quand
on se d√©connecte</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur <code class="docutils literal notranslate"><span class="pre">schema_name</span></code> et <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
sur la table <code class="docutils literal notranslate"><span class="pre">gn_commons_bib_tables_location_unique</span></code> (#962)</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur <code class="docutils literal notranslate"><span class="pre">id_organism</span></code> et
<code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> (#988)</p></li>
<li><p>Ajout de la possibilit√© de filtrer le composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> du
Dynamic-Form par <code class="docutils literal notranslate"><span class="pre">module_code</span></code> pour pouvoir choisir parmis les JDD
associ√©es √† un module (#964)</p></li>
<li><p>Mise √† jour de <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> en version 2.8.5, sqlalchemy en 1.3.19,
marshmallow en 2.15.6, virtualenv en 20.0.31 (par &#64;jpm-cbna)</p></li>
<li><p>Mises √† jour de s√©curit√© diverses</p></li>
<li><p>Am√©liorations des scripts <code class="docutils literal notranslate"><span class="pre">install/install_db.sh</span></code> et
<code class="docutils literal notranslate"><span class="pre">install/install_app.sh</span></code> (par &#64;jpm-cbna)</p></li>
<li><p>Ajout de l‚Äôautocompl√©tion des commandes <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (#999
par &#64;jpm-cbna)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh.sample</span></code></p></li>
<li><p>Am√©lioration du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code> en v√©rifiant
la pr√©sence des dossiers optionnels avant de les copier</p></li>
<li><p>Am√©lioration des fonctions
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row_format_insert_data</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row</span></code> pour prendre en charge la g√©n√©ration
des geojson dans PostGIS 3</p></li>
<li><p>Documentation administrateur : Pr√©cisions sur les labels, pictos et
ordres des modules dans le menu de navigation lat√©ral</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Module Validation : Affichage des commentaires du relev√© et de
l‚Äôobservation (#978 et #854)</p></li>
<li><p>Module Validation : Ne lister que les observations ayant un UUID et
v√©rification de sa validit√© (#936)</p></li>
<li><p>Module Validation : Correction et homog√©n√©isation de l‚Äôaffichage et
du tri des observations par date (#971)</p></li>
<li><p>Module Validation : Correction de l‚Äôaffichage du statut de
validation apr√®s mise √† jour dans la liste des observations (#831)</p></li>
<li><p>Module Validation : Correction de l‚Äôaffichage du nom du validateur</p></li>
<li><p>Module Validation : Am√©lioration des performances avec l‚Äôajout
d‚Äôun index sur le champs <code class="docutils literal notranslate"><span class="pre">uuid_attached_row</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> (#923 par &#64;jbdesbas)</p></li>
<li><p>Suppression du trigger en double
<code class="docutils literal notranslate"><span class="pre">tri_insert_synthese_cor_role_releves_occtax</span></code> sur
<code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> (#762 par &#64;jbrieuclp)</p></li>
<li><p>Passage des requ√™tes d‚Äôexport de la synth√®se en POST plut√¥t qu‚Äôen
GET (#883)</p></li>
<li><p>Correction du traitement du param√®tre <code class="docutils literal notranslate"><span class="pre">offset</span></code> de la route
<code class="docutils literal notranslate"><span class="pre">synthese/color_taxon</span></code> utilis√© par Occtax-mobile (#994)</p></li>
<li><p>Correction et compl√©ment des scripts de migration de donn√©es depuis
GINCO v1 (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/occtax.sql</span></code>)</p></li>
<li><p>Import des utilisateurs depuis le CAS INPN : Activer les
utilisateurs import√©s par d√©faut et r√©cup√©rer leur email</p></li>
<li><p>Calcul automatique de la sensibilit√© : Ajout de la r√©cursivit√© dans
la r√©cup√©ration des crit√®res de sensibilit√© au niveau de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_sensitivity.get_id_nomenclature_sensitivity</span></code> (#284)</p></li>
<li><p>Typo sur le terme ¬´¬†Preuve d‚Äôexistence¬†¬ª (par &#64;RomainBaghi)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Nomenclatures : Commencer par ex√©cuter le script SQL de mise √† jour
du sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> de la BDD
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql</a>)</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql</a>).
Attention, si vous avez customis√© les vues des exports Occtax et
Synth√®se, elles seront supprim√©es et recr√©es automatiquement par le
script SQL de mise √† jour de la BDD de GeoNature pour s‚Äôadapter aux
√©volutions du standard Occtax en version 2.0.0. R√©visez
√©ventuellement ces vues avant et/ou apr√®s la mise √† jour. Le script
SQL de mise √† jour v√©rifiera aussi si vous avez d‚Äôautres vues (dans
le module Export notamment) qui utilisent le champs
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> qui doit √™tre renomm√© et
l‚Äôindiquera d√®s le d√©but de l‚Äôex√©cution du script, en l‚Äôarr√™tant
pour que vous puissiez modifier ou supprimer ces vues bloquant la
mise √† jour.</p></li>
<li><p>Les colonnes de l‚Äôexport de la Synth√®se ont √©t√© partiellement revus
dans la vue fournie par d√©faut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouch√© le
param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, v√©rifiez les noms des colonnes.</p></li>
<li><p>A partir la version 2.5.0 de GeoNature, la version 3.5 de Python
n‚Äôest plus support√©e. Seules les versions 3.6 et + le sont. Si vous
√™tes encore sur Debian 9 (fourni par d√©faut avec Python 3.5),
veuillez suivre les instructions de mise √† jour de Python sur cette
version
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9">https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9</a>).
Il est cependant plut√¥t conseill√© de passer sur Debian 10 pour
rester √† jour sur des versions maintenues</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>A noter, quelques changements dans les param√®tres du module Occtax.
Les param√®tres d‚Äôaffichage/masquage des champs du formulaire ont
√©volu√© ainsi :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_meth</span></code> devient <code class="docutils literal notranslate"><span class="pre">obs_tech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_technique</span></code> devient <code class="docutils literal notranslate"><span class="pre">tech_collect</span></code></p></li>
</ul>
</li>
<li><p>A noter aussi que cette version de GeoNature est compatible avec la
version 1.1.0 minimum d‚ÄôOcctax-mobile (du fait de la mise du
standard Occurrence de taxons)</p></li>
</ul>
</section>
<section id="id35">
<h2>2.4.1 (2020-06-25)<a class="headerlink" href="#id35" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Occurrences sans g√©om√©trie pr√©cise : Ajout d‚Äôun champs
<code class="docutils literal notranslate"><span class="pre">id_area_attachment</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> permettant
d‚Äôassocier une observation √† un zonage dans le r√©f√©rentiel
g√©ographique (<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code>) (#845 et #867)</p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code>
pour pouvoir afficher les zonages du r√©f√©rentiel g√©ographique sur
les cartes (#867)</p></li>
<li><p>Ajout de l‚Äôimport par d√©faut des d√©partements de France m√©tropole
dans le r√©f√©rentiel g√©ographique lors de l‚Äôinstallation de
GeoNature (en plus des actuelles communes et grilles)</p></li>
<li><p>Mise √† jour des communes import√©es sur la version de f√©vrier 2020
d‚ÄôAdmin express IGN pour les nouvelles installations</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug d‚Äôaffichage des fonds de carte WMTS de l‚ÄôIGN,
apparu dans la version 2.4.0 avec l‚Äôajout du support des fonds WMS
(#890)</p></li>
<li><p>Gestion des exceptions de type <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> lors de l‚Äôimport
des commandes d‚Äôun module</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql</a></p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Vous pouvez alors lancer le script d‚Äôinsertion des d√©partements de
France m√©tropole dans le r√©ferentiel g√©ographique (optionnel) :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh</a>.
V√©rifier le d√©roulement de l‚Äôimport dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/insert_departements.log</span></code></p></li>
</ul>
</section>
<section id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>M√©tadonn√©es : Ajout d‚Äôune fiche pour chaque jeu de donn√©es et
cadres d‚Äôacquisition, incluant une carte de l‚Äô√©tendue des
observations et un graphique de r√©partition des taxons par Groupe
INPN (#846 par &#64;FloVollmer)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôexporter les fiches des JDD et des CA
en PDF, g√©n√©r√©s par le serveur avec WeasyPrint. Logo et ent√™tes
modifiables dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/images/</span></code> (#882
par &#64;FloVollmer)</p></li>
<li><p>M√©tadonn√©es : Impl√©mentation du CRUVED sur la liste des CA et JDD
(#911)</p></li>
<li><p>M√©tadonn√©es : Affichage de tous les CA des JDD pour lequels
l‚Äôutilisateur connect√© a des droits (#908)</p></li>
<li><p>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration
(optionnelle) vers Taxref version 13</p></li>
<li><p>Installation globale migr√©e de Taxref version 11 √† 13</p></li>
<li><p>Synth√®se et zonages : Ne pas inclure l‚Äôassociation aux zonages
limitrophes d‚Äôune observation quand sa g√©om√©trie est √©gale √† un
zonage (maille, commune‚Ä¶) (#716 par &#64;jbdesbas)</p></li>
<li><p>Synth√®se : Ajout de la possibilit√© d‚Äôactiver la recherche par
observateur √† travers une liste, avec ajout des param√®tres
<code class="docutils literal notranslate"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> par d√©faut) et
<code class="docutils literal notranslate"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synth√®se : Am√©lioration de la recherche des observateurs. Non prise
en compte de l‚Äôordre des noms saisis (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synth√®se : Ajout de filtres avanc√©s (<code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">par</span></code> bas√© sur
<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code>, <code class="docutils literal notranslate"><span class="pre">Commentaire</span></code> du relev√© et de l‚Äôoccurrence,
<code class="docutils literal notranslate"><span class="pre">D√©terminateur</span></code>) (#834 par &#64;jbrieuclp)</p></li>
<li><p>Occtax : Cr√©ation d‚Äôun trigger g√©n√©rique de calcul de l‚Äôaltitude
qui n‚Äôest ex√©cut√© que si l‚Äôaltitude n‚Äôest pas post√©e (#848)</p></li>
<li><p>Ajout d‚Äôune table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister
les applications mobiles, l‚ÄôURL de leur APK et d‚Äôune API pour
interroger le contenu de cette table. Les fichiers des applications
et leurs fichiers de configurations peuvent √™tre charg√©s dans le
dossier <code class="docutils literal notranslate"><span class="pre">backend/static/mobile</span></code> (#852)</p></li>
<li><p>Ajout d‚Äôun offset et d‚Äôune limite sur la route de la couleur des
taxons (utilis√©e uniquement par Occtax-mobile actuellement)</p></li>
<li><p>Support des fonds de carte au format WMS
(<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>),
(#890 par &#64;jbdesbas)</p></li>
<li><p>Ajout d‚Äôun champs texte <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code></p></li>
<li><p>Am√©lioration des perfomances du module de validation, en revoyant la
vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les
requ√™tes et en g√©n√©rant le GeoJSON au niveau de la BDD (#923)</p></li>
<li><p>Ajout d‚Äôune fonction SQL d‚Äôinsertion de donn√©es dans la synthese
(et une fonction python associ√©e)</p></li>
<li><p>Compl√©ments de la documentation (Permissions des utilisateurs,
Occhab‚Ä¶)</p></li>
<li><p>Ajout de scripts de migration des donn√©es de GINCO1 vers GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco</span></code>)</p></li>
<li><p>Trigger Occtax vers Synth√®se : Am√©lioration du formatage des heures
avec <code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code> dans la fonction
<code class="docutils literal notranslate"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</p></li>
<li><p>Barre de navigation : Clarification de l‚Äôic√¥ne d‚Äôouverture du
menu, ajout d‚Äôun param√®tre <code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de
changer le nom du fichier du logo de l‚Äôapplication (#897
par &#64;jbrieuclp)</p></li>
<li><p>M√©dias : Am√©lioration des fonctions backend</p></li>
<li><p>Mise √† jour de jQuery en version 3.5.0</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code>
et du trigger sur la Synth√®se qui la remplissait pour utiliser la
vue mat√©rialis√©e <code class="docutils literal notranslate"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant
les noms de recherche de tous les taxons de Taxref, enti√®rement
revue dans TaxHub 1.7.0</p></li>
<li><p>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe
de jointure des tables</p></li>
<li><p>Ajout de fonctions SQL d‚Äôinsertion de donn√©es dans la Synth√®se
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row()</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python
associ√©e
(<code class="docutils literal notranslate"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>)
pour l‚ÄôAPI permettant de poster dans la Synth√®se (#736). Utilis√©e
par le module Monitoring.</p></li>
<li><p>Ajout du plugin Leaflet.Deflate (#934 par &#64;jpm-cbna)</p></li>
<li><p>Connexion au CAS INPN : Association des JDD aux modules Occtax et
Occhab (param√©trable) quand on importe les JDD de l‚Äôutilisateur qui
se connecte (dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.cor_module_dataset</span></code>)</p></li>
<li><p>Mise √† jour des librairies Python Utils-Flask-SQLAlchemy (en version
0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant
de mettre en place les exports au format GeoPackage et corrigeant
les exports de SHP contenant des g√©om√©tries multiples</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Mise √† jour des URL de la documentation utilisateur des modules,
renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Validation : Correction de l‚Äôouverture de la fiche d‚Äôinformation
d‚Äôune observation (#858)</p></li>
<li><p>Modification de l‚Äôattribution de la hauteur du composant
<code class="docutils literal notranslate"><span class="pre">map-container</span></code> pour permettre d‚Äôadapter la hauteur de la carte si
la hauteur d‚Äôun conteneur parent est modifi√©. Et que
<code class="docutils literal notranslate"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</p></li>
<li><p>Mise √† jour de la librairie python Markupsafe en version 1.1,
corrigeant un probl√®me de setuptools (#881)</p></li>
<li><p>Page Maintenance : Correction de l‚Äôaffichage de l‚Äôimage
(par &#64;jpm-cbna)</p></li>
<li><p>Correction du multiselect du composant <code class="docutils literal notranslate"><span class="pre">pnx-nomenclatures</span></code> (#885
par &#64;jpm-cbna)</p></li>
<li><p>Correction de l‚Äô<code class="docutils literal notranslate"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> (#901
par &#64;jbrieuclp)</p></li>
<li><p>Utilisation de NVM quand on installe les d√©pendances javascript
(#926 par &#64;jpm-cbna)</p></li>
<li><p>Formulaire JDD : Correction de l‚Äôaffichage de la liste des modules
(#861)</p></li>
<li><p>Correction de l‚Äôutilisation des param√®tres du proxy (#944)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature.</p>
<ul>
<li><p>Vous devez d‚Äôabord mettre √† jour TaxHub en version 1.7.0</p></li>
<li><p>Si vous mettez √† jour TaxHub, vous pouvez mettre √† jour Taxref en
version 13. Il est aussi possible de le faire en diff√©r√©, plus tard</p></li>
<li><p>Vous pouvez mettre √† jour UsersHub en version 2.1.2</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</p></li>
<li><p>Si vous avez mis √† jour Taxref en version 13, r√©percutez les
√©volutions au niveau des nomenclatures avec le script SQL
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>.
Sinon vous devrez l‚Äôex√©cuter plus tard, apr√®s avoir mis √† jour
Taxref en version 13. Apr√®s avoir mis √† jour Taxref en version 13,
pensez √† mettre √† jour le param√®tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code>.</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</p></li>
<li><p>Installer les d√©pendances de la librairie Python WeasyPrint :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libcairo2
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpango-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpangocairo-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libgdk-pixbuf2.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libffi-dev
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>shared-mime-info
</pre></div>
</div>
</li>
<li><p>Corriger l‚Äôutilisation des param√®tres du proxy (#944) dans le
fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh</span></code> en rempla√ßant les 2 lignes :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_http</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_https</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Vous pouvez supprimer les associations des observations de la
synth√®se aux zonages limitrophes, si vous n‚Äôavez pas
d‚Äôobservations sans g√©om√©trie (#719) :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">cor_area_synthese</span><span class="w"> </span><span class="n">cas</span>
<span class="k">USING</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">synthese</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">ref_geo</span><span class="p">.</span><span class="n">l_areas</span><span class="w"> </span><span class="n">a</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_area</span>
<span class="k">AND</span><span class="w"> </span><span class="k">public</span><span class="p">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="id36">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id36" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibilit√© de charger les commandes d‚Äôun module dans les commandes
de GeoNature</p></li>
<li><p>Ajout de commentaires dans le fichier d‚Äôexemple de configuration
<code class="docutils literal notranslate"><span class="pre">config/default_config.toml.example</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôune incoh√©rence dans le d√©compte des JDD sur la page
d‚Äôaccueil en leur appliquant le CRUVED (#752)</p></li>
<li><p>Mont√©e de version de la librairie <code class="docutils literal notranslate"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour
compatibilit√© avec la version 1.0.0 du module d‚Äôexport</p></li>
</ul>
</section>
<section id="id37">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id37" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Installation globale : Compatibilit√© Debian 10 (PostgreSQL 11,
PostGIS 2.5)</p></li>
<li><p>Installation globale : Passage √† Taxhub 1.6.4 et UsersHub 2.1.1</p></li>
<li><p>Utilisation g√©n√©ralis√©e des nouvelles librairies externalis√©es de
s√©rialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</p></li>
<li><p>Possibilit√© de r√©gler le timeout de Gunicorn pour √©viter le plantage
lors de requ√™tes longues</p></li>
<li><p>Ne pas zoomer sur les observations au premier chargement de la carte
(#838)</p></li>
<li><p>Leaflet-draw : Ajout de la possibilit√© de zoomer sur le point
(par &#64;joelclems)</p></li>
<li><p>Ajout du nom vernaculaire dans les fiches d‚Äôinformation des relev√©s
d‚ÄôOcctax (par &#64;FloVollmer / #826)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôinstallation de Node.js et npm par l‚Äôutilisation
g√©n√©ralis√©e de nvm (#832 et #837)</p></li>
<li><p>Fixation de la version de Node.js en 10.15.3 (dans le fichier
<code class="docutils literal notranslate"><span class="pre">fronted/.nvmrc</span></code>)</p></li>
<li><p>Ajout d‚Äôune r√©f√©rence de l‚Äôobjet Leaflet <code class="docutils literal notranslate"><span class="pre">L</span></code> afin qu‚Äôil soit
utilis√© dans les modules et changement du typage de l‚Äô√©venement
Leaflet <code class="docutils literal notranslate"><span class="pre">MouseEvent</span></code> en <code class="docutils literal notranslate"><span class="pre">L.LeafletMouseEvent</span></code></p></li>
<li><p>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</p></li>
<li><p>Corrections de typos dans la documentation d‚Äôadministration
(#840 - par &#64;sogalgeeko)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version depuis la 2.2.x, mais
en suivant les notes des versions interm√©diaires (NB : il n‚Äôest pas
n√©cessaire d‚Äôex√©cuter le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> des versions
pr√©c√©dentes)</p></li>
<li><p>Installez <code class="docutils literal notranslate"><span class="pre">pip3</span></code> et <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install python3-pip
sudo pip3 install virtualenv==20.0.1
</pre></div>
</div>
</li>
<li><p>Rajoutez la ligne <code class="docutils literal notranslate"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>
puis rechargez supervisor (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code>). Il s‚Äôagit
du temps maximal (en seconde) autoris√© pour chaque requ√™te. A
augmenter, si vous avez d√©j√† rencontr√© des probl√®mes de timeout.</p></li>
<li><p>Depuis le r√©pertoire <code class="docutils literal notranslate"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal notranslate"><span class="pre">nvm</span> <span class="pre">install</span></code></p></li>
</ul>
</section>
<section id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de No√´l (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>D√©veloppement du module Occhab (Occurrences d‚Äôhabitats) bas√© sur
une version minimale du standard SINP du m√™me nom et s‚Äôappuyant sur
le r√©f√©rentiel Habref du SINP (#735)</p>
<ul>
<li><p>Consultation (carte-liste) des stations et affichage de leurs
habitats</p></li>
<li><p>Recherche (et export) des stations par jeu de donn√©es, habitats
ou dates</p></li>
<li><p>Saisie d‚Äôune station et de ses habitats</p></li>
<li><p>Possibilit√© de saisir plusieurs habitats par station</p></li>
<li><p>Saisie des habitats bas√©e sur une liste pr√©-d√©finie √† partir
d‚ÄôHabref. Possibilit√© d‚Äôint√©grer toutes les typologies
d‚Äôhabitat ou de faire des listes r√©duites d‚Äôhabitats</p></li>
<li><p>Possibilit√© de charger un fichier GeoJson, KML ou GPX sur la
carte et d‚Äôutiliser un de ses objets comme g√©om√©trie de station</p></li>
<li><p>Mise en place d‚Äôune API Occhab (Get, Post, Delete, Export
stations et habitats et r√©cup√©rer les valeurs par d√©faut des
nomenclatures)</p></li>
<li><p>Calcul automatique des altitudes (min/max) et de la surface
d‚Äôune station</p></li>
<li><p>Gestion des droits (en fonction du CRUVED de l‚Äôutilisateur
connect√©)</p></li>
<li><p>D√©finition des valeurs par d√©faut dans la BDD (param√©trable par
organisme)</p></li>
<li><p>Possibilit√© de masquer des champs du formulaire</p></li>
</ul>
</li>
<li><p>Cr√©ation d‚Äôun sous-module autonome ou int√©gr√© pour g√©rer l‚ÄôAPI
d‚ÄôHabref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :</p>
<ul>
<li><p>Rechercher un habitat dans Habref (avec usage du trigramme pour
la pertinence du r√©sultat)</p></li>
<li><p>Obtenir les infos d‚Äôun habitat et de ses correspondances √†
partir de son cd_hab</p></li>
<li><p>Obtenir les habitats d‚Äôune liste (avec ou sans leur code en
plus de leur nom et filtrable par typologie)</p></li>
<li><p>Obtenir la liste des typologies (filtrable par liste
d‚Äôhabitats)</p></li>
</ul>
</li>
<li><p>Mise √† jour du module des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version
1.3.2 incluant notamment :</p>
<ul>
<li><p>Ajout de nomenclatures SINP concernant les habitats</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal notranslate"><span class="pre">t_nomenclatures</span></code></p></li>
</ul>
</li>
<li><p>Association des JDD √† des modules pour filtrer les JDD utilis√©s dans
Occtax ou dans Occhab notamment (#399)</p></li>
<li><p>Mise √† jour de Angular 4 √† Angular 7 (performances, ‚Ä¶.) par
&#64;jbrieuclp</p></li>
<li><p>Ajout d‚Äôune documentation utilisateur pour le module Synth√®se :
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>
(par &#64;amandine-sahl)</p></li>
<li><p>OCCTAX : Am√©lioration importante des performances de la liste des
relev√©s (par &#64;jbrieuclp) (#690, #740)</p></li>
<li><p>Am√©liorations des performances des exports de Occtax et de Synth√®se
et ajout d‚Äôindex dans Occtax (par &#64;gildeluermoz) (#560)</p></li>
<li><p>Partage de scripts de sauvegarde de l‚Äôapplication et de la BDD dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</p></li>
<li><p>Externalisation des librairies d‚Äôoutils Flask et SQLAlchemy
(<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir
les factoriser et les utiliser dans d‚Äôautres applications. Cela
am√©liore aussi les performances des jointures.</p></li>
<li><p>SYNTHESE : Ajout d‚Äôun export de la liste des esp√®ces (#805)</p></li>
<li><p>SYNTHESE : Baser la port√©e de tous les exports (y compris Statuts)
sur l‚Äôaction E (#804)</p></li>
<li><p>METADONNEES : Affichage des ID des JDD et CA</p></li>
<li><p>OCCTAX : Conserver le fichier GPX ou GeoJSON charg√© sur la carte
quand on enchaine des relev√©s et ajouter de la transparence sur les
g√©om√©tries utilis√©s dans les relev√©s pr√©c√©dents (#813)</p></li>
<li><p>OCCTAX : Clarification de l‚Äôergonomie pour ajouter un d√©nombrement
sur un taxon (#780)</p></li>
<li><p>Ajout des dates de creation et de modification dans les tables
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> et
triggers pour les calculer automatiquement</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">geom_local</span></code>, <code class="docutils literal notranslate"><span class="pre">altitude_min</span></code> et <code class="docutils literal notranslate"><span class="pre">altitude_max</span></code> dans
la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer
automatiquement (#812)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">id_module</span></code>,
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal notranslate"><span class="pre">id_nomenclature_grp_typ</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</p></li>
<li><p>Le composant g√©n√©rique FileLayer expose un <code class="docutils literal notranslate"><span class="pre">output</span></code> pour r√©cuperer
la g√©om√©trie s√©lectionn√©e (un observable de MapService √©tait utilis√©
auparavant)</p></li>
<li><p>Support des markers sur le composant <code class="docutils literal notranslate"><span class="pre">leaflet-draw</span></code></p></li>
<li><p>Possibilit√© de ne pas activer le composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> au lancement
lorsque celui-ci est utilis√© (input <code class="docutils literal notranslate"><span class="pre">defaultEnable</span></code>)</p></li>
<li><p>Ajout d‚Äôinputs <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">medias</span></code> et <code class="docutils literal notranslate"><span class="pre">datalist</span></code> au
composant DynamicForm permettant de g√©n√©rer des formulaires
dynamiques.</p></li>
<li><p>Am√©liorations diverses du composant DynamicForm (par &#64;joelclems)</p></li>
<li><p>Ajout d‚Äôun param√®tre dans le cas o√π le serveur se trouve derri√®re
un proxy (<code class="docutils literal notranslate"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal notranslate"><span class="pre">proxy_https</span></code> dans
<code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>)</p></li>
<li><p>Ajout d‚Äôune route permettant de r√©cup√©rer la liste des r√¥les d‚Äôune
liste √† partir de son code (par &#64;joelclems)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>MENU Side nav : Correction pour ne pas afficher les modules pour
lesquels le param√®tre <code class="docutils literal notranslate"><span class="pre">active_frontend</span></code> est False (#822)</p></li>
<li><p>OCCTAX : Gestion de l‚Äô√©dition des occurrences o√π le JDD a √©t√©
d√©sactiv√©, en ne permettant pas de modifier le JDD (#694)</p></li>
<li><p>OCCTAX : Correction d‚Äôune faiblesse lors de la r√©cup√©ration des
informations taxonomiques d‚Äôun relev√© (utilisation d‚Äôune jointure
plut√¥t que l‚ÄôAPI TaxHub) (#751)</p></li>
<li><p>OCCTAX : Correction des longues listes de taxons dans les tooltip
des relev√©s en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</p></li>
<li><p>OCCTAX : Masquer le bouton <code class="docutils literal notranslate"><span class="pre">T√©l√©charger</span></code> si l‚Äôutilisateur n‚Äôa pas
de droits d‚Äôexport dans le module (E = 0)</p></li>
<li><p>OCCTAX : Correction de l‚Äôaffichage des relev√©s dans la liste
(#777)</p></li>
<li><p>OCCTAX : Correction des exports quand on filtre sur un obervateur en
texte</p></li>
<li><p>SYNTHESE : Filtre sur <code class="docutils literal notranslate"><span class="pre">date_max</span></code> en prenant <code class="docutils literal notranslate"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code>
pour prendre en compte les observations avec un horaire (#778)</p></li>
<li><p>SYNTHESE : Correction des boutons radios pour les filtres
taxonomiques avanc√©s bas√©s sur les attributs TaxHub (#763)</p></li>
<li><p>SYNTHESE : Correction de la recherche par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> dans le composant
<code class="docutils literal notranslate"><span class="pre">SearchTaxon</span></code> (#824)</p></li>
<li><p>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</p></li>
<li><p>INSCRIPTION : Correction si aucun champ additionnel n‚Äôa √©t√© ajout√©
au formulaire (par &#64;jbrieuclp) (#746)</p></li>
<li><p>INSCRIPTION : Correction de l‚Äôusage des param√®tres <code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code>
et <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</p></li>
<li><p>Simplification de l‚Äô√©criture des logs dans le script
<code class="docutils literal notranslate"><span class="pre">install_db.sh</span></code></p></li>
<li><p>Correction de l‚Äôinstallation des requirements.txt lors de
l‚Äôinstallation d‚Äôun module (#764 par &#64;joelclems)</p></li>
<li><p>COMMONS : Modification des champs de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> de type
CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal notranslate"><span class="pre">module_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">module_target</span></code>, <code class="docutils literal notranslate"><span class="pre">module_external_url</span></code>) (#799)</p></li>
<li><p>COMMONS : Ajout de contraintes d‚Äôunicit√© pour les champs
<code class="docutils literal notranslate"><span class="pre">module_path</span></code> et <code class="docutils literal notranslate"><span class="pre">module_code</span></code> de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code></p></li>
<li><p>pnx-geojson : Am√©lioration du zoom, gestion des styles</p></li>
<li><p>Migration des donn√©es GeoNature V1 vers V2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>NB: La version 2.3.0 n‚Äôest pas compatible avec le module Dashboard. Si
vous avez le module Dashboard install√©, ne passez pas √† cette nouvelle
version. Compatibilit√© dans la 2.3.1.</p>
<ul>
<li><p>Lancer le script de migration qui va installer et remplir le nouveau
sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_habitats</span></code> avec Habref et mettre √† jour le sch√©ma
<code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/install/migration
chmod<span class="w"> </span>+x<span class="w"> </span><span class="m">2</span>.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
</li>
</ul>
<p>V√©rifier que la migration s‚Äôest bien d√©roul√©e dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul>
<li><p>Lancer le script SQL de mise √† jour de la BDD de GeoNature
<a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></p></li>
<li><p>Vous pouvez installer le nouveau module Occhab (Occurrences
d‚Äôhabitats) si vous le souhaitez :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/backend
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
geonature<span class="w"> </span>install_gn_module<span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/contrib/gn_module_occhab<span class="w"> </span>/occhab
deactivate
</pre></div>
</div>
</li>
<li><p>Lors de la migration (<code class="docutils literal notranslate"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les
JDD actifs sont associ√©s par d√©faut au module Occtax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>).
A chacun d‚Äôadapter si besoin, en en retirant certains. Pour
utiliser le module Occhab, vous devez y associer au moins un JDD.</p></li>
</ul>
</section>
<section id="id38">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id38" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>La route de changement de mot de passe √©tait d√©sactiv√©e par le
mauvais param√®tre (<code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de
<code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</p></li>
<li><p>D√©sactivation du mode ¬´¬†enchainement des relev√©s¬†¬ª en mode √©dition
(#669). Correction effacement du m√™me relev√© (#744)</p></li>
<li><p>Correction d‚Äôaffichage du module m√©tadonn√©es lorsque les AF n‚Äôont
pas de JDD pour des raisons de droit (#743)</p></li>
<li><p>Diverses corrections de doublons d‚Äôimport et de logs de d√©bugs
(#742)</p></li>
<li><p>Mont√©e de version du sous-module d‚Äôauthentification: 1.4.2</p></li>
</ul>
</section>
<section id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôinterfaces et de param√®tres de cr√©ation de compte, de
r√©cup√©ration de son mot de passe et d‚Äôadministration de son profil,
bas√© sur l‚ÄôAPI UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia)
#615</p></li>
<li><p>Ajout d‚Äôune fonctionnalit√© de cr√©ation automatique d‚Äôun CA et
d‚Äôun JDD personnel lors de la validation d‚Äôun compte cr√©√©
automatiquement (param√©trable)</p></li>
<li><p>Am√©lioration du composant de cr√©ation dynamique de formulaire
(support de text-area, checkbox simple et multiple et exemple
d‚Äôutilisation √† partir de la conf GeoNature)</p></li>
<li><p>Le composant ‚Äôobservateur‚Äô permet de rechercher sur le nom ou le
pr√©nom (utilisation des RegEx) #567</p></li>
<li><p>Mise √† jour de Flask en version 1.1.1</p></li>
<li><p>Nouvelle version du sous-module d‚Äôauthentification (1.4.1),
compatible avec UsersHub 2.1.0</p></li>
<li><p>Mise √† jour du sous-module de nomenclatures (version 1.3.0)</p></li>
<li><p>Mise √† jour et clarification du MCD
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par
&#64;jpm-cbna</p></li>
<li><p>Ajout d‚Äôune tutoriel vid√©o d‚Äôinstallation dans la documentation
(<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug sur les export CSV en utilisant la librairie
Python standard <code class="docutils literal notranslate"><span class="pre">csv</span></code> (#733)</p></li>
<li><p>SYNTHESE API : Passage de la route principale de r√©cup√©ration des
donn√©es en POST plut√¥t qu‚Äôen GET (#704)</p></li>
<li><p>SYNTHESE BDD : Suppression automatique des aires intersect√©es
(<code class="docutils literal notranslate"><span class="pre">synthese.cor_area_synthese</span></code>) lorsqu‚Äôune observation est supprim√©e
(DELETE CASCADE)</p></li>
<li><p>SYNTHESE : Prise en compte du param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code>
(#707)</p></li>
<li><p>OCCTAX : Correction d‚Äôune autocompl√©tion automatique erron√©e de la
date max en mode √©dition (#706)</p></li>
<li><p>VALIDATION : Am√©liorations des performances, par &#64;jbrieuclp (#710)</p></li>
<li><p>Prise en compte des sous-taxons pour le calcul des r√®gles de
sensibilit√©</p></li>
<li><p>Correction des contraintes CHECK sur les tables li√©es √† la
sensibilit√©</p></li>
<li><p>Compl√©ment et correction des scripts de migration
<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
<li><p>Correction et clarification de la documentation d‚Äôadministration
des listes de taxons et de sauvegarde et restauration de la BDD
(par &#64;lpofredc)</p></li>
<li><p>Correction de la rotation des logs</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Passer le script de migration suivant:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous souhaitez activer les fonctionnalit√©s de cr√©ation de compte,
veuillez lire <strong>attentivement</strong> cette documentation :
<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></p></li>
<li><p>Si vous activez la cr√©ation de compte, UsersHub 2.1.0 doit √™tre
install√©. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de
version</a>.</p></li>
</ul>
</section>
<section id="id39">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id39" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>SYNTHESE : Correction d‚Äôune URL en dur pour la recherche de rangs
taxonomiques</p></li>
<li><p>OCCTAX : Affichage uniquement des JDD actifs</p></li>
<li><p>VALIDATION : Abaissement de la limite d‚Äôaffichage de donn√©es sur la
carte par d√©faut + message indicatif</p></li>
<li><p>Migration : Suppression d‚Äôun lien symbolique qui cr√©ait des liens
en cascade</p></li>
<li><p>Am√©lioration de la documentation (&#64;dthonon)</p></li>
<li><p>Am√©lioration de la rapidit√© d‚Äôinstallation du MNT gr√¢ce √† la
suppression d‚Äôun param√®tre inutile</p></li>
<li><p>BACKOFFICE : Correction d‚Äôune URL incorrecte et customisation</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0,
passez directement √† cette version en suivant les notes de version de la
2.1.1.</p>
</section>
<section id="id40">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id40" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>SYNTHESE: Factorisation du formulaire de recherche (utilis√© dans le
module synthese et validation)</p></li>
<li><p>SYNTHESE: Simplification et correction du module de recherche
avanc√©e d‚Äôun taxon en le limitant √† l‚Äôordre (performances)</p></li>
<li><p>SYNTHESE: Ajout d‚Äôun composant de recherche taxonomique avanc√© bas√©
sur les rangs taxonomiques (modules synthese et validation), bas√©
sur la nouvelle fonction <code class="docutils literal notranslate"><span class="pre">taxonomie.find_all_taxons_children</span></code>
ajout√©e √† TaxHub</p></li>
<li><p>Cr√©ation d‚Äôun backoffice d‚Äôadmnistration dans le coeur de
GeoNature. Bas√© sur Flask-admin, les modules peuvent alimenter
dynamiquement le backoffice avec leur configuration</p></li>
<li><p>Mise en place d‚Äôune documentation d√©veloppeur automatique de l‚ÄôAPI
√† partir des docstring et des composants frontend, g√©n√©r√©e par
Travis et d√©sormais accessible √† l‚Äôadresse
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</p></li>
<li><p>Am√©lioration de la documentation (triggers, installation, module
validation)</p></li>
<li><p>Suppression du module d‚Äôexemple, remplac√© par un template de module
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</p></li>
<li><p>Ajout d‚Äôun champ <code class="docutils literal notranslate"><span class="pre">validable</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code>
controlant les donn√©es pr√©sentes dans le module VALIDATION
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</p></li>
<li><p>VALIDATION: Lister toutes les donn√©es de la synth√®se ayant un
<code class="docutils literal notranslate"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui
ont un enregistrement dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code></p></li>
<li><p>VALIDATION: On ne liste plus les <code class="docutils literal notranslate"><span class="pre">id_nomenclatures</span></code> des types de
validation √† utiliser, dans la configuration du module. Mais on
utilise toutes les nomenclatures activ√©es du type de nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_VALID</span></code>.
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</p></li>
<li><p>Ajout de tests sur les ajouts de JDD et CA</p></li>
<li><p>Ajout d‚Äôune fonctionnalit√© d‚Äôenvoie d‚Äôemail via Flask-Mail dans
le coeur de GeoNature</p></li>
<li><p>Am√©lioration des performances: ajout d‚Äôindex sur Occtax et
Metadonn√©es</p></li>
<li><p>Script d‚Äôimport des m√©tadonn√©es √† partir du webservice MTD de
l‚ÄôINPN (&#64;DonovanMaillard)</p></li>
<li><p>Compl√©ment, correction et compatibilit√© 2.1.0 des scripts de
migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Nombreuses corrections du module de validation (non utilisation des
id_nomenclature, simplification des vues et de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code>)</p></li>
<li><p>Ordonnancement de listes d√©roulantes (#685)</p></li>
<li><p>OCCTAX : correction de l‚Äô√©dition d‚Äôun relev√© √† la g√©om√©trie de
type Polyline (#684)</p></li>
<li><p>OCCTAX : correction l‚Äô√©dition et du contr√¥le conditionnel des
champs de ¬´¬†preuves¬†¬ª (preuve d‚Äôexistence num√©rique / non
num√©rique) (#679)</p></li>
<li><p>OCCTAX : correction du parametre <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en
compte (#670)</p></li>
<li><p>OCCTAX: correction de la date_max non remplie lorsque
<code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></p></li>
<li><p>OCCTAX: correction d‚Äôun bug lors de l‚Äôenchainement de relev√©
lorsque l‚Äôheure est remplie</p></li>
<li><p>SYNTHESE: correction des doublons lorsqu‚Äôil y a plusieurs
observateurs</p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> sur les champs de recherche de
type texte (recherche sur Preuve num√©rique) (#530)</p></li>
<li><p>D√©sactivation du mode ¬´¬†enchainer les relev√©s¬†¬ª en mode √©dition
(#699)</p></li>
<li><p>Correction de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> √† la
place de <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de
suivi √† des modules</p></li>
<li><p>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</p></li>
<li><p>Le trigger remplissant <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> en intersectant
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les
zonages ayant le champs <code class="docutils literal notranslate"><span class="pre">enabled=true</span></code></p></li>
<li><p>Correction <code class="docutils literal notranslate"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</p></li>
<li><p>MAJ de s√©curit√© de Bootstrap (en version 4.3.1)</p></li>
<li><p>L‚Äôancien module export du coeur est enlev√© en vue de la sortie du
nouveau module export</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Passer TaxHub en version 1.6.3
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</p></li>
<li><p>Passer le script de migration <code class="docutils literal notranslate"><span class="pre">data/2.1.0to2.1.1.sql</span></code></p></li>
<li><p>Si vous aviez modifier les <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> dans la surcouche de la
configuration du module validation, supprimer les car on se base
maintenant sur les <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code></p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</section>
<section id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Int√©gration du module Validation dans GeoNature (d√©velopp√© par
&#64;JulienCorny, financ√© par &#64;sig-pnrnm)</p></li>
<li><p>Ajout de tables, r√®gles et fonctions permettant de calculer la
sensibilit√© des occurrences de taxon de la synth√®se (#284)</p></li>
<li><p>Occtax - Possibilit√© d‚Äôenchainer les saisies de relev√©s et de
garder les informations du relev√© (#633)</p></li>
<li><p>Occtax - Am√©lioration de l‚Äôergonomie de l‚Äôinterface MapList pour
clarifier la recherche et l‚Äôajout d‚Äôun relev√© + ajout compteur
(#467)</p></li>
<li><p>R√©vision de l‚Äôinterface du module M√©tadonn√©es, listant les cadres
d‚Äôacquisition et leurs jeux de donn√©es (par &#64;jbrieuclp)</p></li>
<li><p>Ajout d‚Äôun m√©canisme du calcul des taxons observ√©s par zonage
g√©ographique (#617)</p></li>
<li><p>Les mailles INPN (1, 5, 10km) sont int√©gr√©es √† l‚Äôinstallation (avec
un param√®tre)</p></li>
<li><p>Statistiques de la page d‚Äôaccueil - Ajout d‚Äôun param√®tre
permettant de les d√©sactiver (#599)</p></li>
<li><p>Occtax - Date par d√©faut param√©trable (#351)</p></li>
<li><p>Support des g√©ometries multiples (MultiPoint, MultiPolygone,
MultiLigne) dans la synth√®se et Occtax (#609)</p></li>
<li><p>Synthese - Affichage des zonages intersect√©s dans un onglet s√©par√©
(#579)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>R√©vision compl√®te des scripts de migration de GeoNature v1 √† v2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code>)</p></li>
<li><p>Masquer l‚Äôexport du module Synth√®se si son CRUVED est d√©fini √† 0
(#608)</p></li>
<li><p>Correction de la v√©rification du CRUVED du module METADONNEES
(#601)</p></li>
<li><p>Correction de la v√©rification du CRUVED lorsque get_role = False</p></li>
<li><p>Correction de la traduction sur la page de connexion
(par &#64;jbrieuclp)</p></li>
<li><p>Occtax - Retour du composant GPS permettant de charger un marker √†
partir de coordonn√©es X et Y (#624)</p></li>
<li><p>Correction lors d‚Äôimport de fichier GPX ayant une altitude (#631)</p></li>
<li><p>Occtax - Correction du filtre Observateur texte libre (#598)</p></li>
<li><p>M√©tadonn√©es - Inversion des domaines terrestre/marin
(par &#64;xavyeah39)</p></li>
<li><p>M√©tadonn√©es - Correction de l‚Äô√©dition des cadres d‚Äôacquisition
(#654, par &#64;DonovanMaillard)</p></li>
<li><p>Mise √† jour de s√©curit√© de Jinja2 et SQLAlchemy</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Lancer le script de migration de la base de donn√©es :</p>
<p>Cette nouvelle version de GeoNature int√®gre les mailles INPN (1, 5,
10km) dans le r√©ferentiel g√©ographique. Si vous ne souhaitez pas les
installer, lancer le script ci dessous en passant le param√®tre
<code class="docutils literal notranslate"><span class="pre">no-grid</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p>Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande d‚Äôinstallation du module puis sortir du
virtualenv</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id41">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id41" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>D√©veloppement : ajout d‚Äôune fonction de g√©n√©ration dynamique de
requ√™te SQL (avec v√©rification et cast des types)</p></li>
<li><p>Synthese : Ajout d‚Äôun message indiquant que le module affiche les
derni√®res observations par d√©faut</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Synthese : correction du filtre CRUVED pour les port√©es 1 et 2 sur
la route <code class="docutils literal notranslate"><span class="pre">synthese/for_web</span></code> (#584)</p></li>
<li><p>Synthese : correction du bug lorsque la g√©om√©trie est null (#580)</p></li>
<li><p>Synthese : Correction de la redirection vers le module de saisie
(#586)</p></li>
<li><p>Synthese : Correction de la valeur par d√©faut de la nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal notranslate"><span class="pre">Pr√©sent</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">NSP</span></code>)</p></li>
<li><p>Configuration carto : correction du bug d‚Äôarrondissement des
coordonn√©es g√©ographiques (#582)</p></li>
<li><p>Correction du trigger de calcul de la geom locale</p></li>
<li><p>Recr√©ation de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait √©t√©
supprim√©e lors de la migration RC3 vers RC4</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_releve_list</span></code></p></li>
<li><p>Correction ajout rang et cd_nom sur l‚Äôautocomplete de la synthese,
absent dans le script de migration</p></li>
<li><p>DEPOBIO : Correction de la d√©connexion au CAS INPN</p></li>
<li><p>Occtax et Metadata: correction lors de la mise √† jour d‚Äôun √©lement
(Merge mal g√©r√© par SQLAlchemy lorsqu‚Äôon n‚Äôa pas une valeur NULL)
(#588)</p></li>
<li><p>Composant ¬´¬†jeu de donn√©es¬†¬ª : retour √† l‚Äôaffichage du nom long
(#583)</p></li>
<li><p>Am√©lioration du style du composant multiselect</p></li>
<li><p>Metadata : formulaire cadre d‚Äôacquisition - listage uniquement des
cadres d‚Äôacquisition parent pour ne pas avoir de cadres
d‚Äôacquisition imbriqu√©s</p></li>
<li><p>Ajouts de tests automatis√©s compl√©mentaires</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script de migration SQL du sous-module Nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</p></li>
<li><p>Ex√©cuter le script de migration SQL de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Lien vers cette rubrique">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √†
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standardis√©e, plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<p>Pour plus de d√©tails sur les √©volutions apport√©es dans la version 2,
consultez les d√©tails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibilit√© de charger un fichier (GPX, GeoJson ou KML) sur la carte
pour la saisie dans le module Occtax (#256)</p></li>
<li><p>Ajout d‚Äôun moteur de recherche de lieu (bas√© sur l‚ÄôAPI
OpenStreetMap Nominatim) sur les modules cartographiques (#476)</p></li>
<li><p>Int√©gration du plugin leaflet markerCluster permettant d‚Äôafficher
d‚Äôavantage d‚Äôobservations sur les cartes et de g√©rer leurs
superposition (#559)</p></li>
<li><p>Synth√®se : possibilit√© de grouper plusieurs types de zonages dans le
composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Design de la page de login</p></li>
<li><p>Int√©gration d‚Äôun bloc stat sur la page d‚Äôaccueil</p></li>
<li><p>Ajout d‚Äôun export des m√©tadonn√©es dans la synth√®se</p></li>
<li><p>Centralisation de la configuration cartographique dans la
configuration globale de GeoNature (<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>)</p></li>
<li><p>Cartographie : zoom sur l‚Äôemprise des r√©sultats apr√®s une recherche</p></li>
<li><p>Migration de la gestion des m√©tadonn√©es dans un module √† part :
‚ÄôMETADATA‚Äô (#550)</p></li>
<li><p>Export vue synth√®se customisable (voir doc)</p></li>
<li><p>Lien vers doc par module (customisables dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>)
(#556)</p></li>
<li><p>Ajout du code du d√©partement dans les filtres par commune (#555)</p></li>
<li><p>Ajout du rang taxonomique et du cd_nom apr√®s les noms de taxons
dans la recherche taxonomique (#549)</p></li>
<li><p>Mise √† jour des communes fournies lors de l‚Äôinstallation (IGN admin
express 2019) (#537)</p></li>
<li><p>Synth√®se : Ajout du filtre par organisme (#531), affichage des
acteurs dans les fiches d√©tail et les exports</p></li>
<li><p>Synthese: possibilit√© de filtrer dans les listes d√©roulantes des
jeux de donn√©es et cadres d‚Äôacquisition</p></li>
<li><p>Filtre de la recherche taxonomique par r√®gne et groupe INPN retir√©
des formulaires de recherche (#531)</p></li>
<li><p>Suppression du champ validation dans le sch√©ma de BDD Occtax car
cette information est stock√©e dans la table verticale
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans
les fiches Occtax et Synth√®se</p></li>
<li><p>Ajout d‚Äôune vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la
r√©cup√©ration du dernier statut de validation d‚Äôune observation</p></li>
<li><p>Suppression de toutes les r√©f√©rences √† <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code> en vue
de le supprimer de TaxHub</p></li>
<li><p>S√©paration des commentaires sur l‚Äôobservation et sur le contexte
(relev√©) dans la Synth√®se et simplification des triggers de Occtax
vers Synth√®se (#478)</p></li>
<li><p>Nouveau logo GeoNature (#346)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Am√©liorations importantes des performances de la synth√®se (#560)</p></li>
<li><p>Synth√®se : correction li√©e aux filtres multiples et aux filtres
g√©ographiques de type cercle</p></li>
<li><p>Ajout d‚Äôune contrainte <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre
<code class="docutils literal notranslate"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#554)</p></li>
<li><p>Occtax : possibilit√© de saisir un d√©nombrement √©gal √† 0 (cas des
occurrences d‚Äôabsence)</p></li>
<li><p>Occtax : retour √† l‚Äôemprise cartographique pr√©c√©dente lorsqu‚Äôon
enchaine les relev√©s (#570)</p></li>
<li><p>Occtax : correction de l‚Äôautomplissage du champ <code class="docutils literal notranslate"><span class="pre">hour_max</span></code> lors de
l‚Äô√©dition d‚Äôun relev√©</p></li>
<li><p>Divers compl√©ments de la documentation (merci &#64;jbdesbas,
&#64;xavyeah39 et &#64;DonovanMaillard)</p></li>
<li><p>Ajout de contraintes d‚Äôunicit√© sur les UUID_SINP pour emp√™cher les
doublons (#536)</p></li>
<li><p>Corrections et compl√©ments des tests automatiques</p></li>
<li><p>Am√©lioration de l‚Äôinstallation des modules GeoNature</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une
nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li><p>Sauvegarder toutes ses donn√©es car l‚Äôop√©ration est complexe et
non-automatis√©e</p></li>
<li><p>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Passer aux derni√®res versions de UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation compl√®te</p></li>
<li><p>Adaptez les scripts pr√©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
ex√©cutez-les pas √† pas. Attention ces scripts ont √©t√© faits pour la
version 2.0.0-rc.1 et sont donc √† ajuster, tester, compl√©ter et
adapter √† votre contexte</p></li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la
migration.</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les
notes des versions interm√©diaires.</p></li>
<li><p>Les personnes ayant configur√© leur fichier <code class="docutils literal notranslate"><span class="pre">map.config.ts</span></code> devront
le r√©percuter dans <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, suite √† la
centralisation de la configuration cartographique (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section <code class="docutils literal notranslate"><span class="pre">[MAPCONFIG]</span></code>).</p></li>
<li><p>La configuration des exports du module synth√®se a √©t√© modifi√©e (voir
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>). Supprimer la
variable<code class="docutils literal notranslate"><span class="pre">[SYNTHESE.EXPORT_COLUMNS]</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Voir l‚Äôexemple dans le fichier (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section) pour configurer les exports.</p></li>
<li><p>Supprimer la variable <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a √©t√©
ajout√©e dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>.</p></li>
<li><p>Pour simplifier son √©dition, le template personalisable de la page
d‚Äôaccueil
(<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>)
a √©t√© modifi√© (la carte des 100 derni√®re observations n‚Äôy figure
plus). Veuillez supprimer tout ce qui se situe √† partir de la ligne
21 (<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</p></li>
<li><p>Ex√©cuter le script de migration SQL:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</p></li>
<li><p>Le backoffice de gestion des m√©tadonn√©es est dor√©navant un module
GeoNature √† part. Le script migration pr√©c√©demment lanc√© pr√©voit de
mettre un CRUVED au groupe_admin et groupe_en_poste pour le
nouveau module METADATA. Les groupes nouvellement cr√©√©s par les
administrateurs et n‚Äôayant de CRUVED pour l‚Äôobjet METADATA (du
module Admin), se retrouvent avec le CRUVED h√©rit√© de GeoNature.
L‚Äôadministrateur devra changer lui-m√™me le CRUVED de ces groupes
pour le nouveau module METADATA via le backoffice des permissions.</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
</ul>
</section>
<section id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise en place de logs rotatifs pour √©viter de surcharger le serveur</p></li>
<li><p>Centralisation des logs applicatifs dans le dossier
<code class="docutils literal notranslate"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Synth√®se - Correction et am√©lioration de la gestion des dates
(#540)</p></li>
<li><p>Am√©lioration des tests automatis√©s</p></li>
<li><p>Correction et compl√©ment ds scripts d‚Äôinstallation des modules
GeoNature</p></li>
<li><p>Remplacement de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> par
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code></p></li>
<li><p>Compl√©ment des documentations de customisation, d‚Äôadministration et
de d√©veloppement</p></li>
<li><p>Ajout d‚Äôune documentation de migration de donn√©es Serena vers
GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>)
par &#64;xavyeah39</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les
notes des versions interm√©diaires</p></li>
<li><p>Ex√©cutez la mise √† jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p></li>
<li><p>Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de
GeoNature dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus
associer les sites de suivi de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> √† des applications,
utilis√© par les modules de suivi (Flore, habitat, chiro). Le
m√©canisme est remplac√© par une association des sites de suivi aux
modules. La cr√©ation de la nouvelle table est automatis√©e
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la
migration des √©ventuelles donn√©es existantes de
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> vers
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code>, √† faire manuellement.</p></li>
<li><p>Afin que les logs de l‚Äôapplication soient tous √©crits au m√™me
endroit, modifier le fichier <code class="docutils literal notranslate"><span class="pre">geonature-service.conf</span></code>
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la
ligne <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code>
(en rempla√ßant &lt;MON_USER&gt; par votre utilisateur linux).</p></li>
<li><p>Vous pouvez √©galement mettre en place un syst√®me de logs rotatifs
(syst√®me permettant d‚Äôarchiver les fichiers de logs afin qu‚Äôils ne
surchargent pas le serveur - conseill√© si votre serveur a une
capacit√© disque limit√©e). Cr√©er le fichier suivant
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes
suivantes dans le fichier nouvellement cr√©√© (en rempla√ßant
&lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/&lt;MON_USER&gt;/geonature/var/log/*.log {
daily
rotate 8
size 100M
create
compress
}
</pre></div>
</div>
<p>Ex√©cutez ensuite la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Mise √† jour des paquets du frontend (#538)</p></li>
<li><p>Correction d‚Äôun conflit entre Marker et Leaflet-draw</p></li>
<li><p>Utilisation du param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> au niveau de l‚Äôapplication</p></li>
<li><p>Corrections mineures diverses</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Sortie de versions correctives de UsersHub (2.0.2 -
<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) et TaxHub (1.6.1 -
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) √† appliquer aussi</p></li>
<li><p>Vous pouvez vous r√©f√©rer √† la documentation globale de mise √† jour
de GeoNature RC3 vers RC4 par &#64;DonovanMaillard
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</p></li>
</ul>
</section>
<section id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Int√©gration de la gestion des permissions (CRUVED) dans la BDD de
GeoNature, g√©r√© via une interface d‚Äôadministration d√©di√© (#517)</p></li>
<li><p>Mise en place d‚Äôun syst√®me de permissions plus fin par module et
par objet (#517)</p></li>
<li><p>Mise en place d‚Äôun m√©canimse g√©n√©rique pour la gestion des
permissions via des filtres : filtre de type port√©e (SCOPE),
taxonomique, g√©ographique etc‚Ä¶ (#517)</p></li>
<li><p>Compatibilit√© avec UsersHub version 2</p></li>
<li><p>L‚Äôadministration des permissions ne propose que les r√¥les qui sont
actif et qui ont un profil dans GeoNature</p></li>
<li><p>Ajout du composant Leaflet.FileLayer dans le module Synth√®se pour
pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme
g√©om√©trie de recherche (#256)</p></li>
<li><p>Ajout et utilisation de l‚Äôextension PostgreSQL <code class="docutils literal notranslate"><span class="pre">pg_tgrm</span></code> permettant
d‚Äôam√©liorer l‚ÄôAPI d‚Äôautocompl√©tion de taxon dans la synth√®se, en
utilisant l‚Äôalgorithme des trigrammes
(<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>),
fonctionnel aussi dans les autres modules si vous mettez √† jour
TaxHub en version 1.6.0.</p></li>
<li><p>Nouvel exemple d‚Äôimport de donn√©es historiques vers GeoNature V2 :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a>
(par &#64;DonovanMaillard)</p></li>
<li><p>Compl√©ment de la documentation HTTPS et ajout d‚Äôune documentation
Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôid_digitiser lors de la mise √† jour (#481)</p></li>
<li><p>Corrections multiples de la prise en compte du CRUVED (#496)</p></li>
<li><p>Deconnexion apres inactivit√© de l‚Äôutilisateur (#490)</p></li>
<li><p>Suppression des heures au niveau des dates de l‚Äôexport occtax
(#485)</p></li>
<li><p>Correction du message d‚Äôerreur quand on n‚Äôa pas de JDD (#479)</p></li>
<li><p>Correction du champs commentaire dans les exports d‚ÄôOcctax s√©par√©
entre relev√© et occurrence (#478)</p></li>
<li><p>Correction des param√®tres de la fonction
<code class="docutils literal notranslate"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</p></li>
<li><p>Correction de l‚Äôadministration des m√©tadonn√©es (#466 #420)</p></li>
<li><p>M√©tadonn√©es (JDD et CA) : ne pas afficher les utilisateurs qui sont
des groupes dans les acteurs</p></li>
<li><p>Ajout d‚Äôun champs dans la Synth√®se permettant de stocker de quel
module provient une occurrence et fonctions SQL associ√©es (#412)</p></li>
<li><p>Am√©lioration du style des champs obligatoires</p></li>
<li><p>Am√©liorations mineures de l‚Äôergonomie d‚ÄôOcctax</p></li>
<li><p>Correction du spinner qui tournait en boucle lors de l‚Äôexport CSV
de la Synth√®se (#451)</p></li>
<li><p>Correction des tests automatis√©s</p></li>
<li><p>Am√©lioration des performances des intersections avec les zonages de
<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code></p></li>
<li><p>Compl√©ment de la documentation de d√©veloppement</p></li>
<li><p>Simplification de la configuration des gn_modules</p></li>
<li><p>Occtax : ordonnancement des observation par date (#467)</p></li>
<li><p>Occtax : Remplissage automatique de l‚Äôheure_max √† partir de
l‚Äôheure_min (#522)</p></li>
<li><p>Suppression des warnings lors du build du frontend</p></li>
<li><p>Correction de l‚Äôinstallation des modules GeoNature</p></li>
<li><p>Ajout d‚Äôun message quand on n‚Äôa pas acc√®s √† une donn√©e d‚Äôun
module</p></li>
<li><p>Affichage du nom du module dans le Header (#398)</p></li>
<li><p>Correction des outils cartographiques dans Occtax</p></li>
<li><p>Correction compl√©mentaire des styles des lignes sans remplissage
(#458)</p></li>
<li><p>MaplistService : correction du zoom sur les polygones et polylignes</p></li>
<li><p>Composant Areas et Municipalities : remise √† z√©ro de la liste
d√©roulante quand on efface la recherche ou remet √† jour les filtres</p></li>
<li><p>Composant Taxonomy : la recherche autocomplet√©e est lanc√©e m√™me si
on tape plus de 20 caract√®res. Le nombre de r√©sultat renvoy√© est
d√©sormais param√©trable (#518)</p></li>
<li><p>Limitation du nombre de connexions √† la BDD en partageant
l‚Äôinstance <code class="docutils literal notranslate"><span class="pre">DB</span></code> avec les sous-modules</p></li>
<li><p>Installation : utilisation d‚Äôun r√©pertoire <code class="docutils literal notranslate"><span class="pre">tmp</span></code> local et non plus
au niveau syst√®me pour limiter les probl√®mes de droits (#503)</p></li>
<li><p>Evolution du template d‚Äôexemple de module GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>)
pour utiliser l‚Äôinstance DB et utiliser les nouveaux d√©corateurs de
permissions (CRUVED)</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle
version, il est n√©cessaire d‚Äôavoir install√© UsersHub version 2.x au
pr√©alable. Suivez donc sa documentation
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) avant de proc√©der √†
la mont√©e de version de GeoNature.</p></li>
<li><p>Ex√©cuter la commande suivante pour ajouter l‚Äôextension <code class="docutils literal notranslate"><span class="pre">pg_trgm</span></code>,
en rempla√ßant la variable <code class="docutils literal notranslate"><span class="pre">$db_name</span></code> par le nom de votre BDD :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></p></li>
<li><p>Mettez √† jour TaxHub en version 1.6.0 pour b√©n√©ficier de
l‚Äôam√©lioration de la recherche taxonomique dans tous les modules</p></li>
<li><p>Ex√©cutez la mise √† jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Note d√©veloppeurs</strong></p>
<ul class="simple">
<li><p>Vous pouvez faire √©voluer les modules GeoNature en utilisant
l‚Äôinstance <code class="docutils literal notranslate"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts
d‚Äôinstallation (#498)</p></li>
<li><p>Il n‚Äôest plus n√©c√©ssaire de d√©finir un <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans la
configuration des modules GeoNature.</p></li>
<li><p>La gestion des permissions a √©t√© revue et est d√©sormais internalis√©e
dans GeoNature (voir
<a class="reference external" href="http://docs.geonature.fr/development.html#developpement-backend">http://docs.geonature.fr/development.html#developpement-backend</a>),
il est donc necessaire d‚Äôutiliser les nouveaux d√©corateurs d√©crit
dans la doc pour r√©cup√©rer le CRUVED.</p></li>
</ul>
</section>
<section id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">√¨nstall_all.sh</span></code> au niveau de la g√©n√©ration de
la configuration Apache de TaxHub et UsersHub (#493)</p></li>
<li><p>Suppression du Servername dans la configuration Apache de TaxHub du
script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Compl√©ment de la documentation de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous migrez depuis une version 2.0.0-rc.2, installez directement
cette version corrective plut√¥t que la 2.0.0-rc.3, mais en suivant
les notes de versions de la 2.0.0-rc.3</p></li>
<li><p>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal notranslate"><span class="pre">/</span></code>, consultez sa
documentation
<a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur
Debian 8, probl√®me de version de PostGIS qui ne s‚Äôinstalle pas
correctement</p></li>
</ul>
</section>
<section id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Lien vers cette rubrique">¬∂</a></h2>
<ul class="simple">
<li><p>Possibilit√© d‚Äôutiliser le MNT en raster ou en vecteur dans la BDD
(+ doc MNT) #439 (merci &#64;mathieubossaert)</p></li>
<li><p>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</p></li>
<li><p>INSTALL_ALL - Am√©lioration de la conf Apache de TaxHub pour g√©rer
son URL sans <code class="docutils literal notranslate"><span class="pre">/</span></code> √† la fin</p></li>
<li><p>Dessin cartographique d‚Äôune autre couleur (rouge) que les
observations (bleu)</p></li>
<li><p>Occtax : retour au zoom pr√©c√©dent lors de l‚Äôenchainement de relev√©
(#436)</p></li>
<li><p>Occtax : observateur rempli par d√©faut avec l‚Äôutilisateur connect√©
(#438)</p></li>
<li><p>Prise en compte des g√©om√©tries nulles dans la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Gestion plus compl√®te des donn√©es exemple int√©gr√©es ou non lors de
l‚Äôinstallation (#446)</p></li>
<li><p>Compl√©ment des diff√©rentes documentations</p></li>
<li><p>Compl√©ment FAQ (#441)</p></li>
<li><p>Documentation de la customisation (merci &#64;DonovanMaillard)</p></li>
<li><p>Am√©lioration de l‚Äôarchitecture du gn_module d‚Äôexemple</p></li>
<li><p>Clarification de la configuration des gn_modules</p></li>
<li><p>Lire le fichier <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> pour l‚Äôafficher dans l‚Äôinterface (#421)</p></li>
<li><p>Utilisation de la vue <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et non plus
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> par d√©faut pour les exports Occtax (#462)</p></li>
<li><p>Compl√©ment et correction des vues <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> (#462)</p></li>
<li><p>Mise √† jour de Marshmallow (2.5.0 =&gt; 2.5.1)</p></li>
<li><p>Am√©liorations des routes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de la configuration
des modules de suivi pour pouvoir utiliser le nom d‚Äôune application
plut√¥t que son identifiant</p></li>
<li><p>Export Synth√®se - Remplacement de la barre de t√©l√©chargement par un
spinner (#451)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Doc Import niveau 2 : Corrections et compl√©ments</p></li>
<li><p>Correction du trigger Occtax &gt; Synth√®se qui met √† jour le champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</p></li>
<li><p>Correction et am√©lioration de la fonction <code class="docutils literal notranslate"><span class="pre">install_gn_module</span></code></p></li>
<li><p>Correction coquille dans le mod√®le <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Installation uniquement sur un environnement 64 bits
(documentation + v√©rification) #442 (merci &#64;jbrieuclp
et &#64;sig-pnrnm)</p></li>
<li><p>Correction et d√©coupage des scripts de mise √† jour de la BDD depuis
la version Beta5</p></li>
<li><p>Correction de l‚Äô√©dition des date_debut et date_fin de Occtax
(#457)</p></li>
<li><p>Correction des exports depuis la Synth√®se et int√©gration de la
g√©om√©trie des observations (#461 et #456)</p></li>
<li><p>Ne pas remplir <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si
<code class="docutils literal notranslate"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</p></li>
<li><p>Edition d‚Äôun relev√© Occtax - Ne pas recalculer l‚Äôaltitude
existante (#424)</p></li>
<li><p>Correction de l‚Äôactivation du formulaire Occtax apr√®s localisation
du relev√© (#469 et #471)</p></li>
<li><p>Carte - Enlever le remplissage des lignes (#458)</p></li>
<li><p>Am√©lioration du script de mise √† jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#465)</p></li>
<li><p>Suppression d‚Äôun doublon dans le mod√®le de <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>
(merci &#64;lpofredc)</p></li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li><p>Mise √† jour de TaxHub (Doc utilisateur, configuration Apache, script
d‚Äôimport des m√©dias depuis API INPN Taxref et remise √† z√©ro des
s√©quences)</p></li>
<li><p>Script de migration des donn√©es SICEN (ObsOcc) vers GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></p></li>
<li><p>Script d‚Äôimport continu depuis une BDD externe vivante (avec
exemple SICEN) :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></p></li>
<li><p>Module Suivi Flore Territoire fonctionnel et installable
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Chiro fonctionnel et installable
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que
son Frontend g√©n√©rique pour les protocoles de suivi
(<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</p></li>
<li><p>Ebauche d‚Äôun module pour les protocoles CMR
(Capture-Marquage-Recapture) :
<a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></p></li>
<li><p>MCD du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>MCD du module Flore Prioritaire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</p></li>
<li><p>Consolidation du backend et premiers d√©veloppements du frontend de
GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</p></li>
<li><p>Cr√©ation d‚Äôun script exp√©rimental d‚Äôinstallation de
GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son
sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la proc√©dure standard de mise √† jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Ex√©cutez l‚Äôupdate de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</p></li>
<li><p>Il est aussi conseill√© de mettre √† jour TaxHub en 1.5.1
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa
configuration pour qu‚Äôil fonctionne sans <code class="docutils literal notranslate"><span class="pre">/</span></code> √† la fin de son URL</p></li>
<li><p>Attention, si vous installez cette version avec le script global
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code>, il cr√©√© un probl√®me dans la configuration Apache
de UserHub (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et
supprime tous les <code class="docutils literal notranslate"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation
de UsersHub
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>)
puis relancer Apache
(<code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>).
Il est conseill√© d‚Äôinstaller plut√¥t la version corrective.</p></li>
</ul>
</section>
<section id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</p></li>
<li><p>Am√©lioration du composant Download</p></li>
<li><p>Am√©lioration du ShapeService</p></li>
<li><p>Compl√©ments de la documentation</p></li>
<li><p>Int√©gration de la documentation D√©veloppement backend dans la
documentation</p></li>
<li><p>Nettoyage du code</p></li>
<li><p>Mise √† jour de la doc de l‚ÄôAPI :
<a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></p></li>
<li><p>Configuration de la carte (<code class="docutils literal notranslate"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM
par d√©faut car OpenTopoMap ne s‚Äôaffiche pas √† petite √©chelle</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code></p></li>
<li><p>Ne pas afficher le debug dans le recherche de la synth√®se</p></li>
<li><p>Correction du bug de d√©connexion entre TaxHub et GeoNature (#423)</p></li>
<li><p>Correction de la fiche info d‚ÄôOcctax</p></li>
<li><p>Champs Multiselect : Ne pas afficher les valeurs selectionn√©es dans
la liste quand on modifie un objet</p></li>
<li><p>Trigger Occtax vers Synth√®se : Correction des probl√®mes d‚Äôheure de
relev√©s mal copi√©s dans la Synth√®se</p></li>
<li><p>Correction des altitudes (non abouti) (#424)</p></li>
<li><p>Donn√©es exemple : Suppression de l‚Äô<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code> dans la synth√®se</p></li>
<li><p>Suppression d‚Äôun <code class="docutils literal notranslate"><span class="pre">id_municipality</span></code> en dur dans une route</p></li>
<li><p>Suppression de la librairie Certifi non utilis√©e</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la proc√©dure standard de mise √† jour de GeoNature</p></li>
<li><p>Ex√©cuter l‚Äôupdate de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</p></li>
</ul>
</section>
<section id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Lien vers cette rubrique">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √†
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standarde, plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<p>Pr√©sentation et suivi des d√©veloppements :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li><p>Message d‚Äôintroduction customisable</p></li>
<li><p>Carte des 100 derni√®res observations</p></li>
<li><p>CSS g√©n√©ral de l‚Äôapplication surcouchable</p></li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des
donn√©es Faune, Flore et Fonge de type Contact selon le standard
Occurrences de taxon du SINP
(<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li><p>D√©veloppement des formulaires de saisie, page de recherche, fiche
d√©tail, API, CRUVED et export</p></li>
<li><p>Possibilit√© de masquer ou afficher les diff√©rents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>D√©veloppement du formulaire de mani√®re g√©n√©rique pour pouvoir
r√©utiliser ses diff√©rents √©l√©ments dans d‚Äôautres modules sous forme
de composants Angular</p></li>
<li><p>Configuration possible du module (Niveau de zoom, champs affich√©es,
export‚Ä¶)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d‚ÄôOcctax √† partir du
composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un
formulaire en d√©clarant ses champs et leur type (#318)</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant
que sur les d√©buts de mot et en affichant en premier les noms de
r√©f√©rence (<code class="docutils literal notranslate"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</p></li>
<li><p>Multilingue fourni avec fran√ßais et anglais (extensible √† d‚Äôautres
langues)</p></li>
<li><p>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans
Occtax. #363 et #366</p></li>
<li><p>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de jeu de
donn√©es ou si il y a eu un probl√®me lors de la r√©cup√©ration des JDD
depuis MTD</p></li>
<li><p>Prise en compte du CRUVED au niveau des routes et du front pour
adapter les contenus et fonctionnalit√©s aux droits de l‚Äôutilisateur</p></li>
<li><p>Mise en place des triggers alimentant la synth√®se √† partir des
donn√©es saisies et modifi√©es dans Occtax</p></li>
</ul>
<p><strong>Synth√®se</strong></p>
<p>Module permettant de rechercher parmi les donn√©es des diff√©rentes
sources pr√©sentes ou int√©gr√©es dans la base de donn√©es de GeoNature</p>
<ul class="simple">
<li><p>Mise en place du backend, de l‚ÄôAPI et du frontend #345</p></li>
<li><p>Interface de consultation, de recherche et d‚Äôexport dans la
Synth√®se</p></li>
<li><p>Synth√®se : Calcul automatique (trigger) des zonages de chaque
observation (communes, zonages r√©glementaires et naturels)</p></li>
<li><p>Recherche sur les zonages g√©n√©rique et param√©trable</p></li>
<li><p>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge,
milieu, attribut taxonomique, nomenclature, date, p√©riode, commune,
zonage, cadre d‚Äôacquisition, jeu de donn√©es, observateur, polygone,
rectange ou cercle dessin√©</p></li>
<li><p>Retour √† la fiche source possible si l‚Äôobservation a √©t√© saisie
dans un module de GeoNature</p></li>
<li><p>Affichage de la fiche d√©tail de chaque observation</p></li>
<li><p>Attributs TaxHub dynamiques et param√©trables</p></li>
<li><p>Configuration possible du module (colonnes, limites de recherche et
d‚Äôexport, zoom, export‚Ä¶)</p></li>
<li><p>Export bas√© sur une vue (observations et statuts)</p></li>
<li><p>Prise en compte du CRUVED pour d√©finir les donn√©es √† afficher et √†
exporter #412</p></li>
<li><p>Recherche de taxons : Liste bas√©e sur une table aliment√©e
automatiquement par les taxons pr√©sents au moins une fois dans la
Synth√®se</p></li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports bas√©s sur des vues</p>
<ul class="simple">
<li><p>Mise en place temporaire d‚Äôun export unique, bas√© sur une vue
s‚Äôappuyant sur les donn√©es de Occtax, par jeu de donn√©es</p></li>
<li><p>A remplacer par le module g√©n√©rique
<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de
d√©veloppement) permettant de g√©n√©rer des exports √† volont√© en cr√©ant
des vues et en les affectant √† des utilisateurs ou des groupes.
Chaque export sera accompagn√© de son API standardis√©e et document√©e</p></li>
</ul>
<p><strong>Admin</strong></p>
<p>Module d‚Äôadministration des tables centrales de GeoNature</p>
<ul class="simple">
<li><p>Mise en place d‚Äôun module (incomplet) permettant de g√©rer les
m√©tadonn√©es et les nomenclatures</p></li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li><p>Mise en place d‚Äôun syst√®me baptis√© CRUVED permettant de d√©finir
globalement ou par module 6 actions sont possibles (Create / Read /
Update / Validate / Export / Delete) sur 3 port√©es possibles (Mes
donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es)</p></li>
<li><p>Ces √©volutions ont √©t√© int√©gr√©es au niveau du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>
de la base de donn√©es de UsersHub, de son module
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des
routes de l‚ÄôAPI GeoNature et des interfaces</p></li>
</ul>
<p><strong>Bases de donn√©es</strong></p>
<ul class="simple">
<li><p>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de
valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>Mise en place de tables de stockage verticales (historique, m√©dias
et validation) #339</p></li>
<li><p>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√©
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une
table des communes, une table g√©n√©rique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune
gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique,
souple et complet. Il permet d‚Äôattribuer des actions possibles √† un
r√¥le (utilisateur ou groupe), sur une port√©e; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es
de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon
organisme / Toutes les donn√©es.</p></li>
<li><p>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas
d√©finie au niveau du module, on prend celle de l‚Äôapplication
parente. #292</p></li>
<li><p>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne
lui est pas list√© dans le Menu et il ne lui est pas accessible si il
en connait l‚ÄôURL. #360</p></li>
<li><p>D√©veloppement des m√©tadonn√©es dans la BDD (sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard M√©tadonn√©es du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de g√©rer des jeux de donn√©es, des cadres
d‚Äôacquisition, des acteurs (propri√©taire, financeur,
producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un
jeu de donn√©es.</p></li>
<li><p>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la
sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des
r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</p></li>
<li><p>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP
(#209)</p></li>
<li><p>Cr√©ation du sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique
des modules de suivi (sites et visites centralis√©s) et les routes
associ√©es</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre
communes aux autres modules : l‚Äôhistorique des actions sur chaque
objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s
√† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et
de validation des donn√©es mises en place sur le module Occtax. #339</p></li>
<li><p>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et d‚Äôune fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes d‚Äôun taxon (√©tendue des observations, date min et max,
altitude min et max, nombre d‚Äôobservations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>).
D√©sactiv√©e pour le moment.</p></li>
<li><p>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la
projection locale √† partir de la g√©om√©trie 4326 (#370)</p></li>
<li><p>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> lors de la cr√©ation de leur
contenu (code_nomenclature) (#384)</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_imports</span></code> int√©grant des fonctions SQL
permettant d‚Äôimporter un CSV dans la BDD et de mapper des champs de
tables import√©es avec ceux d‚Äôune table de GeoNature pour g√©n√©rer le
script <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></p></li>
<li><p>D√©but de script de migration GeoNature V1 vers GeoNature V2</p></li>
<li><p>Nombreuses fonctions int√©gr√©es dans les sch√©mas de la BDD</p></li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li><p>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian
(8 et 9) et Ubuntu (16 et 18)</p></li>
<li><p>Scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES-MNHN)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>R√©daction d‚Äôune documentation concernant l‚Äôinstallation (autonome
ou globale), l‚Äôutilisation, l‚Äôadministration et le d√©veloppement :
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
<p><strong>D√©veloppement</strong></p>
<ul class="simple">
<li><p>D√©coupage de l‚Äôapplication en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec
fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues
(#173)</p></li>
<li><p>D√©veloppement de composants Angular g√©n√©riques pour pouvoir les
utiliser dans plusieurs modules sans avoir √† les red√©velopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities,
Observers, DynamicForm, MapList‚Ä¶)</p></li>
<li><p>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour
limiter les donn√©es affich√©es √† un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature directement au CAS de l‚ÄôINPN, sans UsersHub (cas de
l‚Äôinstance nationale INPN de GeoNature).</p></li>
<li><p>Connexion possible au webservice METADONNEES de l‚ÄôINPN pour y
r√©cup√©rer les jeux de donn√©es en fonction de l‚Äôutilisateur
connect√©, avec mise √† jour des JDD √† chaque appel de la route</p></li>
<li><p>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de
modules dans GeoNature (#306)</p></li>
<li><p>Ajout de tests unitaires au niveau du backend et du frontend</p></li>
<li><p>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</p></li>
<li><p>D√©but de cr√©ation du module de gestion des m√©dias (backend
uniquement)</p></li>
<li><p>Mise en place d‚Äôune configuration globale et d‚Äôune configuration
par module</p></li>
<li><p>Fonction d‚Äôinstallation d‚Äôun module et de g√©n√©ration des fichiers
de configuration</p></li>
<li><p>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une
vue non mapp√©e</p></li>
<li><p>Mise en place d‚Äôun script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li><p>Module Export en cours de d√©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export
s‚Äôappuie sur une vue. Il sera possible aux administrateurs d‚Äôune
GeoNature d‚Äôajouter autant de vues que n√©cessaires dans son
GeoNature.</p></li>
<li><p>Module de validation des donn√©es en cours de d√©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</p></li>
<li><p>Module Suivi Flore territoire en cours de d√©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Habitat en cours de d√©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</p></li>
<li><p>gn_module_suivi_chiro refondu pour devenir un module de GeoNature
V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</p></li>
<li><p>Projet suivi utilis√© comme Frontend g√©n√©rique et autonome pour le
Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</p></li>
<li><p>GeoNature-citizen en cours de d√©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</p></li>
<li><p>GeoNature-mobile en cours de refonte pour compatibilit√© avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</p></li>
<li><p>GeoNature-atlas en cours d‚Äôajustements pour compatibilit√© avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/issues/162">https://github.com/PnX-SI/GeoNature-atlas/issues/162</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une
nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li><p>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Idem pour UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation compl√®te</p></li>
<li><p>Adaptez les scripts pr√©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
√©x√©cutez-les</p></li>
</ul>
<p><em>TODO : MAJ depuis V1 √† tester et compl√©ter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p>Supprimer le sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code> puis le recr√©er dans sa version
RC1 (#430)</p></li>
<li><p>Ex√©cuter l‚Äôupdate de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du
sous-module Nomenclature
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p></li>
<li><p>Suivre la proc√©dure habituelle de mise √† jour</p></li>
<li><p>Ex√©cuter les commandes suivantes :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd geonature/backend
source venv/bin/activate
geonature generate_frontend_modules_route
geonature frontend_build
</pre></div>
</div>
</li>
</ul>
</section>
<section id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de JDD ou
si il y a eu un probl√®me lors de la r√©cup√©ration des JDD de MTD</p></li>
<li><p>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et d‚Äôune fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes d‚Äôun taxon (√©tendue des observations, date min et max,
altitude min et max, nombre d‚Äôobservations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</p></li>
<li><p>L‚Äôexport OccTax est d√©sormais bas√© sur une vue qu‚Äôil est possible
d‚Äôadapter</p></li>
<li><p>Ajouts de nouveaux tests automatis√©s du code et mise en place de
Travis pour les lancer automatiquement √† chaque commit
(<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</p></li>
<li><p>Ajout de donn√©es test</p></li>
<li><p>Mise √† jour des scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES)</p></li>
<li><p>D√©placement de la table centrale de gestion des param√®tres
<code class="docutils literal notranslate"><span class="pre">t_parameters</span></code> dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> (#376)</p></li>
<li><p>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la
projection locale √† partir de la g√©om√©trie 4326 (#370)</p></li>
<li><p>Regroupement des fichiers li√©s √† l‚Äôinstallation et la mise √† jour
dans un r√©pertoire d√©di√© (<code class="docutils literal notranslate"><span class="pre">install</span></code>) (#383)</p></li>
<li><p>Mise en place de scripts de migration global de la BDD
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du sch√©ma
<code class="docutils literal notranslate"><span class="pre">pr_occtax</span></code>
(<code class="docutils literal notranslate"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>),
d‚Äôun script g√©n√©rique de migration de l‚Äôapplication
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) et d‚Äôune doc de mise √† jour
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-√†-jour-de-lapplication</a>)</p></li>
<li><p>R√©int√©gration des fichiers de configuration, de logs et des modules
externes dans les r√©pertoires de l‚Äôapplication (#375)</p></li>
<li><p>Ajout de routes √† <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code></p></li>
<li><p>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Am√©liorations et documentation des commandes d‚Äôinstallation d‚Äôun
module</p></li>
<li><p>Ajout des unit√©s g√©ographiques dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code></p></li>
<li><p>Ajout d‚Äôun bouton <code class="docutils literal notranslate"><span class="pre">Annuler</span></code> dans le formulaire Occtax</p></li>
<li><p>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> (#384)</p></li>
<li><p>Migration du SQL de <code class="docutils literal notranslate"><span class="pre">ref_nomenclautres</span></code> dans le d√©p√¥t du sous-module
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</p></li>
<li><p>D√©but de mise en place d‚Äôun backoffice (m√©tadonn√©es et
nomenclatures)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>OccTax : Correction du double post</p></li>
<li><p>OccTax : Correction des droits dans les JDD</p></li>
<li><p>OccTax : Correction de l‚Äôaffichage des observers_txt dans la fiche
d‚Äôun relev√©</p></li>
<li><p>Correction de la gestion g√©n√©rique des m√©dias</p></li>
<li><p>Suppression du lien entre <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> (#374)</p></li>
<li><p>Compl√©ments et relecture de la documentation</p></li>
<li><p>Correction</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez √† jour votre GeoNature depuis une Beta4 :</p>
<ul>
<li><p>T√©l√©chargez la beta5 et renommer les r√©pertoires :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/myuser
wget<span class="w"> </span>https://github.com/PnX-SI/GeoNature/archive/geonature2beta.zip
unzip<span class="w"> </span>geonature2beta.zip
mv<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/<span class="w"> </span>/home/&lt;mon_user&gt;/geonature_old/
mv<span class="w"> </span>GeoNature-geonature2beta<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/
</pre></div>
</div>
</li>
<li><p>Ex√©cutez le script de migration <code class="docutils literal notranslate"><span class="pre">install/migration/beta4tobeta5.sh</span></code>
depuis la racine de votre GeoNature :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>geonature
./install/migration/beta4tobeta5.sh
</pre></div>
</div>
</li>
</ul>
<p>Celui-ci va r√©cup√©rer vos fichiers de configuration, d√©placer les
modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li><p>Si vous avez d√©velopp√© des modules externes, voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un
lien symbolique depuis le r√©pertoire <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> et en
r√©int√©grant la configuration du module dans son r√©pertoire <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
</ul>
</section>
<section id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Synth√®se : d√©but de mise en place du backend, de l‚ÄôAPI et du
frontend #345</p></li>
<li><p>Compl√©ment de la nomenclature des M√©thodes de d√©termination et
suppression du champs Complement_Determination.
Merci &#64;DonovanMaillard. #341</p></li>
<li><p>Nouveaux composants Angular (SelectSearch, Municipalities,
Observers)</p></li>
<li><p>Am√©lioration de composants Angular (Date du jour par d√©faut, Option
de tri des nomenclatures, DynamicForm</p></li>
<li><p>Connexion √† MTD INPN : Mise √† jour des JDD √† chaque appel de la
route</p></li>
<li><p>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</p></li>
<li><p>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas
d√©finie au niveau du module, on prend celle de l‚Äôapplication
parente. #292</p></li>
<li><p>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne
lui est pas list√© dans le Menu et il ne lui ai pas accessible si il
en connait l‚ÄôURL. #360</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre
communes aux autres modules : l‚Äôhistorique des actions sur chaque
objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s
√† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et
de validation des donn√©es mises en place sur le module Occtax. #339</p></li>
<li><p>Am√©lioration de l‚Äôergonomie du MapList de OccTax. #361</p></li>
<li><p>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans
OccTax. #363 et #366</p></li>
<li><p>Am√©lioration du module g√©n√©rique <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de ses
sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>
et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></p></li>
<li><p>Am√©lioration et compl√©ments des scripts d‚Äôinstallation</p></li>
<li><p>Mise en place d‚Äôun script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Compl√©ment des diff√©rentes documentations</p></li>
<li><p>Ajout d‚Äôune documentation d‚Äôadministration d‚ÄôOccTax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</p></li>
</ul>
</section>
<section id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Travail sur le module g√©n√©rique de Suivi int√©gr√© √† GeoNature
(<code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</p></li>
<li><p>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place de tests automatiques au niveau du Frontend</p></li>
<li><p>M√©nage et r√©organisation du code du Frontend</p></li>
<li><p>Factorisation et harmonisation des composants g√©n√©riques Angular</p></li>
<li><p>Suppression des blocs non fonctionnels sur la Home</p></li>
<li><p>Mise √† jour de la doc et du MCD</p></li>
<li><p>Possibilit√© de masquer ou afficher les diff√©rents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d‚ÄôOccTax √† partir du
nouveau composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un
formulaire en d√©clarant les champs (#318)</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant
que sur les d√©buts de mot et en affichant en premier les noms de
r√©f√©rence (ordrer_by cd_nom=cd_ref DESC) - #334</p></li>
<li><p>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une
vue non mapp√©e</p></li>
<li><p>Suppression des options vides dans les listes d√©roulantes des
nomenclatures</p></li>
<li><p>Ajout de quelques param√®tres (niveau de zoom mini dans chaque
module, ID de la liste des taxons saisissables dans Occtax‚Ä¶)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la pagination du composant MapList</p></li>
<li><p>Correction des droits attribu√©s automatiquement quand on se connecte
avec le CAS</p></li>
<li><p>Correction de l‚Äôinstallation optionnelle de UsersHub dans le script
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li><p>D√©but de refonte du module Suivi chiro
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connect√© au
module g√©n√©rique de suivi de GeoNature, dont le front sera externe √†
GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</p></li>
<li><p>Maquettage et avanc√©e sur le module Validation
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</p></li>
<li><p>D√©finition du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>Piste de d√©finition du module Interop√©rabilit√©
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</p></li>
</ul>
</section>
<section id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Lien vers cette rubrique">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Compl√©ments de la documentation (sch√©ma architecture,
administration, installation, d√©veloppement, FAQ‚Ä¶)</p></li>
<li><p>Am√©lioration de l‚Äôergonomie du module OccTax (composant MapList,
filtres, colonnes et formulaires) et du module Exports</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon (#324)</p></li>
<li><p>Am√©lioration et optimisation de la s√©rialisation des donn√©es</p></li>
<li><p>Ajout de tests unitaires au niveau du backend</p></li>
<li><p>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</p></li>
<li><p>Migration du module occtax dans le r√©pertoire <code class="docutils literal notranslate"><span class="pre">/contrib</span></code> pour
homog√©n√©iser les modules</p></li>
<li><p>Cr√©ation du sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique
des modules de suivi (sites et visites centralis√©s)</p></li>
<li><p>D√©but de cr√©ation du module g√©n√©rique des protocoles de suivi</p></li>
<li><p>D√©but de cr√©ation du module de gestion des m√©dias</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Corrections de l‚Äôinstallation globale et autonome</p></li>
<li><p>Renommage Contact en OccTax (en cours)</p></li>
<li><p>Nettoyage du sch√©ma des m√©tadonn√©es (<code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>)</p></li>
</ul>
</section>
<section id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Lien vers cette rubrique">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √†
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standarde, plus
g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<p>Pr√©sentation et suivi du projet :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Refonte de la base de donn√©es du module Contact, renomm√© en OccTax,
s‚Äôappuyant sur le standard Occurrence de taxons du SINP (#183)</p></li>
<li><p>D√©veloppement du module OccTax regroupant les contacts Faune, Flore,
Fonge et Mortalit√© (avec formulaire de consultation et de saisie des
donn√©es)</p></li>
<li><p>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de
valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>D√©coupage de l‚Äôapplication en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec
fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues
(#173)</p></li>
<li><p>D√©veloppement de composants g√©n√©riques pour pouvoir les utiliser
dans plusieurs modules sans avoir √† les red√©velopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURES‚Ä¶)</p></li>
<li><p>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√©
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une
table des communes, une table g√©n√©rique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune
gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique,
souple et complet. Il permet d‚Äôattribuer des actions possibles √† un
r√¥le (utilisateur ou groupe), sur une port√©e; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es
de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon
organisme / Toutes les donn√©es.</p></li>
<li><p>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour
limiter les donn√©es affich√©es √† un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature au CAS de l‚ÄôINPN, sans utiliser GeoNature (utilis√© pour
l‚Äôinstance nationale INPN de GeoNature). GeoNature peut aussi se
connecter au webservice METADONNEES de l‚ÄôINPN pour y r√©cup√©rer les
jeux de donn√©es en fonction de l‚Äôutilisateur connect√©.</p></li>
<li><p>Mise en place d‚Äôun module d‚Äôexport. Chaque export s‚Äôappuie sur
une vue. Il sera possible √† chaque administrateur d‚Äôajouter autant
de vues que n√©cessaires dans son GeoNature. Pour le moment, un
export au format SINP Occurrence de taxons a √©t√© int√©gr√© par d√©faut.</p></li>
<li><p>D√©veloppement des m√©tadonn√©es dans la BDD (schema <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard M√©tadonn√©es du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de g√©rer des jeux de donn√©es, des cadres
d‚Äôacquisition, des acteurs (propri√©taire, financeur,
producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un
jeu de donn√©es.</p></li>
<li><p>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la
sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des
r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</p></li>
<li><p>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP
(#209)</p></li>
<li><p>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de
modules dans GeoNature (#306)</p></li>
<li><p>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian
8 et 9</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Installation globale de GeoNature (avec TaxHub et UsersHub) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></p></li>
<li><p>Installation autonome de GeoNature /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></p></li>
<li><p>Manuel utilisateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></p></li>
<li><p>Manuel administrateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></p></li>
<li><p>D√©veloppement (API, modules et composants) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></p></li>
</ul>
<p>Documentation compl√®te disponible sur
<a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li><p>Finalisation MCD du module Synth√®se</p></li>
<li><p>Triggers d‚Äôalimentation automatique de la Synth√®se depuis le module
OccTax</p></li>
<li><p>D√©veloppement de l‚Äôinterface du module Synth√®se</p></li>
<li><p>Am√©lioration et g√©n√©ricit√© du module OccTax (m√©dias, import GPX,
champs masquables et pseudo-champs)</p></li>
<li><p>G√©n√©ricit√© du module d‚Äôexport</p></li>
<li><p>D√©veloppement du module de validation (#181)</p></li>
<li><p>D√©veloppement d‚Äôun module de suivi des habitats avec une gestion
g√©n√©rique des sites et visites de suivi</p></li>
<li><p>D√©veloppement d‚Äôun module de collecte citoyenne (#242)</p></li>
</ul>
</section>
<section id="versions-1-2014-2018">
<h2>Versions 1 (2014-2018)<a class="headerlink" href="#versions-1-2014-2018" title="Lien vers cette rubrique">¬∂</a></h2>
<p>Pour consulter les notes des versions 1 de GeoNature, elles sont disponibles dans la branche d√©di√©e : https://github.com/PnX-SI/GeoNature/blob/v1/docs/changelog.rst</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api-references.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API REFERENCES</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="authors.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Auteurs</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2018-2024, Parc National des √âcrins, Parc National des C√©vennes
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CHANGELOG</a><ul>
<li><a class="reference internal" href="#id1">2.15.4 (2025-02-25)</a></li>
<li><a class="reference internal" href="#id2">2.15.3 (2025-02-14)</a></li>
<li><a class="reference internal" href="#id3">2.15.2 (2025-01-16)</a></li>
<li><a class="reference internal" href="#id4">2.15.1 (2025-01-10)</a></li>
<li><a class="reference internal" href="#pavo-cristatus-2025-12-11">2.15.0 - Pavo cristatus ü¶ö (2025-12-11)</a></li>
<li><a class="reference internal" href="#id5">2.14.2 (2024-05-28)</a></li>
<li><a class="reference internal" href="#id6">2.14.1 (2024-04-29)</a></li>
<li><a class="reference internal" href="#talpa-europaea-2024-02-28">2.14.0 - Talpa europaea üëì (2024-02-28)</a></li>
<li><a class="reference internal" href="#id7">2.13.4 (2023-12-15)</a></li>
<li><a class="reference internal" href="#id8">2.13.3 (2023-10-17)</a></li>
<li><a class="reference internal" href="#id9">2.13.2 (2023-09-28)</a></li>
<li><a class="reference internal" href="#id10">2.13.1 (2023-09-15)</a></li>
<li><a class="reference internal" href="#carpodacus-erythrinus-2023-08-23">2.13.0 - Carpodacus erythrinus üê§ (2023-08-23)</a></li>
<li><a class="reference internal" href="#id11">2.12.3 (2023-05-09)</a></li>
<li><a class="reference internal" href="#id12">2.12.2 (2023-04-18)</a></li>
<li><a class="reference internal" href="#id13">2.12.1 (2023-04-11)</a></li>
<li><a class="reference internal" href="#cyathea-borbonica-2023-03-27">2.12.0 - Cyathea borbonica üå¥ (2023-03-27)</a></li>
<li><a class="reference internal" href="#id14">2.11.2 (2023-01-19)</a></li>
<li><a class="reference internal" href="#id15">2.11.1 (2023-01-18)</a></li>
<li><a class="reference internal" href="#ilex-aquifolium-2022-12-21">2.11.0 - Ilex aquifolium üéÑ (2022-12-21)</a></li>
<li><a class="reference internal" href="#id16">2.10.4 (2022-11-30)</a></li>
<li><a class="reference internal" href="#id17">2.10.3 (2022-11-15)</a></li>
<li><a class="reference internal" href="#id18">2.10.2 (2022-11-09)</a></li>
<li><a class="reference internal" href="#id19">2.10.1 (2022-11-08)</a></li>
<li><a class="reference internal" href="#alouatta-macconnelli-2022-11-02">2.10.0 - Alouatta macconnelli üêí (2022-11-02)</a></li>
<li><a class="reference internal" href="#id20">2.9.2 (2022-02-15)</a></li>
<li><a class="reference internal" href="#id21">2.9.1 (2022-01-27)</a></li>
<li><a class="reference internal" href="#actias-luna-2022-01-13">2.9.0 - Actias luna ü¶ã (2022-01-13)</a></li>
<li><a class="reference internal" href="#id22">2.8.1 (2021-10-17)</a></li>
<li><a class="reference internal" href="#vaccinium-myrtillus-2021-10-18">2.8.0 - Vaccinium myrtillus üåø (2021-10-18)</a></li>
<li><a class="reference internal" href="#id23">2.7.5 (2021-07-28)</a></li>
<li><a class="reference internal" href="#id24">2.7.4 (2021-07-23)</a></li>
<li><a class="reference internal" href="#id25">2.7.3 (2021-07-22)</a></li>
<li><a class="reference internal" href="#id26">2.7.2 (2021-07-05)</a></li>
<li><a class="reference internal" href="#id27">2.7.1 (2021-07-02)</a></li>
<li><a class="reference internal" href="#androsace-delphinensis-2021-06-30">2.7.0 - Androsace delphinensis üåº (2021-06-30)</a></li>
<li><a class="reference internal" href="#id28">2.6.2 (2021-02-15)</a></li>
<li><a class="reference internal" href="#id29">2.6.1 (2021-02-11)</a></li>
<li><a class="reference internal" href="#saxifraga-2021-02-04">2.6.0 - Saxifraga üå∏ (2021-02-04)</a></li>
<li><a class="reference internal" href="#id30">2.5.5 (2020-11-19)</a></li>
<li><a class="reference internal" href="#id31">2.5.4 (2020-11-17)</a></li>
<li><a class="reference internal" href="#id32">2.5.3 (2020-11-04)</a></li>
<li><a class="reference internal" href="#id33">2.5.2 (2020-10-13)</a></li>
<li><a class="reference internal" href="#id34">2.5.1 (2020-10-06)</a></li>
<li><a class="reference internal" href="#manidae-2020-09-30">2.5.0 - Manidae (2020-09-30)</a></li>
<li><a class="reference internal" href="#id35">2.4.1 (2020-06-25)</a></li>
<li><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)</a></li>
<li><a class="reference internal" href="#id36">2.3.2 (2020-02-24)</a></li>
<li><a class="reference internal" href="#id37">2.3.1 (2020-02-18)</a></li>
<li><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de No√´l (2019-12-27)</a></li>
<li><a class="reference internal" href="#id38">2.2.1 (2019-10-09)</a></li>
<li><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li><a class="reference internal" href="#id39">2.1.2 (2019-07-25)</a></li>
<li><a class="reference internal" href="#id40">2.1.1 (2019-07-18)</a></li>
<li><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li><a class="reference internal" href="#id41">2.0.1 (2019-03-18)</a></li>
<li><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li><a class="reference internal" href="#versions-1-2014-2018">Versions 1 (2014-2018)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=7e9e99ef"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=041d0952"></script>
    </body>
</html>