<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHANGELOG &mdash; Documentation GeoNature 2.0</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="prev" title="AUTEURS" href="authors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html" class="icon icon-home"> GeoNature
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">INSTALLATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-1.html">IMPORT NIVEAU 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-2.html">IMPORT NIVEAU 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions-compatibility.html">COMPATIBILITE</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CHANGELOG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.10.4 (2022-11-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.10.3 (2022-11-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2.10.2 (2022-11-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.10.1 (2022-11-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alouatta-macconnelli-2022-11-02">2.10.0 - Alouatta macconnelli (2022-11-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.9.2 (2022-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.9.1 (2022-01-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actias-luna-2022-01-13">2.9.0 - Actias luna (2022-01-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">2.8.1 (2021-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vaccinium-myrtillus-2021-10-18">2.8.0 - Vaccinium myrtillus (2021-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">2.7.5 (2021-07-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.7.4 (2021-07-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">2.7.3 (2021-07-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">2.7.2 (2021-07-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">2.7.1 (2021-07-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#androsace-delphinensis-2021-06-30">2.7.0 - Androsace delphinensis (2021-06-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">2.6.2 (2021-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">2.6.1 (2021-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saxifraga-2021-02-04">2.6.0 - Saxifraga (2021-02-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">2.5.5 (2020-11-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">2.5.4 (2020-11-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">2.5.3 (2020-11-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id18">2.5.2 (2020-10-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">2.5.1 (2020-10-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manidae-2020-09-30">2.5.0 - Manidae (2020-09-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">2.4.1 (2020-06-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de mÃ©tadonnÃ©es (2020-06-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">2.3.2 (2020-02-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id22">2.3.1 (2020-02-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de NoÃ«l (2019-12-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id23">2.2.1 (2019-10-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id24">2.1.2 (2019-07-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id25">2.1.1 (2019-07-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id26">2.0.1 (2019-03-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id27">1.9.1 (2018-05-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id28">1.9.0 (2017-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id29">1.8.4 (2017-04-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id30">1.8.3 (2017-02-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id31">1.8.2 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id32">1.8.1 (2017-01-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id33">1.8.0 (2016-12-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id34">1.7.4 (2016-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id35">1.7.3 (2016-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id36">1.7.2 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id37">1.7.1 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id38">1.7.0 (2016-04-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id39">1.6.0 (2016-01-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id40">1.5.0 (2015-11-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id41">1.4.0 (2015-10-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id42">1.3.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id43">1.2.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id44">1.1.0 (2014-12-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id45">1.0.0 (2014-12-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id46">0.1.0 (2014-12-01)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>CHANGELOG</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/CHANGELOG.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Lien permanent vers cette rubrique">ïƒ</a></h1>
<section id="id1">
<h2>2.10.4 (2022-11-30)<a class="headerlink" href="#id1" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour du RefGeo en version 1.2.1 afin de corriger une rÃ©gression des performances dans la synthÃ¨se</p></li>
<li><p>Correction de la gÃ©nÃ©ration du rapport de sensibilitÃ©</p></li>
<li><p>Correction dâ€™un filtre de permissions sur les jeux de donnÃ©es</p></li>
<li><p>Correction des boutons dâ€™ajout de donnÃ©es dans les jeux de donnÃ©es</p></li>
<li><p>Ajout dâ€™une dÃ©pendance Ã  GeoNature dans les migrations OccTax pour corriger un problÃ¨me alÃ©atoire lors du passage des migrations</p></li>
</ul>
</section>
<section id="id2">
<h2>2.10.3 (2022-11-15)<a class="headerlink" href="#id2" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Optimisation dâ€™une migration OccTax particuliÃ¨rement lente en dÃ©sactivant temporairement les triggers (#2138)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonctionnalitÃ© dâ€™inscription des utilisateurs (#1874)</p></li>
<li><p>Correction dâ€™une rÃ©gression des performances de la routes <code class="docutils literal notranslate"><span class="pre">/modules</span></code> (#2136)</p></li>
</ul>
</section>
<section id="id3">
<h2>2.10.2 (2022-11-09)<a class="headerlink" href="#id3" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Documentation de la fonctionnalitÃ© de duplication dâ€™OccTax</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script de migration pour gÃ©nÃ©rer la configuration frontend des modules</p></li>
<li><p>Correction des triggers dâ€™OccTax pour correctement identifier la bonne source</p></li>
</ul>
</section>
<section id="id4">
<h2>2.10.1 (2022-11-08)<a class="headerlink" href="#id4" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">DISABLED_MODULES</span></code></p></li>
<li><p>Installation des dÃ©pendances frontend des modules dans le dossier frontend des modules eux-mÃªmes</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> ignore les modules dont le chargement a rencontrÃ© une erreur (#2109)</p></li>
<li><p>Correction et amÃ©lioration du script de mise Ã  jour de GeoNature (<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#2110)</p></li>
<li><p>Correction de la commande dâ€™installation des modules non packagÃ©s avec le routing dynamique (#2107)</p></li>
<li><p>Correction du message de confirmation dâ€™enregistrement dâ€™un cadre dâ€™acquisition (#2108)</p></li>
<li><p>Correction dâ€™une rÃ©gression de la 2.10.0 sur la route de rÃ©cupÃ©ration des jeux de donnÃ©es impactant Occtax-mobile</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passez directement Ã  cette version plutÃ´t que la 2.10.0, mais en suivant les notes de version de la 2.10.0, en vous aidant Ã©ventuellement de lâ€™exemple de migration.</p></li>
</ul>
</section>
<section id="alouatta-macconnelli-2022-11-02">
<h2>2.10.0 - Alouatta macconnelli (2022-11-02)<a class="headerlink" href="#alouatta-macconnelli-2022-11-02" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<ul class="simple">
<li><p><strong>Angular 12, tests automatisÃ©s frontend et backend</strong></p></li>
<li><p><strong>Discussions, signalement, partage, Ã©pinglage dâ€™une occurrence</strong></p></li>
</ul>
<p>ğŸ”§ Passage de la version 7 Ã  12 dâ€™Angular. Avant de mettre Ã  jour GeoNature sur cette version, vÃ©rifiez que les modules que vous utilisez sont disponibles dans une version compatible avec GeoNature 2.10.0 ou plus (compatibilitÃ© Angular 12).</p>
<p>Modules compatibles Ã  date de la publication de la version 2.10 de GeoNature :</p>
<ul class="simple">
<li><p>Import</p></li>
<li><p>Export</p></li>
<li><p>Dashboard</p></li>
<li><p>Monitoring</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p><strong>Avant</strong> de mettre Ã  jour GeoNature :</p>
<ul>
<li><p>Mettre Ã  jour les versions de TaxHub (1.10.4) et UsersHub (2.3.1), sans la partie migration de la base de donnÃ©es avec Alembic (elle sera faite lors de la mise Ã  jour de GeoNature)</p></li>
<li><p>Mettre Ã  jour les modules compatibles avec GeoNature 2.10, en vous limitant aux Ã©tapes Â«Â TÃ©lÃ©chargement de la nouvelle version du moduleÂ Â», Â«Â Renommage des rÃ©pertoiresÂ Â» et Â«Â Rapatriement de la configurationÂ Â». La compilation de chaque module sera faite automatiquement lors de la mise Ã  jour de GeoNature</p></li>
<li><p>Les nouveaux fichiers de logs seront placÃ©s dans le dossier <code class="docutils literal notranslate"><span class="pre">/var/log/geonature/</span></code>. Vous pouvez archiver ou supprimer les anciens fichiers de log (<code class="docutils literal notranslate"><span class="pre">/var/log/geonature.log*</span></code>).</p></li>
<li><p>Supprimer les paramÃ¨tres de configuration qui ont disparu sâ€™ils sont prÃ©sents dans votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code></p></li>
</ul>
</li>
<li><p>Installation du worker Celery : il vous faut installer le broker <code class="docutils literal notranslate"><span class="pre">redis</span></code> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sudo apt install redis</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Suivez les Ã©ventuelles notes de version spÃ©cifiques des modules installÃ©s (SQL de migration de leur schÃ©ma de BDD, stamp Alembic de la BDD)</p></li>
</ul>
<p>âœ… Un exemple de migration complÃ¨te de GeoNature 2.9 Ã  2.10, ses dÃ©pendances et ses modules principaux est disponible sur <a class="reference external" href="https://geonature.fr/documents/procedures/2022-11-GN-210-Migrate.txt">https://geonature.fr/documents/procedures/2022-11-GN-210-Migrate.txt</a> (pour information et Ã  adapter Ã  votre contexte).</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de dupliquer le module Occtax (#621)</p></li>
<li><p>AmÃ©lioration des fiches des observations dans les modules SynthÃ¨se et Validation (#1474)</p></li>
<li><p>Ajout dâ€™un permalien sur les fiches des observations dans les modules SynthÃ¨se et Validation (#1727)</p></li>
<li><p>Signaler une occurrence et paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ALERT_MODULES</span></code> associÃ© (#1750)</p></li>
<li><p>Epingler une occurrence et son paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">PIN_MODULES</span></code> associÃ© (#1819)</p></li>
<li><p>Discussions sur une occurrence et ses paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MODULES</span></code> et <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MAX_LENGTH</span></code> associÃ©s (#1731)</p></li>
<li><p>Mise Ã  jour dâ€™Angular de la version 7 Ã  12 et des dÃ©pendances javascript liÃ©es (#1547)</p></li>
<li><p>Mise en place de tests automatisÃ©s frontend avec Cypress, simulant les actions de lâ€™utilisateur et vÃ©rifiant la conformitÃ© des rÃ©sultats dans les modules Occtax, SynthÃ¨se et MÃ©tadonnÃ©es</p></li>
<li><p>Renforcement et nettoyage des tests automatisÃ©s backend (augmentation de la couverture de code de 49,8% Ã  63,1%)</p></li>
<li><p>Documentation de lâ€™utilisation et de la mise en place des tests automatisÃ©s backend et frontend (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/writing_tests.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/writing_tests.rst</a> et <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/writing_tests_frontend.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/writing_tests_frontend.rst</a>)</p></li>
<li><p>Simplification du CRUVED minimum pour accÃ©der Ã  GeoNature, ne nÃ©cessitant plus dâ€™avoir obligatoirement un CRUVED dÃ©fini au niveau global de GeoNature (#1622)</p></li>
<li><p>[MÃ©tadonnÃ©es] Remplacement de la liste des imports par la liste des sources dans la fiche des JDD (#1249)</p></li>
<li><p>[MÃ©tadonnÃ©es] Lister les cadres dâ€™acquisition par ordre alphabÃ©tique</p></li>
<li><p>[Admin] AmÃ©lioration de lâ€™interface (#2101)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">status</span></code> permettant de lister les migrations Alembic, leurs dÃ©pendances et identifier celles qui ont Ã©tÃ© appliquÃ©es ou non (#1574)</p></li>
<li><p>Ajout dâ€™un worker Celery pour lâ€™exÃ©cution de tÃ¢ches asynchrones</p></li>
<li><p>DÃ©placement du fichier de log GeoNature vers <code class="docutils literal notranslate"><span class="pre">/var/log/geonature/geonature.log</span></code>.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.cor_sensitivity_synthese</span></code> et des triggers associÃ©s (#1710)</p></li>
<li><p>Suppression du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code> permettant dâ€™ajouter le filtre sur lâ€™observers_txt en ILIKE sur les portÃ©e 1 et 2 du CRUVED</p></li>
<li><p>Documentation : Ajout dâ€™exemples de configuration pour utiliser les fonds IGN (#1703)</p></li>
<li><p>Documentation : ComplÃ©ment de la documentation sur les calculs de la sensibilitÃ©</p></li>
<li><p>Suppression du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code>. Le SRID local est fourni Ã  lâ€™installation, puis auto-dÃ©tectÃ© depuis la base de donnÃ©es Ã  lâ€™usage.</p></li>
<li><p>Suppression du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code>.</p></li>
<li><p>[Occtax] RÃ©vision du style des fiches dâ€™information des relevÃ©s (#1876)</p></li>
<li><p>[Occtax] Ajout des valeurs par dÃ©faut directement dans la base de donnÃ©es (#1857)</p></li>
<li><p>[Monitoring] Ajout dâ€™un trigger calculant automatiquement lâ€™altitude des sites</p></li>
<li><p>[Profils] Ajout des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">default_spatial_precision</span></code>, <code class="docutils literal notranslate"><span class="pre">default_temporal_precision_days</span></code> et <code class="docutils literal notranslate"><span class="pre">default_active_life_stage</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.t_parameters</span></code>, remplaÃ§ant les valeurs par dÃ©faut dÃ©finies au niveau du rÃ¨gne dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.cor_taxons_parameters</span></code></p></li>
<li><p>Ajout dâ€™une couche dâ€™objets linÃ©aires dans le rÃ©fÃ©rentiel gÃ©ographique (<a class="reference external" href="https://github.com/PnX-SI/RefGeo/pull/4">https://github.com/PnX-SI/RefGeo/pull/4</a>)</p></li>
<li><p>Installation de la version 15 de Taxref par dÃ©faut lors des nouvelles installations</p></li>
<li><p>PossibilitÃ© de limiter la recherche de lieux Ã  un ou plusieurs pays avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">OSM_RESTRICT_COUNTRY_CODES</span></code> (#2010)</p></li>
<li><p>On ne peut pas fermer un cadre dâ€™acquisition qui ne contient que des jeux de donnÃ©es sans donnÃ©es</p></li>
<li><p>Rechargement (<code class="docutils literal notranslate"><span class="pre">reload</span></code>) automatique de GeoNature quand on modifie la configuration de GeoNature (#2045)</p></li>
<li><p>RedÃ©marrage (<code class="docutils literal notranslate"><span class="pre">restart</span></code>) automatique du worker Celery lors du redÃ©marrage de GeoNature (#2045)</p></li>
<li><p>SynthÃ¨se : ajout dâ€™un message lors du chargement des donnÃ©es (#1637)</p></li>
<li><p>Cartes : Faire remonter la gÃ©omÃ©trie de lâ€™objet selectionnÃ© dans la liste (#2036)</p></li>
<li><p>Ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code>, suite Ã  la suppression du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> (#1635)</p></li>
<li><p>[MetadonnÃ©es] Formulaire des CA : correction de la saisie des CA parents (#2097)</p></li>
<li><p>[Accueil] AmÃ©lioration du formatage des nombres dans le bloc de statistiques (#2085)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Remise en place de la rotation automatique des fichiers de logs (#1627)</p></li>
<li><p>[OCCTAX] Ajout des valeurs par dÃ©faut des nomenclatures au niveau de la base de donnÃ©es (#1857)</p></li>
<li><p>[OCCTAX] Correction dâ€™un bug dâ€™Ã©dition de gÃ©omÃ©trie non pris en compte</p></li>
<li><p>Map List: Ã  la selection dâ€™une ligne dans le tableau, placement de la gÃ©omÃ©trie correspondante au dessus des autres gÃ©omÃ©tries (#2036)</p></li>
<li><p>Correction de lâ€™URL pour la mise Ã  jour des mots de passe (#1620)</p></li>
<li><p>Statistiques sur la page dâ€™accueil : utilisation des bonnes permissions (action R du module SYNTHESE). Les donnÃ©es et la carte sont masquÃ©es si les permissions sont manquantes.</p></li>
<li><p>AmÃ©lioration du responsive de la page dâ€™accueil (#1682)</p></li>
<li><p>Correction de lâ€™intÃ©gration des rÃ©gions quand GeoNature nâ€™est pas installÃ© avec la projection 2154 (#1695)</p></li>
<li><p>[Occtax] Correction de lâ€™affichage de la liste tronquÃ©e des habitats (#1701)</p></li>
<li><p>Correction du style des tooltips (#1775)</p></li>
<li><p>[Validation] Correction du filtre par observations disposant dâ€™un mÃ©dia (#1757)</p></li>
<li><p>[Validation] Chargement des observations ayant un UUID uniquement</p></li>
<li><p>[SynthÃ¨se] AmÃ©lioration de la liste dans la recherche des taxons (#1803)</p></li>
<li><p>Correction des URL et redirection de renouvellement du mot de passe (#1810 / #1620)</p></li>
<li><p>Correction du CSS du bloc introduction de la page dâ€™accueil (#1824)</p></li>
<li><p>Suppression de lâ€™accÃ¨s Ã  la gestion du compte pour lâ€™utilisateur Â«Â publicÂ Â» (#1844)</p></li>
<li><p>RÃ©duction du niveau de logs de lâ€™outil Fiona pour amÃ©liorer les performances des exports en format SIG (#1875)</p></li>
<li><p>Correction de la concatÃ©nation des champs additionnels au niveau des triggers de Occtax vers SynthÃ¨se et correction des donnÃ©es dans la SynthÃ¨se (#1467)</p></li>
<li><p>Correction des donnÃ©es dans la SynthÃ¨se suite au problÃ¨me dâ€™enregistrement des dÃ©nombrements dans Occtax, corrigÃ© dans la version 2.9.0 (#1479)</p></li>
<li><p>Correction des triggers de Occtax vers SynthÃ¨se lors de la modification de dÃ©nombrements multiples et correction des donnÃ©es dans la SynthÃ¨se (#1821)</p></li>
<li><p>Modification du script de dÃ©marrage <code class="docutils literal notranslate"><span class="pre">systemd</span></code> pour lancer GeoNature et son worker Celery aprÃ¨s PostgreSQL (#1970)</p></li>
<li><p>Correction de lâ€™installation de psycopg2 (#1994)</p></li>
<li><p>Correction de la route de rÃ©cupÃ©ration des jeux de donnÃ©es quand on lui passe plusieurs filtres</p></li>
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code> en cas de valeurs nulles</p></li>
<li><p>[OCCTAX] Correction dâ€™un bug dâ€™Ã©dition de gÃ©omÃ©trie non pris en compte (#2023)</p></li>
<li><p>[OCCTAX] Correction de lâ€™affichage des dates en utilisant lâ€™UTC pour Ã©viter les soucis de fuseaux horaires diffÃ©rents entre le serveur et le navigateur de lâ€™utilisateur (#2005)</p></li>
<li><p>[MÃ©tadonnÃ©es] Correction de lâ€™affichage des boutons de crÃ©ation dâ€™un JDD et dâ€™un CA seulement si lâ€™utilisateur en a les droits (#1822)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour dâ€™Angular de la version 7 Ã  12 Ã  rÃ©percuter dans les modules spÃ©cifiques (<a class="reference external" href="https://update.angular.io/?v=7.2-12.0">https://update.angular.io/?v=7.2-12.0</a>)</p></li>
<li><p>Mise Ã  jour des dÃ©pendances backend et frontend</p></li>
<li><p>Mise Ã  jour de Flask version 1.1 Ã  2.2</p></li>
<li><p>Routage dynamique des modules, supprimant la nÃ©cessitÃ© de gÃ©nÃ©rer le fichier de routage du frontend (#2059)</p></li>
<li><p>Ajout de Celery pour les traitements asynchrones</p></li>
<li><p>PossibilitÃ© de configurer GeoNature avec un fichier python en dÃ©finissant le nom du module dans la variable dâ€™environnement <code class="docutils literal notranslate"><span class="pre">GEONATURE_SETTINGS</span></code></p></li>
<li><p>Utilisation de la pagination fournit par Flask-SQLAlchemy pour <code class="docutils literal notranslate"><span class="pre">get_color_taxon()</span></code></p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_exports.t_config_export</span></code> et du schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_exports</span></code> crÃ©Ã©s par GeoNature (si le module Export nâ€™est pas dÃ©jÃ  installÃ©) (#1642)</p></li>
<li><p>Suppression des commandes GeoNature <code class="docutils literal notranslate"><span class="pre">dev-front</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend-build</span></code> (#1800, #2088) :</p></li>
<li><p>RÃ©tablissement de lâ€™utilisation de <code class="docutils literal notranslate"><span class="pre">nvm</span></code> pour installer NodeJS (#1726)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">default-config</span></code></p></li>
<li><p>Externalisation du <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>, de son schÃ©ma de donnÃ©es et de ses modÃ¨les en tant que module indÃ©pendant dans un dÃ©pÃ´t dÃ©diÃ© (#228)</p></li>
<li><p>IntÃ©gration des rÃ©gions par dÃ©faut lors de lâ€™installation de GeoNature</p></li>
<li><p>AmÃ©lioration des composants frontend DynamicForm</p></li>
<li><p>PossibilitÃ© de filtrer le composant frontend Â«Â nomenclatureÂ Â» par rÃ¨gne ou Goup2INPN</p></li>
<li><p>AmÃ©lioration du style des tooltips (#1717)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">refresh-rules-cache</span></code> pour rafraichir la vue matÃ©rialisÃ© <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules_cd_ref</span></code> (Ã  lancer Ã  chaque modification de rÃ¨gles dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules</span></code>)</p></li>
<li><p>La configuration du module nâ€™est pas Ã©crasÃ©e lors dâ€™une rÃ©installation de ce dernier</p></li>
<li><p>Suppression de la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_decode_nomenclatures</span></code></p></li>
<li><p>GÃ©nÃ©ration automatique de la documentation quand on publie une nouvelle version</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">ref_geo</span> <span class="pre">info</span></code> qui compte le nombre de zonages par type</p></li>
<li><p>Suppression des dÃ©pendances Â«Â geogÂ Â» et Â«Â numpyÂ Â» en utilisation la fonction PostGIS <code class="docutils literal notranslate"><span class="pre">ST_DWithin</span></code> pour la recherche par cercle (#1972)</p></li>
<li><p>La variable dâ€™environnement <code class="docutils literal notranslate"><span class="pre">DATA_DIRECTORY</span></code> permet de dÃ©finir un dossier pour la mise en cache et rÃ©utilisation des ressources tÃ©lÃ©chargÃ©es lors de la crÃ©ation de la base de donnÃ©es</p></li>
<li><p>Chargement de la configuration des modules packagÃ©s directement lors de lâ€™import du module <code class="docutils literal notranslate"><span class="pre">config</span></code> (avant mÃªme lâ€™appel Ã  <code class="docutils literal notranslate"><span class="pre">create_app</span></code>) (#2055)</p></li>
</ul>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;antoinececchimnhn / &#64;TheoLechemia / &#64;jpm-cbna / &#64;mvergez / &#64;ophdlv / &#64;Adrien-Pajot / &#64;Gaetanbrl / &#64;pierrejego / &#64;jbrieuclp / &#64;amandine-sahl / &#64;joelclems / &#64;metourneau / &#64;gildeluermoz / &#64;camillemonchicourt</p>
</section>
<section id="id5">
<h2>2.9.2 (2022-02-15)<a class="headerlink" href="#id5" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Optimisation du nombre dâ€™informations renvoyÃ©es par lâ€™API pour les utilisateurs et les organismes</p></li>
<li><p>Ajout dâ€™une commande pour relancer le calcul de la sensibilitÃ©, utile en cas de modification du rÃ©fÃ©rentiel de sensibilitÃ© : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">update-synthese</span></code>. Elle sâ€™appuie sur la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code>.</p></li>
<li><p>Le niveau de diffusion dans la synthÃ¨se nâ€™est plus calculÃ© automatiquement Ã  partir du niveau de sensibilitÃ© (#1711)</p></li>
<li><p>Le niveau de sensibilitÃ© tient compte du comportement de lâ€™occurrence (<code class="docutils literal notranslate"><span class="pre">OCC_COMPORTEMENT</span></code>), en plus du statut biologique (<code class="docutils literal notranslate"><span class="pre">STATUT_BIO</span></code>)</p></li>
<li><p>Optimisation du recalcul de la sensibilitÃ© lors de la mise Ã  jour de la synthÃ¨se (trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>)</p></li>
<li><p>Ajout de tests unitaires sur les fonctions de calcul de la sensibilitÃ©</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™une rÃ©gression sur la rÃ©cupÃ©ration de la liste des taxons (#1672)</p></li>
<li><p>Correction de lâ€™authentification au CAS de lâ€™INPN</p></li>
<li><p>Correction du calcul de la sensibilitÃ© (#1284) :</p>
<ul>
<li><p>Gestion correcte de la prÃ©sence de plusieurs rÃ¨gles avec et sans critÃ¨re statut biologique</p></li>
<li><p>Utilisation de la rÃ¨gle la plus sensible quand plusieurs rÃ¨gles sâ€™appliquent</p></li>
</ul>
</li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>La correction de la fonction de calcul de la sensibilitÃ© est suivie dâ€™un recalcul automatique du niveau de sensibilitÃ© des donnÃ©es prÃ©sentes dans la synthÃ¨se. Si vous ne souhaitez pas procÃ©der Ã  ce recalcul, ajoutez le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">recompute-sensitivity=false</span></code> lors de la mise Ã  jour de la base de donnÃ©es avec la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code> (lancÃ©e automatiquement par le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x recompute-sensitivity=false
</pre></div>
</div>
</li>
<li><p>Le niveau de diffusion des donnÃ©es dans la synthÃ¨se est remis Ã  <code class="docutils literal notranslate"><span class="pre">NULL</span></code> si celui-ci Ã©quivaut au niveau de sensibilitÃ©. Seuls les niveaux de diffusion qui diffÃ©rent sont laissÃ©s intacts. Si vous souhaitez rectifier vous-mÃªmes vos niveaux de diffusion et ne pas les remettre Ã  <code class="docutils literal notranslate"><span class="pre">NULL</span></code> quand ils sont Ã©quivalents au niveau de sensibilitÃ©, vous pouvez ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">clear-diffusion-level=false</span></code> lors de la mise Ã  jour de la base de donnÃ©es :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x clear-diffusion-level=false
</pre></div>
</div>
<p>Si vous redescendez Ã  lâ€™Ã©tat antÃ©rieur de votre base de donnÃ©es, les niveaux de diffusion seront restaurÃ©s Ã  partir du niveau de sensibilitÃ©Â ; vous pouvez Ã©viter ceci avec <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">restore-diffusion-level=false</span></code>.</p>
</li>
</ul>
</section>
<section id="id6">
<h2>2.9.1 (2022-01-27)<a class="headerlink" href="#id6" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Utilisation du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">page</span></code> de Flask Ã  la place du paramÃ¨tre maison <code class="docutils literal notranslate"><span class="pre">offset</span></code> pour la pagination des routes (rÃ©tro-compatible)</p></li>
<li><p>Installation de TaxHub en version 1.9.4 (version corrective) par dÃ©faut</p></li>
<li><p>Ajout du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code> (par dÃ©faut <code class="docutils literal notranslate"><span class="pre">GN</span></code>) (#1635)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™URL de rÃ©initialisation de mot passe envoyÃ©e par email (#1620)</p></li>
<li><p>Correction dâ€™un problÃ¨me dâ€™authentification avec le CAS</p></li>
<li><p>Occtax : Correction des listes dÃ©roulantes masquÃ©es dans le bloc dÃ©nombrement, en rajoutant un scroll</p></li>
<li><p>Correction de lâ€™URL de lâ€™API de TaxHub (slash final manquant) pour lâ€™affichage des photos sur la fiche dâ€™un profil de taxon</p></li>
<li><p>Correction de la synchronisation des mÃ©tadonnÃ©es depuis MTD</p></li>
<li><p>Correction de la gÃ©nÃ©ration du token quand on utilise le CAS de lâ€™INPN pour se connecter Ã  GeoNature</p></li>
<li><p>Correction des permissions trop restrictives dâ€™accÃ¨s aux donnÃ©es de la synthÃ¨se</p></li>
<li><p>Correction de la pagination de la route <code class="docutils literal notranslate"><span class="pre">/color_taxon</span></code> en rajoutant un ordonnancement par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> et <code class="docutils literal notranslate"><span class="pre">id_area</span></code> (utilisÃ© par Occtax-mobile)</p></li>
<li><p>Contournement dâ€™un problÃ¨me de redirection incorrecte par lâ€™API de TaxHub lorsque celui-ci est mal configurÃ© (#1438, #1616)</p></li>
</ul>
</section>
<section id="actias-luna-2022-01-13">
<h2>2.9.0 - Actias luna (2022-01-13)<a class="headerlink" href="#actias-luna-2022-01-13" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Profils de taxons</strong></p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Construction automatique dâ€™une fiche dâ€™identitÃ© (profil) par taxon grÃ¢ce aux observations validÃ©es prÃ©sentes dans la base de donnÃ©es (altitude min/max, distribution spatiale, date de premiÃ¨re/derniÃ¨re observation, nombre de donnÃ©es valides, phÃ©nologie) (#917 par &#64;DonovanMaillard, &#64;lepontois, &#64;Adrien-Pajot, &#64;TheoLechemia, &#64;bouttier, &#64;amandine-sahl, &#64;jpm-cbna)</p>
<ul>
<li><p>CrÃ©ation dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_profiles</span></code> dans la BDD contenant les tables, les vues, les fonctions et les paramÃ¨tres de calcul des profils de taxons (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql">https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql</a>) (#1103)</p></li>
<li><p>Mise en place de lâ€™API des profils de taxons (#1104)</p></li>
<li><p>Affichage des scores de chaque observation par rapport au profil du taxon dans la liste des observations du module Validation, ainsi que dans les fiches dÃ©tails des observations dans les modules SynthÃ¨se et Validation (#1105)</p></li>
<li><p>Ajout de filtres des observations par score ou critÃ¨re des profils de taxon dans le module Validation (#1105)</p></li>
<li><p>Ajout dâ€™une alerte de contextualisation dâ€™une observation par rapport au profil de taxon, lors de sa saisie dans le module Occtax</p></li>
<li><p>Mise en place de paramÃ¨tres pour activer ou non les profils de taxons, paramÃ©trer leurs rÃ¨gles et dÃ©finir les statut de validation pris en compte pour le calcul des profils (Â«Â Certain-trÃ¨s probableÂ Â» et Â«Â ProbableÂ Â» par dÃ©faut)</p></li>
<li><p>Documentation des profils de taxons et de leur paramÃ¨trage (<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#profils-de-taxons">https://docs.geonature.fr/admin-manual.html#profils-de-taxons</a>)</p></li>
<li><p>Suppression de la vue matÃ©rialisÃ©e <code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code> et de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon()</span></code> qui nâ€™Ã©taient pas utilisÃ©es</p></li>
</ul>
</li>
<li><p>[OCCTAX] Ajout dâ€™un bouton permettant dâ€™annuler la modification dâ€™un taxon (#1508 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Ajout de valeurs par dÃ©faut aux champs additionnels (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_additional_fields.default_value</span></code>)</p></li>
<li><p>[OCCTAX] Ajout dâ€™un filtre avancÃ© par <code class="docutils literal notranslate"><span class="pre">id_releve</span></code></p></li>
<li><p>[SYNTHESE] Ajout dâ€™un filtre avancÃ© par UUID dâ€™observation (#973)</p></li>
<li><p>AmÃ©lioration des listes dÃ©roulantes en passant Ã  la librairie <code class="docutils literal notranslate"><span class="pre">ng-select2</span></code> pour les composants multiselects (#616 par &#64;jbrieuclp)</p></li>
<li><p>Gestion du rÃ©fÃ©rentiel des rÃ©gions par Alembic (#1475)</p></li>
<li><p>Ajout des anciennes rÃ©gions (1970-2016), inactives par dÃ©faut, mais utiles pour les rÃ¨gles rÃ©gionales de sensibilitÃ©</p></li>
<li><p>Gestion du rÃ©fÃ©rentiel de sensibilitÃ© (rÃ¨gles nationales et rÃ©gionales) par Alembic (#1576)</p></li>
<li><p>Ajout dâ€™une documentation sur le calcul de la sensibilitÃ© des observations (<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite">https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite</a>, par &#64;mvergez)</p></li>
<li><p>[SYNTHESE] AmÃ©lioration de la fenÃªtre de limite dâ€™affichage atteinte (#1520 par &#64;jpm-cbna)</p></li>
<li><p>[OCCHAB] Utilisation de tout Habref par dÃ©faut si aucune liste dâ€™habitats nâ€™est renseignÃ©e dans la configuration du module</p></li>
<li><p>[METADONNEES] Attribuer des droits Ã  un utilisateur sur un JDD si il a des droits sur son cadre dâ€™acquisition</p></li>
<li><p>Association automatique et paramÃ©trable des jeux de donnÃ©es personnels auto-gÃ©nÃ©rÃ©s Ã  des modules (Occtax par dÃ©faut) (#1555)</p></li>
<li><p>Utilisation du C du CRUVED de lâ€™utilisateur pour lister les jeux de donnÃ©es dans lesquels il peut ajouter des donnÃ©es dans les diffÃ©rents modules (et non plus le R du CRUVED sur GeoNature) (#659)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[OCCTAX] Correction de lâ€™enregistrement des dÃ©nombrements lors de lâ€™enchainement des relevÃ©s (#1479 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Correction du filtre du champs Â«Â HabitatÂ Â» par typologie dâ€™habitat</p></li>
<li><p>[ADMIN] Correction de lâ€™affichage du module (#1427 par &#64;jbrieuclp)</p></li>
<li><p>[ADMIN] SÃ©curisation du module (#839)</p></li>
<li><p>[VALIDATION] Corrections de la validation des observations (#1485 / #1529)</p></li>
<li><p>[METADONNEES] AmÃ©lioration des performances (#1559)</p></li>
<li><p>[METADONNEES] Correction de la suppression des JDD</p></li>
<li><p>[METADONNEES] Correction de lâ€™export PDF des JDD (#1544)</p></li>
<li><p>[METADONNEES] Correction des permissions (#1528)</p></li>
<li><p>[METADONNEES] Correction de la recherche avancÃ©e</p></li>
<li><p>[SYNTHESE] Correction de la recherche sur les champs gÃ©nÃ©riques de type nombre entier (#1519 par &#64;jpm-cbna)</p></li>
<li><p>[SYNTHESE] Correction des permissions</p></li>
<li><p>[SYNTHESE] Correction du lien entre les filtres CA et JDD (#1530)</p></li>
<li><p>[OCCHAB] Correction du chargement de la configuration, des fiches info et de la modification dâ€™une station</p></li>
<li><p>[METADONNEES] AmÃ©liorations des performances et des contrÃ´les du formulaire des acteurs pour les JDD et les CA (par &#64;joelclems)</p></li>
<li><p>Correction de la redirection vers le formulaire de login en cas de cookie corrompu (#1550 par &#64;antoinececchimnhn)</p></li>
<li><p>Correction de la crÃ©ation de compte utilisateur (#1527)</p></li>
<li><p>Mise Ã  jour du module Habref-api-module pour corrections de certaines donnÃ©es dâ€™Habref</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Migration vers la librairie <code class="docutils literal notranslate"><span class="pre">gn-select2</span></code> pour les listes dÃ©roulantes des formulaires (#616 / #1285 par &#64;jbrieuclp)</p></li>
<li><p>Documentation de dÃ©veloppement backend revue et complÃ©tÃ©e (#1559, <a class="reference external" href="https://docs.geonature.fr/development.html#developpement-backend">https://docs.geonature.fr/development.html#developpement-backend</a>)</p></li>
<li><p>AmÃ©lioration de nombreuses routes et fonctions du backend</p></li>
<li><p>Ajouts de tests automatisÃ©s du backend</p></li>
<li><p>Mise en place dâ€™une intÃ©gration continue pour exÃ©cuter automatiquement les tests backend et leur couverture de code avec GitHub Actions, Ã  chaque commit ou pull request dans les branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code> (#1568, <a class="reference external" href="https://github.com/PnX-SI/GeoNature/actions">https://github.com/PnX-SI/GeoNature/actions</a>)</p></li>
<li><p>[VALIDATION] Suppression des vues SQL et optimisation des routes</p></li>
<li><p>GÃ©nÃ©ration automatique et alÃ©atoire du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p>[SYNTHESE] Remplacement de <code class="docutils literal notranslate"><span class="pre">as_literal</span></code> par <code class="docutils literal notranslate"><span class="pre">json.loads</span></code>, plus performant (par &#64;antoinececchimnhn)</p></li>
<li><p>PossibilitÃ© de filter la route <code class="docutils literal notranslate"><span class="pre">synthese/taxa_distribution</span></code> par <code class="docutils literal notranslate"><span class="pre">id_source</span></code> (#1446 par &#64;mvergez)</p></li>
<li><p>Factorisation du composant <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code> avec le composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Ajout du composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> dans dynamic-form</p></li>
<li><p>Ajout dâ€™un input <code class="docutils literal notranslate"><span class="pre">valueFieldName</span></code> aux composants <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> et <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code>. Voir documentation (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst#pnx-municipalities">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst#pnx-municipalities</a>)</p></li>
<li><p>Mise Ã  jour de nombreuses dÃ©pendances</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>La liste des JDD dans les modules de saisie (Occtax, Occhab, Monitoring et Import) se base dÃ©sormais sur le C du CRUVED de lâ€™utilisateur au niveau du module (ou du C du CRUVED de GeoNature si lâ€™utilisateur nâ€™a pas de CRUVED sur le module), au lieu du R de GeoNature jusquâ€™Ã  prÃ©sent. Vous devrez donc potentiellement adapter vos permissions Ã  ce changement de comportement (#659)</p></li>
<li><p>Si vous avez surcouchÃ© le paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code> de la section <code class="docutils literal notranslate"><span class="pre">[SYNTHESE]</span></code>, veuillez remplacer <code class="docutils literal notranslate"><span class="pre">id_type</span></code> par <code class="docutils literal notranslate"><span class="pre">type_code</span></code> (voir <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">id_type</span> <span class="o">=</span> <span class="mi">25</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">type_code</span> <span class="o">=</span> <span class="s2">&quot;COM&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Si vous aviez modifiÃ© les colonnes de la liste des observations du module Validation en adaptant la vue <code class="docutils literal notranslate"><span class="pre">gn_validation.v_synthese_validation_forwebapp</span></code>, celle-ci a Ã©tÃ© supprimÃ©e et il suffit dÃ©sormais dâ€™indiquer les colonnes souhaitÃ©es dans la configuration du module. Voir documentation (<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles">http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles</a>)</p></li>
<li><p>Les nouvelles fonctionnalitÃ©s liÃ©es aux profils de taxons nÃ©cessitent de rafraichir des vues materialisÃ©es Ã  intervalles rÃ©guliers et donc de crÃ©er une tÃ¢che planfiÃ©e (cron). Voir documentation (<a class="reference external" href="https://docs.geonature.fr/installation.html#taches-planifiees">https://docs.geonature.fr/installation.html#taches-planifiees</a>)</p></li>
<li><p>Les rÃ©gions sont maintenant disponibles via des migrations Alembic. Si vous possÃ©dez dÃ©jÃ  les rÃ©gions, vous pouvez lâ€™indiquer Ã  Alembic :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo</span><span class="nd">@head</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">d02f4563bebe</span>
</pre></div>
</div>
</li>
<li><p>Le rÃ©fÃ©rentiel de sensibilitÃ© est dÃ©sormais disponible via une migration Alembic. Celui-ci nÃ©cessite le rÃ©fÃ©rentiel des rÃ©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions</span></code>), ainsi que le rÃ©fÃ©rentiel des anciennes rÃ©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions_1970</span></code>) â€“ lâ€™installation de ces rÃ©fÃ©rentiels est automatique avec lâ€™installation des rÃ¨gles de sensibilitÃ©.</p>
<ul>
<li><p>Si vous possÃ©dez dÃ©jÃ  le rÃ©fÃ©rentiel, vous pouvez lâ€™indiquer Ã  Alembic :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">7</span><span class="n">dfd0a813f86</span>
</pre></div>
</div>
</li>
<li><p>Si vous avez installÃ© GeoNature 2.8.X, le rÃ©fÃ©rentiel de sensibilitÃ© nâ€™a pas Ã©tÃ© installÃ© automatiquement. Vous pouvez lâ€™installer manuellement :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_sensitivity_inpn</span><span class="nd">@head</span>
</pre></div>
</div>
</li>
</ul>
<p>Par dÃ©faut, seule les rÃ¨gles nationales sont activÃ©es, vous laissant le soin dâ€™activer vos rÃ¨gles locales en base vous-mÃªme. Vous pouvez Ã©galement demander, lors de lâ€™installation du rÃ©fÃ©rentiel, Ã  activer (resp. dÃ©sactiver) toutes les rÃ¨gles en ajout Ã  la commande Alembic lâ€™option <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=true</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=false</span></code>).</p>
</li>
<li><p>Si vous souhaitez surcoucher les paramÃ¨tres par dÃ©faut de Gunicorn (app_name, timeoutâ€¦), depuis le passage Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code> dans la version 2.8.0, câ€™est dÃ©sormais Ã  faire dans un fichier <code class="docutils literal notranslate"><span class="pre">environ</span></code> Ã  la racine du dossier de votre GeoNature (#1588, <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#parametres-gunicorn">https://docs.geonature.fr/admin-manual.html#parametres-gunicorn</a>)</p></li>
<li><p>Si vous les utilisez, mettez Ã  jour les modules Import, Export et Monitoring dans leurs derniÃ¨res versions compatibles avec le version 2.9.0 de GeoNature</p></li>
</ul>
</section>
<section id="id7">
<h2>2.8.1 (2021-10-17)<a class="headerlink" href="#id7" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout de lâ€™indication du dÃ©partement au formulaire des communes (#1480)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">group2inpn</span></code> et <code class="docutils literal notranslate"><span class="pre">regne</span></code> au formulaire des nomenclatures (#1481)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
<li><p>Mise-Ã -jour corrective de <a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.7">UsersHub-authentification-module 1.5.7</a></p></li>
</ul>
</section>
<section id="vaccinium-myrtillus-2021-10-18">
<h2>2.8.0 - Vaccinium myrtillus (2021-10-18)<a class="headerlink" href="#vaccinium-myrtillus-2021-10-18" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Gestion de la base de donnÃ©es avec Alembic</strong></p>
<p>âš ï¸ Avant de mettre Ã  jour GeoNature, vÃ©rifiez que les modules que vous utilisez disposent dâ€™une version compatible avec la 2.8.0, suite au passage Ã  la version 3 de Marshmallow.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Support de Debian 11 / Python 3.9</p></li>
<li><p>Passage de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code></p></li>
<li><p>Gestion de la base de donnÃ©es et de ses Ã©volutions avec Alembic (#880)</p></li>
<li><p>Mise Ã  jour de la procÃ©dure dâ€™installation afin dâ€™utiliser Alembic (#880)</p></li>
<li><p>RÃ©vision et rÃ©organisation des scripts et de la documentation dâ€™installation</p></li>
<li><p>Passage Ã  la version 3 de Marshmallow (#1451)</p></li>
<li><p>Suppression du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code>, celui-ci est automatiquement dÃ©terminÃ© Ã  partir de la base de donnÃ©es et du code de lâ€™application</p></li>
<li><p>Ajout dâ€™un index sur le champs <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code></p></li>
<li><p>Mise Ã  jour des dÃ©pendances</p>
<ul>
<li><p><a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub 1.9.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.6">UsersHub-authentification-module 1.5.6</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/releases/tag/1.4.4">Nomenclature-api-module 1.4.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Habref-api-module/releases/tag/0.2.0">Habref-api-module 0.2.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy/releases/tag/0.2.4">Utils-Flask-SQLAlchemy 0.2.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo/releases/tag/0.2.1">Utils-Flask-SQLAlchemy-Geo 0.2.1</a></p></li>
</ul>
</li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Corrections et amÃ©liorations des formulaires dynamiques et des champs additionnels</p></li>
<li><p>Correction de lâ€™envoi dâ€™email lors de la rÃ©cupÃ©ration du mot de passe (#1471)</p></li>
<li><p>Occtax : Correction du focus sur le champs Â«Â taxonÂ Â» quand on enchaine les taxons (#1462)</p></li>
<li><p>Occtax : Correction du formulaire de modification quand le relevÃ© est une ligne ou un polygone (#1461)</p></li>
<li><p>Occtax : Correction de la conservation de la date quand on enchaine les relevÃ©s (#1442)</p></li>
<li><p>Occtax : Correction du paramÃ¨tre dâ€™export des champs additionnels (#1440)</p></li>
<li><p>SynthÃ¨se : correction de la recherche par jeu de donnÃ©es (#1494)</p></li>
<li><p>Correction de lâ€™affichage des longues listes dÃ©roulantes dans les champs additionnels (#1442)</p></li>
<li><p>Mise Ã  jour de la table <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> lors de lâ€™ajout de nouvelles zones via un trigger sur la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1433)</p></li>
<li><p>Correction de lâ€™export PDF des fiches de mÃ©tadonnÃ©es (#1449)</p></li>
<li><p>Jeux de donnÃ©es : correction de lâ€™affichage des imports sources</p></li>
<li><p>Correction de la configuration Apache et de la gestion par flask dâ€™un GeoNature accessible sur un prÃ©fix (e.g. <code class="docutils literal notranslate"><span class="pre">/geonature</span></code>) (#1463)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
<li><p>Correction des champs additionnels de type boutons radios (#1464 et #1472)</p></li>
<li><p>Occtax : Correction du contrÃ´le des heures quand on est sur 2 mois distincts (#1468)</p></li>
<li><p>Suppression de nombreux identifiants en dur dans les scripts SQL de crÃ©ation de la BDD</p></li>
<li><p>Correction du trigger dâ€™Occtax vers la SynthÃ¨se pour le champs <code class="docutils literal notranslate"><span class="pre">Comportement</span></code> (#1469)</p></li>
<li><p>Correction des fonctions <code class="docutils literal notranslate"><span class="pre">get_default_nomenclature_value</span></code></p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> (#1488)</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> pour rÃ©cupÃ©rer le fichier <code class="docutils literal notranslate"><span class="pre">custom.scss</span></code> depuis son nouvel emplacement (#1430)</p></li>
<li><p>Correction du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code></p></li>
<li><p>MÃ©tadonnÃ©es : Suppression en cascade sur les tables <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_territory</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_protocol</span></code> (#1452)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code> : rechargement des entry points aprÃ¨s installation avec pip dâ€™un module packagÃ©</p></li>
<li><p>Correction dâ€™un bug lors de lâ€™ajout dâ€™un cadre dâ€™acquisition</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de plusieurs dÃ©pendances</p></li>
<li><p>Packetage des modules fournis avec GeoNature</p></li>
<li><p>Lâ€™utilisateur connectÃ© est maintenant accessible via <code class="docutils literal notranslate"><span class="pre">g.current_user</span></code></p></li>
<li><p>Nettoyage et refactoring divers</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Mettre Ã  jour <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases/tag/2.2.1">UsersHub en version 2.2.1</a> et <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub en version 1.9.0</a> (si vous les utilisez) <strong>en sautant leur Ã©tape de passage Ã  Alembic</strong> (car la mise Ã  jour de GeoNature se charge dÃ©sormais de mettre Ã  jour aussi les schÃ©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>)</p></li>
<li><p>Suppression de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> :</p>
<ul class="simple">
<li><p>Stopper GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">stop</span> <span class="pre">geonature2</span></code></p></li>
<li><p>Supprimer le fichier de configuration supervisor de GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code></p></li>
<li><p>Si supervisor nâ€™est plus utilisÃ© par aucun service (rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/</span></code> vide), il peut Ãªtre dÃ©sinstallÃ© (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span> <span class="pre">supervisor</span></code>)</p></li>
</ul>
</li>
<li><p>Suivre la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Passage Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code> :</p>
<ul class="simple">
<li><p>Copier le fichier <code class="docutils literal notranslate"><span class="pre">install/assets/geonature.service</span></code> dans <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code></p></li>
<li><p>Ã‰diter <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/geonature.service</span></code> et remplacer les variables <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> (votre utilisateur linux courant) et <code class="docutils literal notranslate"><span class="pre">${BASE_DIR}</span></code> (chemin absolu du rÃ©pertoire de GeoNature) par les valeurs appropriÃ©es</p></li>
<li><p>Lancer la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code></p></li>
<li><p>Pour dÃ©marrer GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">geonature</span></code></p></li>
<li><p>Pour lancer GeoNature automatiquement au dÃ©marrage du serveur : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">geonature</span></code></p></li>
</ul>
</li>
<li><p>Correction de la configuration Apache : si vous servez GeoNature sur un prÃ©fixe (typiquement <code class="docutils literal notranslate"><span class="pre">/geonature/api</span></code>), assurez vous que ce prÃ©fixe figure bien Ã©galement Ã  la fin des directives <code class="docutils literal notranslate"><span class="pre">ProxyPass</span></code> et <code class="docutils literal notranslate"><span class="pre">ProxyPassReverse</span></code> comme dans lâ€™exemple suivant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span><span class="o">&gt;</span>
    <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span>
    <span class="n">ProxyPassReverse</span>  <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Si vous servez GeoNature sur un sous-domaine, vÃ©rifiez ou modifier la configuration Apache :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">api</span><span class="o">&gt;</span>
    <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">api</span>
    <span class="n">ProxyPassReverse</span>  <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">api</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Pensez Ã  recharger Apache si vous Ãªtes amenÃ© Ã  en changer la configuration : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">reload</span> <span class="pre">apache2</span></code></p>
</li>
<li><p>Passage Ã  Alembic :</p>
<ul class="simple">
<li><p>Sâ€™assurer dâ€™avoir une base de donnÃ©es de GeoNature en version 2.7.5</p></li>
<li><p>Si vous avez UsersHub installÃ©, ajoutez dans votre configuration GeoNature la section suivante (en adaptant le chemin) :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ALEMBIC</span><span class="p">]</span>
<span class="n">VERSION_LOCATIONS</span> <span class="o">=</span> <span class="s1">&#39;/path/to/usershub/app/migrations/versions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Entrer dans le virtualenv afin dâ€™avoir la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> disponible : <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">backend/venv/bin/activate</span></code></p></li>
<li><p>ExÃ©cuter les commandes suivantes afin dâ€™indiquer Ã  Alembic lâ€™Ã©tat de votre base de donnÃ©es :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">f06cc80cc8ba</span>  <span class="c1"># GeoNature 2.7.5</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">0</span><span class="n">dfdbfbccd63</span>  <span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des communes</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">3</span><span class="n">fdaa1805575</span>  <span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des dÃ©partements</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mf">586613e2</span><span class="n">faeb</span>  <span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 1Ã—1</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">7</span><span class="n">d6e98441e4c</span>  <span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 5Ã—5</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">ede150d9afd9</span>  <span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 10Ã—10</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">1715</span><span class="n">cf31a75d</span>  <span class="c1"># MNT de lâ€™IGN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si vous aviez dÃ©jÃ  intallÃ© certains modules, vous devez lâ€™indiquer Ã  Alembic :</p>
<ul>
<li><p>Module <em>Occtax</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">f57107d2d0ad</span></code></p></li>
<li><p>Module <em>Occhab</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">2984569d5df6</span></code></p></li>
</ul>
</li>
<li><p>Mettre sa base de donnÃ©es Ã  jour avec Alembic : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
</ul>
<p>Pour plus dâ€™information sur lâ€™utilisation dâ€™Alembic, voir la <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#administration-avec-alembic">documentation administrateur de GeoNature</a>.</p>
</li>
</ul>
</section>
<section id="id8">
<h2>2.7.5 (2021-07-28)<a class="headerlink" href="#id8" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>CompatibilitÃ© avec Occtax-mobile 1.3. PossibilitÃ© dâ€™ajouter la query string <code class="docutils literal notranslate"><span class="pre">fields</span></code> sur la route <code class="docutils literal notranslate"><span class="pre">meta/datasets</span></code> pour choisir les champs renvoyÃ©s par lâ€™API</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id9">
<h2>2.7.4 (2021-07-23)<a class="headerlink" href="#id9" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un import manquant entrainant un problÃ¨me de compilation du frontend (#1424)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id10">
<h2>2.7.3 (2021-07-22)<a class="headerlink" href="#id10" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>MÃ©tadonnÃ©es : ajout des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_DS</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_AF</span></code> pour limiter les rÃ´les utilisables au niveau des jeux de donnÃ©es et des cadres dâ€™acquisition (#1417)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">mtd_sync</span></code> qui permet de synchroniser les mÃ©tadonnÃ©es de toute une instance depuis le flux MTD du SINP</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™affichage des jeux de donnÃ©es sur les fiches des cadres dâ€™acquisition (#1410)</p></li>
<li><p>Doc : PrÃ©cision des OS supportÃ©s (Debian 10 uniquement en production)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Support des commandes Flask au niveau de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (<code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code>â€¦)</p></li>
<li><p>Ajout des sous-modules en tant que dÃ©pendances</p></li>
<li><p>Ajout dâ€™une commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id11">
<h2>2.7.2 (2021-07-05)<a class="headerlink" href="#id11" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>OCCTAX : correction de la vÃ©rification du CRUVED (#1413)</p></li>
<li><p>OCCTAX : correction du dÃ©grisement du formulaire au chargement de la fonctionnalitÃ© Â«Â mes lieuxÂ Â» (#1414)</p></li>
<li><p>OCCTAX : DÃ©placement des champs additionnels pour les dÃ©nombrements avant les mÃ©dias (#1409)</p></li>
<li><p>Suppression des champs additionnels de type Â«Â taxonomyÂ Â» qui nâ€™Ã©taient pas supportÃ©s</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql</a>)</p></li>
</ul>
</section>
<section id="id12">
<h2>2.7.1 (2021-07-02)<a class="headerlink" href="#id12" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Installation des dÃ©pendances javascript des modules lors de la migration de version de GeoNature (#1252)</p></li>
<li><p>Installation de la version 1.8.1 de TaxHub par dÃ©faut Ã  la place de la 1.8.0</p></li>
<li><p>IntÃ©gration de la documentation permettant de mettre en place lâ€™accÃ¨s public Ã  GeoNature</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="androsace-delphinensis-2021-06-30">
<h2>2.7.0 - Androsace delphinensis (2021-06-30)<a class="headerlink" href="#androsace-delphinensis-2021-06-30" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>NÃ©cessite la version 1.8.x de TaxHub.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Compatible avec TaxHub 1.8.x qui inclut notamment la migration (optionnelle) vers Taxref version 14 et lâ€™ajout de la BDC statuts</p></li>
<li><p>Installation globale migrÃ©e de Taxref version 13 Ã  14</p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ajouter des champs additionels par JDD ou globaux au module et documentation liÃ©e (#1007)</p></li>
<li><p>Occtax/Synthese : Ajout des champs additionnels dans les exports (#1114)</p></li>
<li><p>Occtax/Synthese : Affichage des champs additionnels dans les fiches info</p></li>
<li><p>Customisation : possibilitÃ© de changer le CSS sans rebuilder lâ€™application</p></li>
<li><p>Admin : CrÃ©ation dâ€™un backoffice dâ€™administration des champs additionels (#1007)</p></li>
<li><p>Admin : CrÃ©ation dâ€™une documentation dâ€™administration des champs additionnels (#1007)</p></li>
<li><p>Occtax : PossibilitÃ© de dÃ©sactiver la recherche de taxon par liste (#1315)</p></li>
<li><p>Occtax : Par dÃ©faut la recherche de taxon nâ€™interroge pas une liste mais tout Taxref, si aucune liste de taxons nâ€™a Ã©tÃ© spÃ©cifiÃ©e dans la configuration du module Occtax (voir notes de version) (#1315)</p></li>
<li><p>Occtax/MetadonnÃ©es : possibilitÃ© dâ€™associer une liste de taxons Ã  un JDD (implÃ©mentÃ© uniquement dans Occtax) (#1315)</p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ajouter les infos sur les mÃ©dias dans les exports (paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ADD_MEDIA_IN_EXPORT</span></code>) (#1326)</p></li>
<li><p>Occtax : PossibilitÃ© de paramÃ©trer lâ€™affichage des champs du composant MEDIA dans OCCTAX (paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">MEDIA_FIELDS_DETAILS</span></code> - #1287)</p></li>
<li><p>Occtax : PossibilitÃ© de filtrer la liste des habitats du formulaire avec les nouveaux paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ID_LIST_HABITAT</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_TYPO_HABITAT</span></code></p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ouvrir le module avec un JDD prÃ©-selectionnÃ© en passant le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code> dans lâ€™URL (#1071)</p></li>
<li><p>Accueil : RÃ©organisation des blocs (#1375)</p></li>
<li><p>Accueil : Ajout dâ€™un paramÃ¨tre controlant la frÃ©quence de MAJ du cache des statistiques de la page dâ€™accueil (<code class="docutils literal notranslate"><span class="pre">STAT_BLOC_TTL</span></code>, par dÃ©faut 1h: 3600 secondes) (#1320)</p></li>
<li><p>AmÃ©lioration des performances de rÃ©cupÃ©ration des modules et du CRUVED</p></li>
<li><p>Monitoring : Ajout dâ€™un trigger garantissant la cohÃ©rence entre <code class="docutils literal notranslate"><span class="pre">date_min</span></code> et <code class="docutils literal notranslate"><span class="pre">date_max</span></code> et historisation de la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_visit_observer</span></code> (#1247)</p></li>
<li><p>La page dâ€™authentification affiche dÃ©sormais le nom de lâ€™application (<code class="docutils literal notranslate"><span class="pre">appName</span></code>) dÃ©fini dans la configuration de GeoNature (#1277)</p></li>
<li><p>PossibilitÃ© dâ€™ouvrir lâ€™accÃ¨s Ã  GeoNature sans authentification (voir documentation dâ€™administration) (#1323)</p></li>
<li><p>MÃ©tadonnÃ©es : Optimisation du temps de chargement des listes des CA et JDD (#1291)</p></li>
<li><p>MÃ©tadonnÃ©es : Passage de la version 1.3.9 du standard SINP Ã  la version 1.3.10 et ajout des champs liÃ©s dans les formulaires (#1291)</p></li>
<li><p>MÃ©tadonnÃ©es : RÃ©vision du design la partie Â«Â ActeursÂ Â» du formulaire et mise Ã  part de lâ€™acteur de type Â«Â Contact principalÂ Â», obligatoire dans le standard SINP</p></li>
<li><p>MÃ©tadonnÃ©es : Ordonnancement des JDD par leur nom</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout de la suppression en cascade au niveau des tables des CA et des JDD</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un message quand un CA ou JDD nâ€™a pas dâ€™acteur (#1404)</p></li>
<li><p>SynthÃ¨se et validation : Ajout dâ€™un filtre avancÃ© <code class="docutils literal notranslate"><span class="pre">PossÃ¨de</span> <span class="pre">des</span> <span class="pre">mÃ©dias</span></code> (#1179, #1338, #1180)</p></li>
<li><p>SynthÃ¨se : Affichage du contenu json du champs des donnÃ©es additionnelles, dans la fiche dÃ©tail dâ€™une observation</p></li>
<li><p>SynthÃ¨se : Ajout de la possibilitÃ© dâ€™afficher la colonne Â«Â EffectifÂ Â» dans la liste des observations</p></li>
<li><p>DynamicForm : enrichissement des formulaires dynamiques pour les mÃ©dias, lâ€™ajout de liens externes</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© de la combinaison des champs <code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">area_code</span></code> dans <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#1270)</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© du champs <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la table <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code></p></li>
<li><p>Mise Ã  jour des versions de nombreuses dÃ©pendances Python et Javascript</p></li>
<li><p>Support du gestionnaire dâ€™erreurs Sentry</p></li>
<li><p>Compression des images</p></li>
<li><p>Ajout dâ€™un script permettant dâ€™identifier les doublons dans <code class="docutils literal notranslate"><span class="pre">data/scripts/duplicates_deletion</span></code> (#1324)</p></li>
<li><p>Validation : possibilitÃ© de passer des fonctions dans la liste des colonnes affichÃ©es (pour dÃ©coder une nomenclature)</p></li>
<li><p>Validation : Les paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code> et <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> sont regroupÃ©s en un seul paramÃ¨tre nommÃ© <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier <code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : Correction dâ€™un bug sur le champs observateur lors de la modification dâ€™un relevÃ© (#1177)</p></li>
<li><p>Occtax : Renseignement par dÃ©faut de lâ€™utilisateur connectÃ© Ã  la crÃ©ation dâ€™un relevÃ© en mode Â«Â observers_txtÂ Â» (#1292)</p></li>
<li><p>Occtax : DÃ©placement des boutons dâ€™action Ã  gauche dans la liste des taxons dâ€™un relevÃ© pour Ã©viter quâ€™ils soient masquÃ©s quand les noms de taxon sont longs (#1299 et #1337)</p></li>
<li><p>Occtax : Correction de la possibilitÃ© de modifier un relevÃ© si U=1 (#1365)</p></li>
<li><p>Occtax : Suppression du zoom quand on localise le relevÃ© (#1317)</p></li>
<li><p>Occtax : Correction du nombre de lignes affichÃ©es aprÃ¨s une recherche</p></li>
<li><p>Occtax : Correction de la suppression dâ€™un habitat lors de la modification dâ€™un relevÃ© (#1296)</p></li>
<li><p>Occtax : Correction des champs Â«Â HabitatÂ Â» et Â«Â LieuÂ Â» quand on enchaine des relevÃ©s (#1191)</p></li>
<li><p>Occtax : Correction de lâ€™enchainement des saisies (#1300)</p></li>
<li><p>Occtax : Correction de lâ€™affichage des taxons quand le nom est long (#1299, #1337)</p></li>
<li><p>Occtax : Correction de lâ€™observateur par dÃ©faut en mode <code class="docutils literal notranslate"><span class="pre">observers_txt</span></code></p></li>
<li><p>Occtax : Correction des messages dâ€™information multiples (#1367)</p></li>
<li><p>Occtax : Correction de la mise Ã  jour du Â«Â digitiserÂ Â» lors dâ€™une Ã©dition de relevÃ© (#1392)</p></li>
<li><p>Occtax : Correction du trigger alimentant les observateurs de la synthÃ¨se depuis Occtax (#1399)</p></li>
<li><p>MÃ©tadonnÃ©es : Correction de la suppression dâ€™un JDD sans donnÃ©es, depuis la liste des JDD (#1312)</p></li>
<li><p>MÃ©tadonnÃ©es : Correction de la rÃ©cupÃ©ration des valeurs de nomenclature depuis MTD nâ€™existant pas dans GeoNature (#1297)</p></li>
<li><p>Authentification : Redirection vers la page login aprÃ¨s une pÃ©riode dâ€™inactivitÃ© (#1193)</p></li>
<li><p>RÃ©solution des problÃ¨mes de permission sur le fichier <code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> (#1003)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© dâ€™utiliser la commande <code class="docutils literal notranslate"><span class="pre">flask</span></code> (eg <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">shell</span></code>)</p></li>
<li><p>PrÃ©paration de lâ€™utilisation dâ€™Alembic pour la gestion des migrations de la structure de la BDD (#880)</p></li>
<li><p>PossibilitÃ© dâ€™importer des modules packagÃ©s (#1272)</p></li>
<li><p>RÃ©organisation des fichiers <code class="docutils literal notranslate"><span class="pre">requirements</span></code> et installation des branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> des dÃ©pendances du fichier <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></p></li>
<li><p>Simplification de la gestion des erreurs</p></li>
<li><p>CrÃ©ation de templates pour les configurations Apache de GeoNature, TaxHub et UsersHub, utilisÃ©s par le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Ajout du plugon <code class="docutils literal notranslate"><span class="pre">leaflet-image</span></code></p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">type</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> pour gÃ©rer le polymorphisme, utilisÃ© dans le module Monitoring</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">meta_create_date</span></code> et <code class="docutils literal notranslate"><span class="pre">meta_update_date</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code></p></li>
<li><p>Diverses amÃ©liorations mineures de lâ€™architecture du code</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Mettez Ã  jour TaxHub 1.8.x avant dâ€™effectuer la mise Ã  jour de GeoNature : <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez le Ã  jour en version 0.2.4 minimum avant de mettre Ã  jour GeoNature</p></li>
<li><p>Si vous nâ€™aviez pas renseignÃ© de valeur pour le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">id_taxon_list</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code> du module Occtax, la liste 100 nâ€™est plus passÃ©e par defaut et le module va rechercher sur tout Taxref. Si vous souhaitez utiliser une liste de taxons dans la saisie Occtax, veuillez renseigner lâ€™identifiant de votre liste dans la configuration du module</p></li>
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql</a>)</p></li>
<li><p>Le script SQL de mise Ã  jour va supprimer et recrÃ©er les vues <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_export_occtax</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code> pour y intÃ©grer les champs additionnels. Si vous aviez modifiÃ© ces vues, adaptez le script de mise Ã  jour de GeoNature 2.6.2 Ã  2.7.0, ou rÃ©percuter vos modifications aprÃ¨s la mise Ã  jour, Ã  appliquer aussi dans votre Ã©ventuelle surcouche des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">default_columns_export</span></code> (dans <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code>) et <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> (dans <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>)</p></li>
<li><p>Le fichier de customisation CSS a Ã©tÃ© dÃ©placÃ© de <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/custom.scss</span></code> vers <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> pour pouvoir Ãªtre modifiÃ© sans devoir rebuilder lâ€™application. Son dÃ©placement est fait automatiquement lors de la mise Ã  jour de GeoNature. Si vous avez customisÃ© les styles dans ce fichier et notamment fait rÃ©fÃ©rence Ã  dâ€™autres fichiers, vÃ©rifiez ou adaptez leurs chemins</p></li>
<li><p>Si vous aviez renseigner un des deux paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> dans le module Validation, il est nÃ©cessaire de les remplacer par le nouveau paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier <code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
<li><p>Modifier dans le fichier <code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>, remplacer <code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> par <code class="docutils literal notranslate"><span class="pre">supervisor.log</span></code> dans la variable <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code> :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;s|\(stdout_logfile = .*\)/gn_errors.log|</span><span class="se">\1</span><span class="s1">/supervisor.log|&#39;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">supervisor</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">geonature</span><span class="o">-</span><span class="n">service</span><span class="o">.</span><span class="n">conf</span>
<span class="n">sudo</span> <span class="n">supervisorctl</span> <span class="n">reload</span>
</pre></div>
</div>
</section>
<section id="id13">
<h2>2.6.2 (2021-02-15)<a class="headerlink" href="#id13" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>MetadonnÃ©es : correction dâ€™un bug sur la fiche JDD si le module dâ€™import nâ€™est pas installÃ©</p></li>
<li><p>MetadonnÃ©es : correction de lâ€™affichage de certains champs sur la fiche des cadres dâ€™acquisition</p></li>
<li><p>MetadonnÃ©es : la recherche rapide nâ€™est plus sensible Ã  la casse casse</p></li>
</ul>
</section>
<section id="id14">
<h2>2.6.1 (2021-02-11)<a class="headerlink" href="#id14" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_tri_cal_sensi_diff_level_on_each_statement()</span></code> non compatible avec PostgreSQL 10 (#1255)</p></li>
<li><p>SynthÃ¨se : correction de lâ€™affichage du filtre Â«Â statut de validationÂ Â» (#1267)</p></li>
<li><p>Permissions : correction de lâ€™URL de redirection aprÃ¨s lâ€™Ã©ditiondes permissions (#1253)</p></li>
<li><p>PrÃ©cision de la documentation de mise Ã  jour de GeoNature (#1251)</p></li>
<li><p>Ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dans le fichier dâ€™exemple de configuration (#1066 par &#64;jbdesbas)</p></li>
<li><p>SÃ©curitÃ© : suppression dâ€™une route inutile</p></li>
<li><p>Correction de lâ€™URL de la doc sur la page dâ€™accueil</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script de mise Ã  jour de la BDD du sous-module de nomenclature : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql</a></p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql</a>)</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="saxifraga-2021-02-04">
<h2>2.6.0 - Saxifraga (2021-02-04)<a class="headerlink" href="#saxifraga-2021-02-04" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>NÃ©cessite Debian 10, car cette nouvelle version nÃ©cessite PostgreSQL 10 minimum (qui nâ€™est pas fourni par dÃ©faut avec Debian 9) pour les triggers dÃ©clenchÃ©s Â«Â on each statementÂ Â», plus performants.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SensibilitÃ© : Ajout dâ€™un trigger sur la synthÃ¨se dÃ©clenchant automatiquement le calcul de la sensibilitÃ© des observations et calculant ensuite leur niveau de diffusion (si celui-ci est NULL) en fonction de la sensibilitÃ© (#413 et #871)</p></li>
<li><p>Ajout du format GeoPackage (GPKG) pour les exports SIG, plus simple, plus lÃ©ger, plus performant et unique que le SHAPEFILE. Les exports au format SHP restent pour le moment utilisÃ©s par dÃ©faut (modifiable dans la configuration des modules Occtax, Occhab et SynthÃ¨se) (#898)</p></li>
<li><p>Performances : Suppression du trigger le plus lourd calculant les couleurs des taxons par unitÃ©s gÃ©ographiques. Il est remplacÃ© par une vue utilisant le nouveau paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>, dÃ©finissant le code du type de zonage Ã  utiliser pour les unitÃ©s gÃ©ographiques dans Occtax-mobile (Mailles de 5km par dÃ©faut) (#997)</p></li>
<li><p>Performances : AmÃ©lioration du trigger de la SynthÃ¨se calculant les zonages dâ€™une observation en ne faisant un <code class="docutils literal notranslate"><span class="pre">ST_Touches()</span></code> seulement si lâ€™observation nâ€™est pas un point et en le passant <code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">each</span> <span class="pre">statement</span></code> (#716)</p></li>
<li><p>MÃ©tadonnÃ©es : Refonte de la liste des CA et JDD avec lâ€™ajout dâ€™informations et dâ€™actions, ainsi quâ€™une recherche avancÃ©e (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : RÃ©vision des fiches info des CA et JDD avec lâ€™ajout dâ€™actions, du tableau des imports et du tÃ©lÃ©chargement des rapports dâ€™UUID et de sensibilitÃ© (#889)</p></li>
<li><p>MÃ©tadonnÃ©es: Ajout de la fonctionnalitÃ© de fermeture (dÃ©pot) au niveau du CA (qui ferme tous les JDD du CA), seulement si le CA a au moins un JDD. DÃ©sactivÃ©e par dÃ©faut via le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_CLOSE_AF</span></code> (#889 par &#64;alainlaupinmnhn)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™envoyer un email automatique au crÃ©ateur et Ã  lâ€™utilisateur dâ€™un CA quand celui-ci est fermÃ© (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™ajouter un titre spÃ©cifique aux exports PDF des CA quand ceux-ci sont fermÃ©s, par exemple pour en faire un certificat (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™importer directement dans un JDD actif depuis le module MÃ©tadonnÃ©es, dÃ©sactivÃ© par dÃ©faut (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : AmÃ©lioration des possibilitÃ©s de customisation des PDF des fiches de mÃ©tadonnÃ©es</p></li>
<li><p>MÃ©tadonnÃ©es : AmÃ©lioration des fiches dÃ©tail des CA et JDD et ajout de la liste des imports dans les fiches des JDD (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un spinner lors du chargement de la liste des mÃ©tadonnÃ©es et parallÃ©lisation du calcul du nombre de donnÃ©es par JDD (#1231)</p></li>
<li><p>SynthÃ¨se : PossibilitÃ© dâ€™ouvrir le module avec un JDD prÃ©selectionnÃ© (<code class="docutils literal notranslate"><span class="pre">&lt;URL_GeoNature&gt;/#/synthese?id_dataset=2</span></code>) et ajout dâ€™un lien direct depuis le module MÃ©tadonnÃ©es (#889)</p></li>
<li><p>SynthÃ¨se : ajout de web service pour le calcul du nombre dâ€™observations par un paramÃ¨tre donnÃ© (JDD, module, observateur), et du calcul de la bounding-box par jeu de donnÃ©es</p></li>
<li><p>Synthese : ajout dâ€™un filtre avancÃ© <code class="docutils literal notranslate"><span class="pre">PossÃ¨de</span> <span class="pre">mÃ©dias</span></code></p></li>
<li><p>Exports au format SHP remplacÃ©s par dÃ©faut par le format GeoPackage (GPKG) plus simple, plus lÃ©ger, plus performant et unique. Les exports SHP restent activables dans la configuration des modules (#898)</p></li>
<li><p>Occtax : ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_VERNACULAR_NAME</span></code> qui contrÃ´le lâ€™affichage du nom vernaculaire vs nom complet sur les interfaces (Defaut = true: afffiche le nom vernaculaire)</p></li>
<li><p>Validation : PrÃ©remplir lâ€™email Ã  lâ€™observateur avec des informations paramÃ©trables sur lâ€™occurrence (date, nom du taxon, commune, mÃ©dias) (#981)</p></li>
<li><p>Validation : PossibilitÃ© de paramÃ¨trer les colonnes affichÃ©es dans la liste des observations (#980)</p></li>
<li><p>PossibilitÃ© de customiser le logo principal (GeoNature par dÃ©faut) dans <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/</span></code></p></li>
<li><p>Ajout dâ€™un champs json <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1111)</p></li>
<li><p>ComplÃ©ment des scripts de migration des donnÃ©es depuis GINCO (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/</span></code>)</p></li>
<li><p>Barre de navigation : Mention plus gÃ©nÃ©rique et gÃ©nÃ©rale des auteurs et contributeurs</p></li>
<li><p>Redirection vers le formulaire dâ€™authentification si on tente dâ€™accÃ©der Ã  une page directement sans Ãªtre authentifiÃ© et sans passer par le frontend (#1193)</p></li>
<li><p>Connexion Ã  MTD : possibilitÃ© de filtrer les JDD par instance, avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_INSTANCE_FILTER</span></code>, par exemple pour ne rÃ©cupÃ©rer que les JDD de sa rÃ©gion (#1195)</p></li>
<li><p>Connexion Ã  MTD : rÃ©cupÃ©ration du crÃ©ateur et des acteurs (#922, #1008 et #1196)</p></li>
<li><p>Connexion Ã  MTD : rÃ©cupÃ©ration du nouveau champs <code class="docutils literal notranslate"><span class="pre">statutDonneesSource</span></code> pour indiquer si le JDD est dâ€™origine publique ou privÃ©e</p></li>
<li><p>CrÃ©ation dâ€™une commande GeoNature permettant de rÃ©cupÃ©rer les JDD, CA et acteurs depuis le webservice MTD de lâ€™INPN, en refactorisant les outils existants dâ€™import depuis ce webservice</p></li>
<li><p>Ajout de contraintes dâ€™unicitÃ© sur certains champs des tables de mÃ©tadonnÃ©es et de la table des sources (#1215)</p></li>
<li><p>CrÃ©ation dâ€™un script permettant de remplacer les rÃ¨gles de sensibilitÃ© nationales et rÃ©gionales, par les rÃ¨gles dÃ©partementales plus prÃ©cises (<code class="docutils literal notranslate"><span class="pre">data/scripts/sensi/import_sensi_depobio.sh</span></code>), uniquement utilisÃ© pour DEPOBIO pour le moment, en attendant de clarifier dans une prochaine release le fonctionnement que lâ€™on retient par dÃ©faut dans GeoNature (#413)</p></li>
<li><p>CrÃ©ation dâ€™un script permettant dâ€™importer les rÃ©gions dans le rÃ©fÃ©rentiel gÃ©ographique (<code class="docutils literal notranslate"><span class="pre">data/migrations/insert_reg.sh</span></code>)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occhab : Export SIG (GPKG ou SHP) corrigÃ© (#898)</p></li>
<li><p>Meilleur nettoyage des sessions enregistrÃ©es dans le navigateur (#1178)</p></li>
<li><p>Correction des droits CRUVED et de leur hÃ©ritage (#1170)</p></li>
<li><p>SynthÃ¨se : Retour du bouton pour revenir Ã  lâ€™observation dans son module dâ€™origine (Occtax par exemple) depuis la fiche info dâ€™une observation (#1147)</p></li>
<li><p>SynthÃ¨se : Suppression du message Â«Â Aucun historique de validationÂ Â» quand une observation nâ€™a pas encore de validation (#1147)</p></li>
<li><p>SynthÃ¨se : Correction du CRUVED sur le R = 1 (ajout des JDD de lâ€™utilisateur)</p></li>
<li><p>SynthÃ¨se : Correction de lâ€™export des statuts basÃ© sur une recherche gÃ©ographique (#1203)</p></li>
<li><p>Occtax : Correction de lâ€™erreur de chargement de lâ€™observateur lors de la modification dâ€™un relevÃ© (#1177)</p></li>
<li><p>Occtax : Suppression de lâ€™obligation de remplir les champs Â«Â DÃ©terminateurÂ Â» et Â«Â MÃ©thode de dÃ©terminationÂ Â»</p></li>
<li><p>MÃ©tadonnÃ©es : Suppression du graphique de rÃ©partition des espÃ¨ces dans les exports PDF car il Ã©tait partiellement fonctionnel</p></li>
<li><p>SynthÃ¨se : Fonction <code class="docutils literal notranslate"><span class="pre">import_row_from_table</span></code>, test sur <code class="docutils literal notranslate"><span class="pre">LOWER(tbl_name)</span></code></p></li>
<li><p>Redirection vers le formulaire dâ€™authentification si lâ€™on essaie dâ€™accÃ©der Ã  une URL sans Ãªtre authentifiÃ© et sans passer par le frontend (#1193)</p></li>
<li><p>Script dâ€™installation globale : prise en compte du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">install_grid_layer</span></code> permettant dâ€™intÃ©grer ou non les mailles dans le <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> lors de lâ€™installation initiale (#1133)</p></li>
<li><p>SynthÃ¨se : Changement de la longueur du champs <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (de 255 Ã  5000 caractÃ¨res)</p></li>
<li><p>SensibilitÃ© : Corrections des contraintes NOT VALID (#1245)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql</a>)</p></li>
<li><p>Toutes les nouvelles donnÃ©es intÃ©grÃ©es dans le SynthÃ¨se auront leur niveau de sensibilitÃ© et de diffusion calculÃ©s automatiquement. Vous pouvez ajouter ou dÃ©sactiver des rÃ¨gles de sensibilitÃ© dans la table <code class="docutils literal notranslate"><span class="pre">gn_sensivity.t_sensitivity_rules</span></code></p></li>
<li><p>Vous pouvez aussi exÃ©cuter le script qui va calculer automatiquement le niveau de sensibilitÃ© et de diffusion de toutes les donnÃ©es dÃ©jÃ  prÃ©sentes dans la SynthÃ¨se, Ã©ventuellement en lâ€™adaptant Ã  votre contexte : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql</a></p></li>
<li><p>Mettez Ã  jour de la longueur du champs <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese.reference_biblio</span></code> Ã  5000 charactÃ¨res. ExÃ©cutez la commande suivante dans la console : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">geonature2db</span> <span class="pre">-c</span> <span class="pre">&quot;UPDATE</span> <span class="pre">pg_attribute</span> <span class="pre">SET</span> <span class="pre">atttypmod</span> <span class="pre">=</span> <span class="pre">5004</span> <span class="pre">WHERE</span> <span class="pre">attrelid</span> <span class="pre">=</span> <span class="pre">'gn_synthese.synthese'::regclass</span> <span class="pre">AND</span> <span class="pre">attname</span> <span class="pre">=</span> <span class="pre">'reference_biblio';&quot;</span></code></p></li>
<li><p>ExÃ©cuter le script de mise Ã  jour de la BDD du sous-module de nomenclature : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql</a></p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez Occtax-mobile, vous pouvez modifier la valeur du nouveau paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code> pour lui indiquer le code du type de zonage que vous utilisez pour les unitÃ©s gÃ©ographiques (mailles de 5km par dÃ©faut)</p></li>
<li><p>Si vous disposez du module dâ€™import, vous devez le mettre Ã  jour en version 1.1.1</p></li>
</ul>
</section>
<section id="id15">
<h2>2.5.5 (2020-11-19)<a class="headerlink" href="#id15" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un composant fil dâ€™ariane (#1143)</p></li>
<li><p>Ajout de la possiblitÃ© de dÃ©sactiver les composants <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> et <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> (#1142)</p></li>
<li><p>Ajout de tests sur les routes pour assurer la compatibilitÃ© avec les applications mobiles</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug de rÃ©cupÃ©ration du CRUVED sur les modules (#1146)</p></li>
<li><p>Correction des validateurs sur les preuves dâ€™existence (#1134)</p></li>
<li><p>Correction de la rÃ©cupÃ©ration des dossiers dans <code class="docutils literal notranslate"><span class="pre">backend/static</span></code> dans le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code></p></li>
<li><p>Correction de lâ€™affichage de lâ€™utilisateur dans la navbar lorsquâ€™on est connectÃ© via le CAS INPN</p></li>
</ul>
</section>
<section id="id16">
<h2>2.5.4 (2020-11-17)<a class="headerlink" href="#id16" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout de scripts <code class="docutils literal notranslate"><span class="pre">sql</span></code> et <code class="docutils literal notranslate"><span class="pre">sh</span></code> de restauration des medias dans <code class="docutils literal notranslate"><span class="pre">data/medias</span></code> (#1148)</p></li>
<li><p>Ajout dâ€™un service pour pouvoir rÃ©cupÃ©rer les informations sur lâ€™utilisateur connectÃ©</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction des mÃ©dias qui sont actuellement tous supprimÃ©s automatiquement aprÃ¨s 24h, et non pas seulement ceux orphelins (#1148)</p></li>
<li><p>Correction des permissions sur les fiches info des relevÃ©s dans Occtax avec la dÃ©sactivation du bouton de modification du relevÃ© quand lâ€™utilisateur nâ€™en a pas les droits</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous aviez associÃ© des mÃ©dias Ã  des observations dans Occtax ou autre et quâ€™ils ont Ã©tÃ© supprimÃ©s, vous pouvez les retrouver dans la table dâ€™historisation des actions (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_commons.t_history_actions</span> <span class="pre">WHERE</span> <span class="pre">table_content-&gt;'id_media'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span> <span class="pre">AND</span> <span class="pre">operation_type</span> <span class="pre">=</span> <span class="pre">'D'</span></code>)</p></li>
<li><p>Pour restaurer les mÃ©dias supprimÃ©s depuis la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_history_actions</span></code> vous pouvez :</p>
<ul>
<li><p>exÃ©cuter le script SQL <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sql</span></code> qui va recrÃ©er les mÃ©dias supprimÃ©s dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code></p></li>
<li><p>exÃ©cuter le script BASH <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sh</span></code> (<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">/home/`whoami`/geonature/data/medias/restore_medias.sh</span></code> en <code class="docutils literal notranslate"><span class="pre">sudo</span></code> si besoin) qui va renommer des fichiers supprimÃ©s en supprimant le prÃ©fixe <code class="docutils literal notranslate"><span class="pre">deleted_</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id17">
<h2>2.5.3 (2020-11-04)<a class="headerlink" href="#id17" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Mise en place de lâ€™hÃ©ritage du CRUVED au niveau des objets des modules (#1028)</p></li>
<li><p>RÃ©vision de lâ€™export des observations de la SynthÃ¨se (noms plus lisibles, ajout des communes et dâ€™informations taxonomiques, complÃ©ment des champs existants (#755)</p></li>
<li><p>Ajout dâ€™un paramÃ¨tre permettant dâ€™ajouter un message personnalisÃ© Ã  la fin des emails (inscriptions, exportsâ€¦) (#1050 par &#64;jpm-cbna)</p></li>
<li><p>Ajout dâ€™une alerte de dÃ©prÃ©ciation sur les fonctions <code class="docutils literal notranslate"><span class="pre">utils-sqlalchemy</span></code> prÃ©sentes dans GeoNature</p></li>
<li><p>Ajout dâ€™un widget de type Â«Â HTMLÂ Â» dans les formulaires dynamiques, permettant dâ€™ajouter des informations dans un formulaire (#1043 et #1068 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© dâ€™ajouter un texte dâ€™aide sur les champs des formulaires dynamiques (#1065 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de dÃ©finir un min et un max au composant commun <code class="docutils literal notranslate"><span class="pre">date</span></code> (#1069 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de dÃ©finir le nombre de lignes du composant commun <code class="docutils literal notranslate"><span class="pre">textarea</span></code> (#1067 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de contrÃ´ler par une expression rÃ©guliÃ¨re le contenu dâ€™un champs de type <code class="docutils literal notranslate"><span class="pre">text</span></code> des formulaires dynamiques (#1073 par &#64;FlorentRICHARD44)</p></li>
<li><p>Ajout de la possibilitÃ© de masquer certains champs du composant <code class="docutils literal notranslate"><span class="pre">media</span></code> (#1072, #1078 et #1083 par &#64;metourneau)</p></li>
<li><p>Ajout dâ€™un spinner sur les statistiques de la page dâ€™accueil (#1086 par &#64;jpm-cbna)</p></li>
<li><p>Ajout dâ€™un composant dâ€™autocomplete multiselect <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> permettant de rechercher des taxons dans tout lâ€™arbre taxonomique et de limiter la recherche Ã  un rang</p></li>
<li><p>PossibilitÃ© dâ€™ajouter plusieurs cartes sur la mÃªme page Ã  lâ€™aide du composant <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code></p></li>
<li><p>HomogÃ©nÃ©isation du style du code et documentation des pratiques de dÃ©veloppement</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™affichage des noms des validateurs sur la liste dans le module validation (#1091 par &#64;lpofredc)</p></li>
<li><p>Corrections mineures de lâ€™export des observations de la SynthÃ¨se (#1108)</p></li>
<li><p>SynthÃ¨se : Correction du masquage de la recherche par arbre taxonomique (#1057 par &#64;jpm-cbna)</p></li>
<li><p>Ajout du champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_biogeo_status</span></code> dans la Synthese (correspondance standard : statut biogÃ©ographique). La BDD est remplie avec la valeur par dÃ©faut de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.default_nomenclature_value</span></code> (valeur = non renseignÃ©e)</p></li>
<li><p>Accueil : Correction de lâ€™affichage du nom du module (#1087)</p></li>
<li><p>Correction du trigger de mise Ã  jour dâ€™Occtax vers la SynthÃ¨se (champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> non mis Ã  jour) (#1117 par &#64;jbrieuclp)</p></li>
<li><p>Correction du paramÃ¨tre stockant la version de Taxref, passÃ© Ã  13.0 pour les nouvelles installations (#1097 par &#64;RomainBaghi)</p></li>
<li><p>Correction de lâ€™affichage en double des markers dans Leaflet.draw (#1095 par &#64;FlorentRICHARD44)</p></li>
<li><p>SynthÃ¨se : Correction des filtres avancÃ©s par technique dâ€™observation et mÃ©thode de dÃ©termination (#1110 par &#64;jbrieuclp)</p></li>
<li><p>RecrÃ©ation du fichier de configuration Ã  chaque installation (#1074 par &#64;etot)</p></li>
<li><p>Annulation de lâ€™insertion du module lorsquâ€™une erreur est levÃ©e Ã  lâ€™installation dâ€™un module</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>DÃ©sormais les objets des modules (par exemple les objets â€œPermissionsâ€ et â€œNomenclaturesâ€ du module â€œADMINâ€) hÃ©ritent automatiquement des permissions dÃ©finies au niveau du module parent et Ã  dÃ©faut au niveau de GeoNature  (#1028). Il sâ€™agit dâ€™une Ã©volution de mise en cohÃ©rence puisque les modules hÃ©ritaient dÃ©jÃ  des permissions de GeoNature, mais pas leurs objets. Si vous avez dÃ©fini des permissions particuliÃ¨res aux niveaux des objets, vÃ©rifier leur cohÃ©rence avec le nouveau fonctionnement. NB : si vous aviez mis des droits R=0 pour un groupe au module â€œADMINâ€, les utilisateurs de ce groupe ne pourront pas accÃ©der aux sous-modules â€œpermissionsâ€ et â€œnomenclaturesâ€.</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql</a>). Attention, si vous avez customisÃ© les vues des exports Occtax et SynthÃ¨se, elles seront supprimÃ©es et recrÃ©es automatiquement par le script SQL de mise Ã  jour de la BDD de GeoNature pour intÃ©grer leurs Ã©volutions rÃ©alisÃ©es dans cette nouvelle version. RÃ©visez Ã©ventuellement ces vues avant et/ou aprÃ¨s la mise Ã  jour.</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
<li><p>Les noms de colonnes de lâ€™export de la SynthÃ¨se ont Ã©tÃ© entiÃ¨rement revus dans la vue fournie par dÃ©faut (<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouchÃ© le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vÃ©rifiez les noms des colonnes.</p></li>
<li><p>VÃ©rifiez que la valeur du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> correspond bien Ã  votre version actuelle de Taxref (11.0 ou 13.0).</p></li>
</ul>
</section>
<section id="id18">
<h2>2.5.2 (2020-10-13)<a class="headerlink" href="#id18" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : correction du problÃ¨me dâ€™installation du module dans le fichier <code class="docutils literal notranslate"><span class="pre">schemas.py</span></code></p></li>
<li><p>Synthese : correction de la fonctions SQL <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table</span></code> et rÃ©percussion dans le fichier <code class="docutils literal notranslate"><span class="pre">gn_synthese/process.py</span></code></p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql</a>)</p></li>
</ul>
</section>
<section id="id19">
<h2>2.5.1 (2020-10-06)<a class="headerlink" href="#id19" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dÃ©finissant si les adresses email des observateurs sont affichÃ©es ou non dans les fiches info des observations des modules SynthÃ¨se et Validation (#1066)</p></li>
<li><p>Occtax : correction de lâ€™affichage du champs Â«Â Technique de collecte CampanuleÂ Â» (#1059)</p></li>
<li><p>Occtax : correction du fichier dâ€™exemple de configuration <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml.example</span></code> (#1059)</p></li>
<li><p>Occtax : paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> renommÃ© <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> et dÃ©sactivÃ© par dÃ©faut (#1060)</p></li>
<li><p>Occtax : quand le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> est dÃ©sactivÃ©, remise en place du fonctionnement de lâ€™outil Â«Â Echainer les relevÃ©sÂ Â». Dans ce cas, quand on enchaine les relevÃ©s, on conserve le JDD, les observateurs, les dates et heures dâ€™un relevÃ© Ã  lâ€™autre (#1060)</p></li>
<li><p>Occtax : correction de lâ€™observateur par dÃ©faut en mode <code class="docutils literal notranslate"><span class="pre">observers_as_txt</span></code></p></li>
<li><p>Verification des UUID : autoriser toutes les versions (#1063)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="manidae-2020-09-30">
<h2>2.5.0 - Manidae (2020-09-30)<a class="headerlink" href="#manidae-2020-09-30" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>Occtax v2 et mÃ©dias</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Refonte de lâ€™ergonomie et du fonctionnement du module de saisie Occtax (#758 et #860 par &#64;jbrieuclp et &#64;TheoLechemia)</p>
<ul>
<li><p>Enregistrement continu au fur et Ã  mesure de la saisie dâ€™un relevÃ©</p></li>
<li><p>DÃ©coupage en 2 onglets (Un pour le relevÃ© et un onglet pour les taxons)</p></li>
<li><p>AmÃ©lioration de la liste des taxons saisis sur un relevÃ© (#635 et #682)</p></li>
<li><p>AmÃ©lioration de la saisie au clavier</p></li>
<li><p>Zoom rÃ©alisÃ© dans la liste des relevÃ© conservÃ© quand on saisit un nouveau relevÃ© (#436 et #912)</p></li>
<li><p>Filtres conservÃ©s quand on revient Ã  la liste des relevÃ©s (#772)</p></li>
<li><p>PossibilitÃ© de conserver les informations saisies entre 2 taxons ou relevÃ©s, dÃ©sactivable avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> (#692)</p></li>
<li><p>Correction de la mise Ã  jour des dates de dÃ©but et de fin (#977)</p></li>
<li><p>Affichage dâ€™une alerte si on saisit 2 fois le mÃªme taxon sur un mÃªme relevÃ©</p></li>
<li><p>Fiche dâ€™information dâ€™un relevÃ© complÃ©tÃ©e et mise Ã  jour</p></li>
</ul>
</li>
<li><p>Passage de la version 1.2.1 Ã  la version 2.0.0 du standard Occurrences de taxon (dans les modules Occtax, SynthÃ¨se et Validation) (#516)</p>
<ul>
<li><p>Ajout des champs Â«Â ComportementÂ Â», Â«Â NomLieuÂ Â», Â«Â HabitatÂ Â», Â«Â MÃ©thode de regroupementÂ Â», Â«Â Type de regroupementÂ Â» et Â«Â ProfondeurÂ Â»</p></li>
<li><p>Ajout du champs Â«Â PrÃ©cisionÂ Â» dans Occtax et suppression de sa valeur par dÃ©faut Ã  100 m</p></li>
<li><p>Renommage du champs Â«Â MÃ©thode dâ€™observationÂ Â» en Â«Â Technique dâ€™observationÂ Â»</p></li>
<li><p>Suppression du champs Â«Â Technique dâ€™observationÂ Â» actuel de la synthÃ¨se</p></li>
<li><p>Renommage du champs Â«Â Technique dâ€™observationÂ Â» actuel dâ€™Occtax en Â«Â Technique de collecte CampanuleÂ Â»</p></li>
<li><p>Ajout et mise Ã  jour de quelques nomenclatures</p></li>
<li><p>Ajout dâ€™un document de suivi de lâ€™implÃ©mentation du standard Occurrences de taxon dans GeoNature (<code class="docutils literal notranslate"><span class="pre">docs/implementation_gn_standard_occtax2.0.ods</span></code>) (#516)</p></li>
</ul>
</li>
<li><p>Passage de la version 1.3.9 Ã  la version 1.3.10 du standard de MÃ©tadonnÃ©es. Mise Ã  jour des nomenclatures Â«Â CA_OBJECTIFSÂ Â» et mise Ã  jour des mÃ©tadonnÃ©es existantes en consÃ©quence (par &#64;DonovanMaillard)</p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">addtional_data</span></code> de type <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code>, en prÃ©vision de lâ€™ajout des champs additionnels dans Occtax et SynthÃ¨se (#1007)</p></li>
<li><p>Mise en place de la gestion transversale et gÃ©nÃ©rique des mÃ©dias (images, audios, vidÃ©os, PDFâ€¦) dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code> et le Dynamic-Form (#336) et implÃ©mentation dans le module Occtax (dÃ©sactivables avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MEDIAS</span></code>) (#620 par &#64;joelclems)</p></li>
<li><p>Mise en place de miniatures et dâ€™aperÃ§us des mÃ©dias, ainsi que de nombreux contrÃ´les des fichiers et de leurs formats</p></li>
<li><p>Affichage des mÃ©dias dans les fiches dâ€™information des modules de saisie, ainsi que dans les modules SynthÃ¨se et Validation</p></li>
<li><p>Ajout de la fonctionnalitÃ© Â«Â Mes lieuxÂ Â» (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_places</span></code>), permettant de stocker la gÃ©omÃ©trie de ieux individuels frÃ©quemment utilisÃ©s, implÃ©mentÃ©e dans le module cartographique dâ€™Occtax (dÃ©sactivable avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MY_PLACES</span></code>) (#246 par &#64;metourneau)</p></li>
<li><p>Tri de lâ€™ordre des modules dans le menu latÃ©ral par ordre alphabÃ©tique par dÃ©faut et possibilitÃ© de les ordonner avec le nouveau champs <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules.module_order</span></code> (#787 par &#64;alainlaupinmnhn)</p></li>
<li><p>ArrÃªt du support de lâ€™installation packagÃ©e sur Debian 9 et Ubuntu 16 pour passer Ã  Python version 3.6 et plus</p></li>
<li><p>Prise en charge de PostGIS 3 et notamment lâ€™installation de lâ€™extension <code class="docutils literal notranslate"><span class="pre">postgis_raster</span></code> (#946 par &#64;jpm-cbna)</p></li>
<li><p>CrÃ©ation de compte : Envoi automatique dâ€™un email Ã  lâ€™utilisateur quand son compte est validÃ©. NÃ©cessite la version 2.1.3 de UsersHub (#862 et #1035 par &#64;jpm-cbna)</p></li>
</ul>
<p><strong>Ajouts mineurs</strong></p>
<ul class="simple">
<li><p>HomogÃ©nÃ©isation des styles des boutons (#1026)</p></li>
<li><p>Factorisation du code des fiches infos dâ€™une observation dans les modules SynthÃ¨se et Validation (#1053)</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un paramÃ¨tre permettant de dÃ©finir le nombre de CA affichÃ©s sur la page (100 par dÃ©faut)</p></li>
<li><p>MÃ©tadonnÃ©es : Tri des CA et JDD par ordre alphabÃ©tique</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> dans la table des CA et des JDD, utilisÃ© en plus des acteurs pour le CRUVED des JDD (#921)</p></li>
<li><p>Dynamic-Form : Ajout dâ€™un composant Â«Â selectÂ Â» prenant une API en entrÃ©e (#1029)</p></li>
<li><p>Dynamic-Form : Ajout de la possibilitÃ© dâ€™afficher une dÃ©finition dâ€™un champs sous forme de tooltip</p></li>
<li><p>CAS INPN : Redirection vers la page de connexion de GeoNature quand on se dÃ©connecte</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur <code class="docutils literal notranslate"><span class="pre">schema_name</span></code> et <code class="docutils literal notranslate"><span class="pre">table_name</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_commons_bib_tables_location_unique</span></code> (#962)</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur <code class="docutils literal notranslate"><span class="pre">id_organism</span></code> et <code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> (#988)</p></li>
<li><p>Ajout de la possibilitÃ© de filtrer le composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> du Dynamic-Form par <code class="docutils literal notranslate"><span class="pre">module_code</span></code> pour pouvoir choisir parmis les JDD associÃ©es Ã  un module (#964)</p></li>
<li><p>Mise Ã  jour de <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> en version 2.8.5, sqlalchemy en 1.3.19, marshmallow en 2.15.6, virtualenv en 20.0.31 (par &#64;jpm-cbna)</p></li>
<li><p>Mises Ã  jour de sÃ©curitÃ© diverses</p></li>
<li><p>AmÃ©liorations des scripts <code class="docutils literal notranslate"><span class="pre">install/install_db.sh</span></code> et <code class="docutils literal notranslate"><span class="pre">install/install_app.sh</span></code> (par &#64;jpm-cbna)</p></li>
<li><p>Ajout de lâ€™autocomplÃ©tion des commandes <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (#999 par &#64;jpm-cbna)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh.sample</span></code></p></li>
<li><p>AmÃ©lioration du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code> en vÃ©rifiant la prÃ©sence des dossiers optionnels avant de les copier</p></li>
<li><p>AmÃ©lioration des fonctions <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row_format_insert_data</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row</span></code> pour prendre en charge la gÃ©nÃ©ration des geojson dans PostGIS 3</p></li>
<li><p>Documentation administrateur : PrÃ©cisions sur les labels, pictos et ordres des modules dans le menu de navigation latÃ©ral</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Module Validation : Affichage des commentaires du relevÃ© et de lâ€™observation (#978 et #854)</p></li>
<li><p>Module Validation : Ne lister que les observations ayant un UUID et vÃ©rification de sa validitÃ© (#936)</p></li>
<li><p>Module Validation : Correction et homogÃ©nÃ©isation de lâ€™affichage et du tri des observations par date (#971)</p></li>
<li><p>Module Validation : Correction de lâ€™affichage du statut de validation aprÃ¨s mise Ã  jour dans la liste des observations (#831)</p></li>
<li><p>Module Validation : Correction de lâ€™affichage du nom du validateur</p></li>
<li><p>Module Validation : AmÃ©lioration des performances avec lâ€™ajout dâ€™un index sur le champs <code class="docutils literal notranslate"><span class="pre">uuid_attached_row</span></code> de la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> (#923 par &#64;jbdesbas)</p></li>
<li><p>Suppression du trigger en double <code class="docutils literal notranslate"><span class="pre">tri_insert_synthese_cor_role_releves_occtax</span></code> sur <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> (#762 par &#64;jbrieuclp)</p></li>
<li><p>Passage des requÃªtes dâ€™export de la synthÃ¨se en POST plutÃ´t quâ€™en GET (#883)</p></li>
<li><p>Correction du traitement du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">offset</span></code> de la route <code class="docutils literal notranslate"><span class="pre">synthese/color_taxon</span></code> utilisÃ© par Occtax-mobile (#994)</p></li>
<li><p>Correction et complÃ©ment des scripts de migration de donnÃ©es depuis GINCO v1 (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/occtax.sql</span></code>)</p></li>
<li><p>Import des utilisateurs depuis le CAS INPN : Activer les utilisateurs importÃ©s par dÃ©faut et rÃ©cupÃ©rer leur email</p></li>
<li><p>Calcul automatique de la sensibilitÃ© : Ajout de la rÃ©cursivitÃ© dans la rÃ©cupÃ©ration des critÃ¨res de sensibilitÃ© au niveau de la fonction <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.get_id_nomenclature_sensitivity</span></code> (#284)</p></li>
<li><p>Typo sur le terme Â«Â Preuve dâ€™existenceÂ Â» (par &#64;RomainBaghi)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Nomenclatures : Commencer par exÃ©cuter le script SQL de mise Ã  jour du schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> de la BDD (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql</a>)</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql</a>). Attention, si vous avez customisÃ© les vues des exports Occtax et SynthÃ¨se, elles seront supprimÃ©es et recrÃ©es automatiquement par le script SQL de mise Ã  jour de la BDD de GeoNature pour sâ€™adapter aux Ã©volutions du standard Occtax en version 2.0.0. RÃ©visez Ã©ventuellement ces vues avant et/ou aprÃ¨s la mise Ã  jour. Le script SQL de mise Ã  jour vÃ©rifiera aussi si vous avez dâ€™autres vues (dans le module Export notamment) qui utilisent le champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> qui doit Ãªtre renommÃ© et lâ€™indiquera dÃ¨s le dÃ©but de lâ€™exÃ©cution du script, en lâ€™arrÃªtant pour que vous puissiez modifier ou supprimer ces vues bloquant la mise Ã  jour.</p></li>
<li><p>Les colonnes de lâ€™export de la SynthÃ¨se ont Ã©tÃ© partiellement revus dans la vue fournie par dÃ©faut (<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouchÃ© le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vÃ©rifiez les noms des colonnes.</p></li>
<li><p>A partir la version 2.5.0 de GeoNature, la version 3.5 de Python nâ€™est plus supportÃ©e. Seules les versions 3.6 et + le sont. Si vous Ãªtes encore sur Debian 9 (fourni par dÃ©faut avec Python 3.5), veuillez suivre les instructions de mise Ã  jour de Python sur cette version (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9">https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9</a>). Il est cependant plutÃ´t conseillÃ© de passer sur Debian 10 pour rester Ã  jour sur des versions maintenues</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>A noter, quelques changements dans les paramÃ¨tres du module Occtax. Les paramÃ¨tres dâ€™affichage/masquage des champs du formulaire ont Ã©voluÃ© ainsi :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_meth</span></code> devient <code class="docutils literal notranslate"><span class="pre">obs_tech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_technique</span></code> devient <code class="docutils literal notranslate"><span class="pre">tech_collect</span></code></p></li>
</ul>
</li>
<li><p>A noter aussi que cette version de GeoNature est compatible avec la version 1.1.0 minimum dâ€™Occtax-mobile (du fait de la mise du standard Occurrence de taxons)</p></li>
</ul>
</section>
<section id="id20">
<h2>2.4.1 (2020-06-25)<a class="headerlink" href="#id20" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Occurrences sans gÃ©omÃ©trie prÃ©cise : Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">id_area_attachment</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> permettant dâ€™associer une observation Ã  un zonage dans le rÃ©fÃ©rentiel gÃ©ographique (<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code>) (#845 et #867)</p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> pour pouvoir afficher les zonages du rÃ©fÃ©rentiel gÃ©ographique sur les cartes (#867)</p></li>
<li><p>Ajout de lâ€™import par dÃ©faut des dÃ©partements de France mÃ©tropole dans le rÃ©fÃ©rentiel gÃ©ographique lors de lâ€™installation de GeoNature (en plus des actuelles communes et grilles)</p></li>
<li><p>Mise Ã  jour des communes importÃ©es sur la version de fÃ©vrier 2020 dâ€™Admin express IGN pour les nouvelles installations</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug dâ€™affichage des fonds de carte WMTS de lâ€™IGN, apparu dans la version 2.4.0 avec lâ€™ajout du support des fonds WMS (#890)</p></li>
<li><p>Gestion des exceptions de type <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> lors de lâ€™import des commandes dâ€™un module</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql</a></p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Vous pouvez alors lancer le script dâ€™insertion des dÃ©partements de France mÃ©tropole dans le rÃ©ferentiel gÃ©ographique (optionnel) : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh</a>. VÃ©rifier le dÃ©roulement de lâ€™import dans le fichier <code class="docutils literal notranslate"><span class="pre">var/log/insert_departements.log</span></code></p></li>
</ul>
</section>
<section id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de mÃ©tadonnÃ©es (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™une fiche pour chaque jeu de donnÃ©es et cadres dâ€™acquisition, incluant une carte de lâ€™Ã©tendue des observations et un graphique de rÃ©partition des taxons par Groupe INPN (#846 par &#64;FloVollmer)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™exporter les fiches des JDD et des CA en PDF, gÃ©nÃ©rÃ©s par le serveur avec WeasyPrint. Logo et entÃªtes modifiables dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/images/</span></code> (#882 par &#64;FloVollmer)</p></li>
<li><p>MÃ©tadonnÃ©es : ImplÃ©mentation du CRUVED sur la liste des CA et JDD (#911)</p></li>
<li><p>MÃ©tadonnÃ©es : Affichage de tous les CA des JDD pour lequels lâ€™utilisateur connectÃ© a des droits (#908)</p></li>
<li><p>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration (optionnelle) vers Taxref version 13</p></li>
<li><p>Installation globale migrÃ©e de Taxref version 11 Ã  13</p></li>
<li><p>SynthÃ¨se et zonages : Ne pas inclure lâ€™association aux zonages limitrophes dâ€™une observation quand sa gÃ©omÃ©trie est Ã©gale Ã  un zonage (maille, communeâ€¦) (#716 par &#64;jbdesbas)</p></li>
<li><p>SynthÃ¨se : Ajout de la possibilitÃ© dâ€™activer la recherche par observateur Ã  travers une liste, avec ajout des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> par dÃ©faut) et <code class="docutils literal notranslate"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</p></li>
<li><p>SynthÃ¨se : AmÃ©lioration de la recherche des observateurs. Non prise en compte de lâ€™ordre des noms saisis (#834 par &#64;jbrieuclp)</p></li>
<li><p>SynthÃ¨se : Ajout de filtres avancÃ©s (<code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">par</span></code> basÃ© sur <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code>, <code class="docutils literal notranslate"><span class="pre">Commentaire</span></code> du relevÃ© et de lâ€™occurrence, <code class="docutils literal notranslate"><span class="pre">DÃ©terminateur</span></code>) (#834 par &#64;jbrieuclp)</p></li>
<li><p>Occtax : CrÃ©ation dâ€™un trigger gÃ©nÃ©rique de calcul de lâ€™altitude qui nâ€™est exÃ©cutÃ© que si lâ€™altitude nâ€™est pas postÃ©e (#848)</p></li>
<li><p>Ajout dâ€™une table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister les applications mobiles, lâ€™URL de leur APK et dâ€™une API pour interroger le contenu de cette table. Les fichiers des applications et leurs fichiers de configurations peuvent Ãªtre chargÃ©s dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/mobile</span></code> (#852)</p></li>
<li><p>Ajout dâ€™un offset et dâ€™une limite sur la route de la couleur des taxons (utilisÃ©e uniquement par Occtax-mobile actuellement)</p></li>
<li><p>Support des fonds de carte au format WMS (<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>), (#890 par &#64;jbdesbas)</p></li>
<li><p>Ajout dâ€™un champs texte <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code></p></li>
<li><p>AmÃ©lioration des perfomances du module de validation, en revoyant la vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les requÃªtes et en gÃ©nÃ©rant le GeoJSON au niveau de la BDD (#923)</p></li>
<li><p>Ajout dâ€™une fonction SQL dâ€™insertion de donnÃ©es dans la synthese (et une fonction python associÃ©e)</p></li>
<li><p>ComplÃ©ments de la documentation (Permissions des utilisateurs, Occhabâ€¦)</p></li>
<li><p>Ajout de scripts de migration des donnÃ©es de GINCO1 vers GeoNature (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco</span></code>)</p></li>
<li><p>Trigger Occtax vers SynthÃ¨se : AmÃ©lioration du formatage des heures avec <code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code> dans la fonction <code class="docutils literal notranslate"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</p></li>
<li><p>Barre de navigation : Clarification de lâ€™icÃ´ne dâ€™ouverture du menu, ajout dâ€™un paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de changer le nom du fichier du logo de lâ€™application (#897 par &#64;jbrieuclp)</p></li>
<li><p>MÃ©dias : AmÃ©lioration des fonctions backend</p></li>
<li><p>Mise Ã  jour de jQuery en version 3.5.0</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code> et du trigger sur la SynthÃ¨se qui la remplissait pour utiliser la vue matÃ©rialisÃ©e <code class="docutils literal notranslate"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant les noms de recherche de tous les taxons de Taxref, entiÃ¨rement revue dans TaxHub 1.7.0</p></li>
<li><p>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe de jointure des tables</p></li>
<li><p>Ajout de fonctions SQL dâ€™insertion de donnÃ©es dans la SynthÃ¨se (<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row()</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python associÃ©e (<code class="docutils literal notranslate"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>) pour lâ€™API permettant de poster dans la SynthÃ¨se (#736). UtilisÃ©e par le module Monitoring.</p></li>
<li><p>Ajout du plugin Leaflet.Deflate (#934  par &#64;jpm-cbna)</p></li>
<li><p>Connexion au CAS INPN : Association des JDD aux modules Occtax et Occhab (paramÃ©trable) quand on importe les JDD de lâ€™utilisateur qui se connecte (dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.cor_module_dataset</span></code>)</p></li>
<li><p>Mise Ã  jour des librairies Python Utils-Flask-SQLAlchemy (en version 0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant de mettre en place les exports au format GeoPackage et corrigeant les exports de SHP contenant des gÃ©omÃ©tries multiples</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour des URL de la documentation utilisateur des modules, renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Validation : Correction de lâ€™ouverture de la fiche dâ€™information dâ€™une observation (#858)</p></li>
<li><p>Modification de lâ€™attribution de la hauteur du composant <code class="docutils literal notranslate"><span class="pre">map-container</span></code> pour permettre dâ€™adapter la hauteur de la carte si la hauteur dâ€™un conteneur parent est modifiÃ©. Et que <code class="docutils literal notranslate"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</p></li>
<li><p>Mise Ã  jour de la librairie python Markupsafe en version 1.1, corrigeant un problÃ¨me de setuptools (#881)</p></li>
<li><p>Page Maintenance : Correction de lâ€™affichage de lâ€™image (par &#64;jpm-cbna)</p></li>
<li><p>Correction du multiselect du composant <code class="docutils literal notranslate"><span class="pre">pnx-nomenclatures</span></code> (#885 par &#64;jpm-cbna)</p></li>
<li><p>Correction de lâ€<code class="docutils literal notranslate"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> (#901 par &#64;jbrieuclp)</p></li>
<li><p>Utilisation de NVM quand on installe les dÃ©pendances javascript (#926 par &#64;jpm-cbna)</p></li>
<li><p>Formulaire JDD : Correction de lâ€™affichage de la liste des modules (#861)</p></li>
<li><p>Correction de lâ€™utilisation des paramÃ¨tres du proxy (#944)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature.</p>
<ul class="simple">
<li><p>Vous devez dâ€™abord mettre Ã  jour TaxHub en version 1.7.0</p></li>
<li><p>Si vous mettez Ã  jour TaxHub, vous pouvez mettre Ã  jour Taxref en version 13. Il est aussi possible de le faire en diffÃ©rÃ©, plus tard</p></li>
<li><p>Vous pouvez mettre Ã  jour UsersHub en version 2.1.2</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</p></li>
<li><p>Si vous avez mis Ã  jour Taxref en version 13, rÃ©percutez les Ã©volutions au niveau des nomenclatures avec le script SQL <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>. Sinon vous devrez lâ€™exÃ©cuter plus tard, aprÃ¨s avoir mis Ã  jour Taxref en version 13. AprÃ¨s avoir mis Ã  jour Taxref en version 13, pensez Ã  mettre Ã  jour le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code>.</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</p></li>
<li><p>Installer les dÃ©pendances de la librairie Python WeasyPrint :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libcairo2</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpango</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpangocairo</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libgdk</span><span class="o">-</span><span class="n">pixbuf2</span><span class="mf">.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libffi</span><span class="o">-</span><span class="n">dev</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">shared</span><span class="o">-</span><span class="n">mime</span><span class="o">-</span><span class="n">info</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Corriger lâ€™utilisation des paramÃ¨tres du proxy (#944) dans le fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh</span></code> en remplaÃ§ant les 2 lignes :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_http&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_https&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Vous pouvez supprimer les associations des observations de la synthÃ¨se aux zonages limitrophes, si vous nâ€™avez pas dâ€™observations sans gÃ©omÃ©trie (#719) :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">cor_area_synthese</span> <span class="n">cas</span>
<span class="n">USING</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">synthese</span> <span class="n">s</span><span class="p">,</span> <span class="n">ref_geo</span><span class="o">.</span><span class="n">l_areas</span> <span class="n">a</span>
<span class="n">WHERE</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_synthese</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">id_synthese</span> <span class="n">AND</span> <span class="n">a</span><span class="o">.</span><span class="n">id_area</span> <span class="o">=</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_area</span>
<span class="n">AND</span> <span class="n">public</span><span class="o">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="id21">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id21" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de charger les commandes dâ€™un module dans les commandes de GeoNature</p></li>
<li><p>Ajout de commentaires dans le fichier dâ€™exemple de configuration <code class="docutils literal notranslate"><span class="pre">config/default_config.toml.example</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™une incohÃ©rence dans le dÃ©compte des JDD sur la page dâ€™accueil en leur appliquant le CRUVED (#752)</p></li>
<li><p>MontÃ©e de version de la librairie <code class="docutils literal notranslate"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour compatibilitÃ© avec la version 1.0.0 du module dâ€™export</p></li>
</ul>
</section>
<section id="id22">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id22" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Installation globale : CompatibilitÃ© Debian 10 (PostgreSQL 11, PostGIS 2.5)</p></li>
<li><p>Installation globale : Passage Ã  Taxhub 1.6.4 et UsersHub 2.1.1</p></li>
<li><p>Utilisation gÃ©nÃ©ralisÃ©e des nouvelles librairies externalisÃ©es de sÃ©rialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</p></li>
<li><p>PossibilitÃ© de rÃ©gler le timeout de Gunicorn pour Ã©viter le plantage lors de requÃªtes longues</p></li>
<li><p>Ne pas zoomer sur les observations au premier chargement de la carte (#838)</p></li>
<li><p>Leaflet-draw : Ajout de la possibilitÃ© de zoomer sur le point (par &#64;joelclems)</p></li>
<li><p>Ajout du nom vernaculaire dans les fiches dâ€™information des relevÃ©s dâ€™Occtax (par &#64;FloVollmer / #826)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™installation de Node.js et npm par lâ€™utilisation gÃ©nÃ©ralisÃ©e de nvm (#832 et #837)</p></li>
<li><p>Fixation de la version de Node.js en 10.15.3 (dans le fichier <code class="docutils literal notranslate"><span class="pre">fronted/.nvmrc</span></code>)</p></li>
<li><p>Ajout dâ€™une rÃ©fÃ©rence de lâ€™objet Leaflet <code class="docutils literal notranslate"><span class="pre">L</span></code> afin quâ€™il soit utilisÃ© dans les modules et changement du typage de lâ€™Ã©venement Leaflet <code class="docutils literal notranslate"><span class="pre">MouseEvent</span></code> en <code class="docutils literal notranslate"><span class="pre">L.LeafletMouseEvent</span></code></p></li>
<li><p>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</p></li>
<li><p>Corrections de typos dans la documentation dâ€™administration (#840 - par &#64;sogalgeeko)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version depuis la 2.2.x, mais en suivant les notes des versions intermÃ©diaires (NB : il nâ€™est pas nÃ©cessaire dâ€™exÃ©cuter le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> des versions prÃ©cÃ©dentes)</p></li>
<li><p>Installez <code class="docutils literal notranslate"><span class="pre">pip3</span></code> et <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
<span class="n">sudo</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span><span class="o">==</span><span class="mf">20.0.1</span>
</pre></div>
</div>
</li>
<li><p>Rajoutez la ligne <code class="docutils literal notranslate"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> puis rechargez supervisor (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code>). Il sâ€™agit du temps maximal (en seconde) autorisÃ© pour chaque requÃªte. A augmenter, si vous avez dÃ©jÃ  rencontrÃ© des problÃ¨mes de timeout.</p></li>
<li><p>Depuis le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal notranslate"><span class="pre">nvm</span> <span class="pre">install</span></code></p></li>
</ul>
</section>
<section id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de NoÃ«l (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement du module Occhab (Occurrences dâ€™habitats) basÃ© sur une version minimale du standard SINP du mÃªme nom et sâ€™appuyant sur le rÃ©fÃ©rentiel Habref du SINP (#735)</p>
<ul>
<li><p>Consultation (carte-liste) des stations et affichage de leurs habitats</p></li>
<li><p>Recherche (et export) des stations par jeu de donnÃ©es, habitats ou dates</p></li>
<li><p>Saisie dâ€™une station et de ses habitats</p></li>
<li><p>PossibilitÃ© de saisir plusieurs habitats par station</p></li>
<li><p>Saisie des habitats basÃ©e sur une liste prÃ©-dÃ©finie Ã  partir dâ€™Habref. PossibilitÃ© dâ€™intÃ©grer toutes les typologies dâ€™habitat ou de faire des listes rÃ©duites dâ€™habitats</p></li>
<li><p>PossibilitÃ© de charger un fichier GeoJson, KML ou GPX sur la carte et dâ€™utiliser un de ses objets comme gÃ©omÃ©trie de station</p></li>
<li><p>Mise en place dâ€™une API Occhab (Get, Post, Delete, Export stations et habitats et rÃ©cupÃ©rer les valeurs par dÃ©faut des nomenclatures)</p></li>
<li><p>Calcul automatique des altitudes (min/max) et de la surface dâ€™une station</p></li>
<li><p>Gestion des droits (en fonction du CRUVED de lâ€™utilisateur connectÃ©)</p></li>
<li><p>DÃ©finition des valeurs par dÃ©faut dans la BDD (paramÃ©trable par organisme)</p></li>
<li><p>PossibilitÃ© de masquer des champs du formulaire</p></li>
</ul>
</li>
<li><p>CrÃ©ation dâ€™un sous-module autonome ou intÃ©grÃ© pour gÃ©rer lâ€™API dâ€™Habref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :</p>
<ul>
<li><p>Rechercher un habitat dans Habref (avec usage du trigramme pour la pertinence du rÃ©sultat)</p></li>
<li><p>Obtenir les infos dâ€™un habitat et de ses correspondances Ã  partir de son cd_hab</p></li>
<li><p>Obtenir les habitats dâ€™une liste (avec ou sans leur code en plus de leur nom et filtrable par typologie)</p></li>
<li><p>Obtenir la liste des typologies (filtrable par liste dâ€™habitats)</p></li>
</ul>
</li>
<li><p>Mise Ã  jour du module des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version 1.3.2 incluant notamment :</p>
<ul>
<li><p>Ajout de nomenclatures SINP concernant les habitats</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur la combinaison des champs <code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal notranslate"><span class="pre">t_nomenclatures</span></code></p></li>
</ul>
</li>
<li><p>Association des JDD Ã  des modules pour filtrer les JDD utilisÃ©s dans Occtax ou dans Occhab notamment (#399)</p></li>
<li><p>Mise Ã  jour de Angular 4 Ã  Angular 7 (performances, â€¦.) par &#64;jbrieuclp</p></li>
<li><p>Ajout dâ€™une documentation utilisateur pour le module SynthÃ¨se : <a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a> (par &#64;amandine-sahl)</p></li>
<li><p>OCCTAX : AmÃ©lioration importante des performances de la liste des relevÃ©s (par &#64;jbrieuclp) (#690, #740)</p></li>
<li><p>AmÃ©liorations des performances des exports de Occtax et de SynthÃ¨se et ajout dâ€™index dans Occtax (par &#64;gildeluermoz) (#560)</p></li>
<li><p>Partage de scripts de sauvegarde de lâ€™application et de la BDD dans <code class="docutils literal notranslate"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</p></li>
<li><p>Externalisation des librairies dâ€™outils Flask et SQLAlchemy (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir les factoriser et les utiliser dans dâ€™autres applications. Cela amÃ©liore aussi les performances des jointures.</p></li>
<li><p>SYNTHESE : Ajout dâ€™un export de la liste des espÃ¨ces (#805)</p></li>
<li><p>SYNTHESE : Baser la portÃ©e de tous les exports (y compris Statuts) sur lâ€™action E (#804)</p></li>
<li><p>METADONNEES : Affichage des ID des JDD et CA</p></li>
<li><p>OCCTAX : Conserver le fichier GPX ou GeoJSON chargÃ© sur la carte quand on enchaine des relevÃ©s et ajouter de la transparence sur les gÃ©omÃ©tries utilisÃ©s dans les relevÃ©s prÃ©cÃ©dents (#813)</p></li>
<li><p>OCCTAX : Clarification de lâ€™ergonomie pour ajouter un dÃ©nombrement sur un taxon (#780)</p></li>
<li><p>Ajout des dates de creation et de modification dans les tables <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> et triggers pour les calculer automatiquement</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">geom_local</span></code>, <code class="docutils literal notranslate"><span class="pre">altitude_min</span></code> et <code class="docutils literal notranslate"><span class="pre">altitude_max</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer automatiquement (#812)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">id_module</span></code>, <code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal notranslate"><span class="pre">id_nomenclature_grp_typ</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</p></li>
<li><p>Le composant gÃ©nÃ©rique FileLayer expose un <code class="docutils literal notranslate"><span class="pre">output</span></code> pour rÃ©cuperer la gÃ©omÃ©trie sÃ©lectionnÃ©e (un observable de MapService Ã©tait utilisÃ© auparavant)</p></li>
<li><p>Support des markers sur le composant <code class="docutils literal notranslate"><span class="pre">leaflet-draw</span></code></p></li>
<li><p>PossibilitÃ© de ne pas activer le composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> au lancement lorsque celui-ci est utilisÃ© (input <code class="docutils literal notranslate"><span class="pre">defaultEnable</span></code>)</p></li>
<li><p>Ajout dâ€™inputs <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">medias</span></code> et <code class="docutils literal notranslate"><span class="pre">datalist</span></code> au composant DynamicForm permettant de gÃ©nÃ©rer des formulaires dynamiques.</p></li>
<li><p>AmÃ©liorations diverses du composant DynamicForm (par &#64;joelclems)</p></li>
<li><p>Ajout dâ€™un paramÃ¨tre dans le cas oÃ¹ le serveur se trouve derriÃ¨re un proxy (<code class="docutils literal notranslate"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal notranslate"><span class="pre">proxy_https</span></code> dans <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>)</p></li>
<li><p>Ajout dâ€™une route permettant de rÃ©cupÃ©rer la liste des rÃ´les dâ€™une liste Ã  partir de son code (par &#64;joelclems)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>MENU Side nav : Correction pour ne pas afficher les modules pour lesquels le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">active_frontend</span></code> est False (#822)</p></li>
<li><p>OCCTAX : Gestion de lâ€™Ã©dition des occurrences oÃ¹ le JDD a Ã©tÃ© dÃ©sactivÃ©, en ne permettant pas de modifier le JDD (#694)</p></li>
<li><p>OCCTAX : Correction dâ€™une faiblesse lors de la rÃ©cupÃ©ration des informations taxonomiques dâ€™un relevÃ© (utilisation dâ€™une jointure plutÃ´t que lâ€™API TaxHub) (#751)</p></li>
<li><p>OCCTAX : Correction des longues listes de taxons dans les tooltip des relevÃ©s en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</p></li>
<li><p>OCCTAX : Masquer le bouton <code class="docutils literal notranslate"><span class="pre">TÃ©lÃ©charger</span></code> si lâ€™utilisateur nâ€™a pas de droits dâ€™export dans le module (E = 0)</p></li>
<li><p>OCCTAX : Correction de lâ€™affichage des relevÃ©s dans la liste (#777)</p></li>
<li><p>OCCTAX : Correction des exports quand on filtre sur un obervateur en texte</p></li>
<li><p>SYNTHESE : Filtre sur <code class="docutils literal notranslate"><span class="pre">date_max</span></code> en prenant <code class="docutils literal notranslate"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code> pour prendre en compte les observations avec un horaire (#778)</p></li>
<li><p>SYNTHESE : Correction des boutons radios pour les filtres taxonomiques avancÃ©s basÃ©s sur les attributs TaxHub (#763)</p></li>
<li><p>SYNTHESE : Correction de la recherche par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> dans le composant <code class="docutils literal notranslate"><span class="pre">SearchTaxon</span></code> (#824)</p></li>
<li><p>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</p></li>
<li><p>INSCRIPTION : Correction si aucun champ additionnel nâ€™a Ã©tÃ© ajoutÃ© au formulaire (par &#64;jbrieuclp) (#746)</p></li>
<li><p>INSCRIPTION : Correction de lâ€™usage des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> et <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</p></li>
<li><p>Simplification de lâ€™Ã©criture des logs dans le script <code class="docutils literal notranslate"><span class="pre">install_db.sh</span></code></p></li>
<li><p>Correction de lâ€™installation des requirements.txt lors de lâ€™installation dâ€™un module (#764 par &#64;joelclems)</p></li>
<li><p>COMMONS : Modification des champs de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> de type CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal notranslate"><span class="pre">module_path</span></code>, <code class="docutils literal notranslate"><span class="pre">module_target</span></code>, <code class="docutils literal notranslate"><span class="pre">module_external_url</span></code>) (#799)</p></li>
<li><p>COMMONS : Ajout de contraintes dâ€™unicitÃ© pour les champs <code class="docutils literal notranslate"><span class="pre">module_path</span></code> et <code class="docutils literal notranslate"><span class="pre">module_code</span></code> de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code></p></li>
<li><p>pnx-geojson : AmÃ©lioration du zoom, gestion des styles</p></li>
<li><p>Migration des donnÃ©es GeoNature V1 vers V2 (<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>NB: La version 2.3.0 nâ€™est pas compatible avec le module Dashboard. Si vous avez le module Dashboard installÃ©, ne passez pas Ã  cette nouvelle version. CompatibilitÃ© dans la 2.3.1.</p>
<ul class="simple">
<li><p>Lancer le script de migration qui va installer et remplir le nouveau schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_habitats</span></code> avec Habref et mettre Ã  jour le schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/install/migration
chmod +x 2.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
<p>VÃ©rifier que la migration sâ€™est bien dÃ©roulÃ©e dans le fichier <code class="docutils literal notranslate"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul class="simple">
<li><p>Lancer le script SQL de mise Ã  jour de la BDD de GeoNature <a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></p></li>
<li><p>Vous pouvez installer le nouveau module Occhab (Occurrences dâ€™habitats) si vous le souhaitez :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_occhab /occhab
deactivate
</pre></div>
</div>
<ul class="simple">
<li><p>Lors de la migration (<code class="docutils literal notranslate"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les JDD actifs sont associÃ©s par dÃ©faut au module Occtax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>). A chacun dâ€™adapter si besoin, en en retirant certains. Pour utiliser le module Occhab, vous devez y associer au moins un JDD.</p></li>
</ul>
</section>
<section id="id23">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id23" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>La route de changement de mot de passe Ã©tait dÃ©sactivÃ©e par le mauvais paramÃ¨tre (<code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</p></li>
<li><p>DÃ©sactivation du mode Â«Â enchainement des relevÃ©sÂ Â» en mode Ã©dition (#669). Correction effacement du mÃªme relevÃ© (#744)</p></li>
<li><p>Correction dâ€™affichage du module mÃ©tadonnÃ©es lorsque les AF nâ€™ont pas de JDD pour des raisons de droit (#743)</p></li>
<li><p>Diverses corrections de doublons dâ€™import et de logs de dÃ©bugs (#742)</p></li>
<li><p>MontÃ©e de version du sous-module dâ€™authentification: 1.4.2</p></li>
</ul>
</section>
<section id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™interfaces et de paramÃ¨tres de crÃ©ation de compte, de rÃ©cupÃ©ration de son mot de passe et dâ€™administration de son profil, basÃ© sur lâ€™API UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia) #615</p></li>
<li><p>Ajout dâ€™une fonctionnalitÃ© de crÃ©ation automatique dâ€™un CA et dâ€™un JDD personnel lors de la validation dâ€™un compte crÃ©Ã© automatiquement (paramÃ©trable)</p></li>
<li><p>AmÃ©lioration du composant de crÃ©ation dynamique de formulaire (support de text-area, checkbox simple et multiple et exemple dâ€™utilisation Ã  partir de la conf GeoNature)</p></li>
<li><p>Le composant â€œobservateurâ€ permet de rechercher sur le nom ou le prÃ©nom (utilisation des RegEx) #567</p></li>
<li><p>Mise Ã  jour de Flask en version 1.1.1</p></li>
<li><p>Nouvelle version du sous-module dâ€™authentification (1.4.1), compatible avec UsersHub 2.1.0</p></li>
<li><p>Mise Ã  jour du sous-module de nomenclatures (version 1.3.0)</p></li>
<li><p>Mise Ã  jour et clarification du MCD (<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par &#64;jpm-cbna</p></li>
<li><p>Ajout dâ€™une tutoriel vidÃ©o dâ€™installation dans la documentation (<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug sur les export CSV en utilisant la librairie Python standard <code class="docutils literal notranslate"><span class="pre">csv</span></code> (#733)</p></li>
<li><p>SYNTHESE API : Passage de la route principale de rÃ©cupÃ©ration des donnÃ©es en POST plutÃ´t quâ€™en GET (#704)</p></li>
<li><p>SYNTHESE BDD : Suppression automatique des aires intersectÃ©es (<code class="docutils literal notranslate"><span class="pre">synthese.cor_area_synthese</span></code>) lorsquâ€™une observation est supprimÃ©e (DELETE CASCADE)</p></li>
<li><p>SYNTHESE : Prise en compte du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code> (#707)</p></li>
<li><p>OCCTAX : Correction dâ€™une autocomplÃ©tion automatique erronÃ©e de la date max en mode Ã©dition (#706)</p></li>
<li><p>VALIDATION : AmÃ©liorations des performances, par &#64;jbrieuclp (#710)</p></li>
<li><p>Prise en compte des sous-taxons pour le calcul des rÃ¨gles de sensibilitÃ©</p></li>
<li><p>Correction des contraintes CHECK sur les tables liÃ©es Ã  la sensibilitÃ©</p></li>
<li><p>ComplÃ©ment et correction des scripts de migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
<li><p>Correction et clarification de la documentation dâ€™administration des listes de taxons et de sauvegarde et restauration de la BDD (par &#64;lpofredc)</p></li>
<li><p>Correction de la rotation des logs</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer le script de migration suivant: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous souhaitez activer les fonctionnalitÃ©s de crÃ©ation de compte, veuillez lire <strong>attentivement</strong> cette documentation : <a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></p></li>
<li><p>Si vous activez la crÃ©ation de compte, UsersHub 2.1.0 doit Ãªtre installÃ©. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de version</a>.</p></li>
</ul>
</section>
<section id="id24">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id24" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>SYNTHESE : Correction dâ€™une URL en dur pour la recherche de rangs taxonomiques</p></li>
<li><p>OCCTAX : Affichage uniquement des JDD actifs</p></li>
<li><p>VALIDATION : Abaissement de la limite dâ€™affichage de donnÃ©es sur la carte par dÃ©faut + message indicatif</p></li>
<li><p>Migration : Suppression dâ€™un lien symbolique qui crÃ©ait des liens en cascade</p></li>
<li><p>AmÃ©lioration de la documentation (&#64;dthonon)</p></li>
<li><p>AmÃ©lioration de la rapiditÃ© dâ€™installation du MNT grÃ¢ce Ã  la suppression dâ€™un paramÃ¨tre inutile</p></li>
<li><p>BACKOFFICE : Correction dâ€™une URL incorrecte et customisation</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0, passez directement Ã  cette version en suivant les notes de version de la 2.1.1.</p>
</section>
<section id="id25">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id25" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SYNTHESE: Factorisation du formulaire de recherche (utilisÃ© dans le module synthese et validation)</p></li>
<li><p>SYNTHESE: Simplification et correction du module de recherche avancÃ©e dâ€™un taxon en le limitant Ã  lâ€™ordre (performances)</p></li>
<li><p>SYNTHESE: Ajout dâ€™un composant de recherche taxonomique avancÃ© basÃ© sur les rangs taxonomiques (modules synthese et validation), basÃ© sur la nouvelle fonction <code class="docutils literal notranslate"><span class="pre">taxonomie.find_all_taxons_children</span></code> ajoutÃ©e Ã  TaxHub</p></li>
<li><p>CrÃ©ation dâ€™un backoffice dâ€™admnistration dans le coeur de GeoNature. BasÃ© sur Flask-admin, les modules peuvent alimenter dynamiquement le backoffice avec leur configuration</p></li>
<li><p>Mise en place dâ€™une documentation dÃ©veloppeur automatique de lâ€™API Ã  partir des docstring et des composants frontend, gÃ©nÃ©rÃ©e par Travis et dÃ©sormais accessible Ã  lâ€™adresse <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</p></li>
<li><p>AmÃ©lioration de la documentation (triggers, installation, module validation)</p></li>
<li><p>Suppression du module dâ€™exemple, remplacÃ© par un template de module (<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</p></li>
<li><p>Ajout dâ€™un champ <code class="docutils literal notranslate"><span class="pre">validable</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code> controlant les donnÃ©es prÃ©sentes dans le module VALIDATION (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</p></li>
<li><p>VALIDATION: Lister toutes les donnÃ©es de la synthÃ¨se ayant un <code class="docutils literal notranslate"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui ont un enregistrement dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code></p></li>
<li><p>VALIDATION: On ne liste plus les <code class="docutils literal notranslate"><span class="pre">id_nomenclatures</span></code> des types de validation Ã  utiliser, dans la configuration du module. Mais on utilise toutes les nomenclatures activÃ©es du type de nomenclature <code class="docutils literal notranslate"><span class="pre">STATUT_VALID</span></code>. (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</p></li>
<li><p>Ajout de tests sur les ajouts de JDD et CA</p></li>
<li><p>Ajout dâ€™une fonctionnalitÃ© dâ€™envoie dâ€™email via Flask-Mail dans le coeur de GeoNature</p></li>
<li><p>AmÃ©lioration des performances: ajout dâ€™index sur Occtax et MetadonnÃ©es</p></li>
<li><p>Script dâ€™import des mÃ©tadonnÃ©es Ã  partir du webservice MTD de lâ€™INPN (&#64;DonovanMaillard)</p></li>
<li><p>ComplÃ©ment, correction et compatibilitÃ© 2.1.0 des scripts de migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Nombreuses corrections du module de validation (non utilisation des id_nomenclature, simplification des vues et de la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code>)</p></li>
<li><p>Ordonnancement de listes dÃ©roulantes (#685)</p></li>
<li><p>OCCTAX : correction de lâ€™Ã©dition dâ€™un relevÃ© Ã  la gÃ©omÃ©trie de type Polyline (#684)</p></li>
<li><p>OCCTAX : correction lâ€™Ã©dition et du contrÃ´le conditionnel des champs de Â«Â preuvesÂ Â» (preuve dâ€™existence numÃ©rique / non numÃ©rique) (#679)</p></li>
<li><p>OCCTAX : correction du parametre <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en compte (#670)</p></li>
<li><p>OCCTAX: correction de la date_max non remplie lorsque <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></p></li>
<li><p>OCCTAX: correction dâ€™un bug lors de lâ€™enchainement de relevÃ© lorsque lâ€™heure est remplie</p></li>
<li><p>SYNTHESE: correction des doublons lorsquâ€™il y a plusieurs observateurs</p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> sur les champs de recherche de type texte (recherche sur Preuve numÃ©rique) (#530)</p></li>
<li><p>DÃ©sactivation du mode Â«Â enchainer les relevÃ©sÂ Â» en mode Ã©dition (#699)</p></li>
<li><p>Correction de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> Ã  la place de <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de suivi Ã  des modules</p></li>
<li><p>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</p></li>
<li><p>Le trigger remplissant <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> en intersectant <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les zonages ayant le champs <code class="docutils literal notranslate"><span class="pre">enabled=true</span></code></p></li>
<li><p>Correction <code class="docutils literal notranslate"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</p></li>
<li><p>MAJ de sÃ©curitÃ© de Bootstrap (en version 4.3.1)</p></li>
<li><p>Lâ€™ancien module export du coeur est enlevÃ© en vue de la sortie du nouveau module export</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer TaxHub en version 1.6.3 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</p></li>
<li><p>Passer le script de migration <code class="docutils literal notranslate"><span class="pre">data/2.1.0to2.1.1.sql</span></code></p></li>
<li><p>Si vous aviez modifier les <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> dans la surcouche de la configuration du module validation, supprimer les car on se base maintenant sur les <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code></p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</section>
<section id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>IntÃ©gration du module Validation dans GeoNature (dÃ©veloppÃ© par &#64;JulienCorny, financÃ© par &#64;sig-pnrnm)</p></li>
<li><p>Ajout de tables, rÃ¨gles et fonctions permettant de calculer la sensibilitÃ© des occurrences de taxon de la synthÃ¨se (#284)</p></li>
<li><p>Occtax - PossibilitÃ© dâ€™enchainer les saisies de relevÃ©s et de garder les informations du relevÃ© (#633)</p></li>
<li><p>Occtax - AmÃ©lioration de lâ€™ergonomie de lâ€™interface MapList pour clarifier la recherche et lâ€™ajout dâ€™un relevÃ© + ajout compteur (#467)</p></li>
<li><p>RÃ©vision de lâ€™interface du module MÃ©tadonnÃ©es, listant les cadres dâ€™acquisition et leurs jeux de donnÃ©es (par &#64;jbrieuclp)</p></li>
<li><p>Ajout dâ€™un mÃ©canisme du calcul des taxons observÃ©s par zonage gÃ©ographique (#617)</p></li>
<li><p>Les mailles INPN (1, 5, 10km) sont intÃ©grÃ©es Ã  lâ€™installation (avec un paramÃ¨tre)</p></li>
<li><p>Statistiques de la page dâ€™accueil - Ajout dâ€™un paramÃ¨tre permettant de les dÃ©sactiver (#599)</p></li>
<li><p>Occtax - Date par dÃ©faut paramÃ©trable (#351)</p></li>
<li><p>Support des gÃ©ometries multiples (MultiPoint, MultiPolygone, MultiLigne) dans la synthÃ¨se et Occtax (#609)</p></li>
<li><p>Synthese - Affichage des zonages intersectÃ©s dans un onglet sÃ©parÃ© (#579)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>RÃ©vision complÃ¨te des scripts de migration de GeoNature v1 Ã  v2 (<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code>)</p></li>
<li><p>Masquer lâ€™export du module SynthÃ¨se si son CRUVED est dÃ©fini Ã  0 (#608)</p></li>
<li><p>Correction de la vÃ©rification du CRUVED du module METADONNEES (#601)</p></li>
<li><p>Correction de la vÃ©rification du CRUVED lorsque get_role = False</p></li>
<li><p>Correction de la traduction sur la page de connexion (par &#64;jbrieuclp)</p></li>
<li><p>Occtax - Retour du composant GPS permettant de charger un marker Ã  partir de coordonnÃ©es X et Y (#624)</p></li>
<li><p>Correction lors dâ€™import de fichier GPX ayant une altitude (#631)</p></li>
<li><p>Occtax - Correction du filtre Observateur texte libre (#598)</p></li>
<li><p>MÃ©tadonnÃ©es - Inversion des domaines terrestre/marin (par &#64;xavyeah39)</p></li>
<li><p>MÃ©tadonnÃ©es - Correction de lâ€™Ã©dition des cadres dâ€™acquisition (#654, par &#64;DonovanMaillard)</p></li>
<li><p>Mise Ã  jour de sÃ©curitÃ© de Jinja2 et SQLAlchemy</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Lancer le script de migration de la base de donnÃ©es :</p>
<p>Cette nouvelle version de GeoNature intÃ¨gre les mailles INPN (1, 5, 10km) dans le rÃ©ferentiel gÃ©ographique. Si vous ne souhaitez pas les installer, lancer le script ci dessous en passant le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">no-grid</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p>Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande dâ€™installation du module puis sortir du virtualenv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id26">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id26" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement : ajout dâ€™une fonction de gÃ©nÃ©ration dynamique de requÃªte SQL (avec vÃ©rification et cast des types)</p></li>
<li><p>Synthese : Ajout dâ€™un message indiquant que le module affiche les derniÃ¨res observations par dÃ©faut</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Synthese : correction du filtre CRUVED pour les portÃ©es 1 et 2 sur la route <code class="docutils literal notranslate"><span class="pre">synthese/for_web</span></code> (#584)</p></li>
<li><p>Synthese : correction du bug lorsque la gÃ©omÃ©trie est null (#580)</p></li>
<li><p>Synthese : Correction de la redirection vers le module de saisie (#586)</p></li>
<li><p>Synthese : Correction de la valeur par dÃ©faut de la nomenclature <code class="docutils literal notranslate"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal notranslate"><span class="pre">PrÃ©sent</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">NSP</span></code>)</p></li>
<li><p>Configuration carto : correction du bug dâ€™arrondissement des coordonnÃ©es gÃ©ographiques (#582)</p></li>
<li><p>Correction du trigger de calcul de la geom locale</p></li>
<li><p>RecrÃ©ation de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait Ã©tÃ© supprimÃ©e lors de la migration RC3 vers RC4</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_releve_list</span></code></p></li>
<li><p>Correction ajout rang et cd_nom sur lâ€™autocomplete de la synthese, absent dans le script de migration</p></li>
<li><p>DEPOBIO : Correction de la dÃ©connexion au CAS INPN</p></li>
<li><p>Occtax et Metadata: correction lors de la mise Ã  jour dâ€™un Ã©lement (Merge mal gÃ©rÃ© par SQLAlchemy lorsquâ€™on nâ€™a pas une valeur NULL) (#588)</p></li>
<li><p>Composant Â«Â jeu de donnÃ©esÂ Â» : retour Ã  lâ€™affichage du nom long (#583)</p></li>
<li><p>AmÃ©lioration du style du composant multiselect</p></li>
<li><p>Metadata : formulaire cadre dâ€™acquisition - listage uniquement des cadres dâ€™acquisition parent pour ne pas avoir de cadres dâ€™acquisition imbriquÃ©s</p></li>
<li><p>Ajouts de tests automatisÃ©s complÃ©mentaires</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script de migration SQL du sous-module Nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</p></li>
<li><p>ExÃ©cuter le script de migration SQL de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã  Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standardisÃ©e, plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<img alt="http://geonature.fr/img/gn-login.jpg" src="http://geonature.fr/img/gn-login.jpg" />
<p>Pour plus de dÃ©tails sur les Ã©volutions apportÃ©es dans la version 2, consultez les dÃ©tails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de charger un fichier (GPX, GeoJson ou KML) sur la carte pour la saisie dans le module Occtax (#256)</p></li>
<li><p>Ajout dâ€™un moteur de recherche de lieu (basÃ© sur lâ€™API OpenStreetMap Nominatim) sur les modules cartographiques (#476)</p></li>
<li><p>IntÃ©gration du plugin leaflet markerCluster permettant dâ€™afficher dâ€™avantage dâ€™observations sur les cartes et de gÃ©rer leurs superposition (#559)</p></li>
<li><p>SynthÃ¨se : possibilitÃ© de grouper plusieurs types de zonages dans le composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Design de la page de login</p></li>
<li><p>IntÃ©gration dâ€™un bloc stat sur la page dâ€™accueil</p></li>
<li><p>Ajout dâ€™un export des mÃ©tadonnÃ©es dans la synthÃ¨se</p></li>
<li><p>Centralisation de la configuration cartographique dans la configuration globale de GeoNature (<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>)</p></li>
<li><p>Cartographie : zoom sur lâ€™emprise des rÃ©sultats aprÃ¨s une recherche</p></li>
<li><p>Migration de la gestion des mÃ©tadonnÃ©es dans un module Ã  part : â€œMETADATAâ€ (#550)</p></li>
<li><p>Export vue synthÃ¨se customisable (voir doc)</p></li>
<li><p>Lien vers doc par module (customisables dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>) (#556)</p></li>
<li><p>Ajout du code du dÃ©partement dans les filtres par commune (#555)</p></li>
<li><p>Ajout du rang taxonomique et du cd_nom aprÃ¨s les noms de taxons dans la recherche taxonomique (#549)</p></li>
<li><p>Mise Ã  jour des communes fournies lors de lâ€™installation (IGN admin express 2019) (#537)</p></li>
<li><p>SynthÃ¨se : Ajout du filtre par organisme (#531), affichage des acteurs dans les fiches dÃ©tail et les exports</p></li>
<li><p>Synthese: possibilitÃ© de filtrer dans les listes dÃ©roulantes des jeux de donnÃ©es et cadres dâ€™acquisition</p></li>
<li><p>Filtre de la recherche taxonomique par rÃ¨gne et groupe INPN retirÃ© des formulaires de recherche (#531)</p></li>
<li><p>Suppression du champ validation dans le schÃ©ma de BDD Occtax car cette information est stockÃ©e dans la table verticale <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans les fiches Occtax et SynthÃ¨se</p></li>
<li><p>Ajout dâ€™une vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la rÃ©cupÃ©ration du dernier statut de validation dâ€™une observation</p></li>
<li><p>Suppression de toutes les rÃ©fÃ©rences Ã  <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code> en vue de le supprimer de TaxHub</p></li>
<li><p>SÃ©paration des commentaires sur lâ€™observation et sur le contexte (relevÃ©) dans la SynthÃ¨se et simplification des triggers de Occtax vers SynthÃ¨se (#478)</p></li>
<li><p>Nouveau logo GeoNature (#346)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>AmÃ©liorations importantes des performances de la synthÃ¨se (#560)</p></li>
<li><p>SynthÃ¨se : correction liÃ©e aux filtres multiples et aux filtres gÃ©ographiques de type cercle</p></li>
<li><p>Ajout dâ€™une contrainte <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre <code class="docutils literal notranslate"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#554)</p></li>
<li><p>Occtax : possibilitÃ© de saisir un dÃ©nombrement Ã©gal Ã  0 (cas des occurrences dâ€™absence)</p></li>
<li><p>Occtax : retour Ã  lâ€™emprise cartographique prÃ©cÃ©dente lorsquâ€™on enchaine les relevÃ©s (#570)</p></li>
<li><p>Occtax : correction de lâ€™automplissage du champ <code class="docutils literal notranslate"><span class="pre">hour_max</span></code> lors de lâ€™Ã©dition dâ€™un relevÃ©</p></li>
<li><p>Divers complÃ©ments de la documentation (merci &#64;jbdesbas, &#64;xavyeah39 et &#64;DonovanMaillard)</p></li>
<li><p>Ajout de contraintes dâ€™unicitÃ© sur les UUID_SINP pour empÃªcher les doublons (#536)</p></li>
<li><p>Corrections et complÃ©ments des tests automatiques</p></li>
<li><p>AmÃ©lioration de lâ€™installation des modules GeoNature</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne sâ€™agit pas de mettre Ã  jour GeoNature mais dâ€™en installer une nouvelle version. En effet, il sâ€™agit dâ€™une refonte complÃ¨te.</p>
<ul class="simple">
<li><p>Sauvegarder toutes ses donnÃ©es car lâ€™opÃ©ration est complexe et non-automatisÃ©e</p></li>
<li><p>Passer Ã  la derniÃ¨re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Passer aux derniÃ¨res versions de UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complÃ¨te</p></li>
<li><p>Adaptez les scripts prÃ©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et exÃ©cutez-les pas Ã  pas. Attention ces scripts ont Ã©tÃ© faits pour la version 2.0.0-rc.1 et sont donc Ã  ajuster, tester, complÃ©ter et adapter Ã  votre contexte</p></li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la migration.</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les notes des versions intermÃ©diaires.</p></li>
<li><p>Les personnes ayant configurÃ© leur fichier <code class="docutils literal notranslate"><span class="pre">map.config.ts</span></code> devront le rÃ©percuter dans <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, suite Ã  la centralisation de la configuration cartographique (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section <code class="docutils literal notranslate"><span class="pre">[MAPCONFIG]</span></code>).</p></li>
<li><p>La configuration des exports du module synthÃ¨se a Ã©tÃ© modifiÃ©e (voir <a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>). Supprimer la variable``[SYNTHESE.EXPORT_COLUMNS]`` dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Voir lâ€™exemple dans le fichier (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section) pour configurer les exports.</p></li>
<li><p>Supprimer la variable <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a Ã©tÃ© ajoutÃ©e dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>.</p></li>
<li><p>Pour simplifier son Ã©dition, le template personalisable de la page dâ€™accueil (<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>) a Ã©tÃ© modifiÃ© (la carte des 100 derniÃ¨re observations nâ€™y figure plus). Veuillez supprimer tout ce qui se situe Ã  partir de la ligne 21 (<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</p></li>
<li><p>ExÃ©cuter le script de migration SQL: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</p></li>
<li><p>Le backoffice de gestion des mÃ©tadonnÃ©es est dorÃ©navant un module GeoNature Ã  part. Le script migration prÃ©cÃ©demment lancÃ© prÃ©voit de mettre un CRUVED au groupe_admin et groupe_en_poste pour le nouveau module METADATA. Les groupes nouvellement crÃ©Ã©s par les administrateurs et nâ€™ayant de CRUVED pour lâ€™objet METADATA (du module Admin), se retrouvent avec le CRUVED hÃ©ritÃ© de GeoNature. Lâ€™administrateur devra changer lui-mÃªme le CRUVED de ces groupes pour le nouveau module METADATA via le backoffice des permissions.</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
</ul>
</section>
<section id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Mise en place de logs rotatifs pour Ã©viter de surcharger le serveur</p></li>
<li><p>Centralisation des logs applicatifs dans le dossier <code class="docutils literal notranslate"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se - Correction et amÃ©lioration de la gestion des dates (#540)</p></li>
<li><p>AmÃ©lioration des tests automatisÃ©s</p></li>
<li><p>Correction et complÃ©ment ds scripts dâ€™installation des modules GeoNature</p></li>
<li><p>Remplacement de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> par <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code></p></li>
<li><p>ComplÃ©ment des documentations de customisation, dâ€™administration et de dÃ©veloppement</p></li>
<li><p>Ajout dâ€™une documentation de migration de donnÃ©es Serena vers GeoNature (<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>) par &#64;xavyeah39</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cutez la mise Ã  jour de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p></li>
<li><p>Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de GeoNature dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus associer les sites de suivi de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> Ã  des applications, utilisÃ© par les modules de suivi (Flore, habitat, chiro). Le mÃ©canisme est remplacÃ© par une association des sites de suivi aux modules. La crÃ©ation de la nouvelle table est automatisÃ©e (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la migration des Ã©ventuelles donnÃ©es existantes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> vers <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code>, Ã  faire manuellement.</p></li>
<li><p>Afin que les logs de lâ€™application soient tous Ã©crits au mÃªme endroit, modifier le fichier <code class="docutils literal notranslate"><span class="pre">geonature-service.conf</span></code> (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la ligne <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code> (en remplaÃ§ant &lt;MON_USER&gt; par votre utilisateur linux).</p></li>
<li><p>Vous pouvez Ã©galement mettre en place un systÃ¨me de logs rotatifs (systÃ¨me permettant dâ€™archiver les fichiers de logs afin quâ€™ils ne surchargent pas le serveur - conseillÃ© si votre serveur a une capacitÃ© disque limitÃ©e). CrÃ©er le fichier suivant <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes suivantes dans le fichier nouvellement crÃ©Ã© (en remplaÃ§ant &lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">MON_USER</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/*.</span><span class="n">log</span> <span class="p">{</span>
<span class="n">daily</span>
<span class="n">rotate</span> <span class="mi">8</span>
<span class="n">size</span> <span class="mi">100</span><span class="n">M</span>
<span class="n">create</span>
<span class="n">compress</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ExÃ©cutez ensuite la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour des paquets du frontend (#538)</p></li>
<li><p>Correction dâ€™un conflit entre Marker et Leaflet-draw</p></li>
<li><p>Utilisation du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> au niveau de lâ€™application</p></li>
<li><p>Corrections mineures diverses</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Sortie de versions correctives de UsersHub (2.0.2 - <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) et TaxHub (1.6.1 - <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) Ã  appliquer aussi</p></li>
<li><p>Vous pouvez vous rÃ©fÃ©rer Ã  la documentation globale de mise Ã  jour de GeoNature RC3 vers RC4 par &#64;DonovanMaillard (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</p></li>
</ul>
</section>
<section id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>IntÃ©gration de la gestion des permissions (CRUVED) dans la BDD de GeoNature, gÃ©rÃ© via une interface dâ€™administration dÃ©diÃ© (#517)</p></li>
<li><p>Mise en place dâ€™un systÃ¨me de permissions plus fin par module et par objet (#517)</p></li>
<li><p>Mise en place dâ€™un mÃ©canimse gÃ©nÃ©rique pour la gestion des permissions via des filtres : filtre de type portÃ©e (SCOPE), taxonomique, gÃ©ographique etcâ€¦ (#517)</p></li>
<li><p>CompatibilitÃ© avec UsersHub version 2</p></li>
<li><p>Lâ€™administration des permissions ne propose que les rÃ´les qui sont actif et qui ont un profil dans GeoNature</p></li>
<li><p>Ajout du composant Leaflet.FileLayer dans le module SynthÃ¨se pour pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme gÃ©omÃ©trie de recherche (#256)</p></li>
<li><p>Ajout et utilisation de lâ€™extension PostgreSQL <code class="docutils literal notranslate"><span class="pre">pg_tgrm</span></code> permettant dâ€™amÃ©liorer lâ€™API dâ€™autocomplÃ©tion de taxon dans la synthÃ¨se, en utilisant lâ€™algorithme des trigrammes (<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>), fonctionnel aussi dans les autres modules si vous mettez Ã  jour TaxHub en version 1.6.0.</p></li>
<li><p>Nouvel exemple dâ€™import de donnÃ©es historiques vers GeoNature V2 : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a> (par &#64;DonovanMaillard)</p></li>
<li><p>ComplÃ©ment de la documentation HTTPS et ajout dâ€™une documentation Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™id_digitiser lors de la mise Ã  jour (#481)</p></li>
<li><p>Corrections multiples de la prise en compte du CRUVED (#496)</p></li>
<li><p>Deconnexion apres inactivitÃ© de lâ€™utilisateur (#490)</p></li>
<li><p>Suppression des heures au niveau des dates de lâ€™export occtax (#485)</p></li>
<li><p>Correction du message dâ€™erreur quand on nâ€™a pas de JDD (#479)</p></li>
<li><p>Correction du champs commentaire dans les exports dâ€™Occtax sÃ©parÃ© entre relevÃ© et occurrence (#478)</p></li>
<li><p>Correction des paramÃ¨tres de la fonction <code class="docutils literal notranslate"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</p></li>
<li><p>Correction de lâ€™administration des mÃ©tadonnÃ©es (#466 #420)</p></li>
<li><p>MÃ©tadonnÃ©es (JDD et CA) : ne pas afficher les utilisateurs qui sont des groupes dans les acteurs</p></li>
<li><p>Ajout dâ€™un champs dans la SynthÃ¨se permettant de stocker de quel module provient une occurrence et fonctions SQL associÃ©es (#412)</p></li>
<li><p>AmÃ©lioration du style des champs obligatoires</p></li>
<li><p>AmÃ©liorations mineures de lâ€™ergonomie dâ€™Occtax</p></li>
<li><p>Correction du spinner qui tournait en boucle lors de lâ€™export CSV de la SynthÃ¨se (#451)</p></li>
<li><p>Correction des tests automatisÃ©s</p></li>
<li><p>AmÃ©lioration des performances des intersections avec les zonages de <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code></p></li>
<li><p>ComplÃ©ment de la documentation de dÃ©veloppement</p></li>
<li><p>Simplification de la configuration des gn_modules</p></li>
<li><p>Occtax : ordonnancement des observation par date (#467)</p></li>
<li><p>Occtax : Remplissage automatique de lâ€™heure_max Ã  partir de lâ€™heure_min (#522)</p></li>
<li><p>Suppression des warnings lors du build du frontend</p></li>
<li><p>Correction de lâ€™installation des modules GeoNature</p></li>
<li><p>Ajout dâ€™un message quand on nâ€™a pas accÃ¨s Ã  une donnÃ©e dâ€™un module</p></li>
<li><p>Affichage du nom du module dans le Header (#398)</p></li>
<li><p>Correction des outils cartographiques dans Occtax</p></li>
<li><p>Correction complÃ©mentaire des styles des lignes sans remplissage (#458)</p></li>
<li><p>MaplistService : correction du zoom sur les polygones et polylignes</p></li>
<li><p>Composant Areas et Municipalities : remise Ã  zÃ©ro de la liste dÃ©roulante quand on efface la recherche ou remet Ã  jour les filtres</p></li>
<li><p>Composant Taxonomy : la recherche autocompletÃ©e est lancÃ©e mÃªme si on tape plus de 20 caractÃ¨res. Le nombre de rÃ©sultat renvoyÃ© est dÃ©sormais paramÃ©trable (#518)</p></li>
<li><p>Limitation du nombre de connexions Ã  la BDD en partageant lâ€™instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> avec les sous-modules</p></li>
<li><p>Installation : utilisation dâ€™un rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">tmp</span></code> local et non plus au niveau systÃ¨me pour limiter les problÃ¨mes de droits (#503)</p></li>
<li><p>Evolution du template dâ€™exemple de module GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>) pour utiliser lâ€™instance DB et utiliser les nouveaux dÃ©corateurs de permissions (CRUVED)</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle version, il est nÃ©cessaire dâ€™avoir installÃ© UsersHub version 2.x au prÃ©alable. Suivez donc sa documentation (<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) avant de procÃ©der Ã  la montÃ©e de version de GeoNature.</p></li>
<li><p>ExÃ©cuter la commande suivante pour ajouter lâ€™extension <code class="docutils literal notranslate"><span class="pre">pg_trgm</span></code>, en remplaÃ§ant la variable <code class="docutils literal notranslate"><span class="pre">$db_name</span></code> par le nom de votre BDD : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></p></li>
<li><p>Mettez Ã  jour TaxHub en version 1.6.0 pour bÃ©nÃ©ficier de lâ€™amÃ©lioration de la recherche taxonomique dans tous les modules</p></li>
<li><p>ExÃ©cutez la mise Ã  jour de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Note dÃ©veloppeurs</strong></p>
<ul class="simple">
<li><p>Vous pouvez faire Ã©voluer les modules GeoNature en utilisant lâ€™instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts dâ€™installation (#498)</p></li>
<li><p>Il nâ€™est plus nÃ©cÃ©ssaire de dÃ©finir un <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans la configuration des modules GeoNature.</p></li>
<li><p>La gestion des permissions a Ã©tÃ© revue et est dÃ©sormais internalisÃ©e dans GeoNature (voir <a class="reference external" href="http://docs.geonature.fr/development.html#developpement-backend">http://docs.geonature.fr/development.html#developpement-backend</a>), il est donc necessaire dâ€™utiliser les nouveaux dÃ©corateurs dÃ©crit dans la doc pour rÃ©cupÃ©rer le CRUVED.</p></li>
</ul>
</section>
<section id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">Ã¬nstall_all.sh</span></code> au niveau de la gÃ©nÃ©ration de la configuration Apache de TaxHub et UsersHub (#493)</p></li>
<li><p>Suppression du Servername dans la configuration Apache de TaxHub du script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>ComplÃ©ment de la documentation de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous migrez depuis une version 2.0.0-rc.2, installez directement cette version corrective plutÃ´t que la 2.0.0-rc.3, mais en suivant les notes de versions de la 2.0.0-rc.3</p></li>
<li><p>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal notranslate"><span class="pre">/</span></code>, consultez sa documentation <a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur Debian 8, problÃ¨me de version de PostGIS qui ne sâ€™installe pas correctement</p></li>
</ul>
</section>
<section id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<ul class="simple">
<li><p>PossibilitÃ© dâ€™utiliser le MNT en raster ou en vecteur dans la BDD (+ doc MNT) #439 (merci &#64;mathieubossaert)</p></li>
<li><p>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</p></li>
<li><p>INSTALL_ALL - AmÃ©lioration de la conf Apache de TaxHub pour gÃ©rer son URL sans <code class="docutils literal notranslate"><span class="pre">/</span></code> Ã  la fin</p></li>
<li><p>Dessin cartographique dâ€™une autre couleur (rouge) que les observations (bleu)</p></li>
<li><p>Occtax : retour au zoom prÃ©cÃ©dent lors de lâ€™enchainement de relevÃ© (#436)</p></li>
<li><p>Occtax : observateur rempli par dÃ©faut avec lâ€™utilisateur connectÃ© (#438)</p></li>
<li><p>Prise en compte des gÃ©omÃ©tries nulles dans la fonction <code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Gestion plus complÃ¨te des donnÃ©es exemple intÃ©grÃ©es ou non lors de lâ€™installation (#446)</p></li>
<li><p>ComplÃ©ment des diffÃ©rentes documentations</p></li>
<li><p>ComplÃ©ment FAQ (#441)</p></li>
<li><p>Documentation de la customisation (merci &#64;DonovanMaillard)</p></li>
<li><p>AmÃ©lioration de lâ€™architecture du gn_module dâ€™exemple</p></li>
<li><p>Clarification de la configuration des gn_modules</p></li>
<li><p>Lire le fichier <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> pour lâ€™afficher dans lâ€™interface (#421)</p></li>
<li><p>Utilisation de la vue <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et non plus <code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> par dÃ©faut pour les exports Occtax (#462)</p></li>
<li><p>ComplÃ©ment et correction des vues <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et <code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> (#462)</p></li>
<li><p>Mise Ã  jour de Marshmallow (2.5.0 =&gt; 2.5.1)</p></li>
<li><p>AmÃ©liorations des routes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de la configuration des modules de suivi pour pouvoir utiliser le nom dâ€™une application plutÃ´t que son identifiant</p></li>
<li><p>Export SynthÃ¨se - Remplacement de la barre de tÃ©lÃ©chargement par un spinner (#451)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Doc Import niveau 2 : Corrections et complÃ©ments</p></li>
<li><p>Correction du trigger Occtax &gt; SynthÃ¨se qui met Ã  jour le champs <code class="docutils literal notranslate"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</p></li>
<li><p>Correction et amÃ©lioration de la fonction <code class="docutils literal notranslate"><span class="pre">install_gn_module</span></code></p></li>
<li><p>Correction coquille dans le modÃ¨le <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et la fonction <code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Installation uniquement sur un environnement 64 bits (documentation + vÃ©rification) #442 (merci &#64;jbrieuclp et &#64;sig-pnrnm)</p></li>
<li><p>Correction et dÃ©coupage des scripts de mise Ã  jour de la BDD depuis la version Beta5</p></li>
<li><p>Correction de lâ€™Ã©dition des date_debut et date_fin de Occtax (#457)</p></li>
<li><p>Correction des exports depuis la SynthÃ¨se et intÃ©gration de la gÃ©omÃ©trie des observations (#461 et #456)</p></li>
<li><p>Ne pas remplir <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si <code class="docutils literal notranslate"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</p></li>
<li><p>Edition dâ€™un relevÃ© Occtax - Ne pas recalculer lâ€™altitude existante (#424)</p></li>
<li><p>Correction de lâ€™activation du formulaire Occtax aprÃ¨s localisation du relevÃ© (#469 et #471)</p></li>
<li><p>Carte - Enlever le remplissage des lignes (#458)</p></li>
<li><p>AmÃ©lioration du script de mise Ã  jour de GeoNature (<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#465)</p></li>
<li><p>Suppression dâ€™un doublon dans le modÃ¨le de <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> (merci &#64;lpofredc)</p></li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de TaxHub (Doc utilisateur, configuration Apache, script dâ€™import des mÃ©dias depuis API INPN Taxref et remise Ã  zÃ©ro des sÃ©quences)</p></li>
<li><p>Script de migration des donnÃ©es SICEN (ObsOcc) vers GeoNature : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></p></li>
<li><p>Script dâ€™import continu depuis une BDD externe vivante (avec exemple SICEN) : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></p></li>
<li><p>Module Suivi Flore Territoire fonctionnel et installable (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Chiro fonctionnel et installable (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que son Frontend gÃ©nÃ©rique pour les protocoles de suivi (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</p></li>
<li><p>Ebauche dâ€™un module pour les protocoles CMR (Capture-Marquage-Recapture) : <a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></p></li>
<li><p>MCD du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>MCD du module Flore Prioritaire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</p></li>
<li><p>Consolidation du backend et premiers dÃ©veloppements du frontend de GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</p></li>
<li><p>CrÃ©ation dâ€™un script expÃ©rimental dâ€™installation de GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procÃ©dure standard de mise Ã  jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>ExÃ©cutez lâ€™update de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</p></li>
<li><p>Il est aussi conseillÃ© de mettre Ã  jour TaxHub en 1.5.1 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa configuration pour quâ€™il fonctionne sans <code class="docutils literal notranslate"><span class="pre">/</span></code> Ã  la fin de son URL</p></li>
<li><p>Attention, si vous installez cette version avec le script global <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code>, il crÃ©Ã© un problÃ¨me dans la configuration Apache de UserHub (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et supprime tous les <code class="docutils literal notranslate"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation de UsersHub (<a class="reference external" href="https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>) puis relancer Apache (<code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>). Il est conseillÃ© dâ€™installer plutÃ´t la version corrective.</p></li>
</ul>
</section>
<section id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</p></li>
<li><p>AmÃ©lioration du composant Download</p></li>
<li><p>AmÃ©lioration du ShapeService</p></li>
<li><p>ComplÃ©ments de la documentation</p></li>
<li><p>IntÃ©gration de la documentation DÃ©veloppement backend dans la documentation</p></li>
<li><p>Nettoyage du code</p></li>
<li><p>Mise Ã  jour de la doc de lâ€™API : <a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></p></li>
<li><p>Configuration de la carte (<code class="docutils literal notranslate"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM par dÃ©faut car OpenTopoMap ne sâ€™affiche pas Ã  petite Ã©chelle</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code></p></li>
<li><p>Ne pas afficher le debug dans le recherche de la synthÃ¨se</p></li>
<li><p>Correction du bug de dÃ©connexion entre TaxHub et GeoNature (#423)</p></li>
<li><p>Correction de la fiche info dâ€™Occtax</p></li>
<li><p>Champs Multiselect : Ne pas afficher les valeurs selectionnÃ©es dans la liste quand on modifie un objet</p></li>
<li><p>Trigger Occtax vers SynthÃ¨se : Correction des problÃ¨mes dâ€™heure de relevÃ©s mal copiÃ©s dans la SynthÃ¨se</p></li>
<li><p>Correction des altitudes (non abouti) (#424)</p></li>
<li><p>DonnÃ©es exemple : Suppression de lâ€<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code> dans la synthÃ¨se</p></li>
<li><p>Suppression dâ€™un <code class="docutils literal notranslate"><span class="pre">id_municipality</span></code> en dur dans une route</p></li>
<li><p>Suppression de la librairie Certifi non utilisÃ©e</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procÃ©dure standard de mise Ã  jour de GeoNature</p></li>
<li><p>ExÃ©cuter lâ€™update de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</p></li>
</ul>
</section>
<section id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã  Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standarde, plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<p>PrÃ©sentation et suivi des dÃ©veloppements : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li><p>Message dâ€™introduction customisable</p></li>
<li><p>Carte des 100 derniÃ¨res observations</p></li>
<li><p>CSS gÃ©nÃ©ral de lâ€™application surcouchable</p></li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des donnÃ©es Faune, Flore et Fonge de type Contact selon le standard Occurrences de taxon du SINP (<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li><p>DÃ©veloppement des formulaires de saisie, page de recherche, fiche dÃ©tail, API, CRUVED et export</p></li>
<li><p>PossibilitÃ© de masquer ou afficher les diffÃ©rents champs dans le formulaire Occtax (#344)</p></li>
<li><p>DÃ©veloppement du formulaire de maniÃ¨re gÃ©nÃ©rique pour pouvoir rÃ©utiliser ses diffÃ©rents Ã©lÃ©ments dans dâ€™autres modules sous forme de composants Angular</p></li>
<li><p>Configuration possible du module (Niveau de zoom, champs affichÃ©es, exportâ€¦)</p></li>
<li><p>Ajout des nomenclatures dans les filtres dâ€™Occtax Ã  partir du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de crÃ©er dynamiquement un formulaire en dÃ©clarant ses champs et leur type (#318)</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon en ne recherchant que sur les dÃ©buts de mot et en affichant en premier les noms de rÃ©fÃ©rence (<code class="docutils literal notranslate"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</p></li>
<li><p>Multilingue fourni avec franÃ§ais et anglais (extensible Ã  dâ€™autres langues)</p></li>
<li><p>Mise en place dâ€™un export CSV, SHP, GeoJSON paramÃ©trable dans Occtax. #363 et #366</p></li>
<li><p>Ajout dâ€™un message dâ€™erreur si lâ€™utilisateur nâ€™a pas de jeu de donnÃ©es ou si il y a eu un problÃ¨me lors de la rÃ©cupÃ©ration des JDD depuis MTD</p></li>
<li><p>Prise en compte du CRUVED au niveau des routes et du front pour adapter les contenus et fonctionnalitÃ©s aux droits de lâ€™utilisateur</p></li>
<li><p>Mise en place des triggers alimentant la synthÃ¨se Ã  partir des donnÃ©es saisies et modifiÃ©es dans Occtax</p></li>
</ul>
<p><strong>SynthÃ¨se</strong></p>
<p>Module permettant de rechercher parmi les donnÃ©es des diffÃ©rentes sources prÃ©sentes ou intÃ©grÃ©es dans la base de donnÃ©es de GeoNature</p>
<ul class="simple">
<li><p>Mise en place du backend, de lâ€™API et du frontend #345</p></li>
<li><p>Interface de consultation, de recherche et dâ€™export dans la SynthÃ¨se</p></li>
<li><p>SynthÃ¨se : Calcul automatique (trigger) des zonages de chaque observation (communes, zonages rÃ©glementaires et naturels)</p></li>
<li><p>Recherche sur les zonages gÃ©nÃ©rique et paramÃ©trable</p></li>
<li><p>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge, milieu, attribut taxonomique, nomenclature, date, pÃ©riode, commune, zonage, cadre dâ€™acquisition, jeu de donnÃ©es, observateur, polygone, rectange ou cercle dessinÃ©</p></li>
<li><p>Retour Ã  la fiche source possible si lâ€™observation a Ã©tÃ© saisie dans un module de GeoNature</p></li>
<li><p>Affichage de la fiche dÃ©tail de chaque observation</p></li>
<li><p>Attributs TaxHub dynamiques et paramÃ©trables</p></li>
<li><p>Configuration possible du module (colonnes, limites de recherche et dâ€™export, zoom, exportâ€¦)</p></li>
<li><p>Export basÃ© sur une vue (observations et statuts)</p></li>
<li><p>Prise en compte du CRUVED pour dÃ©finir les donnÃ©es Ã  afficher et Ã  exporter #412</p></li>
<li><p>Recherche de taxons : Liste basÃ©e sur une table alimentÃ©e automatiquement par les taxons prÃ©sents au moins une fois dans la SynthÃ¨se</p></li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports basÃ©s sur des vues</p>
<ul class="simple">
<li><p>Mise en place temporaire dâ€™un export unique, basÃ© sur une vue sâ€™appuyant sur les donnÃ©es de Occtax, par jeu de donnÃ©es</p></li>
<li><p>A remplacer par le module gÃ©nÃ©rique <a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de dÃ©veloppement) permettant de gÃ©nÃ©rer des exports Ã  volontÃ© en crÃ©ant des vues et en les affectant Ã  des utilisateurs ou des groupes. Chaque export sera accompagnÃ© de son API standardisÃ©e et documentÃ©e</p></li>
</ul>
<p><strong>Admin</strong></p>
<p>Module dâ€™administration des tables centrales de GeoNature</p>
<ul class="simple">
<li><p>Mise en place dâ€™un module (incomplet) permettant de gÃ©rer les mÃ©tadonnÃ©es et les nomenclatures</p></li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li><p>Mise en place dâ€™un systÃ¨me baptisÃ© CRUVED permettant de dÃ©finir globalement ou par module 6 actions sont possibles (Create / Read / Update / Validate / Export / Delete) sur 3 portÃ©es possibles (Mes donnÃ©es / Les donnÃ©es de mon organisme / Toutes les donnÃ©es)</p></li>
<li><p>Ces Ã©volutions ont Ã©tÃ© intÃ©grÃ©es au niveau du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de la base de donnÃ©es de UsersHub, de son module (<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des routes de lâ€™API GeoNature et des interfaces</p></li>
</ul>
<p><strong>Bases de donnÃ©es</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement dâ€™un module et dâ€™une API gÃ©nÃ©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet dâ€™avoir un mÃ©canisme gÃ©nÃ©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas crÃ©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature sâ€™adaptent en fonction des regnes et groupe 2 INPN des taxons.</p></li>
<li><p>Mise en place de tables de stockage verticales (historique, mÃ©dias et validation) #339</p></li>
<li><p>Mise en place dâ€™un rÃ©fÃ©rentiel gÃ©ographique avec un schÃ©ma dÃ©diÃ© (<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec dâ€™autres applications comprenant une table des communes, une table gÃ©nÃ©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer dâ€™une gestion des droits avec 6 niveaux Ã  un mÃ©canisme plus gÃ©nÃ©rique, souple et complet. Il permet dâ€™attribuer des actions possibles Ã  un rÃ´le (utilisateur ou groupe), sur une portÃ©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 portÃ©es de ces actions sont possibles : Mes donnÃ©es / Les donnÃ©es de mon organisme / Toutes les donnÃ©es.</p></li>
<li><p>Droits CRUVED : La dÃ©finition du CRUVED dâ€™un rÃ´le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature mÃªme si ils sont infÃ©rieurs. Si une action du CRUVED nâ€™est pas dÃ©finie au niveau du module, on prend celle de lâ€™application parente. #292</p></li>
<li><p>Si un rÃ´le a un R du CRUVED Ã  0 pour un module, alors celui-ci ne lui est pas listÃ© dans le Menu et il ne lui est pas accessible si il en connait lâ€™URL. #360</p></li>
<li><p>DÃ©veloppement des mÃ©tadonnÃ©es dans la BDD (schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la base du standard MÃ©tadonnÃ©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de gÃ©rer des jeux de donnÃ©es, des cadres dâ€™acquisition, des acteurs (propriÃ©taire, financeur, producteurâ€¦) et des protocoles. Chaque relevÃ© est associÃ© Ã  un jeu de donnÃ©es.</p></li>
<li><p>DÃ©veloppement dâ€™un mÃ©canisme de calcul automatique de la sensibilitÃ© dâ€™une espÃ¨ce directement dans la BDD (sur la base des rÃ¨gles nationales et rÃ©gionales du SINP + locales Ã©ventuellement)</p></li>
<li><p>IntÃ©gration du calcul automatique de lâ€™identifiant permanent SINP (#209)</p></li>
<li><p>CrÃ©ation du schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gÃ©rer la partie gÃ©nÃ©rique des modules de suivi (sites et visites centralisÃ©s) et les routes associÃ©es</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de maniÃ¨re gÃ©nÃ©rique des informations qui peuvent Ãªtre communes aux autres modules : lâ€™historique des actions sur chaque objet de la BDD, la validation dâ€™une donnÃ©e et les mÃ©dias associÃ©s Ã  une donnÃ©e. AccompagnÃ© de fonctions gÃ©nÃ©riques dâ€™historisation et de validation des donnÃ©es mises en place sur le module Occtax. #339</p></li>
<li><p>Ajout dâ€™une vue matÃ©rialisÃ©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et dâ€™une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes dâ€™un taxon (Ã©tendue des observations, date min et max, altitude min et max, nombre dâ€™observations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>). DÃ©sactivÃ©e pour le moment.</p></li>
<li><p>Ajout dâ€™un trigger gÃ©nÃ©rique pour calculer la gÃ©omÃ©trie dans la projection locale Ã  partir de la gÃ©omÃ©trie 4326 (#370)</p></li>
<li><p>Ajout dâ€™un trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Gestion des conflits de nomenclatures en nâ€™utilisant plus leur <code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> lors de la crÃ©ation de leur contenu (code_nomenclature) (#384)</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_imports</span></code> intÃ©grant des fonctions SQL permettant dâ€™importer un CSV dans la BDD et de mapper des champs de tables importÃ©es avec ceux dâ€™une table de GeoNature pour gÃ©nÃ©rer le script <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></p></li>
<li><p>DÃ©but de script de migration GeoNature V1 vers GeoNature V2</p></li>
<li><p>Nombreuses fonctions intÃ©grÃ©es dans les schÃ©mas de la BDD</p></li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li><p>Scripts dâ€™installation autonome ou globale de GeoNature sur Debian (8 et 9) et Ubuntu (16 et 18)</p></li>
<li><p>Scripts de dÃ©ploiement spÃ©cifiques de DEPOBIO (MTES-MNHN)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>RÃ©daction dâ€™une documentation concernant lâ€™installation (autonome ou globale), lâ€™utilisation, lâ€™administration et le dÃ©veloppement : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
<p><strong>DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>DÃ©coupage de lâ€™application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de lâ€™interface et des listes de valeurs avec franÃ§ais et anglais intÃ©grÃ©s mais extensible Ã  dâ€™autres langues (#173)</p></li>
<li><p>DÃ©veloppement de composants Angular gÃ©nÃ©riques pour pouvoir les utiliser dans plusieurs modules sans avoir Ã  les redÃ©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities, Observers, DynamicForm, MapListâ€¦)</p></li>
<li><p>ImplÃ©mentation de la gestion des droits au niveau de lâ€™API (pour limiter les donnÃ©es affichÃ©es Ã  un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par dÃ©faut, lâ€™authentification et les utilisateurs sont gÃ©rÃ©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature directement au CAS de lâ€™INPN, sans UsersHub (cas de lâ€™instance nationale INPN de GeoNature).</p></li>
<li><p>Connexion possible au webservice METADONNEES de lâ€™INPN pour y rÃ©cupÃ©rer les jeux de donnÃ©es en fonction de lâ€™utilisateur connectÃ©, avec mise Ã  jour des JDD Ã  chaque appel de la route</p></li>
<li><p>Mise en place dâ€™un mÃ©canisme standardisÃ© de dÃ©veloppement de modules dans GeoNature (#306)</p></li>
<li><p>Ajout de tests unitaires au niveau du backend et du frontend</p></li>
<li><p>Ajout dâ€™un mÃ©canisme de log par email (paramÃ¨tres MAILERROR)</p></li>
<li><p>DÃ©but de crÃ©ation du module de gestion des mÃ©dias (backend uniquement)</p></li>
<li><p>Mise en place dâ€™une configuration globale et dâ€™une configuration par module</p></li>
<li><p>Fonction dâ€™installation dâ€™un module et de gÃ©nÃ©ration des fichiers de configuration</p></li>
<li><p>Gestion de lâ€™installation dâ€™un module qui nâ€™a pas de Frontend dans GeoNature</p></li>
<li><p>Mise en place dâ€™une route gÃ©nÃ©rique permettant de requÃªter dans une vue non mappÃ©e</p></li>
<li><p>Mise en place dâ€™un script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li><p>Module Export en cours de dÃ©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export sâ€™appuie sur une vue. Il sera possible aux administrateurs dâ€™une GeoNature dâ€™ajouter autant de vues que nÃ©cessaires dans son GeoNature.</p></li>
<li><p>Module de validation des donnÃ©es en cours de dÃ©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</p></li>
<li><p>Module Suivi Flore territoire en cours de dÃ©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Habitat en cours de dÃ©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</p></li>
<li><p>gn_module_suivi_chiro refondu pour devenir un module de GeoNature V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</p></li>
<li><p>Projet suivi utilisÃ© comme Frontend gÃ©nÃ©rique et autonome pour le Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</p></li>
<li><p>GeoNature-citizen en cours de dÃ©veloppement (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</p></li>
<li><p>GeoNature-mobile en cours de refonte pour compatibilitÃ© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</p></li>
<li><p>GeoNature-atlas en cours dâ€™ajustements pour compatibilitÃ© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/issues/162">https://github.com/PnX-SI/GeoNature-atlas/issues/162</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne sâ€™agit pas de mettre Ã  jour GeoNature mais dâ€™en installer une nouvelle version. En effet, il sâ€™agit dâ€™une refonte complÃ¨te.</p>
<ul class="simple">
<li><p>Passer Ã  la derniÃ¨re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Idem pour UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complÃ¨te</p></li>
<li><p>Adaptez les scripts prÃ©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et Ã©xÃ©cutez-les</p></li>
</ul>
<p><em>TODO : MAJ depuis V1 Ã   tester et complÃ©ter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p>Supprimer le schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code> puis le recrÃ©er dans sa version RC1 (#430)</p></li>
<li><p>ExÃ©cuter lâ€™update de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du sous-module Nomenclature (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p></li>
<li><p>Suivre la procÃ©dure habituelle de mise Ã  jour</p></li>
<li><p>ExÃ©cuter les commandes suivantes :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">geonature</span><span class="o">/</span><span class="n">backend</span>
<span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">geonature</span> <span class="n">generate_frontend_modules_route</span>
<span class="n">geonature</span> <span class="n">frontend_build</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un message dâ€™erreur si lâ€™utilisateur nâ€™a pas de JDD ou si il y a eu un problÃ¨me lors de la rÃ©cupÃ©ration des JDD de MTD</p></li>
<li><p>Ajout dâ€™une vue matÃ©rialisÃ©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et dâ€™une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes dâ€™un taxon (Ã©tendue des observations, date min et max, altitude min et max, nombre dâ€™observations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</p></li>
<li><p>Lâ€™export OccTax est dÃ©sormais basÃ© sur une vue quâ€™il est possible dâ€™adapter</p></li>
<li><p>Ajouts de nouveaux tests automatisÃ©s du code et mise en place de Travis pour les lancer automatiquement Ã  chaque commit (<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</p></li>
<li><p>Ajout de donnÃ©es test</p></li>
<li><p>Mise Ã  jour des scripts de dÃ©ploiement spÃ©cifiques de DEPOBIO (MTES)</p></li>
<li><p>DÃ©placement de la table centrale de gestion des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">t_parameters</span></code> dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> (#376)</p></li>
<li><p>Ajout dâ€™un trigger gÃ©nÃ©rique pour calculer la gÃ©omÃ©trie dans la projection locale Ã  partir de la gÃ©omÃ©trie 4326 (#370)</p></li>
<li><p>Regroupement des fichiers liÃ©s Ã  lâ€™installation et la mise Ã  jour dans un rÃ©pertoire dÃ©diÃ© (<code class="docutils literal notranslate"><span class="pre">install</span></code>) (#383)</p></li>
<li><p>Mise en place de scripts de migration global de la BDD (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du schÃ©ma <code class="docutils literal notranslate"><span class="pre">pr_occtax</span></code> (<code class="docutils literal notranslate"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>), dâ€™un script gÃ©nÃ©rique de migration de lâ€™application (<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) et dâ€™une doc de mise Ã  jour (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication</a>)</p></li>
<li><p>RÃ©intÃ©gration des fichiers de configuration, de logs et des modules externes dans les rÃ©pertoires de lâ€™application (#375)</p></li>
<li><p>Ajout de routes Ã  <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code></p></li>
<li><p>Ajout dâ€™un trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>AmÃ©liorations et documentation des commandes dâ€™installation dâ€™un module</p></li>
<li><p>Ajout des unitÃ©s gÃ©ographiques dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code></p></li>
<li><p>Ajout dâ€™un bouton <code class="docutils literal notranslate"><span class="pre">Annuler</span></code> dans le formulaire Occtax</p></li>
<li><p>Gestion des conflits de nomenclatures en nâ€™utilisant plus leur <code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> (#384)</p></li>
<li><p>Migration du SQL de <code class="docutils literal notranslate"><span class="pre">ref_nomenclautres</span></code> dans le dÃ©pÃ´t du sous-module (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</p></li>
<li><p>DÃ©but de mise en place dâ€™un backoffice (mÃ©tadonnÃ©es et nomenclatures)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>OccTax : Correction du double post</p></li>
<li><p>OccTax : Correction des droits dans les JDD</p></li>
<li><p>OccTax : Correction de lâ€™affichage des observers_txt dans la fiche dâ€™un relevÃ©</p></li>
<li><p>Correction de la gestion gÃ©nÃ©rique des mÃ©dias</p></li>
<li><p>Suppression du lien entre <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> (#374)</p></li>
<li><p>ComplÃ©ments et relecture de la documentation</p></li>
<li><p>Correction</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez Ã  jour votre GeoNature depuis une Beta4 :</p>
<ul class="simple">
<li><p>TÃ©lÃ©chargez la beta5 et renommer les rÃ©pertoires :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">PnX</span><span class="o">-</span><span class="n">SI</span><span class="o">/</span><span class="n">GeoNature</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">unzip</span> <span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature_old</span><span class="o">/</span>
<span class="n">mv</span> <span class="n">GeoNature</span><span class="o">-</span><span class="n">geonature2beta</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ExÃ©cutez le script de migration <code class="docutils literal notranslate"><span class="pre">install/migration/beta4tobeta5.sh</span></code> depuis la racine de votre GeoNature :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">cd</span> <span class="n">geonature</span>
<span class="o">./</span><span class="n">install</span><span class="o">/</span><span class="n">migration</span><span class="o">/</span><span class="n">beta4tobeta5</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Celui-ci va rÃ©cupÃ©rer vos fichiers de configuration, dÃ©placer les modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li><p>Si vous avez dÃ©veloppÃ© des modules externes, voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un lien symbolique depuis le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> et en rÃ©intÃ©grant la configuration du module dans son rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
</ul>
</section>
<section id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se : dÃ©but de mise en place du backend, de lâ€™API et du frontend #345</p></li>
<li><p>ComplÃ©ment de la nomenclature des MÃ©thodes de dÃ©termination et suppression du champs Complement_Determination. Merci &#64;DonovanMaillard. #341</p></li>
<li><p>Nouveaux composants Angular (SelectSearch, Municipalities, Observers)</p></li>
<li><p>AmÃ©lioration de composants Angular (Date du jour par dÃ©faut, Option de tri des nomenclatures, DynamicForm</p></li>
<li><p>Connexion Ã  MTD INPN : Mise Ã  jour des JDD Ã  chaque appel de la route</p></li>
<li><p>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</p></li>
<li><p>Droits CRUVED : La dÃ©finition du CRUVED dâ€™un rÃ´le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature mÃªme si ils sont infÃ©rieurs. Si une action du CRUVED nâ€™est pas dÃ©finie au niveau du module, on prend celle de lâ€™application parente. #292</p></li>
<li><p>Si un rÃ´le a un R du CRUVED Ã  0 pour un module, alors celui-ci ne lui est pas listÃ© dans le Menu et il ne lui ai pas accessible si il en connait lâ€™URL. #360</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de maniÃ¨re gÃ©nÃ©rique des informations qui peuvent Ãªtre communes aux autres modules : lâ€™historique des actions sur chaque objet de la BDD, la validation dâ€™une donnÃ©e et les mÃ©dias associÃ©s Ã  une donnÃ©e. AccompagnÃ© de fonctions gÃ©nÃ©riques dâ€™historisation et de validation des donnÃ©es mises en place sur le module Occtax. #339</p></li>
<li><p>AmÃ©lioration de lâ€™ergonomie du MapList de OccTax. #361</p></li>
<li><p>Mise en place dâ€™un export CSV, SHP, GeoJSON paramÃ©trable dans OccTax. #363 et #366</p></li>
<li><p>AmÃ©lioration du module gÃ©nÃ©rique <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de ses sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a> et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></p></li>
<li><p>AmÃ©lioration et complÃ©ments des scripts dâ€™installation</p></li>
<li><p>Mise en place dâ€™un script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>ComplÃ©ment des diffÃ©rentes documentations</p></li>
<li><p>Ajout dâ€™une documentation dâ€™administration dâ€™OccTax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</p></li>
</ul>
</section>
<section id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Travail sur le module gÃ©nÃ©rique de Suivi intÃ©grÃ© Ã  GeoNature (<code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</p></li>
<li><p>Gestion de lâ€™installation dâ€™un module qui nâ€™a pas de Frontend dans GeoNature</p></li>
<li><p>Mise en place de tests automatiques au niveau du Frontend</p></li>
<li><p>MÃ©nage et rÃ©organisation du code du Frontend</p></li>
<li><p>Factorisation et harmonisation des composants gÃ©nÃ©riques Angular</p></li>
<li><p>Suppression des blocs non fonctionnels sur la Home</p></li>
<li><p>Mise Ã  jour de la doc et du MCD</p></li>
<li><p>PossibilitÃ© de masquer ou afficher les diffÃ©rents champs dans le formulaire Occtax (#344)</p></li>
<li><p>Ajout des nomenclatures dans les filtres dâ€™OccTax Ã  partir du nouveau composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de crÃ©er dynamiquement un formulaire en dÃ©clarant les champs (#318)</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon en ne recherchant que sur les dÃ©buts de mot et en affichant en premier les noms de rÃ©fÃ©rence (ordrer_by cd_nom=cd_ref DESC) - #334</p></li>
<li><p>Mise en place dâ€™une route gÃ©nÃ©rique permettant de requÃªter dans une vue non mappÃ©e</p></li>
<li><p>Suppression des options vides dans les listes dÃ©roulantes des nomenclatures</p></li>
<li><p>Ajout de quelques paramÃ¨tres (niveau de zoom mini dans chaque module, ID de la liste des taxons saisissables dans Occtaxâ€¦)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la pagination du composant MapList</p></li>
<li><p>Correction des droits attribuÃ©s automatiquement quand on se connecte avec le CAS</p></li>
<li><p>Correction de lâ€™installation optionnelle de UsersHub dans le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li><p>DÃ©but de refonte du module Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connectÃ© au module gÃ©nÃ©rique de suivi de GeoNature, dont le front sera externe Ã  GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</p></li>
<li><p>Maquettage et avancÃ©e sur le module Validation (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</p></li>
<li><p>DÃ©finition du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>Piste de dÃ©finition du module InteropÃ©rabilitÃ© (<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</p></li>
</ul>
</section>
<section id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>ComplÃ©ments de la documentation (schÃ©ma architecture, administration, installation, dÃ©veloppement, FAQâ€¦)</p></li>
<li><p>AmÃ©lioration de lâ€™ergonomie du module OccTax (composant MapList, filtres, colonnes et formulaires) et du module Exports</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon (#324)</p></li>
<li><p>AmÃ©lioration et optimisation de la sÃ©rialisation des donnÃ©es</p></li>
<li><p>Ajout de tests unitaires au niveau du backend</p></li>
<li><p>Ajout dâ€™un mÃ©canisme de log par email (paramÃ¨tres MAILERROR)</p></li>
<li><p>Migration du module occtax dans le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">/contrib</span></code> pour homogÃ©nÃ©iser les modules</p></li>
<li><p>CrÃ©ation du schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gÃ©rer la partie gÃ©nÃ©rique des modules de suivi (sites et visites centralisÃ©s)</p></li>
<li><p>DÃ©but de crÃ©ation du module gÃ©nÃ©rique des protocoles de suivi</p></li>
<li><p>DÃ©but de crÃ©ation du module de gestion des mÃ©dias</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Corrections de lâ€™installation globale et autonome</p></li>
<li><p>Renommage Contact en OccTax (en cours)</p></li>
<li><p>Nettoyage du schÃ©ma des mÃ©tadonnÃ©es (<code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>)</p></li>
</ul>
</section>
<section id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã  Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standarde, plus gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<p>PrÃ©sentation et suivi du projet : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Refonte de la base de donnÃ©es du module Contact, renommÃ© en OccTax, sâ€™appuyant sur le standard Occurrence de taxons du SINP (#183)</p></li>
<li><p>DÃ©veloppement du module OccTax regroupant les contacts Faune, Flore, Fonge et MortalitÃ© (avec formulaire de consultation et de saisie des donnÃ©es)</p></li>
<li><p>DÃ©veloppement dâ€™un module et dâ€™une API gÃ©nÃ©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet dâ€™avoir un mÃ©canisme gÃ©nÃ©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas crÃ©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature sâ€™adaptent en fonction des regnes et groupe 2 INPN des taxons.</p></li>
<li><p>DÃ©coupage de lâ€™application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de lâ€™interface et des listes de valeurs avec franÃ§ais et anglais intÃ©grÃ©s mais extensible Ã  dâ€™autres langues (#173)</p></li>
<li><p>DÃ©veloppement de composants gÃ©nÃ©riques pour pouvoir les utiliser dans plusieurs modules sans avoir Ã  les redÃ©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURESâ€¦)</p></li>
<li><p>Mise en place dâ€™un rÃ©fÃ©rentiel gÃ©ographique avec un schÃ©ma dÃ©diÃ© (<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec dâ€™autres applications comprenant une table des communes, une table gÃ©nÃ©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer dâ€™une gestion des droits avec 6 niveaux Ã  un mÃ©canisme plus gÃ©nÃ©rique, souple et complet. Il permet dâ€™attribuer des actions possibles Ã  un rÃ´le (utilisateur ou groupe), sur une portÃ©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 portÃ©es de ces actions sont possibles : Mes donnÃ©es / Les donnÃ©es de mon organisme / Toutes les donnÃ©es.</p></li>
<li><p>ImplÃ©mentation de la gestion des droits au niveau de lâ€™API (pour limiter les donnÃ©es affichÃ©es Ã  un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par dÃ©faut, lâ€™authentification et les utilisateurs sont gÃ©rÃ©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature au CAS de lâ€™INPN, sans utiliser GeoNature (utilisÃ© pour lâ€™instance nationale INPN de GeoNature). GeoNature peut aussi se connecter au webservice METADONNEES de lâ€™INPN pour y rÃ©cupÃ©rer les jeux de donnÃ©es en fonction de lâ€™utilisateur connectÃ©.</p></li>
<li><p>Mise en place dâ€™un module dâ€™export. Chaque export sâ€™appuie sur une vue. Il sera possible Ã  chaque administrateur dâ€™ajouter autant de vues que nÃ©cessaires dans son GeoNature. Pour le moment, un export au format SINP Occurrence de taxons a Ã©tÃ© intÃ©grÃ© par dÃ©faut.</p></li>
<li><p>DÃ©veloppement des mÃ©tadonnÃ©es dans la BDD (schema <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la base du standard MÃ©tadonnÃ©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de gÃ©rer des jeux de donnÃ©es, des cadres dâ€™acquisition, des acteurs (propriÃ©taire, financeur, producteurâ€¦) et des protocoles. Chaque relevÃ© est associÃ© Ã  un jeu de donnÃ©es.</p></li>
<li><p>DÃ©veloppement dâ€™un mÃ©canisme de calcul automatique de la sensibilitÃ© dâ€™une espÃ¨ce directement dans la BDD (sur la base des rÃ¨gles nationales et rÃ©gionales du SINP + locales Ã©ventuellement)</p></li>
<li><p>IntÃ©gration du calcul automatique de lâ€™identifiant permanent SINP (#209)</p></li>
<li><p>Mise en place dâ€™un mÃ©canisme standardisÃ© de dÃ©veloppement de modules dans GeoNature (#306)</p></li>
<li><p>Scripts dâ€™installation autonome ou globale de GeoNature sur Debian 8 et 9</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Installation globale de GeoNature (avec TaxHub et UsersHub) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></p></li>
<li><p>Installation autonome de GeoNature / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></p></li>
<li><p>Manuel utilisateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></p></li>
<li><p>Manuel administrateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></p></li>
<li><p>DÃ©veloppement (API, modules et composants) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></p></li>
</ul>
<p>Documentation complÃ¨te disponible sur <a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li><p>Finalisation MCD du module SynthÃ¨se</p></li>
<li><p>Triggers dâ€™alimentation automatique de la SynthÃ¨se depuis le module OccTax</p></li>
<li><p>DÃ©veloppement de lâ€™interface du module SynthÃ¨se</p></li>
<li><p>AmÃ©lioration et gÃ©nÃ©ricitÃ© du module OccTax (mÃ©dias, import GPX, champs masquables et pseudo-champs)</p></li>
<li><p>GÃ©nÃ©ricitÃ© du module dâ€™export</p></li>
<li><p>DÃ©veloppement du module de validation (#181)</p></li>
<li><p>DÃ©veloppement dâ€™un module de suivi des habitats avec une gestion gÃ©nÃ©rique des sites et visites de suivi</p></li>
<li><p>DÃ©veloppement dâ€™un module de collecte citoyenne (#242)</p></li>
</ul>
</section>
<section id="id27">
<h2>1.9.1 (2018-05-17)<a class="headerlink" href="#id27" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Installation - Suppression des couches SIG (communes, znieffâ€¦) pour les tÃ©lÃ©charger sur <a class="reference external" href="http://geonature.fr/data/inpn/layers/">http://geonature.fr/data/inpn/layers/</a> et ainsi allÃ©ger le dÃ©pÃ´t de 158 Mo.</p></li>
<li><p>ComplÃ©ments mineurs de la documentation</p></li>
<li><p>Migration du script <code class="docutils literal notranslate"><span class="pre">install_all</span></code> en Debian 9. La doc et le script Debian 8 restent disponibles dans le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">docs/install_all</span></code></p></li>
<li><p>Corrections mineures de triggers</p></li>
<li><p>CompatibilitÃ© avec TaxHub 1.3.2, UsersHub 1.3.1, GeoNature-atlas 1.3.2</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement dâ€™une 1.7.X Ã  la 1.9.1, en prenant en compte les notes des diffÃ©rentes versions intermÃ©diaires, notamment les scripts de mise Ã  jour de la BDD ainsi que les Ã©ventuels nouveaux paramÃ¨tres Ã  ajouter.</p></li>
<li><p>ExÃ©cuter le script de mise Ã  jour de la BDD <code class="docutils literal notranslate"><span class="pre">data/update_1.9.0to1.9.1.sql</span></code></p></li>
</ul>
</section>
<section id="id28">
<h2>1.9.0 (2017-07-06)<a class="headerlink" href="#id28" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>ATTENTION : Les Ã©volutions de cette version concernent aussi la webapi. Si vous utilisez les applications GeoNature-mobile, vous devez attendre la sortie dâ€™une version de GeoNature-mobile-webapi (https://github.com/PnEcrins/GeoNature-mobile-webapi) compatible avec cette version 1.9.0 de GeoNature.</strong> Coming soon !</p>
<p>A noter aussi que cette version de GeoNature est compatible avec GeoNature-atlas 1.2.4 et +.</p>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout de la crÃ©ation des index spatiaux Ã  la crÃ©ation initiale de la base.</p></li>
<li><p>CrÃ©ation ou mise Ã  jour des gÃ©omÃ©tries compatible PostGIS 2.</p></li>
<li><p>Ajout du champ diffusable (oui/non) dans le formulaire web de saisie, uniquement pour ContactFaune et MortalitÃ© (TODO : faire la mÃªme chose pour les autres protocoles).</p></li>
<li><p>Multi-projection : Les versions antÃ©rieures de GeoNature nâ€™Ã©taient compatibles quâ€™avec la projection Lambert 93 (srid: 2154). Cette version permet de choisir sa projection locale. Elle ajoute un paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">srid_local</span></code> dans le <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> et renomme tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> des tables Â«Â mÃ©tierÂ Â».
Ce paramÃ¨tre est notamment utilisÃ© lors de la crÃ©ation de la base pour affecter le srid de la projection locale Ã  tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> prÃ©sents dans les tables de la base. Ce paramÃ¨tre est Ã©galement utilisÃ© pour mettre en cohÃ©rence le systÃ¨me de projection local utilisÃ© dans toutes les couches SIG prÃ©sentes dans la base et les gÃ©omÃ©tries stockÃ©es dans les champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> des tables Â«Â mÃ©tierÂ Â». Le paramÃ©trage du service WMS dans <code class="docutils literal notranslate"><span class="pre">wms/wms.map</span></code> est Ã©galement pris en charge par le script dâ€™installation de lâ€™application.</p></li>
<li><p>Correction de lâ€™installation de npm</p></li>
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> mis Ã  jour avec les nouvelles versions de GeoNature-atlas, de TaxHub et de UsersHub.</p></li>
</ul>
<p>IMPORTANT : toutes les couches SIG insÃ©rÃ©es dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">layers</span></code> doivent Ãªtre dans la projection fournie pour le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">srid_local</span></code>. Lâ€™application est livrÃ©e avec un ensemble de couches en Lambert 93 concernant la mÃ©tropole. Une installation avec une autre projection, hors mÃ©tropole, doit donc se faire sans lâ€™insertion des couches SIG. Vous devrez manuellement fournir le contenu des tables du schÃ©ma <code class="docutils literal notranslate"><span class="pre">layers</span></code> dans la projection choisie.</p>
<p><strong>Notes de versions</strong></p>
<ul class="simple">
<li><p>Vous pouvez ajouter les paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">srid_local</span></code>, <code class="docutils literal notranslate"><span class="pre">install_sig_layers</span></code> et <code class="docutils literal notranslate"><span class="pre">add_sample_data</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> en vous inspirant du fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini.sample</span></code>. Toutefois ces paramÃ¨tres ne sont utilisÃ©s que pour une nouvelle installation et notamment pour lâ€™installation de la base.</p></li>
<li><p>Vous pouvez passer directement dâ€™une 1.7.X Ã  la 1.9.0, en prenant en compte les notes des diffÃ©rentes versions intermÃ©diaires, notamment les scripts de mise Ã  jour de la BDD ainsi que les Ã©ventuels nouveaux paramÃ¨tres Ã  ajouter.</p></li>
<li><p>Si vous migrez depuis la version 1.8.3, exÃ©cutez le fichier SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.3to1.9.0.sql</span></code>. Comme GeoNature ne fonctionne jusque lÃ  que pour des structures de mÃ©tropole, il est basÃ© sur le fait que le champ <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> reste en Lambert 93 (2154). Assurez-vous que le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">$srid_local</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> est Ã©gal Ã  <code class="docutils literal notranslate"><span class="pre">2154</span></code>.
ATTENTION : ce script SQL renomme tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> de la BDD de GeoNature. Ceci affecte de nombreuses tables, de nombreux triggers et de nombreuses vues de la base. Le script nâ€™intÃ¨gre que les vues fournies par dÃ©faut. Si vous avez crÃ©Ã© des vues spÃ©cifiques, notamment pour le module dâ€™export, ou si vous avez modifiÃ© des vues fournies, vous devez adapter/complÃ©ter le script. Vous pouvez vous inspirer de son contenu.</p></li>
<li><p>RAPPEL : Ceci affecte Ã©galement la webapi des applications mobiles. Vous devez donc mettre Ã  jour votre webapi si vous utilisez la saisie sur les applications mobiles. Une release de la webapi devrait sortir bientÃ´t.</p></li>
</ul>
</section>
<section id="id29">
<h2>1.8.4 (2017-04-10)<a class="headerlink" href="#id29" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script dâ€™installation globale (<code class="docutils literal notranslate"><span class="pre">install_all</span></code>) si lâ€™utilisateur de BDD par dÃ©faut a Ã©tÃ© renommÃ© (<code class="docutils literal notranslate"><span class="pre">data/grant.sql</span></code>)</p></li>
<li><p>Correction de la crÃ©ation des vues qui remontent la liste des taxons dans les 3 contacts</p></li>
</ul>
</section>
<section id="id30">
<h2>1.8.3 (2017-02-23)<a class="headerlink" href="#id30" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Multi-organisme : lâ€™organisme associÃ© Ã  la donnÃ©e est dÃ©sormais celui de lâ€™utilisateur connectÃ© dans lâ€™application (lors de la crÃ©ation dâ€™une observation uniquement).</p></li>
<li><p>Taxonomie : crÃ©ation dâ€™une liste <code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">possible</span></code>, remplaÃ§ant lâ€™attribut <code class="docutils literal notranslate"><span class="pre">Saisie</span></code>. Cela permet de choisir les synonymes que lâ€™on peut saisir ou non dans GeoNature en se basant sur les <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> (<code class="docutils literal notranslate"><span class="pre">bib_listes</span></code> et <code class="docutils literal notranslate"><span class="pre">cor_nom_liste</span></code>) et non plus sur les <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> (<code class="docutils literal notranslate"><span class="pre">bib_attributs</span></code> et <code class="docutils literal notranslate"><span class="pre">cor_taxon_attribut</span></code>). Voir le script de migration SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code> pour bien basculer les informations de lâ€™attribut dans la nouvelle liste.</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">synthese.v_tree_taxons_synthese</span></code> potentiellement bloquante Ã  lâ€™ouverture de la synthÃ¨se.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">utilisateurs.bib_observateurs</span></code> inutile.</p></li>
<li><p>CrÃ©ation des index spatiaux manquants (performances)</p></li>
<li><p>Clarification et corrections mineures du script <code class="docutils literal notranslate"><span class="pre">install_all</span></code></p></li>
<li><p>Ajout du MCD de la 1.8 (par &#64;xavier-pnm)</p></li>
<li><p>AmÃ©liorations du nom des fichiers exportÃ©s depuis la SynthÃ¨se (par &#64;sylvain-m)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez supprimer les lignes concernant le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_organisme</span> <span class="pre">=</span> <span class="pre">...</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>, lâ€™organisme nâ€™Ã©tant plus un paramÃ¨tre fixe mais dÃ©sormais celui de lâ€™utilisateur connectÃ©.</p>
<p>Vous pouvez passer directement dâ€™une 1.7.X Ã  la 1.8.3, en prenant en compte les notes des diffÃ©rentes versions intermÃ©diaires.</p>
<p>Si vous migrez depuis la version 1.8.2, Ã©xÃ©cutez le fichier SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code>.</p>
</section>
<section id="id31">
<h2>1.8.2 (2017-01-11)<a class="headerlink" href="#id31" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>ModularitÃ© des scripts SQL de crÃ©ation de la base en les dissociant par protocole et en regroupant les triggers dans les schÃ©mas de chaque protocole (prÃ©paration GeoNature V2)</p></li>
<li><p>Correction dâ€™une requÃªte dans flore station (indÃ©pendance vis Ã  vis de flore patrimoniale)</p></li>
<li><p>Correction du trigger <code class="docutils literal notranslate"><span class="pre">synthese_update_fiche_cflore</span></code> (&#64;ClaireLagaye)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement dâ€™une 1.7.X Ã  la 1.8.2, en prenant en compte les notes des diffÃ©rentes versions intermÃ©diaires.</p>
<p>Si vous migrez depuis la version 1.8.1, Ã©xÃ©cutez le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.8.1to1.8.2.sql</span></code>. Consultez les derniÃ¨res lignes de ce fichier : vous devez Ã©valuer si la requÃªte dâ€™insertion dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.cor_taxon_attribut</span></code> doit Ãªtre faite ou non (vous pourriez avoir dÃ©jÃ  constatÃ© et corrigÃ© cette erreur lors dâ€™une prÃ©cÃ©dente migration). Cela corrige lâ€™absence de taxons protÃ©gÃ©s dans votre synthese en rÃ©cupÃ©rant les informations de protection prÃ©sentes dans le champ <code class="docutils literal notranslate"><span class="pre">filtre3</span></code> de la table <code class="docutils literal notranslate"><span class="pre">save.bib_taxons</span></code></p>
</section>
<section id="id32">
<h2>1.8.1 (2017-01-05)<a class="headerlink" href="#id32" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout des sauvegardes et de lâ€™installation globale avec un exemple dÃ©taillÃ© dans la documentation : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Optimisation et correction de la vue qui retourne lâ€™arbre des rangs taxonomiques (synthese.v_tree_taxons_synthese)</p></li>
<li><p>Mise en cohÃ©rence des donnÃ©es exemple de GeoNature-atlas avec les critÃ¨res des vues matÃ©rialisÃ©es de GeoNature-atlas</p></li>
<li><p>Mise Ã  jour de 2 triggers du Contact Flore (&#64;ClaireLagaye)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement dâ€™une 1.7.X Ã  la 1.8.1, en prenant en compte les notes des diffÃ©rentes versions intermÃ©diaires.</p>
<p>Si vous migrez depuis la version 1.8.0, Ã©xÃ©cutez le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.8to1.8.1.sql</span></code></p>
</section>
<section id="id33">
<h2>1.8.0 (2016-12-14)<a class="headerlink" href="#id33" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Passage Ã  TAXREF version 9</p></li>
<li><p>AccÃ¨s Ã  la synthÃ¨se en consultation uniquement pour des utilisateurs enregistrÃ©s avec des droits 1</p></li>
<li><p>Ajout dâ€™un champ <code class="docutils literal notranslate"><span class="pre">diffusion</span></code> (oui/non) dans la table <code class="docutils literal notranslate"><span class="pre">synthese.syntheseff</span></code>, utilisable dans GeoNature-atlas. Pas dâ€™interface de gestion de ce champ pour le moment. CF #132</p></li>
<li><p>CrÃ©ation dâ€™un script dâ€™installation simplifiÃ© pour un pack UsersHub, TaxHub, GeoNature et GeoNature-atlas : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/docs/install_all">https://github.com/PnX-SI/GeoNature/tree/master/docs/install_all</a></p></li>
<li><p>Factorisation des SQL de crÃ©ation des schÃ©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> en les rÃ©cupÃ©rant dans les dÃ©pots TaxHub et UsersHub</p></li>
<li><p>CompatibilitÃ© avec lâ€™application <a class="reference external" href="https://github.com/PnX-SI/TaxHub">TaxHub</a> qui permet de gÃ©rer la taxonomie Ã  partir de TAXREF. Cela induit dâ€™importants changements dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code>, notamment le renommage de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_taxons</span></code> en <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code>, la suppression de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_filtres</span></code> et lâ€™utilisation de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_attributs</span></code> (voir <a class="reference external" href="https://github.com/PnX-SI/TaxHub/issues/71">https://github.com/PnX-SI/TaxHub/issues/71</a> pour plus dâ€™informations). Voir aussi le fichier de migration <code class="docutils literal notranslate"><span class="pre">data/update_1.7to1.8.sql</span></code> qui permet dâ€™automatiser ces Ã©volutions de la BDD</p></li>
<li><p>CompatibilitÃ© avec lâ€™application <a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas">GeoNature-atlas</a> qui permet de diffuser les donnÃ©es de la synthÃ¨se faune et flore dans un atlas en ligne (exemple : <a class="reference external" href="http://biodiversite.ecrins-parcnational.fr">http://biodiversite.ecrins-parcnational.fr</a>)</p></li>
<li><p>CrÃ©ation dâ€™un site internet de prÃ©sentation de GeoNature : <a class="reference external" href="http://geonature.fr">http://geonature.fr</a></p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>AmÃ©lioration des triggers concernant la suppression de fiches orphelines</p></li>
<li><p>Affichage par dÃ©faut du nom latin dans Contact flore et Contact invertÃ©brÃ©s</p></li>
<li><p>Correction des exports lors de la prÃ©sence de points-virgules dans les commentaires. Fix #143</p></li>
<li><p>Suppression du besoin dâ€™un super utilisateur lors de lâ€™installation de la BDD. Fix #141</p></li>
<li><p>Correction de lâ€™ID des protocoles mortalitÃ© et invertebres dans la configuration par dÃ©faut</p></li>
<li><p>Suppression dâ€™un doublon dans le fichier de configuration symfony de lâ€™application</p></li>
<li><p>Correction des coordonnÃ©es lors de lâ€™export de donnÃ©es Flore Station</p></li>
<li><p>Autres corrections mineures</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>ExÃ©cuter le script SQL de migration rÃ©alisant les modifications de la BDD de la version 1.7.X Ã  1.8.0 <code class="docutils literal notranslate"><span class="pre">data/update_1.7to1.8.sql</span></code></p></li>
<li><p>Mettre Ã  jour taxref en V9 en vous inspirant du script <code class="docutils literal notranslate"><span class="pre">data/taxonomie/inpn/update_taxref_v8tov9</span></code></p></li>
</ul>
<p><strong>TaxHub</strong></p>
<p>Lâ€™application TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>) est dÃ©sormais fonctionnelle, documentÃ© et installable.</p>
<p>Elle vous aidera Ã  gÃ©rer vos taxons et lâ€™ensemble du schÃ©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code>, prÃ©sent dans la BDD de GeoNature.</p>
<p>TaxHub Ã©voluera pour intÃ©grer progressivement de nouvelles fonctionnalitÃ©s.</p>
<p>Il est conseillÃ© de ne pas installer la base de donnÃ©es de TaxHub indÃ©pendamment et de connecter lâ€™application directement sur le la base de donnÃ©es de GeoNature.</p>
<p><strong>GeoNature-atlas</strong></p>
<p>GeoNature-atlas est Ã©galement basÃ© sur le schÃ©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> de TaxHub. Ainsi TaxHub permet la saisie des informations relatives aux taxons (descriptions, milieux, photos, liens, PDFâ€¦). GeoNature-atlas dispose de sa propre base de donnÃ©es mais pour fonctionner en connexion avec le contenu de la base GeoNature il faut Ã  minima disposer dâ€™une version 1.8 de GeoNature.</p>
<dl class="field-list simple">
<dt class="field-odd">notes</dt>
<dd class="field-odd"><p>Une rÃ©gression dans le contenu de Taxref V9 conduit Ã  la suppression de lâ€™information concernant le niveau de protection des espÃ¨ces (rÃ©gional, national, international,â€¦).
Cette information Ã©tait utilisÃ©e par GeoNature, notamment pour dÃ©finir les textes Ã  retenir pour la colonne <code class="docutils literal notranslate"><span class="pre">concerne_mon_territoire</span></code> de la table <code class="docutils literal notranslate"><span class="pre">taxonomie.taxref_protection_articles</span></code>.
Vous devez dÃ©sormais remplir cette colonne manuellement.</p>
</dd>
</dl>
</section>
<section id="id34">
<h2>1.7.4 (2016-07-06)<a class="headerlink" href="#id34" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li><p>Correction du script dâ€™installation des tables liÃ©es au Contact flore (5a1fb07)</p></li>
<li><p>Mise en cohÃ©rence avec GeoNature-mobile utilisant les classes â€œgasteropodesâ€ et â€œbivalvesâ€ et non la classe gÃ©nÃ©rique â€œmollusquesâ€.</p></li>
</ul>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Corrections de mise en forme de la documentation</p></li>
<li><p>Ajout de la liste rouge France de TaxRef lors dâ€™une nouvelle installation (f4be2b6). A ne pas prendre en compte dans le cas dâ€™une mise Ã  jour.</p></li>
<li><p>Ajout du MCD de la BDD - <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png">https://github.com/PnX-SI/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png</a></p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 Ã  la 1.7.4 mais en vous rÃ©fÃ©rant aux notes de version de la 1.7.0.</p></li>
<li><p>Remplacer <code class="docutils literal notranslate"><span class="pre">id_classe_mollusques</span></code> par <code class="docutils literal notranslate"><span class="pre">id_classe_gasteropodes</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> et renseigner la valeur en cohÃ©rence avec lâ€<code class="docutils literal notranslate"><span class="pre">id_liste</span></code> retenu dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_listes</span></code> pour les gastÃ©ropodes. Attention, vous devez avoir Ã©tabli une correspondance entre les taxons gastÃ©ropodes et bivalves et leur liste dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.cor_taxon_liste</span></code>.</p></li>
</ul>
</section>
<section id="id35">
<h2>1.7.3 (2016-05-19)<a class="headerlink" href="#id35" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li><p>Correction de coordonnÃ©es vides dans lâ€™export de Flore station. cf <a class="reference external" href="https://github.com/PnX-SI/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096">https://github.com/PnX-SI/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096</a></p></li>
<li><p>Correction des triggers en base concernant un bug de saisie pour les taxons dont le taxon de rÃ©fÃ©rence nâ€™est pas prÃ©sent dans <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_taxons</span></code>.</p></li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la procÃ©dure classique de mise Ã  jour. <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 Ã  la 1.7.3 mais en vous rÃ©fÃ©rant aux notes de version de la 1.7.0.</p></li>
<li><p>Pour passer de la 1.7.2 Ã  la 1.7.3 vous devez exÃ©cuter le script <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.7.2to1.7.3.sql</span></code>.</p></li>
</ul>
</section>
<section id="id36">
<h2>1.7.2 (2016-04-27)<a class="headerlink" href="#id36" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug dans lâ€™export XLS depuis Flore Station.</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 Ã  la 1.7.2 mais en vous rÃ©fÃ©rant aux notes de version de la 1.7.0.</p></li>
</ul>
</section>
<section id="id37">
<h2>1.7.1 (2016-04-27)<a class="headerlink" href="#id37" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Ajout des listes flore manquantes dans le script de mise Ã  jour <code class="docutils literal notranslate"><span class="pre">data/update_1.6to1.7.sql</span></code>.</p></li>
</ul>
</section>
<section id="id38">
<h2>1.7.0 (2016-04-24)<a class="headerlink" href="#id38" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout du contact flore</p></li>
<li><p>Correction et complÃ©ments dans les statistiques et mise en paramÃ¨tre de leur affichage ou non, ainsi que de la date de dÃ©but Ã  prendre en compte pour leur affichage.</p></li>
<li><p>Ajout dâ€™un module dâ€™export des donnÃ©es permettant dâ€™offrir, en interne ou Ã  des partenaires, un lien de tÃ©lÃ©chargement des donnÃ©es basÃ© sur une ou des vues de la base de donnÃ©es (un fichier par vue). Voir <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Modification des identifiants des listes pour compatibilitÃ© avec les applications GeoNature-Mobile.</p></li>
<li><p>ComplÃ©ment dans la base de donnÃ©es pour compatibilitÃ© avec les applications GeoNature-Mobile.</p></li>
<li><p>Correction dâ€™une erreur sur lâ€™importation de shape pour la recherche gÃ©ographique</p></li>
<li><p>WMS : correction de la liste des sites N2000, correction de lâ€™affichage de lâ€™aire optimale dâ€™adhÃ©sion des parcs nationaux et retrait des sites inscrits et classÃ©s</p></li>
<li><p>Correction dâ€™un bug permettant la saisie dâ€™une date dâ€™observation postÃ©rieure Ã  aujourdâ€™hui dans Flore station</p></li>
<li><p>Mention de la version de taxref sur la page dâ€™accueil</p></li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la procÃ©dure classique de mise Ã  jour. <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p>
<p><strong>1.</strong> Modification des identifiants des listes de taxons pour compatibilitÃ© avec les applications GeoNature-Mobile.</p>
<p>Dans GeoNature-Mobile, les taxons sont filtrables par classe sur la base dâ€™un <code class="docutils literal notranslate"><span class="pre">id_classe</span></code>. Ces id sont inscrits en dur dans le code des applications mobiles.</p>
<p>Dans la base GeoNature les classes taxonomiques sont configurables grace au vues <code class="docutils literal notranslate"><span class="pre">v_nomade_classes</span></code> qui utilisent les listes (<code class="docutils literal notranslate"><span class="pre">taxonomie.bib_listes</span></code>).</p>
<p>Les <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> ont donc Ã©tÃ© mis Ã  jour pour Ãªtre compatibles avec les <code class="docutils literal notranslate"><span class="pre">id_classe</span></code> des applications mobiles.</p>
<p>Voir le script SQL dâ€™update <code class="docutils literal notranslate"><span class="pre">data/update_1.6to1.7.sql</span></code> et LIRE ATTENTIVEMENT LES COMMENTAIRES.</p>
<ul class="simple">
<li><p>En lien avec les modifications ci-dessus, mettre Ã  jour les variables des classes taxonomiques correspondant aux modification des <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code></p></li>
<li><p>Ajouter dans le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> les variables <code class="docutils literal notranslate"><span class="pre">$struc_abregee</span></code>, <code class="docutils literal notranslate"><span class="pre">$struc_long</span></code>, <code class="docutils literal notranslate"><span class="pre">$taxref_version</span></code>, <code class="docutils literal notranslate"><span class="pre">$show_statistiques</span></code> et <code class="docutils literal notranslate"><span class="pre">$init_date_statistiques</span></code> (voir le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</p></li>
</ul>
<p><strong>2.</strong> Pour ajouter le Contact flore</p>
<ul class="simple">
<li><p>ExÃ©cuter le script sql <code class="docutils literal notranslate"><span class="pre">data/2154/contactflore.sql</span></code></p></li>
<li><p>Ajouter les variables <code class="docutils literal notranslate"><span class="pre">$id_lot_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">$id_protocole_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">$id_source_cflore</span> <span class="pre">=</span> <span class="pre">7</span></code> et <code class="docutils literal notranslate"><span class="pre">$appname_cflore</span> <span class="pre">=</span> <span class="pre">'Contact</span> <span class="pre">flore</span> <span class="pre">-</span> <span class="pre">GeoNature';</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> (voir le fichier dâ€™exemple <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</p></li>
<li><p>Ajouter les variables  <code class="docutils literal notranslate"><span class="pre">id_lot_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">id_protocole_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">id_source_contactflore</span> <span class="pre">=</span> <span class="pre">7</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> (voir le fichier dâ€™exemple <code class="docutils literal notranslate"><span class="pre">web/js/config.js.sample</span></code>)</p></li>
<li><p>lâ€™enregistrement correspondant au contact flore dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code> doit Ãªtre actif (derniÃ¨re colonne) pour que le contact flore soit accessible depuis la page dâ€™accueil.</p></li>
</ul>
<p><strong>3.</strong> Afin de mettre Ã  jour la configuration WMS, vous devez exÃ©cuter le fichier <code class="docutils literal notranslate"><span class="pre">wms/update1.6to1.7.sh</span></code>.</p>
<p>Au prÃ©alable, assurez vous que les informations renseignÃ©es dans le fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> sont Ã  jour. Lâ€™ancien fichier sera sauvegardÃ© sous <code class="docutils literal notranslate"><span class="pre">wms/wms_1.6.map</span></code>. Vous pourrez faire le choix de conserver ou de supprimer ce fichier de sauvegarde qui ne sera pas utilisÃ© par lâ€™application.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">wms</span><span class="o">/</span><span class="n">update1</span><span class="mf">.6</span><span class="n">to1</span><span class="mf">.7</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4.</strong> Mise en place du module dâ€™export</p>
<ul>
<li><p>CrÃ©er les vues retournant les donnÃ©es attendues.</p></li>
<li><p>Configurer le module dans le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> Ã  partir de lâ€™exemple du fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>); section <code class="docutils literal notranslate"><span class="pre">configuration</span> <span class="pre">du</span> <span class="pre">module</span> <span class="pre">d'export</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Vous pouvez paramÃ©trer plusieurs modules avec un nom pour chacun grace au paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">exportname</span></code></p></li>
<li><p>Pour chacun des modules seuls les utilisateurs de geonature dont le <code class="docutils literal notranslate"><span class="pre">id_role</span></code> figure dans le tableau <code class="docutils literal notranslate"><span class="pre">authorized_roles_ids</span></code> peuvent exporter les donnÃ©es mises Ã  disposition par le module dâ€™export.</p></li>
<li><p>Chaque module peut comporter autant que vues que nÃ©cessaire (un bouton par vue gÃ©nÃ©rera un fichier zip par vue). Renseigner le tableau <code class="docutils literal notranslate"><span class="pre">views</span></code> pour chacun des modules.</p></li>
<li><p>Voir la documentation ici : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Attribution des droits nÃ©cessaires pour le rÃ©pertoire permettant lâ€™enregistrement temporaire des fichiers gÃ©nÃ©rÃ©s par le module dâ€™export.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">775</span> <span class="n">web</span><span class="o">/</span><span class="n">uploads</span><span class="o">/</span><span class="n">exports</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>RÃ©tablir les droits dâ€™Ã©criture et vider le cache</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">cache</span><span class="o">/</span>
<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">log</span><span class="o">/</span>
<span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id39">
<h2>1.6.0 (2016-01-14)<a class="headerlink" href="#id39" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Pour les changements dans la base de donnÃ©es vous pouvez exÃ©cuter le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.5to1.6.sql</span></code></p></li>
<li><p>Mise Ã  jour de la configuration Apache. Modifier le fichier <code class="docutils literal notranslate"><span class="pre">apache/wms.conf</span></code> en vous basant sur lâ€™exemple <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/apache/wms.conf.sample#L16-L17">https://github.com/PnX-SI/GeoNature/blob/master/apache/wms.conf.sample#L16-L17</a></p></li>
<li><p>Ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">$id_application</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> (voir la valeur utilisÃ©e pour GeoNature dans les tables <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs.cor_role_droit_application</span></code>)</p></li>
<li><p>Ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">import_shp_projection</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code> - voir lâ€™exemple dans le fichier <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/configmap.js.sample#L35</span></code></p></li>
<li><p>Supprimer toute rÃ©fÃ©rence Ã  gps_user_projection dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code></p></li>
<li><p>Ajouter un tableau JSON des projections disponibles pour lâ€™outil de pointage GPS : <code class="docutils literal notranslate"><span class="pre">gps_user_projections</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code>. Respecter la structure dÃ©finie dans <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/configmap.js.sample#L7-L14</span></code>. Attention de bien respecter la structure du tableau JSON et notamment sa syntaxe (accolades, virgules, nom des objects, etcâ€¦)</p></li>
<li><p>Ajouter les <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> pour les classes faune filtrables dans les formulaires de saisie dans le fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.map</span></code>. Ceci concerne les variables <code class="docutils literal notranslate"><span class="pre">id_classe_oiseaux</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_mammiferes</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_amphibiens</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_reptiles</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_poissons</span></code> et <code class="docutils literal notranslate"><span class="pre">id_classe_ecrevisses</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_insectes</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_arachnides</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_myriapodes</span></code> et  <code class="docutils literal notranslate"><span class="pre">id_classe_mollusques</span></code>. Voir lâ€™exemple dans le fichier <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/config.js.sample#L32-44</span></code></p></li>
<li><p>Taxref a Ã©tÃ© mis Ã  jour de la version 7 Ã  8. GeoNature 1.6.0 peut fonctionner avec la version 7. Cependant il est conseillÃ© de passer en taxref V8 en mettant Ã  jour la table <code class="docutils literal notranslate"><span class="pre">synthese.taxref</span></code> avec la version 8. Cette mise Ã  jour pouvant avoir un impact fort sur vos donnÃ©es, son automatisation nâ€™a pas Ã©tÃ© prÃ©vue. Le script SQL de migration de vos donnÃ©es de taxref V7 vers taxref V8 nâ€™est donc pas fourni. Pour une installation nouvelle de la base de donnÃ©es, GeoNature 1.6.0 est fourni avec taxref V8.</p></li>
<li><p>Le routing a Ã©tÃ© mis Ã  jour, vous devez vider le cache de Symfony pour quâ€™il soit pris en compte. Pour cela, placez vous dans le rÃ©pertoire racine de lâ€™application et effectuez la commande suivante :</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Les recherches dans la synthÃ¨se sont dÃ©sormais faites sur le <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> et non plus sur le <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> pour retourner tous les synonymes du taxon recherchÃ© - Fix #92</p></li>
<li><p>Passage de taxref V7 Ã  Taxref V8 - Fix #34</p></li>
<li><p>IntÃ©gration de la premiÃ¨re version de lâ€™API permettant dâ€™intÃ©grer des donnÃ©es dans la synthÃ¨se depuis une source externe - <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/geonature_webapi_doc.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/geonature_webapi_doc.rst</a></p></li>
<li><p>Mise en paramÃ¨tre du <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> - Fix #105</p></li>
<li><p>Recharger la synthese aprÃ¨s suppression dâ€™un enregistrement - Fix #94</p></li>
<li><p>Lâ€™utilisateur peut lui-mÃªme dÃ©finir le systÃ¨me de coordonnÃ©es dans lâ€™outil de pointage GPS - Fix #107</p></li>
<li><p>Mise en paramÃ¨tre de la projection de la shape importÃ©e comme zone de recherche dans la synthÃ¨se</p></li>
<li><p>Les exports XLS et SHP comportent le <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> ET le <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> de tous les synonymes du nom recherchÃ© ainsi que le nom_latin (bib_taxons) ET le nom_valide (taxref) - Fix #92</p></li>
<li><p>SAISIE invertÃ©brÃ©s - Ajout dâ€™un filtre Mollusques - Fix #117</p></li>
<li><p>AmÃ©lioration du vocabulaire utilisÃ© sur la page dâ€™accueil - #118</p></li>
<li><p>Affichage dâ€™un message pendant le chargement des exports</p></li>
<li><p>Mise en place de statistiques automatiques sur la page dâ€™accueil, basÃ©es sur les listes de taxons. A complÃ©ter.</p></li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>IntÃ©gration de la librairie <code class="docutils literal notranslate"><span class="pre">OpenLayers.js</span></code> en local dans le code car les liens distants ne fonctionnaient plus - Fix #97</p></li>
<li><p>Correction dâ€™une erreur lors de lâ€™enregistrement de la saisie invertÃ©brÃ©s - Fix #104</p></li>
<li><p>Correction dâ€™une erreur de redirection si on choisit Â«Â QuitterÂ Â» aprÃ¨s la saisie de lâ€™enregistrement (contact faune, mortalitÃ© et invertÃ©brÃ©s) - Fix #102</p></li>
<li><p>Correction du trigger <code class="docutils literal notranslate"><span class="pre">contactfaune.synthese_update_cor_role_fiche_cf()</span></code> - Fix #95</p></li>
<li><p>Correction dâ€™un bug dans les listes dÃ©roulantes des taxons filtrÃ©e par classe qui nâ€™affichaient rien - Fix #109</p></li>
<li><p>Correction dâ€™un bug sur le contenu des exports shape avec le critÃ¨re de protection activÃ© - Fix #114</p></li>
<li><p>Correction et adaptation faune-flore des exports shape</p></li>
<li><p>SYNTHESE - Correction de la liste des taxons sans nom franÃ§ais - Fix #116</p></li>
<li><p>Corrections CSS sur la page dâ€™accueil - Fix #115</p></li>
<li><p>Correction sur la largeur de la liste des rÃ©sultats de la synthÃ¨se - Fix #110</p></li>
<li><p>Correction des doublons dans la recherche multi-taxons - Fix #101</p></li>
<li><p>Autres corrections mineures</p></li>
</ul>
</section>
<section id="id40">
<h2>1.5.0 (2015-11-26)<a class="headerlink" href="#id40" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Pour les changements dans la base de donnÃ©es vous pouvez exÃ©cuter le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.4to1.5.sql</span></code></p></li>
<li><p>Le bandeau de la page dâ€™accueil <code class="docutils literal notranslate"><span class="pre">web/images/bandeau_faune.jpg</span></code> a Ã©tÃ© renommÃ© en <code class="docutils literal notranslate"><span class="pre">bandeau_geonature.jpg</span></code>. Renommez le votre si vous aviez personnalisÃ© ce bandeau.</p></li>
<li><p>Si vous souhaitez dÃ©sactiver certains programmes dans le Â«Â Comment ?Â Â» de la synthÃ¨se vous devez utiliser le champs <code class="docutils literal notranslate"><span class="pre">actif</span></code> de la table <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code>.</p></li>
<li><p>ComplÃ©ter si nÃ©cessaire les champs <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">picto</span></code>, <code class="docutils literal notranslate"><span class="pre">groupe</span></code> et <code class="docutils literal notranslate"><span class="pre">actif</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code>.</p></li>
<li><p>Nouvelle rÃ©partition des paramÃ¨tres de configuration javascript en 2 fichiers (<code class="docutils literal notranslate"><span class="pre">config.js</span></code> et <code class="docutils literal notranslate"><span class="pre">configmap.js</span></code>). Vous devez reprendre vos paramÃ¨tres de configuration du fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> et les ventiler dans ces deux fichiers.</p></li>
<li><p>Ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code>;</p></li>
<li><p>Retirer le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">fuseauUTM;</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code>;</p></li>
<li><p>Bien dÃ©finir le systÃ¨me de coordonnÃ©es Ã  utiliser pour les pointages par coordonnÃ©es fournies en renseignant le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">gps_user_projection</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">web/js/configmap.js</span></code>;</p></li>
<li><p>Ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p></li>
<li><p>Ajouter le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$srid_ol_map</span> <span class="pre">=</span> <span class="pre">3857;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p></li>
<li><p>Lâ€™altitude est calculÃ©e automatiquement Ã  partir du service Â«Â AlticodageÂ Â» de lâ€™API GeoPortail de lâ€™IGN et non pluas Ã  partir de la couche <code class="docutils literal notranslate"><span class="pre">layers.l_isolines20</span></code>. Ajoutez ce service dans votre contrat API Geoportail. Il nâ€™est donc plus nÃ©cessaire de remplir la couche <code class="docutils literal notranslate"><span class="pre">layers.l_isolines20</span></code>. Cette couche peut toutefois encore Ãªtre utile si lâ€™utilisateur supprime lâ€™altitude calculÃ©e par lâ€™API Geoportail dans les formulaires de saisie.</p></li>
<li><p>Le loup et le lynx sont retirÃ©s par dÃ©faut de la saisie (saisie recommandÃ©e dans le protocole national du rÃ©seau grands prÃ©dateurs)</p></li>
<li><p>Le cerf, chamois et le bouquetin doivent Ãªtre saisis selon 6 critÃ¨res de sexe et age et non 5 comme les autres taxons. Comportement peut-Ãªtre changÃ© en modifiant la vue <code class="docutils literal notranslate"><span class="pre">contactfaune.v_nomade_taxons_faune</span></code>.</p></li>
<li><p>MortailitÃ© est dÃ©sormais une source Ã  part entiÃ¨re alors quâ€™elles Ã©taient mÃ©langÃ©es avec la source ContactFaune prÃ©cÃ©demment. Si vous avez dÃ©jÃ  des donnÃ©es de mortalitÃ© enregistrÃ©es, vous devez adapter la requÃªte SQL ci-dessous avec votre <code class="docutils literal notranslate"><span class="pre">id_source</span></code> pour MortalitÃ© et lâ€™exÃ©cuter :</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">synthese</span><span class="o">.</span><span class="n">syntheseff</span> <span class="n">SET</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">WHERE</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">AND</span> <span class="n">id_critere_synthese</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Optimisation des vues aux chargement des listes de taxons. Fixes #64</p></li>
<li><p>GÃ©nÃ©ricitÃ© des champs dans <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code> (champs <code class="docutils literal notranslate"><span class="pre">sitpn</span></code> renommÃ© en <code class="docutils literal notranslate"><span class="pre">public</span></code>). Fixes #68</p></li>
<li><p>Ajout dâ€™un champ <code class="docutils literal notranslate"><span class="pre">actif</span></code> Ã  la table <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code> permettant de masquer certains programmes dans le Â«Â Comment ?Â Â» de la synthÃ¨se. Fixes #66</p></li>
<li><p>Ajout dâ€™un champ <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">picto</span></code>, <code class="docutils literal notranslate"><span class="pre">groupe</span></code> et <code class="docutils literal notranslate"><span class="pre">actif</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code> pour gÃ©nÃ©rer la page dâ€™accueil dynamiquement et de maniÃ¨re gÃ©nÃ©rique. Fixes #69</p></li>
<li><p>Construire dynamiquement la liste des liens vers la saisie des diffÃ©rents protocoles Ã  partir de la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code>. Fixes #69</p></li>
<li><p>Tous les styles des Ã©lÃ©ments de la page dâ€™accueil ont Ã©tÃ© passÃ©s en CSS. Fixes #57</p></li>
<li><p>AmÃ©lioration de lâ€™interface pendant le chargement des diffÃ©rentes applications (synthÃ¨se, flore station, formualires de saisieâ€¦). Fixes #65</p></li>
<li><p>Recentrage sur la position de lâ€™utilisation en utilisant le protocole de gÃ©olocalisation intÃ©grÃ© au navigateur de lâ€™utilisateur. Fixes #65</p></li>
<li><p>Un message automatique conseille les utilisateurs dâ€™Internet Explorer de plutÃ´t utiliser Firefox ou Chrome. Fixes #65</p></li>
<li><p>Tri par dÃ©faut par date dÃ©croissante des 50 derniÃ¨res observations affichÃ©es Ã  lâ€™ouverture de la SynthÃ¨se. Fixes #51</p></li>
<li><p>Vocabulaire. Â«Â Dessiner un pointÂ Â» remplacÃ© par Â«Â Localiser lâ€™observationÂ Â». Fixes #66</p></li>
<li><p>Mise Ã  jour des copyrights dans les pieds de page de toutes les applications.</p></li>
<li><p>Refonte du CSS du formulaire de login avec bootstrap et une image de fond diffÃ©rente.</p></li>
<li><p>Refonte Bootstrap de la page dâ€™accueil.</p></li>
<li><p>HomogÃ©nÃ©isation du pied de page.</p></li>
<li><p>FloreStation et Bryophytes - HomogÃ©nÃ©iser interaction carte liste - ajout dâ€™un popup au survol. Fixes #74</p></li>
<li><p>Suppression dâ€™images non utilisÃ©es dans le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">web/images</span></code>.</p></li>
<li><p>Mise en cohÃ©rence des vues taxonomiques faune. Fixes #81</p></li>
<li><p>Calcul de lâ€™altitude Ã  partir du service Â«Â AlticodageÂ Â» de lâ€™API GeoPortail de lâ€™IGN.</p></li>
<li><p>Factorisation et gÃ©nÃ©ralisation du module permettant un positionnement des pointages par saisie de coordonnÃ©es selon projection et bbox fournies en paramÃ¨tres de config.</p></li>
<li><p>CrÃ©ation dâ€™une configuration javascript carto dÃ©diÃ©e (<code class="docutils literal notranslate"><span class="pre">configmap.js</span></code>).</p></li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Correction des problÃ¨mes de saisie de la version 1.4.0 liÃ©s Ã  la migration de la taxonomie.</p></li>
<li><p>Correction de bugs dans Flore Station et Bryophytes (Zoom, recherche</p></li>
</ul>
</section>
<section id="id41">
<h2>1.4.0 (2015-10-16)<a class="headerlink" href="#id41" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>La gestion de la taxonomie a Ã©tÃ© mis en conformitÃ© avec le schÃ©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> de la base de donnÃ©es de TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>). Ainsi le schÃ©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> intÃ©grÃ© Ã  GeoNature 1.3.0 doit Ãªtre globalement revu. Lâ€™ensemble des modifications peuvent Ãªtre rÃ©alisÃ©es en Ã©xecutant la partie correspondante dans le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.3to1.4.sql</span></code> (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.3to1.4.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.3to1.4.sql</a>).</p></li>
<li><p>De nouveaux paramÃ¨tres ont potentiellement Ã©tÃ© ajoutÃ©s Ã  lâ€™application. AprÃ¨s avoir rÃ©cupÃ©rÃ© le fichier de configuration de votre version 1.3.0, vÃ©rifiez les changements Ã©ventuels des diffÃ©rents fichiers de configuration.</p></li>
<li><p>Modification du nom de lâ€™host host hÃ©bergeant la base de donnÃ©es. databases â€“&gt; geonatdbhost. A changer ou ajouter dans le <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code> si vous avez dÃ©jÃ  installÃ© GeoNature.</p></li>
<li><p>Suivez la procÃ©dure de mise Ã  jour : <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p></li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>A lâ€™installation initiale, chargement en base des zones Ã  statuts juridiques pour toute la France mÃ©tropolitaine Ã  partir des sources de lâ€™INPN</p></li>
<li><p>A lâ€™installation initiale, chargement en base de toutes les communes de France</p></li>
<li><p>Mise en place de la compatibilitÃ© de la base avec le schema de TaxHub</p></li>
</ul>
</section>
<section id="id42">
<h2>1.3.0 (2015-02-11)<a class="headerlink" href="#id42" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>PrÃ©-Version de GeoNature - Faune ET Flore. Le fonctionnement de lâ€™ensemble nâ€™a pas Ã©tÃ© totalement testÃ©, des bugs sont identifiÃ©s, dâ€™autres subsistent certainement.</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Grosse Ã©volution de la base de donnÃ©es</p></li>
<li><p>Ajout de deux applications de saisie flore (flore station et bryophytes)</p></li>
<li><p>IntÃ©gration de la flore en sythese</p></li>
<li><p>Ajouter un id_lot, id_organisme, id_protocole dans toutes les tables pour que ces id soit ajoutÃ©s vers la synthese en trigger depuis les tables et pas avec des valeurs en dur dans les triggers. Ceci permet dâ€™utiliser les paramÃ¨tres de conf de GeoNature</p></li>
<li><p>Ajout dâ€™une fonction Ã  la base pour correction du dysfonctionnement du wms avec mapserver</p></li>
<li><p>Suppression du champ id_taxon en synthese et lien direct de la synthese avecle taxref. ceci permet dâ€™ajouter des donnÃ©es en synthese directement dans la base sans ajouter tous les taxons manquants dans la table bib_taxons</p></li>
<li><p>Suppression de la notion de coeur dans les critÃ¨re de recherche en synthese</p></li>
<li><p>Ajout dâ€™un filtre faune flore fonge dans la synthese</p></li>
<li><p>Ajout de lâ€™embranchement et du regne dans les exports</p></li>
<li><p>Permettre Ã  des partenaires de saisir mais dâ€™exporter uniquement leurs donnÃ©es perso</p></li>
<li><p>Ajout du dÃ©terminateur dans les formulaires invertÃ©brÃ©s et contactfaune + en synthese</p></li>
<li><p>Ajout du rÃ©fÃ©rentiel gÃ©ographique de toutes les communes de France mÃ©tropolitaine</p></li>
<li><p>Ajout des zones Ã  statuts juridiques de la rÃ©gion sud-est (national Ã  venir)</p></li>
<li><p>Bugs fix</p></li>
</ul>
<p><strong>BUG Ã  identifier</strong></p>
<p>Installation :</p>
<ul class="simple">
<li><p>corriger lâ€™insertion de donnÃ©es flore station qui ne fonctionne pas</p></li>
</ul>
<p>Bryophythes :</p>
<ul class="simple">
<li><p>Corriger la recherche avancÃ©e par date sans annÃ©es</p></li>
</ul>
<p>SynthÃ¨se :</p>
<ul class="simple">
<li><p>la construction de lâ€™arbre pour choisir plusieurs taxons ne tient pas compte des filtres</p></li>
<li><p>le fonctionnement des unitÃ©s geographiques nâ€™a pas Ã©tÃ© testÃ© (initialement conÃ§u uniquement pour la faune)</p></li>
</ul>
</section>
<section id="id43">
<h2>1.2.0 (2015-02-11)<a class="headerlink" href="#id43" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>Version stabilisÃ©e de GeoNature - Faune uniquement (SynthÃ¨se Faune + Saisie ContactFauneVertebre, ContactFauneInvertebre et MortalitÃ©).</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Modification du nom de lâ€™application de FF-synthese en GeoNature</p></li>
<li><p>Changement du nom des utilisateurs PostgreSQL</p></li>
<li><p>Changement du nom de la base de donnÃ©es</p></li>
<li><p>Mise Ã  jour de la documentation (<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a>)</p></li>
<li><p>Automatisation de lâ€™installation de la BDD</p></li>
<li><p>Renommer les tables pour plus de gÃ©nÃ©ricitÃ©</p></li>
<li><p>Supprimer les tables inutiles ou trop spÃ©cifiques</p></li>
<li><p>Gestion des utilisateurs externalisÃ©e et centralisÃ©e avec UsersHub (<a class="reference external" href="https://github.com/PnX-SI/UsersHub">https://github.com/PnX-SI/UsersHub</a>)</p></li>
<li><p>Correction de bugs</p></li>
<li><p>PrÃ©paration de lâ€™intÃ©gration de la Flore pour passer de GeoNature Faune Ã  GeoNature Faune-Flore</p></li>
</ul>
</section>
<section id="id44">
<h2>1.1.0 (2014-12-11)<a class="headerlink" href="#id44" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Modification du schÃ©ma de la base pour Ãªtre compatible taxref v7</p></li>
<li><p>Import automatisÃ© de taxref v7</p></li>
<li><p>Suppression des tables de hiÃ©rarchie taxonomique (famille, ordre, â€¦) afin de simplifier lâ€™utilisation de la taxonomie.</p></li>
<li><p>CrÃ©ation de la notion de groupe (para-taxonomique) Ã  la place de lâ€™utilisation des classes.</p></li>
<li><p>Ajout de donnÃ©es pour pouvoir tester de faÃ§on complÃ¨te lâ€™application (invertÃ©brÃ©s, vertÃ©brÃ©s)</p></li>
<li><p>Ajout de donnÃ©es exemples</p></li>
<li><p>Bugs fix</p></li>
</ul>
</section>
<section id="id45">
<h2>1.0.0 (2014-12-10)<a class="headerlink" href="#id45" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<p>Version fonctionnelle des applications : visualisation de la synthÃ¨se faune, saisie dâ€™une donnÃ©e de contact (vertÃ©brÃ©s, invertÃ©brÃ©s, mortalitÃ©)</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Documentation de lâ€™installation dâ€™un serveur Debian wheezy pas Ã  pas</p></li>
<li><p>Documentation de la mise en place de la base de donnÃ©es</p></li>
<li><p>Documentation de la mise en place de lâ€™application et de son paramÃ©trage</p></li>
<li><p>Script dâ€™insertion dâ€™un jeu de donnÃ©es test</p></li>
<li><p>Passage Ã  PostGIS v2</p></li>
<li><p>Mise en paramÃ¨tre de la notion de lot, protocole et source</p></li>
</ul>
<p><strong>Prochaines Ã©volutions</strong></p>
<ul class="simple">
<li><p>Script dâ€™import de taxref v7</p></li>
<li><p>Utilisation prÃ©fÃ©rentielle de la taxonomie de taxref plutÃ´t que les tables de hiÃ©rarchie taxonomique</p></li>
</ul>
</section>
<section id="id46">
<h2>0.1.0 (2014-12-01)<a class="headerlink" href="#id46" title="Lien permanent vers cette rubrique">ïƒ</a></h2>
<ul class="simple">
<li><p>CrÃ©ation du projet et de la documentation</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="authors.html" class="btn btn-neutral float-left" title="AUTEURS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> PrÃ©cÃ©dent</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2019, PnE, PnC.</p>
  </div>

  CompilÃ© avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thÃ¨me</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>