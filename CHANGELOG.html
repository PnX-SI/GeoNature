<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHANGELOG &mdash; Documentation GeoNature 2.0</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="prev" title="AUTEURS" href="authors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html" class="icon icon-home"> GeoNature
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">INSTALLATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-1.html">IMPORT NIVEAU 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-2.html">IMPORT NIVEAU 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions-compatibility.html">COMPATIBILITE</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CHANGELOG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#alouatta-macconnelli-2022-11-02">2.10.0 - Alouatta macconnelli (2022-11-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.9.2 (2022-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.9.1 (2022-01-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actias-luna-2022-01-13">2.9.0 - Actias luna (2022-01-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2.8.1 (2021-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vaccinium-myrtillus-2021-10-18">2.8.0 - Vaccinium myrtillus (2021-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.7.5 (2021-07-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.7.4 (2021-07-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.7.3 (2021-07-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">2.7.2 (2021-07-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">2.7.1 (2021-07-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#androsace-delphinensis-2021-06-30">2.7.0 - Androsace delphinensis (2021-06-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.6.2 (2021-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">2.6.1 (2021-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saxifraga-2021-02-04">2.6.0 - Saxifraga (2021-02-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">2.5.5 (2020-11-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">2.5.4 (2020-11-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">2.5.3 (2020-11-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">2.5.2 (2020-10-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">2.5.1 (2020-10-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manidae-2020-09-30">2.5.0 - Manidae (2020-09-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">2.4.1 (2020-06-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">2.3.2 (2020-02-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id18">2.3.1 (2020-02-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de No√´l (2019-12-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">2.2.1 (2019-10-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">2.1.2 (2019-07-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">2.1.1 (2019-07-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id22">2.0.1 (2019-03-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id23">1.9.1 (2018-05-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id24">1.9.0 (2017-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id25">1.8.4 (2017-04-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id26">1.8.3 (2017-02-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id27">1.8.2 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id28">1.8.1 (2017-01-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id29">1.8.0 (2016-12-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id30">1.7.4 (2016-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id31">1.7.3 (2016-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id32">1.7.2 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id33">1.7.1 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id34">1.7.0 (2016-04-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id35">1.6.0 (2016-01-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id36">1.5.0 (2015-11-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id37">1.4.0 (2015-10-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id38">1.3.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id39">1.2.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id40">1.1.0 (2014-12-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id41">1.0.0 (2014-12-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id42">0.1.0 (2014-12-01)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>CHANGELOG</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/CHANGELOG.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h1>
<section id="alouatta-macconnelli-2022-11-02">
<h2>2.10.0 - Alouatta macconnelli (2022-11-02)<a class="headerlink" href="#alouatta-macconnelli-2022-11-02" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><strong>Angular 12, tests automatis√©s frontend et backend</strong></p></li>
<li><p><strong>Discussions, signalement, partage, √©pinglage d‚Äôune occurrence</strong></p></li>
</ul>
<p>‚ö†Ô∏è Passage de la version 7 √† 12 d‚ÄôAngular. Avant de mettre √† jour GeoNature sur cette version, v√©rifiez que les modules que vous utilisez sont disponibles dans une version compatible avec GeoNature 2.10.0 ou plus (compatibilit√© Angular 12).</p>
<p>Modules compatibles √† date de la publication de la version 2.10 de GeoNature :</p>
<ul class="simple">
<li><p>Import</p></li>
<li><p>Export</p></li>
<li><p>Dashboard</p></li>
<li><p>Monitoring</p></li>
</ul>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibiliter de dupliquer le module Occtax (#621)</p></li>
<li><p>Mise √† jour d‚ÄôAngular de la version 7 √† 12 et des d√©pendances javascript li√©es (#1547)</p></li>
<li><p>Mise en place de tests automatis√©s frontend avec Cypress, simulant les actions de l‚Äôutilisateur et v√©rifiant la conformit√© des r√©sultats dans les modules Occtax, Synth√®se et M√©tadonn√©es</p></li>
<li><p>Renforcement et nettoyage des tests automatis√©s backend (augmentation de la couverture de code de 49,8% √† 63,1%)</p></li>
<li><p>Documentation de l‚Äôutilisation et de la mise en place des tests automatis√©s backend et frontend (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/writing_tests.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/writing_tests.rst</a> et <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/writing_tests_frontend.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/writing_tests_frontend.rst</a>)</p></li>
<li><p>Simplification du CRUVED minimum pour acc√©der √† GeoNature, ne n√©cessitant plus d‚Äôavoir obligatoirement un CRUVED d√©fini au niveau global de GeoNature (#1622)</p></li>
<li><p>[M√©tadonn√©es] Remplacement de la liste des imports par la liste des sources dans la fiche des JDD (#1249)</p></li>
<li><p>[M√©tadonn√©es] Lister les cadres d‚Äôacquisition par ordre alphab√©tique</p></li>
<li><p>[Admin] Am√©lioration de l‚Äôinterface (#2101)</p></li>
<li><p>Am√©lioration des fiches des observations dans les modules Synth√®se et Validation (#1474)</p></li>
<li><p>Ajout d‚Äôun permalien sur les fiches des observations dans les modules Synth√®se et Validation (#1727)</p></li>
<li><p>Signaler une occurrence et param√®tre <code class="docutils literal notranslate"><span class="pre">ALERT_MODULES</span></code> associ√© (#1750)</p></li>
<li><p>Epingler une occurrence et son param√®tre <code class="docutils literal notranslate"><span class="pre">PIN_MODULES</span></code> associ√© (#1819)</p></li>
<li><p>Discussions sur une occurrence et ses param√®tres <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MODULES</span></code> et <code class="docutils literal notranslate"><span class="pre">DICUSSION_MAX_LENGTH</span></code> associ√©s (#1731)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">status</span></code> permettant de lister les migrations Alembic, leurs d√©pendances et identifier celles qui ont √©t√© appliqu√©es ou non (#1574)</p></li>
<li><p>Ajout d‚Äôun worker Celery pour l‚Äôex√©cution de t√¢ches asynchrones</p></li>
<li><p>D√©placement du fichier de log GeoNature : <code class="docutils literal notranslate"><span class="pre">/var/log/geonature/geonature.log</span></code>.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.cor_sensitivity_synthese</span></code> et des triggers associ√©s (#1710)</p></li>
<li><p>Suppression du param√®tre <code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code> permettant d‚Äôajouter le filtre sur l‚Äôobservers_txt en ILIKE sur les port√©e 1 et 2 du CRUVED</p></li>
<li><p>Documentation : Ajout d‚Äôexemples de configuration pour utiliser les fonds IGN (#1703)</p></li>
<li><p>Documentation : Compl√©ment de la documentation sur les calculs de la sensibilit√©</p></li>
<li><p>Suppression du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code>. Le SRID local est fourni √† l‚Äôinstallation, puis auto-d√©tect√© depuis la base de donn√©es √† l‚Äôusage.</p></li>
<li><p>Suppression du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code>.</p></li>
<li><p>[Occtax] R√©vision du style des fiches d‚Äôinformation des relev√©s (#1876)</p></li>
<li><p>[Occtax] Ajout des valeurs par d√©faut directement dans la base de donn√©es (#1857)</p></li>
<li><p>[Monitoring] Ajout d‚Äôun trigger calculant automatiquement l‚Äôaltitude des sites</p></li>
<li><p>[Profils] Ajout des param√®tres <code class="docutils literal notranslate"><span class="pre">default_spatial_precision</span></code>, <code class="docutils literal notranslate"><span class="pre">default_temporal_precision_days</span></code> et <code class="docutils literal notranslate"><span class="pre">default_active_life_stage</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.t_parameters</span></code>, rempla√ßant les valeurs par d√©faut d√©finies au niveau du r√®gne dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.cor_taxons_parameters</span></code></p></li>
<li><p>Ajout d‚Äôune couche d‚Äôobjets lin√©aires dans le r√©f√©rentiel g√©ographique (<a class="reference external" href="https://github.com/PnX-SI/RefGeo/pull/4">https://github.com/PnX-SI/RefGeo/pull/4</a>)</p></li>
<li><p>Installation de la version 15 de Taxref par d√©faut lors des nouvelles installations</p></li>
<li><p>Possibilit√© de limiter la recherche de lieux √† un ou plusieurs pays avec le param√®tre <code class="docutils literal notranslate"><span class="pre">OSM_RESTRICT_COUNTRY_CODES</span></code> (#2010)</p></li>
<li><p>On ne peut pas fermer un cadre d‚Äôacquisition qui ne contient que des jeux de donn√©es sans donn√©es</p></li>
<li><p>Rechargement (<code class="docutils literal notranslate"><span class="pre">reload</span></code>) automatique de GeoNature quand on modifie la configuration de GeoNature (#2045)</p></li>
<li><p>Red√©marrage (<code class="docutils literal notranslate"><span class="pre">restart</span></code>) automatique du worker Celery lors du red√©marrage de GeoNature (#2045)</p></li>
<li><p>Synth√®se : ajout d‚Äôun message lors du chargement des donn√©es (#1637)</p></li>
<li><p>Cartes : Faire remonter la g√©om√©trie de l‚Äôobjet selectionn√© dans la liste (#2036)</p></li>
<li><p>Ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code>, suite √† la suppression du param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> (#1635)</p></li>
<li><p>[Metadonn√©es] Formulaire des CA : correction de la saisie des CA parents ( #2097)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Remise en place de la rotation automatique des fichiers de logs (#1627)</p></li>
<li><p>[OCCTAX] Ajout des valeurs par d√©faut des nomenclatures au niveau de la base de donn√©es (#1857)</p></li>
<li><p>[OCCTAX] Correction d‚Äôun bug d‚Äô√©dition de g√©om√©trie non pris en compte</p></li>
<li><p>Map List: √† la selection d‚Äôune ligne dans le tableau, placement de la g√©om√©trie correspondante au dessus des autres g√©om√©tries (#2036)</p></li>
<li><p>Correction de l‚ÄôURL pour la mise √† jour des mots de passe (#1620)</p></li>
<li><p>Statistiques sur la page d‚Äôaccueil : utilisation des bonnes permissions (action R du module SYNTHESE). Les donn√©es et la carte sont masqu√©es si les permissions sont manquantes.</p></li>
<li><p>Am√©lioration du responsive de la page d‚Äôaccueil (#1682)</p></li>
<li><p>Correction de l‚Äôint√©gration des r√©gions quand GeoNature n‚Äôest pas install√© avec la projection 2154 (#1695)</p></li>
<li><p>[Occtax] Correction de l‚Äôaffichage de la liste tronqu√©e des habitats (#1701)</p></li>
<li><p>Correction du style des tooltips (#1775)</p></li>
<li><p>[Validation] Correction du filtre par observations disposant d‚Äôun m√©dia (#1757)</p></li>
<li><p>[Validation] Chargement des observations ayant un UUID uniquement</p></li>
<li><p>[Synth√®se] Am√©lioration de la liste dans la recherche des taxons (#1803)</p></li>
<li><p>Correction des URL et redirection de renouvellement du mot de passe (#1810 / #1620)</p></li>
<li><p>Correction du CSS du bloc introduction de la page d‚Äôaccueil (#1824)</p></li>
<li><p>Suppression de l‚Äôacc√®s √† la gestion du compte pour l‚Äôutilisateur ¬´¬†public¬†¬ª (#1844)</p></li>
<li><p>R√©duction du niveau de logs de l‚Äôoutil Fiona pour am√©liorer les performances des exports en format SIG (#1875)</p></li>
<li><p>Correction de la concat√©nation des champs additionnels au niveau des triggers de Occtax vers Synth√®se et correction des donn√©es dans la Synth√®se (#1467)</p></li>
<li><p>Correction des donn√©es dans la Synth√®se suite au probl√®me d‚Äôenregistrement des d√©nombrements dans Occtax, corrig√© dans la version 2.9.0 (#1479)</p></li>
<li><p>Correction des triggers de Occtax vers Synth√®se lors de la modification de d√©nombrements multiples et correction des donn√©es dans la Synth√®se (#1821)</p></li>
<li><p>Modification du script de d√©marrage <code class="docutils literal notranslate"><span class="pre">systemd</span></code> pour lancer GeoNature et son worker Celery apr√®s PostgreSQL (#1970)</p></li>
<li><p>Correction de l‚Äôinstallation de psycopg2 (#1994)</p></li>
<li><p>Correction de la route de r√©cup√©ration des jeux de donn√©es quand on lui passe plusieurs filtres</p></li>
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code> en cas de valeurs nulles</p></li>
<li><p>[OCCTAX] Correction d‚Äôun bug d‚Äô√©dition de g√©om√©trie non pris en compte (#2023)</p></li>
<li><p>[OCCTAX] Correction de l‚Äôaffichage des dates en utilisant l‚ÄôUTC pour √©viter les soucis de fuseaux horaires diff√©rents entre le serveur et le navigateur de l‚Äôutilisateur (#2005)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Mise √† jour des d√©pendances backend et frontend</p></li>
<li><p>Mise √† jour de Flask version 1.1 √† 2.2</p></li>
<li><p>Routage dynamique des modules, supprimant la n√©cessit√© de g√©n√©rer le fichier de routage du frontend (#2059)</p></li>
<li><p>Ajout de Celery pour les traitements asynchrones</p></li>
<li><p>Possibilit√© de configurer GeoNature avec un fichier python en d√©finissant le nom du module dans la variable d‚Äôenvironnement <code class="docutils literal notranslate"><span class="pre">GEONATURE_SETTINGS</span></code></p></li>
<li><p>Utilisation de la pagination fournit par Flask-SQLAlchemy pour <code class="docutils literal notranslate"><span class="pre">get_color_taxon()</span></code></p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_exports.t_config_export</span></code> et du sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_exports</span></code> cr√©√©s par GeoNature (si le module Export n‚Äôest pas d√©j√† install√©) (#1642)</p></li>
<li><p>Suppression des commandes GeoNature <code class="docutils literal notranslate"><span class="pre">dev-front</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend-build</span></code> (#1800, #2088) :</p></li>
<li><p>R√©tablissement de l‚Äôutilisation de <code class="docutils literal notranslate"><span class="pre">nvm</span></code> pour installer NodeJS (#1726)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">default-config</span></code></p></li>
<li><p>Externalisation du <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>, de son sch√©ma de donn√©es et de ses mod√®les en tant que module ind√©pendant dans un d√©p√¥t d√©di√© (#228)</p></li>
<li><p>Int√©gration des r√©gions par d√©faut lors de l‚Äôinstallation de GeoNature</p></li>
<li><p>Am√©lioration des composants frontend DynamicForm</p></li>
<li><p>Possibilit√© de filtrer le composant frontend ¬´¬†nomenclature¬†¬ª par r√®gne ou Goup2INPN</p></li>
<li><p>Am√©lioration du style des tooltips (#1717)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">refresh-rules-cache</span></code> pour rafraichir la vue mat√©rialis√© <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules_cd_ref</span></code> (√† lancer √† chaque modification de r√®gles dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules</span></code>)</p></li>
<li><p>La configuration du module n‚Äôest pas √©cras√©e lors d‚Äôune r√©installation de ce dernier</p></li>
<li><p>Suppression de la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_decode_nomenclatures</span></code></p></li>
<li><p>G√©n√©ration automatique de la documentation quand on publie une nouvelle version</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">ref_geo</span> <span class="pre">info</span></code> qui compte le nombre de zonages par type</p></li>
<li><p>Suppression des d√©pendances ¬´¬†geog¬†¬ª et ¬´¬†numpy¬†¬ª en utilisation la fonction PostGIS <code class="docutils literal notranslate"><span class="pre">ST_DWithin</span></code> pour la recherche par cercle (#1972)</p></li>
<li><p>La variable d‚Äôenvironnement <code class="docutils literal notranslate"><span class="pre">DATA_DIRECTORY</span></code> permet de d√©finir un dossier pour la mise en cache et r√©utilisation des ressources t√©l√©charg√©es lors de la cr√©ation de la base de donn√©es</p></li>
<li><p>Chargement de la configuration des modules packag√©s directement lors de l‚Äôimport du module <code class="docutils literal notranslate"><span class="pre">config</span></code> (avant m√™me l‚Äôappelle √† <code class="docutils literal notranslate"><span class="pre">create_app</span></code>) (#2055)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p><strong>Avant</strong> de mettre √† jour GeoNature :</p>
<ul>
<li><p>Mettre √† jour les TaxHub (1.10.4) et UsersHub (2.3.1), sans la partie migration de la base de donn√©es avec Alembic (elle sera faite lors de la mise √† jour de GeoNature)</p></li>
<li><p>Mettre √† jour les modules compatibles avec GeoNature 2.10, sans lancer le rebuild du Frontend (cela sera fait lors de la mise √† jour de GeoNature)</p></li>
<li><p>Si vous avez des modules sp√©cifiques, mettez √† jour Angular de la version 7 √† 12 (<a class="reference external" href="https://update.angular.io/?v=7.2-12.0">https://update.angular.io/?v=7.2-12.0</a>)</p></li>
<li><p>Archiver les anciens fichiers de log <code class="docutils literal notranslate"><span class="pre">/var/log/geonature.log*</span></code>. Les nouveaux fichiers de logs seront plac√©s dans le dossier <code class="docutils literal notranslate"><span class="pre">/var/log/geonature/</span></code>.</p></li>
<li><p>Supprimer les param√®tres de configuration qui ont disparu s‚Äôils sont pr√©sents dans votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code></p></li>
</ul>
</li>
<li><p>Installation du worker Celery : il vous faut installer le broker <code class="docutils literal notranslate"><span class="pre">redis</span></code> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sudo apt install redis</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Suivez la proc√©dure de mise √† jour classique</p></li>
</ul>
<p><strong>üìù Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;antoinececchimnhn / &#64;TheoLechemia / &#64;jpm-cbna / &#64;mvergez / &#64;ophdlv / &#64;Adrien-Pajot / &#64;Gaetanbrl / &#64;pierrejego / &#64;jbrieuclp / &#64;amandine-sahl / &#64;joelclems / &#64;metourneau / &#64;gildeluermoz / &#64;camillemonchicourt</p>
</section>
<section id="id1">
<h2>2.9.2 (2022-02-15)<a class="headerlink" href="#id1" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Optimisation du nombre d‚Äôinformations renvoy√©es par l‚ÄôAPI pour les utilisateurs et les organismes</p></li>
<li><p>Ajout d‚Äôune commande pour relancer le calcul de la sensibilit√©, utile en cas de modification du r√©f√©rentiel de sensibilit√© : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">update-synthese</span></code>. Elle s‚Äôappuie sur la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code>.</p></li>
<li><p>Le niveau de diffusion dans la synth√®se n‚Äôest plus calcul√© automatiquement √† partir du niveau de sensibilit√© (#1711)</p></li>
<li><p>Le niveau de sensibilit√© tient compte du comportement de l‚Äôoccurrence (<code class="docutils literal notranslate"><span class="pre">OCC_COMPORTEMENT</span></code>), en plus du statut biologique (<code class="docutils literal notranslate"><span class="pre">STATUT_BIO</span></code>)</p></li>
<li><p>Optimisation du recalcul de la sensibilit√© lors de la mise √† jour de la synth√®se (trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>)</p></li>
<li><p>Ajout de tests unitaires sur les fonctions de calcul de la sensibilit√©</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôune r√©gression sur la r√©cup√©ration de la liste des taxons (#1672)</p></li>
<li><p>Correction de l‚Äôauthentification au CAS de l‚ÄôINPN</p></li>
<li><p>Correction du calcul de la sensibilit√© (#1284) :</p>
<ul>
<li><p>Gestion correcte de la pr√©sence de plusieurs r√®gles avec et sans crit√®re statut biologique</p></li>
<li><p>Utilisation de la r√®gle la plus sensible quand plusieurs r√®gles s‚Äôappliquent</p></li>
</ul>
</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>La correction de la fonction de calcul de la sensibilit√© est suivie d‚Äôun recalcul automatique du niveau de sensibilit√© des donn√©es pr√©sentes dans la synth√®se. Si vous ne souhaitez pas proc√©der √† ce recalcul, ajoutez le param√®tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">recompute-sensitivity=false</span></code> lors de la mise √† jour de la base de donn√©es avec la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code> (lanc√©e automatiquement par le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x recompute-sensitivity=false
</pre></div>
</div>
</li>
<li><p>Le niveau de diffusion des donn√©es dans la synth√®se est remis √† <code class="docutils literal notranslate"><span class="pre">NULL</span></code> si celui-ci √©quivaut au niveau de sensibilit√©. Seuls les niveaux de diffusion qui diff√©rent sont laiss√©s intacts. Si vous souhaitez rectifier vous-m√™mes vos niveaux de diffusion et ne pas les remettre √† <code class="docutils literal notranslate"><span class="pre">NULL</span></code> quand ils sont √©quivalents au niveau de sensibilit√©, vous pouvez ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">clear-diffusion-level=false</span></code> lors de la mise √† jour de la base de donn√©es :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x clear-diffusion-level=false
</pre></div>
</div>
<p>Si vous redescendez √† l‚Äô√©tat ant√©rieur de votre base de donn√©es, les niveaux de diffusion seront restaur√©s √† partir du niveau de sensibilit√©¬†; vous pouvez √©viter ceci avec <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">restore-diffusion-level=false</span></code>.</p>
</li>
</ul>
</section>
<section id="id2">
<h2>2.9.1 (2022-01-27)<a class="headerlink" href="#id2" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Utilisation du param√®tre <code class="docutils literal notranslate"><span class="pre">page</span></code> de Flask √† la place du param√®tre maison <code class="docutils literal notranslate"><span class="pre">offset</span></code> pour la pagination des routes (r√©tro-compatible)</p></li>
<li><p>Installation de TaxHub en version 1.9.4 (version corrective) par d√©faut</p></li>
<li><p>Ajout du param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code> (par d√©faut <code class="docutils literal notranslate"><span class="pre">GN</span></code>) (#1635)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚ÄôURL de r√©initialisation de mot passe envoy√©e par email (#1620)</p></li>
<li><p>Correction d‚Äôun probl√®me d‚Äôauthentification avec le CAS</p></li>
<li><p>Occtax : Correction des listes d√©roulantes masqu√©es dans le bloc d√©nombrement, en rajoutant un scroll</p></li>
<li><p>Correction de l‚ÄôURL de l‚ÄôAPI de TaxHub (slash final manquant) pour l‚Äôaffichage des photos sur la fiche d‚Äôun profil de taxon</p></li>
<li><p>Correction de la synchronisation des m√©tadonn√©es depuis MTD</p></li>
<li><p>Correction de la g√©n√©ration du token quand on utilise le CAS de l‚ÄôINPN pour se connecter √† GeoNature</p></li>
<li><p>Correction des permissions trop restrictives d‚Äôacc√®s aux donn√©es de la synth√®se</p></li>
<li><p>Correction de la pagination de la route <code class="docutils literal notranslate"><span class="pre">/color_taxon</span></code> en rajoutant un ordonnancement par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> et <code class="docutils literal notranslate"><span class="pre">id_area</span></code> (utilis√© par Occtax-mobile)</p></li>
<li><p>Contournement d‚Äôun probl√®me de redirection incorrecte par l‚ÄôAPI de TaxHub lorsque celui-ci est mal configur√© (#1438, #1616)</p></li>
</ul>
</section>
<section id="actias-luna-2022-01-13">
<h2>2.9.0 - Actias luna (2022-01-13)<a class="headerlink" href="#actias-luna-2022-01-13" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Profils de taxons</strong></p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Construction automatique d‚Äôune fiche d‚Äôidentit√© (profil) par taxon gr√¢ce aux observations valid√©es pr√©sentes dans la base de donn√©es (altitude min/max, distribution spatiale, date de premi√®re/derni√®re observation, nombre de donn√©es valides, ph√©nologie) (#917 par &#64;DonovanMaillard, &#64;lepontois, &#64;Adrien-Pajot, &#64;TheoLechemia, &#64;bouttier, &#64;amandine-sahl, &#64;jpm-cbna)</p>
<ul>
<li><p>Cr√©ation d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_profiles</span></code> dans la BDD contenant les tables, les vues, les fonctions et les param√®tres de calcul des profils de taxons (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql">https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql</a>) (#1103)</p></li>
<li><p>Mise en place de l‚ÄôAPI des profils de taxons (#1104)</p></li>
<li><p>Affichage des scores de chaque observation par rapport au profil du taxon dans la liste des observations du module Validation, ainsi que dans les fiches d√©tails des observations dans les modules Synth√®se et Validation (#1105)</p></li>
<li><p>Ajout de filtres des observations par score ou crit√®re des profils de taxon dans le module Validation (#1105)</p></li>
<li><p>Ajout d‚Äôune alerte de contextualisation d‚Äôune observation par rapport au profil de taxon, lors de sa saisie dans le module Occtax</p></li>
<li><p>Mise en place de param√®tres pour activer ou non les profils de taxons, param√©trer leurs r√®gles et d√©finir les statut de validation pris en compte pour le calcul des profils (¬´¬†Certain-tr√®s probable¬†¬ª et ¬´¬†Probable¬†¬ª par d√©faut)</p></li>
<li><p>Documentation des profils de taxons et de leur param√®trage (<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#profils-de-taxons">https://docs.geonature.fr/admin-manual.html#profils-de-taxons</a>)</p></li>
<li><p>Suppression de la vue mat√©rialis√©e <code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code> et de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon()</span></code> qui n‚Äô√©taient pas utilis√©es</p></li>
</ul>
</li>
<li><p>[OCCTAX] Ajout d‚Äôun bouton permettant d‚Äôannuler la modification d‚Äôun taxon (#1508 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Ajout de valeurs par d√©faut aux champs additionnels (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_additional_fields.default_value</span></code>)</p></li>
<li><p>[OCCTAX] Ajout d‚Äôun filtre avanc√© par <code class="docutils literal notranslate"><span class="pre">id_releve</span></code></p></li>
<li><p>[SYNTHESE] Ajout d‚Äôun filtre avanc√© par UUID d‚Äôobservation (#973)</p></li>
<li><p>Am√©lioration des listes d√©roulantes en passant √† la librairie <code class="docutils literal notranslate"><span class="pre">ng-select2</span></code> pour les composants multiselects (#616 par &#64;jbrieuclp)</p></li>
<li><p>Gestion du r√©f√©rentiel des r√©gions par Alembic (#1475)</p></li>
<li><p>Ajout des anciennes r√©gions (1970-2016), inactives par d√©faut, mais utiles pour les r√®gles r√©gionales de sensibilit√©</p></li>
<li><p>Gestion du r√©f√©rentiel de sensibilit√© (r√®gles nationales et r√©gionales) par Alembic (#1576)</p></li>
<li><p>Ajout d‚Äôune documentation sur le calcul de la sensibilit√© des observations (<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite">https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite</a>, par &#64;mvergez)</p></li>
<li><p>[SYNTHESE] Am√©lioration de la fen√™tre de limite d‚Äôaffichage atteinte (#1520 par &#64;jpm-cbna)</p></li>
<li><p>[OCCHAB] Utilisation de tout Habref par d√©faut si aucune liste d‚Äôhabitats n‚Äôest renseign√©e dans la configuration du module</p></li>
<li><p>[METADONNEES] Attribuer des droits √† un utilisateur sur un JDD si il a des droits sur son cadre d‚Äôacquisition</p></li>
<li><p>Association automatique et param√©trable des jeux de donn√©es personnels auto-g√©n√©r√©s √† des modules (Occtax par d√©faut) (#1555)</p></li>
<li><p>Utilisation du C du CRUVED de l‚Äôutilisateur pour lister les jeux de donn√©es dans lesquels il peut ajouter des donn√©es dans les diff√©rents modules (et non plus le R du CRUVED sur GeoNature) (#659)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>[OCCTAX] Correction de l‚Äôenregistrement des d√©nombrements lors de l‚Äôenchainement des relev√©s (#1479 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Correction du filtre du champs ¬´¬†Habitat¬†¬ª par typologie d‚Äôhabitat</p></li>
<li><p>[ADMIN] Correction de l‚Äôaffichage du module (#1427 par &#64;jbrieuclp)</p></li>
<li><p>[ADMIN] S√©curisation du module (#839)</p></li>
<li><p>[VALIDATION] Corrections de la validation des observations (#1485 / #1529)</p></li>
<li><p>[METADONNEES] Am√©lioration des performances (#1559)</p></li>
<li><p>[METADONNEES] Correction de la suppression des JDD</p></li>
<li><p>[METADONNEES] Correction de l‚Äôexport PDF des JDD (#1544)</p></li>
<li><p>[METADONNEES] Correction des permissions (#1528)</p></li>
<li><p>[METADONNEES] Correction de la recherche avanc√©e</p></li>
<li><p>[SYNTHESE] Correction de la recherche sur les champs g√©n√©riques de type nombre entier (#1519 par &#64;jpm-cbna)</p></li>
<li><p>[SYNTHESE] Correction des permissions</p></li>
<li><p>[SYNTHESE] Correction du lien entre les filtres CA et JDD (#1530)</p></li>
<li><p>[OCCHAB] Correction du chargement de la configuration, des fiches info et de la modification d‚Äôune station</p></li>
<li><p>[METADONNEES] Am√©liorations des performances et des contr√¥les du formulaire des acteurs pour les JDD et les CA (par &#64;joelclems)</p></li>
<li><p>Correction de la redirection vers le formulaire de login en cas de cookie corrompu (#1550 par &#64;antoinececchimnhn)</p></li>
<li><p>Correction de la cr√©ation de compte utilisateur (#1527)</p></li>
<li><p>Mise √† jour du module Habref-api-module pour corrections de certaines donn√©es d‚ÄôHabref</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Migration vers la librairie <code class="docutils literal notranslate"><span class="pre">gn-select2</span></code> pour les listes d√©roulantes des formulaires (#616 / #1285 par &#64;jbrieuclp)</p></li>
<li><p>Documentation de d√©veloppement backend revue et compl√©t√©e (#1559, <a class="reference external" href="https://docs.geonature.fr/development.html#developpement-backend">https://docs.geonature.fr/development.html#developpement-backend</a>)</p></li>
<li><p>Am√©lioration de nombreuses routes et fonctions du backend</p></li>
<li><p>Ajouts de tests automatis√©s du backend</p></li>
<li><p>Mise en place d‚Äôune int√©gration continue pour ex√©cuter automatiquement les tests backend et leur couverture de code avec GitHub Actions, √† chaque commit ou pull request dans les branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code> (#1568, <a class="reference external" href="https://github.com/PnX-SI/GeoNature/actions">https://github.com/PnX-SI/GeoNature/actions</a>)</p></li>
<li><p>[VALIDATION] Suppression des vues SQL et optimisation des routes</p></li>
<li><p>G√©n√©ration automatique et al√©atoire du param√®tre <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p>[SYNTHESE] Remplacement de <code class="docutils literal notranslate"><span class="pre">as_literal</span></code> par <code class="docutils literal notranslate"><span class="pre">json.loads</span></code>, plus performant (par &#64;antoinececchimnhn)</p></li>
<li><p>Possibilit√© de filter la route <code class="docutils literal notranslate"><span class="pre">synthese/taxa_distribution</span></code> par <code class="docutils literal notranslate"><span class="pre">id_source</span></code> (#1446 par &#64;mvergez)</p></li>
<li><p>Factorisation du composant <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code> avec le composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Ajout du composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> dans dynamic-form</p></li>
<li><p>Ajout d‚Äôun input <code class="docutils literal notranslate"><span class="pre">valueFieldName</span></code> aux composants <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> et <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code>. Voir documentation (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst#pnx-municipalities">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst#pnx-municipalities</a>)</p></li>
<li><p>Mise √† jour de nombreuses d√©pendances</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>La liste des JDD dans les modules de saisie (Occtax, Occhab, Monitoring et Import) se base d√©sormais sur le C du CRUVED de l‚Äôutilisateur au niveau du module (ou du C du CRUVED de GeoNature si l‚Äôutilisateur n‚Äôa pas de CRUVED sur le module), au lieu du R de GeoNature jusqu‚Äô√† pr√©sent. Vous devrez donc potentiellement adapter vos permissions √† ce changement de comportement (#659)</p></li>
<li><p>Si vous avez surcouch√© le param√®tre de configuration <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code> de la section <code class="docutils literal notranslate"><span class="pre">[SYNTHESE]</span></code>, veuillez remplacer <code class="docutils literal notranslate"><span class="pre">id_type</span></code> par <code class="docutils literal notranslate"><span class="pre">type_code</span></code> (voir <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">id_type</span> <span class="o">=</span> <span class="mi">25</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">type_code</span> <span class="o">=</span> <span class="s2">&quot;COM&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Si vous aviez modifi√© les colonnes de la liste des observations du module Validation en adaptant la vue <code class="docutils literal notranslate"><span class="pre">gn_validation.v_synthese_validation_forwebapp</span></code>, celle-ci a √©t√© supprim√©e et il suffit d√©sormais d‚Äôindiquer les colonnes souhait√©es dans la configuration du module. Voir documentation (<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles">http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles</a>)</p></li>
<li><p>Les nouvelles fonctionnalit√©s li√©es aux profils de taxons n√©cessitent de rafraichir des vues materialis√©es √† intervalles r√©guliers et donc de cr√©er une t√¢che planfi√©e (cron). Voir documentation (<a class="reference external" href="https://docs.geonature.fr/installation.html#taches-planifiees">https://docs.geonature.fr/installation.html#taches-planifiees</a>)</p></li>
<li><p>Les r√©gions sont maintenant disponibles via des migrations Alembic. Si vous poss√©dez d√©j√† les r√©gions, vous pouvez l‚Äôindiquer √† Alembic :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo</span><span class="nd">@head</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">d02f4563bebe</span>
</pre></div>
</div>
</li>
<li><p>Le r√©f√©rentiel de sensibilit√© est d√©sormais disponible via une migration Alembic. Celui-ci n√©cessite le r√©f√©rentiel des r√©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions</span></code>), ainsi que le r√©f√©rentiel des anciennes r√©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions_1970</span></code>) ‚Äì l‚Äôinstallation de ces r√©f√©rentiels est automatique avec l‚Äôinstallation des r√®gles de sensibilit√©.</p>
<ul>
<li><p>Si vous poss√©dez d√©j√† le r√©f√©rentiel, vous pouvez l‚Äôindiquer √† Alembic :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">7</span><span class="n">dfd0a813f86</span>
</pre></div>
</div>
</li>
<li><p>Si vous avez install√© GeoNature 2.8.X, le r√©f√©rentiel de sensibilit√© n‚Äôa pas √©t√© install√© automatiquement. Vous pouvez l‚Äôinstaller manuellement :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_sensitivity_inpn</span><span class="nd">@head</span>
</pre></div>
</div>
</li>
</ul>
<p>Par d√©faut, seule les r√®gles nationales sont activ√©es, vous laissant le soin d‚Äôactiver vos r√®gles locales en base vous-m√™me. Vous pouvez √©galement demander, lors de l‚Äôinstallation du r√©f√©rentiel, √† activer (resp. d√©sactiver) toutes les r√®gles en ajout √† la commande Alembic l‚Äôoption <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=true</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=false</span></code>).</p>
</li>
<li><p>Si vous souhaitez surcoucher les param√®tres par d√©faut de Gunicorn (app_name, timeout‚Ä¶), depuis le passage √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code> dans la version 2.8.0, c‚Äôest d√©sormais √† faire dans un fichier <code class="docutils literal notranslate"><span class="pre">environ</span></code> √† la racine du dossier de votre GeoNature (#1588, <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#parametres-gunicorn">https://docs.geonature.fr/admin-manual.html#parametres-gunicorn</a>)</p></li>
<li><p>Si vous les utilisez, mettez √† jour les modules Import, Export et Monitoring dans leurs derni√®res versions compatibles avec le version 2.9.0 de GeoNature</p></li>
</ul>
</section>
<section id="id3">
<h2>2.8.1 (2021-10-17)<a class="headerlink" href="#id3" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout de l‚Äôindication du d√©partement au formulaire des communes (#1480)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">group2inpn</span></code> et <code class="docutils literal notranslate"><span class="pre">regne</span></code> au formulaire des nomenclatures (#1481)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
<li><p>Mise-√†-jour corrective de <a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.7">UsersHub-authentification-module 1.5.7</a></p></li>
</ul>
</section>
<section id="vaccinium-myrtillus-2021-10-18">
<h2>2.8.0 - Vaccinium myrtillus (2021-10-18)<a class="headerlink" href="#vaccinium-myrtillus-2021-10-18" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Gestion de la base de donn√©es avec Alembic</strong></p>
<p>‚ö†Ô∏è Avant de mettre √† jour GeoNature, v√©rifiez que les modules que vous utilisez disposent d‚Äôune version compatible avec la 2.8.0, suite au passage √† la version 3 de Marshmallow.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Support de Debian 11 / Python 3.9</p></li>
<li><p>Passage de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code></p></li>
<li><p>Gestion de la base de donn√©es et de ses √©volutions avec Alembic (#880)</p></li>
<li><p>Mise √† jour de la proc√©dure d‚Äôinstallation afin d‚Äôutiliser Alembic (#880)</p></li>
<li><p>R√©vision et r√©organisation des scripts et de la documentation d‚Äôinstallation</p></li>
<li><p>Passage √† la version 3 de Marshmallow (#1451)</p></li>
<li><p>Suppression du param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code>, celui-ci est automatiquement d√©termin√© √† partir de la base de donn√©es et du code de l‚Äôapplication</p></li>
<li><p>Ajout d‚Äôun index sur le champs <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code></p></li>
<li><p>Mise √† jour des d√©pendances</p>
<ul>
<li><p><a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub 1.9.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.6">UsersHub-authentification-module 1.5.6</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/releases/tag/1.4.4">Nomenclature-api-module 1.4.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Habref-api-module/releases/tag/0.2.0">Habref-api-module 0.2.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy/releases/tag/0.2.4">Utils-Flask-SQLAlchemy 0.2.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo/releases/tag/0.2.1">Utils-Flask-SQLAlchemy-Geo 0.2.1</a></p></li>
</ul>
</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Corrections et am√©liorations des formulaires dynamiques et des champs additionnels</p></li>
<li><p>Correction de l‚Äôenvoi d‚Äôemail lors de la r√©cup√©ration du mot de passe (#1471)</p></li>
<li><p>Occtax : Correction du focus sur le champs ¬´¬†taxon¬†¬ª quand on enchaine les taxons (#1462)</p></li>
<li><p>Occtax : Correction du formulaire de modification quand le relev√© est une ligne ou un polygone (#1461)</p></li>
<li><p>Occtax : Correction de la conservation de la date quand on enchaine les relev√©s (#1442)</p></li>
<li><p>Occtax : Correction du param√®tre d‚Äôexport des champs additionnels (#1440)</p></li>
<li><p>Synth√®se : correction de la recherche par jeu de donn√©es (#1494)</p></li>
<li><p>Correction de l‚Äôaffichage des longues listes d√©roulantes dans les champs additionnels (#1442)</p></li>
<li><p>Mise √† jour de la table <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> lors de l‚Äôajout de nouvelles zones via un trigger sur la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1433)</p></li>
<li><p>Correction de l‚Äôexport PDF des fiches de m√©tadonn√©es (#1449)</p></li>
<li><p>Jeux de donn√©es : correction de l‚Äôaffichage des imports sources</p></li>
<li><p>Correction de la configuration Apache et de la gestion par flask d‚Äôun GeoNature accessible sur un pr√©fix (e.g. <code class="docutils literal notranslate"><span class="pre">/geonature</span></code>) (#1463)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
<li><p>Correction des champs additionnels de type boutons radios (#1464 et #1472)</p></li>
<li><p>Occtax : Correction du contr√¥le des heures quand on est sur 2 mois distincts (#1468)</p></li>
<li><p>Suppression de nombreux identifiants en dur dans les scripts SQL de cr√©ation de la BDD</p></li>
<li><p>Correction du trigger d‚ÄôOcctax vers la Synth√®se pour le champs <code class="docutils literal notranslate"><span class="pre">Comportement</span></code> (#1469)</p></li>
<li><p>Correction des fonctions <code class="docutils literal notranslate"><span class="pre">get_default_nomenclature_value</span></code></p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> (#1488)</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> pour r√©cup√©rer le fichier <code class="docutils literal notranslate"><span class="pre">custom.scss</span></code> depuis son nouvel emplacement (#1430)</p></li>
<li><p>Correction du param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code></p></li>
<li><p>M√©tadonn√©es : Suppression en cascade sur les tables <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_territory</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_protocol</span></code> (#1452)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code> : rechargement des entry points apr√®s installation avec pip d‚Äôun module packag√©</p></li>
<li><p>Correction d‚Äôun bug lors de l‚Äôajout d‚Äôun cadre d‚Äôacquisition</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Mise √† jour de plusieurs d√©pendances</p></li>
<li><p>Packetage des modules fournis avec GeoNature</p></li>
<li><p>L‚Äôutilisateur connect√© est maintenant accessible via <code class="docutils literal notranslate"><span class="pre">g.current_user</span></code></p></li>
<li><p>Nettoyage et refactoring divers</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Mettre √† jour <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases/tag/2.2.1">UsersHub en version 2.2.1</a> et <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub en version 1.9.0</a> (si vous les utilisez) <strong>en sautant leur √©tape de passage √† Alembic</strong> (car la mise √† jour de GeoNature se charge d√©sormais de mettre √† jour aussi les sch√©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>)</p></li>
<li><p>Suppression de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> :</p>
<ul class="simple">
<li><p>Stopper GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">stop</span> <span class="pre">geonature2</span></code></p></li>
<li><p>Supprimer le fichier de configuration supervisor de GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code></p></li>
<li><p>Si supervisor n‚Äôest plus utilis√© par aucun service (r√©pertoire <code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/</span></code> vide), il peut √™tre d√©sinstall√© (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span> <span class="pre">supervisor</span></code>)</p></li>
</ul>
</li>
<li><p>Suivre la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Passage √† <code class="docutils literal notranslate"><span class="pre">systemd</span></code> :</p>
<ul class="simple">
<li><p>Copier le fichier <code class="docutils literal notranslate"><span class="pre">install/assets/geonature.service</span></code> dans <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code></p></li>
<li><p>√âditer <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/geonature.service</span></code> et remplacer les variables <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> (votre utilisateur linux courant) et <code class="docutils literal notranslate"><span class="pre">${BASE_DIR}</span></code> (chemin absolu du r√©pertoire de GeoNature) par les valeurs appropri√©es</p></li>
<li><p>Lancer la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code></p></li>
<li><p>Pour d√©marrer GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">geonature</span></code></p></li>
<li><p>Pour lancer GeoNature automatiquement au d√©marrage du serveur : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">geonature</span></code></p></li>
</ul>
</li>
<li><p>Correction de la configuration Apache : si vous servez GeoNature sur un pr√©fixe (typiquement <code class="docutils literal notranslate"><span class="pre">/geonature/api</span></code>), assurez vous que ce pr√©fixe figure bien √©galement √† la fin des directives <code class="docutils literal notranslate"><span class="pre">ProxyPass</span></code> et <code class="docutils literal notranslate"><span class="pre">ProxyPassReverse</span></code> comme dans l‚Äôexemple suivant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span><span class="o">&gt;</span>
    <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span>
    <span class="n">ProxyPassReverse</span>  <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">geonature</span><span class="o">/</span><span class="n">api</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Si vous servez GeoNature sur un sous-domaine, v√©rifiez ou modifier la configuration Apache :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">/</span><span class="n">api</span><span class="o">&gt;</span>
    <span class="n">ProxyPass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">api</span>
    <span class="n">ProxyPassReverse</span>  <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">api</span>
<span class="o">&lt;/</span><span class="n">Location</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Pensez √† recharger Apache si vous √™tes amen√© √† en changer la configuration : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">reload</span> <span class="pre">apache2</span></code></p>
</li>
<li><p>Passage √† Alembic :</p>
<ul class="simple">
<li><p>S‚Äôassurer d‚Äôavoir une base de donn√©es de GeoNature en version 2.7.5</p></li>
<li><p>Si vous avez UsersHub install√©, ajoutez dans votre configuration GeoNature la section suivante (en adaptant le chemin) :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ALEMBIC</span><span class="p">]</span>
<span class="n">VERSION_LOCATIONS</span> <span class="o">=</span> <span class="s1">&#39;/path/to/usershub/app/migrations/versions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Entrer dans le virtualenv afin d‚Äôavoir la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> disponible : <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">backend/venv/bin/activate</span></code></p></li>
<li><p>Ex√©cuter les commandes suivantes afin d‚Äôindiquer √† Alembic l‚Äô√©tat de votre base de donn√©es :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">f06cc80cc8ba</span>  <span class="c1"># GeoNature 2.7.5</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">0</span><span class="n">dfdbfbccd63</span>  <span class="c1"># r√©f√©rentiel g√©ographique des communes</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">3</span><span class="n">fdaa1805575</span>  <span class="c1"># r√©f√©rentiel g√©ographique des d√©partements</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mf">586613e2</span><span class="n">faeb</span>  <span class="c1"># r√©f√©rentiel g√©ographique des mailles 1√ó1</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">7</span><span class="n">d6e98441e4c</span>  <span class="c1"># r√©f√©rentiel g√©ographique des mailles 5√ó5</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="n">ede150d9afd9</span>  <span class="c1"># r√©f√©rentiel g√©ographique des mailles 10√ó10</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">stamp</span> <span class="mi">1715</span><span class="n">cf31a75d</span>  <span class="c1"># MNT de l‚ÄôIGN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si vous aviez d√©j√† intall√© certains modules, vous devez l‚Äôindiquer √† Alembic :</p>
<ul>
<li><p>Module <em>Occtax</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">f57107d2d0ad</span></code></p></li>
<li><p>Module <em>Occhab</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">2984569d5df6</span></code></p></li>
</ul>
</li>
<li><p>Mettre sa base de donn√©es √† jour avec Alembic : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
</ul>
<p>Pour plus d‚Äôinformation sur l‚Äôutilisation d‚ÄôAlembic, voir la <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#administration-avec-alembic">documentation administrateur de GeoNature</a>.</p>
</li>
</ul>
</section>
<section id="id4">
<h2>2.7.5 (2021-07-28)<a class="headerlink" href="#id4" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Compatibilit√© avec Occtax-mobile 1.3. Possibilit√© d‚Äôajouter la query string <code class="docutils literal notranslate"><span class="pre">fields</span></code> sur la route <code class="docutils literal notranslate"><span class="pre">meta/datasets</span></code> pour choisir les champs renvoy√©s par l‚ÄôAPI</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id5">
<h2>2.7.4 (2021-07-23)<a class="headerlink" href="#id5" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun import manquant entrainant un probl√®me de compilation du frontend (#1424)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id6">
<h2>2.7.3 (2021-07-22)<a class="headerlink" href="#id6" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>M√©tadonn√©es : ajout des param√®tres <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_DS</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_AF</span></code> pour limiter les r√¥les utilisables au niveau des jeux de donn√©es et des cadres d‚Äôacquisition (#1417)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">mtd_sync</span></code> qui permet de synchroniser les m√©tadonn√©es de toute une instance depuis le flux MTD du SINP</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôaffichage des jeux de donn√©es sur les fiches des cadres d‚Äôacquisition (#1410)</p></li>
<li><p>Doc : Pr√©cision des OS support√©s (Debian 10 uniquement en production)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Support des commandes Flask au niveau de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (<code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code>‚Ä¶)</p></li>
<li><p>Ajout des sous-modules en tant que d√©pendances</p></li>
<li><p>Ajout d‚Äôune commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="id7">
<h2>2.7.2 (2021-07-05)<a class="headerlink" href="#id7" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>OCCTAX : correction de la v√©rification du CRUVED (#1413)</p></li>
<li><p>OCCTAX : correction du d√©grisement du formulaire au chargement de la fonctionnalit√© ¬´¬†mes lieux¬†¬ª (#1414)</p></li>
<li><p>OCCTAX : D√©placement des champs additionnels pour les d√©nombrements avant les m√©dias (#1409)</p></li>
<li><p>Suppression des champs additionnels de type ¬´¬†taxonomy¬†¬ª qui n‚Äô√©taient pas support√©s</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql</a>)</p></li>
</ul>
</section>
<section id="id8">
<h2>2.7.1 (2021-07-02)<a class="headerlink" href="#id8" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Installation des d√©pendances javascript des modules lors de la migration de version de GeoNature (#1252)</p></li>
<li><p>Installation de la version 1.8.1 de TaxHub par d√©faut √† la place de la 1.8.0</p></li>
<li><p>Int√©gration de la documentation permettant de mettre en place l‚Äôacc√®s public √† GeoNature</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="androsace-delphinensis-2021-06-30">
<h2>2.7.0 - Androsace delphinensis (2021-06-30)<a class="headerlink" href="#androsace-delphinensis-2021-06-30" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>N√©cessite la version 1.8.x de TaxHub.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Compatible avec TaxHub 1.8.x qui inclut notamment la migration (optionnelle) vers Taxref version 14 et l‚Äôajout de la BDC statuts</p></li>
<li><p>Installation globale migr√©e de Taxref version 13 √† 14</p></li>
<li><p>Occtax : Possibilit√© d‚Äôajouter des champs additionels par JDD ou globaux au module et documentation li√©e (#1007)</p></li>
<li><p>Occtax/Synthese : Ajout des champs additionnels dans les exports (#1114)</p></li>
<li><p>Occtax/Synthese : Affichage des champs additionnels dans les fiches info</p></li>
<li><p>Customisation : possibilit√© de changer le CSS sans rebuilder l‚Äôapplication</p></li>
<li><p>Admin : Cr√©ation d‚Äôun backoffice d‚Äôadministration des champs additionels (#1007)</p></li>
<li><p>Admin : Cr√©ation d‚Äôune documentation d‚Äôadministration des champs additionnels (#1007)</p></li>
<li><p>Occtax : Possibilit√© de d√©sactiver la recherche de taxon par liste (#1315)</p></li>
<li><p>Occtax : Par d√©faut la recherche de taxon n‚Äôinterroge pas une liste mais tout Taxref, si aucune liste de taxons n‚Äôa √©t√© sp√©cifi√©e dans la configuration du module Occtax (voir notes de version) (#1315)</p></li>
<li><p>Occtax/Metadonn√©es : possibilit√© d‚Äôassocier une liste de taxons √† un JDD (impl√©ment√© uniquement dans Occtax) (#1315)</p></li>
<li><p>Occtax : Possibilit√© d‚Äôajouter les infos sur les m√©dias dans les exports (param√®tre <code class="docutils literal notranslate"><span class="pre">ADD_MEDIA_IN_EXPORT</span></code>) (#1326)</p></li>
<li><p>Occtax : Possibilit√© de param√©trer l‚Äôaffichage des champs du composant MEDIA dans OCCTAX (param√®tre <code class="docutils literal notranslate"><span class="pre">MEDIA_FIELDS_DETAILS</span></code> - #1287)</p></li>
<li><p>Occtax : Possibilit√© de filtrer la liste des habitats du formulaire avec les nouveaux param√®tres <code class="docutils literal notranslate"><span class="pre">ID_LIST_HABITAT</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_TYPO_HABITAT</span></code></p></li>
<li><p>Occtax : Possibilit√© d‚Äôouvrir le module avec un JDD pr√©-selectionn√© en passant le param√®tre <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code> dans l‚ÄôURL (#1071)</p></li>
<li><p>Accueil : R√©organisation des blocs (#1375)</p></li>
<li><p>Accueil : Ajout d‚Äôun param√®tre controlant la fr√©quence de MAJ du cache des statistiques de la page d‚Äôaccueil (<code class="docutils literal notranslate"><span class="pre">STAT_BLOC_TTL</span></code>, par d√©faut 1h: 3600 secondes) (#1320)</p></li>
<li><p>Am√©lioration des performances de r√©cup√©ration des modules et du CRUVED</p></li>
<li><p>Monitoring : Ajout d‚Äôun trigger garantissant la coh√©rence entre <code class="docutils literal notranslate"><span class="pre">date_min</span></code> et <code class="docutils literal notranslate"><span class="pre">date_max</span></code> et historisation de la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_visit_observer</span></code> (#1247)</p></li>
<li><p>La page d‚Äôauthentification affiche d√©sormais le nom de l‚Äôapplication (<code class="docutils literal notranslate"><span class="pre">appName</span></code>) d√©fini dans la configuration de GeoNature (#1277)</p></li>
<li><p>Possibilit√© d‚Äôouvrir l‚Äôacc√®s √† GeoNature sans authentification (voir documentation d‚Äôadministration) (#1323)</p></li>
<li><p>M√©tadonn√©es : Optimisation du temps de chargement des listes des CA et JDD (#1291)</p></li>
<li><p>M√©tadonn√©es : Passage de la version 1.3.9 du standard SINP √† la version 1.3.10 et ajout des champs li√©s dans les formulaires (#1291)</p></li>
<li><p>M√©tadonn√©es : R√©vision du design la partie ¬´¬†Acteurs¬†¬ª du formulaire et mise √† part de l‚Äôacteur de type ¬´¬†Contact principal¬†¬ª, obligatoire dans le standard SINP</p></li>
<li><p>M√©tadonn√©es : Ordonnancement des JDD par leur nom</p></li>
<li><p>M√©tadonn√©es : Ajout de la suppression en cascade au niveau des tables des CA et des JDD</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun message quand un CA ou JDD n‚Äôa pas d‚Äôacteur (#1404)</p></li>
<li><p>Synth√®se et validation : Ajout d‚Äôun filtre avanc√© <code class="docutils literal notranslate"><span class="pre">Poss√®de</span> <span class="pre">des</span> <span class="pre">m√©dias</span></code> (#1179, #1338, #1180)</p></li>
<li><p>Synth√®se : Affichage du contenu json du champs des donn√©es additionnelles, dans la fiche d√©tail d‚Äôune observation</p></li>
<li><p>Synth√®se : Ajout de la possibilit√© d‚Äôafficher la colonne ¬´¬†Effectif¬†¬ª dans la liste des observations</p></li>
<li><p>DynamicForm : enrichissement des formulaires dynamiques pour les m√©dias, l‚Äôajout de liens externes</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© de la combinaison des champs <code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">area_code</span></code> dans <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#1270)</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© du champs <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la table <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code></p></li>
<li><p>Mise √† jour des versions de nombreuses d√©pendances Python et Javascript</p></li>
<li><p>Support du gestionnaire d‚Äôerreurs Sentry</p></li>
<li><p>Compression des images</p></li>
<li><p>Ajout d‚Äôun script permettant d‚Äôidentifier les doublons dans <code class="docutils literal notranslate"><span class="pre">data/scripts/duplicates_deletion</span></code> (#1324)</p></li>
<li><p>Validation : possibilit√© de passer des fonctions dans la liste des colonnes affich√©es (pour d√©coder une nomenclature)</p></li>
<li><p>Validation : Les param√®tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code> et <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> sont regroup√©s en un seul param√®tre nomm√© <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier <code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : Correction d‚Äôun bug sur le champs observateur lors de la modification d‚Äôun relev√© (#1177)</p></li>
<li><p>Occtax : Renseignement par d√©faut de l‚Äôutilisateur connect√© √† la cr√©ation d‚Äôun relev√© en mode ¬´¬†observers_txt¬†¬ª (#1292)</p></li>
<li><p>Occtax : D√©placement des boutons d‚Äôaction √† gauche dans la liste des taxons d‚Äôun relev√© pour √©viter qu‚Äôils soient masqu√©s quand les noms de taxon sont longs (#1299 et #1337)</p></li>
<li><p>Occtax : Correction de la possibilit√© de modifier un relev√© si U=1 (#1365)</p></li>
<li><p>Occtax : Suppression du zoom quand on localise le relev√© (#1317)</p></li>
<li><p>Occtax : Correction du nombre de lignes affich√©es apr√®s une recherche</p></li>
<li><p>Occtax : Correction de la suppression d‚Äôun habitat lors de la modification d‚Äôun relev√© (#1296)</p></li>
<li><p>Occtax : Correction des champs ¬´¬†Habitat¬†¬ª et ¬´¬†Lieu¬†¬ª quand on enchaine des relev√©s (#1191)</p></li>
<li><p>Occtax : Correction de l‚Äôenchainement des saisies (#1300)</p></li>
<li><p>Occtax : Correction de l‚Äôaffichage des taxons quand le nom est long (#1299, #1337)</p></li>
<li><p>Occtax : Correction de l‚Äôobservateur par d√©faut en mode <code class="docutils literal notranslate"><span class="pre">observers_txt</span></code></p></li>
<li><p>Occtax : Correction des messages d‚Äôinformation multiples (#1367)</p></li>
<li><p>Occtax : Correction de la mise √† jour du ¬´¬†digitiser¬†¬ª lors d‚Äôune √©dition de relev√© (#1392)</p></li>
<li><p>Occtax : Correction du trigger alimentant les observateurs de la synth√®se depuis Occtax (#1399)</p></li>
<li><p>M√©tadonn√©es : Correction de la suppression d‚Äôun JDD sans donn√©es, depuis la liste des JDD (#1312)</p></li>
<li><p>M√©tadonn√©es : Correction de la r√©cup√©ration des valeurs de nomenclature depuis MTD n‚Äôexistant pas dans GeoNature (#1297)</p></li>
<li><p>Authentification : Redirection vers la page login apr√®s une p√©riode d‚Äôinactivit√© (#1193)</p></li>
<li><p>R√©solution des probl√®mes de permission sur le fichier <code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> (#1003)</p></li>
</ul>
<p><strong>üíª D√©veloppement</strong></p>
<ul class="simple">
<li><p>Possibilit√© d‚Äôutiliser la commande <code class="docutils literal notranslate"><span class="pre">flask</span></code> (eg <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">shell</span></code>)</p></li>
<li><p>Pr√©paration de l‚Äôutilisation d‚ÄôAlembic pour la gestion des migrations de la structure de la BDD (#880)</p></li>
<li><p>Possibilit√© d‚Äôimporter des modules packag√©s (#1272)</p></li>
<li><p>R√©organisation des fichiers <code class="docutils literal notranslate"><span class="pre">requirements</span></code> et installation des branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> des d√©pendances du fichier <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></p></li>
<li><p>Simplification de la gestion des erreurs</p></li>
<li><p>Cr√©ation de templates pour les configurations Apache de GeoNature, TaxHub et UsersHub, utilis√©s par le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Ajout du plugon <code class="docutils literal notranslate"><span class="pre">leaflet-image</span></code></p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">type</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> pour g√©rer le polymorphisme, utilis√© dans le module Monitoring</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">meta_create_date</span></code> et <code class="docutils literal notranslate"><span class="pre">meta_update_date</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code></p></li>
<li><p>Diverses am√©liorations mineures de l‚Äôarchitecture du code</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Mettez √† jour TaxHub 1.8.x avant d‚Äôeffectuer la mise √† jour de GeoNature : <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez le √† jour en version 0.2.4 minimum avant de mettre √† jour GeoNature</p></li>
<li><p>Si vous n‚Äôaviez pas renseign√© de valeur pour le param√®tre <code class="docutils literal notranslate"><span class="pre">id_taxon_list</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code> du module Occtax, la liste 100 n‚Äôest plus pass√©e par defaut et le module va rechercher sur tout Taxref. Si vous souhaitez utiliser une liste de taxons dans la saisie Occtax, veuillez renseigner l‚Äôidentifiant de votre liste dans la configuration du module</p></li>
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql</a>)</p></li>
<li><p>Le script SQL de mise √† jour va supprimer et recr√©er les vues <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_export_occtax</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code> pour y int√©grer les champs additionnels. Si vous aviez modifi√© ces vues, adaptez le script de mise √† jour de GeoNature 2.6.2 √† 2.7.0, ou r√©percuter vos modifications apr√®s la mise √† jour, √† appliquer aussi dans votre √©ventuelle surcouche des param√®tres <code class="docutils literal notranslate"><span class="pre">default_columns_export</span></code> (dans <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code>) et <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> (dans <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>)</p></li>
<li><p>Le fichier de customisation CSS a √©t√© d√©plac√© de <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/custom.scss</span></code> vers <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> pour pouvoir √™tre modifi√© sans devoir rebuilder l‚Äôapplication. Son d√©placement est fait automatiquement lors de la mise √† jour de GeoNature. Si vous avez customis√© les styles dans ce fichier et notamment fait r√©f√©rence √† d‚Äôautres fichiers, v√©rifiez ou adaptez leurs chemins</p></li>
<li><p>Si vous aviez renseigner un des deux param√®tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> dans le module Validation, il est n√©cessaire de les remplacer par le nouveau param√®tre <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier <code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
<li><p>Modifier dans le fichier <code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>, remplacer <code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> par <code class="docutils literal notranslate"><span class="pre">supervisor.log</span></code> dans la variable <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code> :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;s|\(stdout_logfile = .*\)/gn_errors.log|</span><span class="se">\1</span><span class="s1">/supervisor.log|&#39;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">supervisor</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">geonature</span><span class="o">-</span><span class="n">service</span><span class="o">.</span><span class="n">conf</span>
<span class="n">sudo</span> <span class="n">supervisorctl</span> <span class="n">reload</span>
</pre></div>
</div>
</section>
<section id="id9">
<h2>2.6.2 (2021-02-15)<a class="headerlink" href="#id9" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Metadonn√©es : correction d‚Äôun bug sur la fiche JDD si le module d‚Äôimport n‚Äôest pas install√©</p></li>
<li><p>Metadonn√©es : correction de l‚Äôaffichage de certains champs sur la fiche des cadres d‚Äôacquisition</p></li>
<li><p>Metadonn√©es : la recherche rapide n‚Äôest plus sensible √† la casse casse</p></li>
</ul>
</section>
<section id="id10">
<h2>2.6.1 (2021-02-11)<a class="headerlink" href="#id10" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_tri_cal_sensi_diff_level_on_each_statement()</span></code> non compatible avec PostgreSQL 10 (#1255)</p></li>
<li><p>Synth√®se : correction de l‚Äôaffichage du filtre ¬´¬†statut de validation¬†¬ª (#1267)</p></li>
<li><p>Permissions : correction de l‚ÄôURL de redirection apr√®s l‚Äô√©ditiondes permissions (#1253)</p></li>
<li><p>Pr√©cision de la documentation de mise √† jour de GeoNature (#1251)</p></li>
<li><p>Ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dans le fichier d‚Äôexemple de configuration (#1066 par &#64;jbdesbas)</p></li>
<li><p>S√©curit√© : suppression d‚Äôune route inutile</p></li>
<li><p>Correction de l‚ÄôURL de la doc sur la page d‚Äôaccueil</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script de mise √† jour de la BDD du sous-module de nomenclature : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql</a></p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql</a>)</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="saxifraga-2021-02-04">
<h2>2.6.0 - Saxifraga (2021-02-04)<a class="headerlink" href="#saxifraga-2021-02-04" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>N√©cessite Debian 10, car cette nouvelle version n√©cessite PostgreSQL 10 minimum (qui n‚Äôest pas fourni par d√©faut avec Debian 9) pour les triggers d√©clench√©s ¬´¬†on each statement¬†¬ª, plus performants.</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Sensibilit√© : Ajout d‚Äôun trigger sur la synth√®se d√©clenchant automatiquement le calcul de la sensibilit√© des observations et calculant ensuite leur niveau de diffusion (si celui-ci est NULL) en fonction de la sensibilit√© (#413 et #871)</p></li>
<li><p>Ajout du format GeoPackage (GPKG) pour les exports SIG, plus simple, plus l√©ger, plus performant et unique que le SHAPEFILE. Les exports au format SHP restent pour le moment utilis√©s par d√©faut (modifiable dans la configuration des modules Occtax, Occhab et Synth√®se) (#898)</p></li>
<li><p>Performances : Suppression du trigger le plus lourd calculant les couleurs des taxons par unit√©s g√©ographiques. Il est remplac√© par une vue utilisant le nouveau param√®tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>, d√©finissant le code du type de zonage √† utiliser pour les unit√©s g√©ographiques dans Occtax-mobile (Mailles de 5km par d√©faut) (#997)</p></li>
<li><p>Performances : Am√©lioration du trigger de la Synth√®se calculant les zonages d‚Äôune observation en ne faisant un <code class="docutils literal notranslate"><span class="pre">ST_Touches()</span></code> seulement si l‚Äôobservation n‚Äôest pas un point et en le passant <code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">each</span> <span class="pre">statement</span></code> (#716)</p></li>
<li><p>M√©tadonn√©es : Refonte de la liste des CA et JDD avec l‚Äôajout d‚Äôinformations et d‚Äôactions, ainsi qu‚Äôune recherche avanc√©e (#889)</p></li>
<li><p>M√©tadonn√©es : R√©vision des fiches info des CA et JDD avec l‚Äôajout d‚Äôactions, du tableau des imports et du t√©l√©chargement des rapports d‚ÄôUUID et de sensibilit√© (#889)</p></li>
<li><p>M√©tadonn√©es: Ajout de la fonctionnalit√© de fermeture (d√©pot) au niveau du CA (qui ferme tous les JDD du CA), seulement si le CA a au moins un JDD. D√©sactiv√©e par d√©faut via le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_CLOSE_AF</span></code> (#889 par &#64;alainlaupinmnhn)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôenvoyer un email automatique au cr√©ateur et √† l‚Äôutilisateur d‚Äôun CA quand celui-ci est ferm√© (#889)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôajouter un titre sp√©cifique aux exports PDF des CA quand ceux-ci sont ferm√©s, par exemple pour en faire un certificat (#889)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôimporter directement dans un JDD actif depuis le module M√©tadonn√©es, d√©sactiv√© par d√©faut (#889)</p></li>
<li><p>M√©tadonn√©es : Am√©lioration des possibilit√©s de customisation des PDF des fiches de m√©tadonn√©es</p></li>
<li><p>M√©tadonn√©es : Am√©lioration des fiches d√©tail des CA et JDD et ajout de la liste des imports dans les fiches des JDD (#889)</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun spinner lors du chargement de la liste des m√©tadonn√©es et parall√©lisation du calcul du nombre de donn√©es par JDD (#1231)</p></li>
<li><p>Synth√®se : Possibilit√© d‚Äôouvrir le module avec un JDD pr√©selectionn√© (<code class="docutils literal notranslate"><span class="pre">&lt;URL_GeoNature&gt;/#/synthese?id_dataset=2</span></code>) et ajout d‚Äôun lien direct depuis le module M√©tadonn√©es (#889)</p></li>
<li><p>Synth√®se : ajout de web service pour le calcul du nombre d‚Äôobservations par un param√®tre donn√© (JDD, module, observateur), et du calcul de la bounding-box par jeu de donn√©es</p></li>
<li><p>Synthese : ajout d‚Äôun filtre avanc√© <code class="docutils literal notranslate"><span class="pre">Poss√®de</span> <span class="pre">m√©dias</span></code></p></li>
<li><p>Exports au format SHP remplac√©s par d√©faut par le format GeoPackage (GPKG) plus simple, plus l√©ger, plus performant et unique. Les exports SHP restent activables dans la configuration des modules (#898)</p></li>
<li><p>Occtax : ajout du param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_VERNACULAR_NAME</span></code> qui contr√¥le l‚Äôaffichage du nom vernaculaire vs nom complet sur les interfaces (Defaut = true: afffiche le nom vernaculaire)</p></li>
<li><p>Validation : Pr√©remplir l‚Äôemail √† l‚Äôobservateur avec des informations param√©trables sur l‚Äôoccurrence (date, nom du taxon, commune, m√©dias) (#981)</p></li>
<li><p>Validation : Possibilit√© de param√®trer les colonnes affich√©es dans la liste des observations (#980)</p></li>
<li><p>Possibilit√© de customiser le logo principal (GeoNature par d√©faut) dans <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/</span></code></p></li>
<li><p>Ajout d‚Äôun champs json <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1111)</p></li>
<li><p>Compl√©ment des scripts de migration des donn√©es depuis GINCO (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/</span></code>)</p></li>
<li><p>Barre de navigation : Mention plus g√©n√©rique et g√©n√©rale des auteurs et contributeurs</p></li>
<li><p>Redirection vers le formulaire d‚Äôauthentification si on tente d‚Äôacc√©der √† une page directement sans √™tre authentifi√© et sans passer par le frontend (#1193)</p></li>
<li><p>Connexion √† MTD : possibilit√© de filtrer les JDD par instance, avec le param√®tre <code class="docutils literal notranslate"><span class="pre">ID_INSTANCE_FILTER</span></code>, par exemple pour ne r√©cup√©rer que les JDD de sa r√©gion (#1195)</p></li>
<li><p>Connexion √† MTD : r√©cup√©ration du cr√©ateur et des acteurs (#922, #1008 et #1196)</p></li>
<li><p>Connexion √† MTD : r√©cup√©ration du nouveau champs <code class="docutils literal notranslate"><span class="pre">statutDonneesSource</span></code> pour indiquer si le JDD est d‚Äôorigine publique ou priv√©e</p></li>
<li><p>Cr√©ation d‚Äôune commande GeoNature permettant de r√©cup√©rer les JDD, CA et acteurs depuis le webservice MTD de l‚ÄôINPN, en refactorisant les outils existants d‚Äôimport depuis ce webservice</p></li>
<li><p>Ajout de contraintes d‚Äôunicit√© sur certains champs des tables de m√©tadonn√©es et de la table des sources (#1215)</p></li>
<li><p>Cr√©ation d‚Äôun script permettant de remplacer les r√®gles de sensibilit√© nationales et r√©gionales, par les r√®gles d√©partementales plus pr√©cises (<code class="docutils literal notranslate"><span class="pre">data/scripts/sensi/import_sensi_depobio.sh</span></code>), uniquement utilis√© pour DEPOBIO pour le moment, en attendant de clarifier dans une prochaine release le fonctionnement que l‚Äôon retient par d√©faut dans GeoNature (#413)</p></li>
<li><p>Cr√©ation d‚Äôun script permettant d‚Äôimporter les r√©gions dans le r√©f√©rentiel g√©ographique (<code class="docutils literal notranslate"><span class="pre">data/migrations/insert_reg.sh</span></code>)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occhab : Export SIG (GPKG ou SHP) corrig√© (#898)</p></li>
<li><p>Meilleur nettoyage des sessions enregistr√©es dans le navigateur (#1178)</p></li>
<li><p>Correction des droits CRUVED et de leur h√©ritage (#1170)</p></li>
<li><p>Synth√®se : Retour du bouton pour revenir √† l‚Äôobservation dans son module d‚Äôorigine (Occtax par exemple) depuis la fiche info d‚Äôune observation (#1147)</p></li>
<li><p>Synth√®se : Suppression du message ¬´¬†Aucun historique de validation¬†¬ª quand une observation n‚Äôa pas encore de validation (#1147)</p></li>
<li><p>Synth√®se : Correction du CRUVED sur le R = 1 (ajout des JDD de l‚Äôutilisateur)</p></li>
<li><p>Synth√®se : Correction de l‚Äôexport des statuts bas√© sur une recherche g√©ographique (#1203)</p></li>
<li><p>Occtax : Correction de l‚Äôerreur de chargement de l‚Äôobservateur lors de la modification d‚Äôun relev√© (#1177)</p></li>
<li><p>Occtax : Suppression de l‚Äôobligation de remplir les champs ¬´¬†D√©terminateur¬†¬ª et ¬´¬†M√©thode de d√©termination¬†¬ª</p></li>
<li><p>M√©tadonn√©es : Suppression du graphique de r√©partition des esp√®ces dans les exports PDF car il √©tait partiellement fonctionnel</p></li>
<li><p>Synth√®se : Fonction <code class="docutils literal notranslate"><span class="pre">import_row_from_table</span></code>, test sur <code class="docutils literal notranslate"><span class="pre">LOWER(tbl_name)</span></code></p></li>
<li><p>Redirection vers le formulaire d‚Äôauthentification si l‚Äôon essaie d‚Äôacc√©der √† une URL sans √™tre authentifi√© et sans passer par le frontend (#1193)</p></li>
<li><p>Script d‚Äôinstallation globale : prise en compte du param√®tre <code class="docutils literal notranslate"><span class="pre">install_grid_layer</span></code> permettant d‚Äôint√©grer ou non les mailles dans le <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> lors de l‚Äôinstallation initiale (#1133)</p></li>
<li><p>Synth√®se : Changement de la longueur du champs <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (de 255 √† 5000 caract√®res)</p></li>
<li><p>Sensibilit√© : Corrections des contraintes NOT VALID (#1245)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql</a>)</p></li>
<li><p>Toutes les nouvelles donn√©es int√©gr√©es dans le Synth√®se auront leur niveau de sensibilit√© et de diffusion calcul√©s automatiquement. Vous pouvez ajouter ou d√©sactiver des r√®gles de sensibilit√© dans la table <code class="docutils literal notranslate"><span class="pre">gn_sensivity.t_sensitivity_rules</span></code></p></li>
<li><p>Vous pouvez aussi ex√©cuter le script qui va calculer automatiquement le niveau de sensibilit√© et de diffusion de toutes les donn√©es d√©j√† pr√©sentes dans la Synth√®se, √©ventuellement en l‚Äôadaptant √† votre contexte : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql</a></p></li>
<li><p>Mettez √† jour de la longueur du champs <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese.reference_biblio</span></code> √† 5000 charact√®res. Ex√©cutez la commande suivante dans la console : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">geonature2db</span> <span class="pre">-c</span> <span class="pre">&quot;UPDATE</span> <span class="pre">pg_attribute</span> <span class="pre">SET</span> <span class="pre">atttypmod</span> <span class="pre">=</span> <span class="pre">5004</span> <span class="pre">WHERE</span> <span class="pre">attrelid</span> <span class="pre">=</span> <span class="pre">'gn_synthese.synthese'::regclass</span> <span class="pre">AND</span> <span class="pre">attname</span> <span class="pre">=</span> <span class="pre">'reference_biblio';&quot;</span></code></p></li>
<li><p>Ex√©cuter le script de mise √† jour de la BDD du sous-module de nomenclature : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql</a></p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez Occtax-mobile, vous pouvez modifier la valeur du nouveau param√®tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code> pour lui indiquer le code du type de zonage que vous utilisez pour les unit√©s g√©ographiques (mailles de 5km par d√©faut)</p></li>
<li><p>Si vous disposez du module d‚Äôimport, vous devez le mettre √† jour en version 1.1.1</p></li>
</ul>
</section>
<section id="id11">
<h2>2.5.5 (2020-11-19)<a class="headerlink" href="#id11" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun composant fil d‚Äôariane (#1143)</p></li>
<li><p>Ajout de la possiblit√© de d√©sactiver les composants <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> et <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> (#1142)</p></li>
<li><p>Ajout de tests sur les routes pour assurer la compatibilit√© avec les applications mobiles</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug de r√©cup√©ration du CRUVED sur les modules (#1146)</p></li>
<li><p>Correction des validateurs sur les preuves d‚Äôexistence (#1134)</p></li>
<li><p>Correction de la r√©cup√©ration des dossiers dans <code class="docutils literal notranslate"><span class="pre">backend/static</span></code> dans le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code></p></li>
<li><p>Correction de l‚Äôaffichage de l‚Äôutilisateur dans la navbar lorsqu‚Äôon est connect√© via le CAS INPN</p></li>
</ul>
</section>
<section id="id12">
<h2>2.5.4 (2020-11-17)<a class="headerlink" href="#id12" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout de scripts <code class="docutils literal notranslate"><span class="pre">sql</span></code> et <code class="docutils literal notranslate"><span class="pre">sh</span></code> de restauration des medias dans <code class="docutils literal notranslate"><span class="pre">data/medias</span></code> (#1148)</p></li>
<li><p>Ajout d‚Äôun service pour pouvoir r√©cup√©rer les informations sur l‚Äôutilisateur connect√©</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction des m√©dias qui sont actuellement tous supprim√©s automatiquement apr√®s 24h, et non pas seulement ceux orphelins (#1148)</p></li>
<li><p>Correction des permissions sur les fiches info des relev√©s dans Occtax avec la d√©sactivation du bouton de modification du relev√© quand l‚Äôutilisateur n‚Äôen a pas les droits</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous aviez associ√© des m√©dias √† des observations dans Occtax ou autre et qu‚Äôils ont √©t√© supprim√©s, vous pouvez les retrouver dans la table d‚Äôhistorisation des actions (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_commons.t_history_actions</span> <span class="pre">WHERE</span> <span class="pre">table_content-&gt;'id_media'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span> <span class="pre">AND</span> <span class="pre">operation_type</span> <span class="pre">=</span> <span class="pre">'D'</span></code>)</p></li>
<li><p>Pour restaurer les m√©dias supprim√©s depuis la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_history_actions</span></code> vous pouvez :</p>
<ul>
<li><p>ex√©cuter le script SQL <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sql</span></code> qui va recr√©er les m√©dias supprim√©s dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code></p></li>
<li><p>ex√©cuter le script BASH <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sh</span></code> (<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">/home/`whoami`/geonature/data/medias/restore_medias.sh</span></code> en <code class="docutils literal notranslate"><span class="pre">sudo</span></code> si besoin) qui va renommer des fichiers supprim√©s en supprimant le pr√©fixe <code class="docutils literal notranslate"><span class="pre">deleted_</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id13">
<h2>2.5.3 (2020-11-04)<a class="headerlink" href="#id13" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise en place de l‚Äôh√©ritage du CRUVED au niveau des objets des modules (#1028)</p></li>
<li><p>R√©vision de l‚Äôexport des observations de la Synth√®se (noms plus lisibles, ajout des communes et d‚Äôinformations taxonomiques, compl√©ment des champs existants (#755)</p></li>
<li><p>Ajout d‚Äôun param√®tre permettant d‚Äôajouter un message personnalis√© √† la fin des emails (inscriptions, exports‚Ä¶) (#1050 par &#64;jpm-cbna)</p></li>
<li><p>Ajout d‚Äôune alerte de d√©pr√©ciation sur les fonctions <code class="docutils literal notranslate"><span class="pre">utils-sqlalchemy</span></code> pr√©sentes dans GeoNature</p></li>
<li><p>Ajout d‚Äôun widget de type ¬´¬†HTML¬†¬ª dans les formulaires dynamiques, permettant d‚Äôajouter des informations dans un formulaire (#1043 et #1068 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© d‚Äôajouter un texte d‚Äôaide sur les champs des formulaires dynamiques (#1065 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de d√©finir un min et un max au composant commun <code class="docutils literal notranslate"><span class="pre">date</span></code> (#1069 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de d√©finir le nombre de lignes du composant commun <code class="docutils literal notranslate"><span class="pre">textarea</span></code> (#1067 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilit√© de contr√¥ler par une expression r√©guli√®re le contenu d‚Äôun champs de type <code class="docutils literal notranslate"><span class="pre">text</span></code> des formulaires dynamiques (#1073 par &#64;FlorentRICHARD44)</p></li>
<li><p>Ajout de la possibilit√© de masquer certains champs du composant <code class="docutils literal notranslate"><span class="pre">media</span></code> (#1072, #1078 et #1083 par &#64;metourneau)</p></li>
<li><p>Ajout d‚Äôun spinner sur les statistiques de la page d‚Äôaccueil (#1086 par &#64;jpm-cbna)</p></li>
<li><p>Ajout d‚Äôun composant d‚Äôautocomplete multiselect <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> permettant de rechercher des taxons dans tout l‚Äôarbre taxonomique et de limiter la recherche √† un rang</p></li>
<li><p>Possibilit√© d‚Äôajouter plusieurs cartes sur la m√™me page √† l‚Äôaide du composant <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code></p></li>
<li><p>Homog√©n√©isation du style du code et documentation des pratiques de d√©veloppement</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôaffichage des noms des validateurs sur la liste dans le module validation (#1091 par &#64;lpofredc)</p></li>
<li><p>Corrections mineures de l‚Äôexport des observations de la Synth√®se (#1108)</p></li>
<li><p>Synth√®se : Correction du masquage de la recherche par arbre taxonomique (#1057 par &#64;jpm-cbna)</p></li>
<li><p>Ajout du champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_biogeo_status</span></code> dans la Synthese (correspondance standard : statut biog√©ographique). La BDD est remplie avec la valeur par d√©faut de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.default_nomenclature_value</span></code> (valeur = non renseign√©e)</p></li>
<li><p>Accueil : Correction de l‚Äôaffichage du nom du module (#1087)</p></li>
<li><p>Correction du trigger de mise √† jour d‚ÄôOcctax vers la Synth√®se (champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> non mis √† jour) (#1117 par &#64;jbrieuclp)</p></li>
<li><p>Correction du param√®tre stockant la version de Taxref, pass√© √† 13.0 pour les nouvelles installations (#1097 par &#64;RomainBaghi)</p></li>
<li><p>Correction de l‚Äôaffichage en double des markers dans Leaflet.draw (#1095 par &#64;FlorentRICHARD44)</p></li>
<li><p>Synth√®se : Correction des filtres avanc√©s par technique d‚Äôobservation et m√©thode de d√©termination (#1110 par &#64;jbrieuclp)</p></li>
<li><p>Recr√©ation du fichier de configuration √† chaque installation (#1074 par &#64;etot)</p></li>
<li><p>Annulation de l‚Äôinsertion du module lorsqu‚Äôune erreur est lev√©e √† l‚Äôinstallation d‚Äôun module</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>D√©sormais les objets des modules (par exemple les objets ‚ÄúPermissions‚Äù et ‚ÄúNomenclatures‚Äù du module ‚ÄúADMIN‚Äù) h√©ritent automatiquement des permissions d√©finies au niveau du module parent et √† d√©faut au niveau de GeoNature  (#1028). Il s‚Äôagit d‚Äôune √©volution de mise en coh√©rence puisque les modules h√©ritaient d√©j√† des permissions de GeoNature, mais pas leurs objets. Si vous avez d√©fini des permissions particuli√®res aux niveaux des objets, v√©rifier leur coh√©rence avec le nouveau fonctionnement. NB : si vous aviez mis des droits R=0 pour un groupe au module ‚ÄúADMIN‚Äù, les utilisateurs de ce groupe ne pourront pas acc√©der aux sous-modules ‚Äúpermissions‚Äù et ‚Äúnomenclatures‚Äù.</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql</a>). Attention, si vous avez customis√© les vues des exports Occtax et Synth√®se, elles seront supprim√©es et recr√©es automatiquement par le script SQL de mise √† jour de la BDD de GeoNature pour int√©grer leurs √©volutions r√©alis√©es dans cette nouvelle version. R√©visez √©ventuellement ces vues avant et/ou apr√®s la mise √† jour.</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
<li><p>Les noms de colonnes de l‚Äôexport de la Synth√®se ont √©t√© enti√®rement revus dans la vue fournie par d√©faut (<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouch√© le param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, v√©rifiez les noms des colonnes.</p></li>
<li><p>V√©rifiez que la valeur du param√®tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> correspond bien √† votre version actuelle de Taxref (11.0 ou 13.0).</p></li>
</ul>
</section>
<section id="id14">
<h2>2.5.2 (2020-10-13)<a class="headerlink" href="#id14" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : correction du probl√®me d‚Äôinstallation du module dans le fichier <code class="docutils literal notranslate"><span class="pre">schemas.py</span></code></p></li>
<li><p>Synthese : correction de la fonctions SQL <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table</span></code> et r√©percussion dans le fichier <code class="docutils literal notranslate"><span class="pre">gn_synthese/process.py</span></code></p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql</a>)</p></li>
</ul>
</section>
<section id="id15">
<h2>2.5.1 (2020-10-06)<a class="headerlink" href="#id15" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> d√©finissant si les adresses email des observateurs sont affich√©es ou non dans les fiches info des observations des modules Synth√®se et Validation (#1066)</p></li>
<li><p>Occtax : correction de l‚Äôaffichage du champs ¬´¬†Technique de collecte Campanule¬†¬ª (#1059)</p></li>
<li><p>Occtax : correction du fichier d‚Äôexemple de configuration <code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml.example</span></code> (#1059)</p></li>
<li><p>Occtax : param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> renomm√© <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> et d√©sactiv√© par d√©faut (#1060)</p></li>
<li><p>Occtax : quand le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> est d√©sactiv√©, remise en place du fonctionnement de l‚Äôoutil ¬´¬†Echainer les relev√©s¬†¬ª. Dans ce cas, quand on enchaine les relev√©s, on conserve le JDD, les observateurs, les dates et heures d‚Äôun relev√© √† l‚Äôautre (#1060)</p></li>
<li><p>Occtax : correction de l‚Äôobservateur par d√©faut en mode <code class="docutils literal notranslate"><span class="pre">observers_as_txt</span></code></p></li>
<li><p>Verification des UUID : autoriser toutes les versions (#1063)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
</ul>
</section>
<section id="manidae-2020-09-30">
<h2>2.5.0 - Manidae (2020-09-30)<a class="headerlink" href="#manidae-2020-09-30" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>Occtax v2 et m√©dias</p>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Refonte de l‚Äôergonomie et du fonctionnement du module de saisie Occtax (#758 et #860 par &#64;jbrieuclp et &#64;TheoLechemia)</p>
<ul>
<li><p>Enregistrement continu au fur et √† mesure de la saisie d‚Äôun relev√©</p></li>
<li><p>D√©coupage en 2 onglets (Un pour le relev√© et un onglet pour les taxons)</p></li>
<li><p>Am√©lioration de la liste des taxons saisis sur un relev√© (#635 et #682)</p></li>
<li><p>Am√©lioration de la saisie au clavier</p></li>
<li><p>Zoom r√©alis√© dans la liste des relev√© conserv√© quand on saisit un nouveau relev√© (#436 et #912)</p></li>
<li><p>Filtres conserv√©s quand on revient √† la liste des relev√©s (#772)</p></li>
<li><p>Possibilit√© de conserver les informations saisies entre 2 taxons ou relev√©s, d√©sactivable avec le param√®tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> (#692)</p></li>
<li><p>Correction de la mise √† jour des dates de d√©but et de fin (#977)</p></li>
<li><p>Affichage d‚Äôune alerte si on saisit 2 fois le m√™me taxon sur un m√™me relev√©</p></li>
<li><p>Fiche d‚Äôinformation d‚Äôun relev√© compl√©t√©e et mise √† jour</p></li>
</ul>
</li>
<li><p>Passage de la version 1.2.1 √† la version 2.0.0 du standard Occurrences de taxon (dans les modules Occtax, Synth√®se et Validation) (#516)</p>
<ul>
<li><p>Ajout des champs ¬´¬†Comportement¬†¬ª, ¬´¬†NomLieu¬†¬ª, ¬´¬†Habitat¬†¬ª, ¬´¬†M√©thode de regroupement¬†¬ª, ¬´¬†Type de regroupement¬†¬ª et ¬´¬†Profondeur¬†¬ª</p></li>
<li><p>Ajout du champs ¬´¬†Pr√©cision¬†¬ª dans Occtax et suppression de sa valeur par d√©faut √† 100 m</p></li>
<li><p>Renommage du champs ¬´¬†M√©thode d‚Äôobservation¬†¬ª en ¬´¬†Technique d‚Äôobservation¬†¬ª</p></li>
<li><p>Suppression du champs ¬´¬†Technique d‚Äôobservation¬†¬ª actuel de la synth√®se</p></li>
<li><p>Renommage du champs ¬´¬†Technique d‚Äôobservation¬†¬ª actuel d‚ÄôOcctax en ¬´¬†Technique de collecte Campanule¬†¬ª</p></li>
<li><p>Ajout et mise √† jour de quelques nomenclatures</p></li>
<li><p>Ajout d‚Äôun document de suivi de l‚Äôimpl√©mentation du standard Occurrences de taxon dans GeoNature (<code class="docutils literal notranslate"><span class="pre">docs/implementation_gn_standard_occtax2.0.ods</span></code>) (#516)</p></li>
</ul>
</li>
<li><p>Passage de la version 1.3.9 √† la version 1.3.10 du standard de M√©tadonn√©es. Mise √† jour des nomenclatures ¬´¬†CA_OBJECTIFS¬†¬ª et mise √† jour des m√©tadonn√©es existantes en cons√©quence (par &#64;DonovanMaillard)</p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">addtional_data</span></code> de type <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code>, en pr√©vision de l‚Äôajout des champs additionnels dans Occtax et Synth√®se (#1007)</p></li>
<li><p>Mise en place de la gestion transversale et g√©n√©rique des m√©dias (images, audios, vid√©os, PDF‚Ä¶) dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code> et le Dynamic-Form (#336) et impl√©mentation dans le module Occtax (d√©sactivables avec le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MEDIAS</span></code>) (#620 par &#64;joelclems)</p></li>
<li><p>Mise en place de miniatures et d‚Äôaper√ßus des m√©dias, ainsi que de nombreux contr√¥les des fichiers et de leurs formats</p></li>
<li><p>Affichage des m√©dias dans les fiches d‚Äôinformation des modules de saisie, ainsi que dans les modules Synth√®se et Validation</p></li>
<li><p>Ajout de la fonctionnalit√© ¬´¬†Mes lieux¬†¬ª (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_places</span></code>), permettant de stocker la g√©om√©trie de ieux individuels fr√©quemment utilis√©s, impl√©ment√©e dans le module cartographique d‚ÄôOcctax (d√©sactivable avec le param√®tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MY_PLACES</span></code>) (#246 par &#64;metourneau)</p></li>
<li><p>Tri de l‚Äôordre des modules dans le menu lat√©ral par ordre alphab√©tique par d√©faut et possibilit√© de les ordonner avec le nouveau champs <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules.module_order</span></code> (#787 par &#64;alainlaupinmnhn)</p></li>
<li><p>Arr√™t du support de l‚Äôinstallation packag√©e sur Debian 9 et Ubuntu 16 pour passer √† Python version 3.6 et plus</p></li>
<li><p>Prise en charge de PostGIS 3 et notamment l‚Äôinstallation de l‚Äôextension <code class="docutils literal notranslate"><span class="pre">postgis_raster</span></code> (#946 par &#64;jpm-cbna)</p></li>
<li><p>Cr√©ation de compte : Envoi automatique d‚Äôun email √† l‚Äôutilisateur quand son compte est valid√©. N√©cessite la version 2.1.3 de UsersHub (#862 et #1035 par &#64;jpm-cbna)</p></li>
</ul>
<p><strong>Ajouts mineurs</strong></p>
<ul class="simple">
<li><p>Homog√©n√©isation des styles des boutons (#1026)</p></li>
<li><p>Factorisation du code des fiches infos d‚Äôune observation dans les modules Synth√®se et Validation (#1053)</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun param√®tre permettant de d√©finir le nombre de CA affich√©s sur la page (100 par d√©faut)</p></li>
<li><p>M√©tadonn√©es : Tri des CA et JDD par ordre alphab√©tique</p></li>
<li><p>M√©tadonn√©es : Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> dans la table des CA et des JDD, utilis√© en plus des acteurs pour le CRUVED des JDD (#921)</p></li>
<li><p>Dynamic-Form : Ajout d‚Äôun composant ¬´¬†select¬†¬ª prenant une API en entr√©e (#1029)</p></li>
<li><p>Dynamic-Form : Ajout de la possibilit√© d‚Äôafficher une d√©finition d‚Äôun champs sous forme de tooltip</p></li>
<li><p>CAS INPN : Redirection vers la page de connexion de GeoNature quand on se d√©connecte</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur <code class="docutils literal notranslate"><span class="pre">schema_name</span></code> et <code class="docutils literal notranslate"><span class="pre">table_name</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_commons_bib_tables_location_unique</span></code> (#962)</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur <code class="docutils literal notranslate"><span class="pre">id_organism</span></code> et <code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> (#988)</p></li>
<li><p>Ajout de la possibilit√© de filtrer le composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> du Dynamic-Form par <code class="docutils literal notranslate"><span class="pre">module_code</span></code> pour pouvoir choisir parmis les JDD associ√©es √† un module (#964)</p></li>
<li><p>Mise √† jour de <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> en version 2.8.5, sqlalchemy en 1.3.19, marshmallow en 2.15.6, virtualenv en 20.0.31 (par &#64;jpm-cbna)</p></li>
<li><p>Mises √† jour de s√©curit√© diverses</p></li>
<li><p>Am√©liorations des scripts <code class="docutils literal notranslate"><span class="pre">install/install_db.sh</span></code> et <code class="docutils literal notranslate"><span class="pre">install/install_app.sh</span></code> (par &#64;jpm-cbna)</p></li>
<li><p>Ajout de l‚Äôautocompl√©tion des commandes <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (#999 par &#64;jpm-cbna)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh.sample</span></code></p></li>
<li><p>Am√©lioration du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code> en v√©rifiant la pr√©sence des dossiers optionnels avant de les copier</p></li>
<li><p>Am√©lioration des fonctions <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row_format_insert_data</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row</span></code> pour prendre en charge la g√©n√©ration des geojson dans PostGIS 3</p></li>
<li><p>Documentation administrateur : Pr√©cisions sur les labels, pictos et ordres des modules dans le menu de navigation lat√©ral</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Module Validation : Affichage des commentaires du relev√© et de l‚Äôobservation (#978 et #854)</p></li>
<li><p>Module Validation : Ne lister que les observations ayant un UUID et v√©rification de sa validit√© (#936)</p></li>
<li><p>Module Validation : Correction et homog√©n√©isation de l‚Äôaffichage et du tri des observations par date (#971)</p></li>
<li><p>Module Validation : Correction de l‚Äôaffichage du statut de validation apr√®s mise √† jour dans la liste des observations (#831)</p></li>
<li><p>Module Validation : Correction de l‚Äôaffichage du nom du validateur</p></li>
<li><p>Module Validation : Am√©lioration des performances avec l‚Äôajout d‚Äôun index sur le champs <code class="docutils literal notranslate"><span class="pre">uuid_attached_row</span></code> de la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> (#923 par &#64;jbdesbas)</p></li>
<li><p>Suppression du trigger en double <code class="docutils literal notranslate"><span class="pre">tri_insert_synthese_cor_role_releves_occtax</span></code> sur <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> (#762 par &#64;jbrieuclp)</p></li>
<li><p>Passage des requ√™tes d‚Äôexport de la synth√®se en POST plut√¥t qu‚Äôen GET (#883)</p></li>
<li><p>Correction du traitement du param√®tre <code class="docutils literal notranslate"><span class="pre">offset</span></code> de la route <code class="docutils literal notranslate"><span class="pre">synthese/color_taxon</span></code> utilis√© par Occtax-mobile (#994)</p></li>
<li><p>Correction et compl√©ment des scripts de migration de donn√©es depuis GINCO v1 (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/occtax.sql</span></code>)</p></li>
<li><p>Import des utilisateurs depuis le CAS INPN : Activer les utilisateurs import√©s par d√©faut et r√©cup√©rer leur email</p></li>
<li><p>Calcul automatique de la sensibilit√© : Ajout de la r√©cursivit√© dans la r√©cup√©ration des crit√®res de sensibilit√© au niveau de la fonction <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.get_id_nomenclature_sensitivity</span></code> (#284)</p></li>
<li><p>Typo sur le terme ¬´¬†Preuve d‚Äôexistence¬†¬ª (par &#64;RomainBaghi)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Nomenclatures : Commencer par ex√©cuter le script SQL de mise √† jour du sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> de la BDD (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql</a>)</p></li>
<li><p>Ex√©cuter ensuite le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql</a>). Attention, si vous avez customis√© les vues des exports Occtax et Synth√®se, elles seront supprim√©es et recr√©es automatiquement par le script SQL de mise √† jour de la BDD de GeoNature pour s‚Äôadapter aux √©volutions du standard Occtax en version 2.0.0. R√©visez √©ventuellement ces vues avant et/ou apr√®s la mise √† jour. Le script SQL de mise √† jour v√©rifiera aussi si vous avez d‚Äôautres vues (dans le module Export notamment) qui utilisent le champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> qui doit √™tre renomm√© et l‚Äôindiquera d√®s le d√©but de l‚Äôex√©cution du script, en l‚Äôarr√™tant pour que vous puissiez modifier ou supprimer ces vues bloquant la mise √† jour.</p></li>
<li><p>Les colonnes de l‚Äôexport de la Synth√®se ont √©t√© partiellement revus dans la vue fournie par d√©faut (<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouch√© le param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, v√©rifiez les noms des colonnes.</p></li>
<li><p>A partir la version 2.5.0 de GeoNature, la version 3.5 de Python n‚Äôest plus support√©e. Seules les versions 3.6 et + le sont. Si vous √™tes encore sur Debian 9 (fourni par d√©faut avec Python 3.5), veuillez suivre les instructions de mise √† jour de Python sur cette version (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9">https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9</a>). Il est cependant plut√¥t conseill√© de passer sur Debian 10 pour rester √† jour sur des versions maintenues</p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>A noter, quelques changements dans les param√®tres du module Occtax. Les param√®tres d‚Äôaffichage/masquage des champs du formulaire ont √©volu√© ainsi :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_meth</span></code> devient <code class="docutils literal notranslate"><span class="pre">obs_tech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_technique</span></code> devient <code class="docutils literal notranslate"><span class="pre">tech_collect</span></code></p></li>
</ul>
</li>
<li><p>A noter aussi que cette version de GeoNature est compatible avec la version 1.1.0 minimum d‚ÄôOcctax-mobile (du fait de la mise du standard Occurrence de taxons)</p></li>
</ul>
</section>
<section id="id16">
<h2>2.4.1 (2020-06-25)<a class="headerlink" href="#id16" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Occurrences sans g√©om√©trie pr√©cise : Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">id_area_attachment</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> permettant d‚Äôassocier une observation √† un zonage dans le r√©f√©rentiel g√©ographique (<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code>) (#845 et #867)</p></li>
<li><p>Ajout d‚Äôun champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> pour pouvoir afficher les zonages du r√©f√©rentiel g√©ographique sur les cartes (#867)</p></li>
<li><p>Ajout de l‚Äôimport par d√©faut des d√©partements de France m√©tropole dans le r√©f√©rentiel g√©ographique lors de l‚Äôinstallation de GeoNature (en plus des actuelles communes et grilles)</p></li>
<li><p>Mise √† jour des communes import√©es sur la version de f√©vrier 2020 d‚ÄôAdmin express IGN pour les nouvelles installations</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug d‚Äôaffichage des fonds de carte WMTS de l‚ÄôIGN, apparu dans la version 2.4.0 avec l‚Äôajout du support des fonds WMS (#890)</p></li>
<li><p>Gestion des exceptions de type <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> lors de l‚Äôimport des commandes d‚Äôun module</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql</a></p></li>
<li><p>Suivez la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Vous pouvez alors lancer le script d‚Äôinsertion des d√©partements de France m√©tropole dans le r√©ferentiel g√©ographique (optionnel) : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh</a>. V√©rifier le d√©roulement de l‚Äôimport dans le fichier <code class="docutils literal notranslate"><span class="pre">var/log/insert_departements.log</span></code></p></li>
</ul>
</section>
<section id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>M√©tadonn√©es : Ajout d‚Äôune fiche pour chaque jeu de donn√©es et cadres d‚Äôacquisition, incluant une carte de l‚Äô√©tendue des observations et un graphique de r√©partition des taxons par Groupe INPN (#846 par &#64;FloVollmer)</p></li>
<li><p>M√©tadonn√©es : Possibilit√© d‚Äôexporter les fiches des JDD et des CA en PDF, g√©n√©r√©s par le serveur avec WeasyPrint. Logo et ent√™tes modifiables dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/images/</span></code> (#882 par &#64;FloVollmer)</p></li>
<li><p>M√©tadonn√©es : Impl√©mentation du CRUVED sur la liste des CA et JDD (#911)</p></li>
<li><p>M√©tadonn√©es : Affichage de tous les CA des JDD pour lequels l‚Äôutilisateur connect√© a des droits (#908)</p></li>
<li><p>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration (optionnelle) vers Taxref version 13</p></li>
<li><p>Installation globale migr√©e de Taxref version 11 √† 13</p></li>
<li><p>Synth√®se et zonages : Ne pas inclure l‚Äôassociation aux zonages limitrophes d‚Äôune observation quand sa g√©om√©trie est √©gale √† un zonage (maille, commune‚Ä¶) (#716 par &#64;jbdesbas)</p></li>
<li><p>Synth√®se : Ajout de la possibilit√© d‚Äôactiver la recherche par observateur √† travers une liste, avec ajout des param√®tres <code class="docutils literal notranslate"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> par d√©faut) et <code class="docutils literal notranslate"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synth√®se : Am√©lioration de la recherche des observateurs. Non prise en compte de l‚Äôordre des noms saisis (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synth√®se : Ajout de filtres avanc√©s (<code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">par</span></code> bas√© sur <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code>, <code class="docutils literal notranslate"><span class="pre">Commentaire</span></code> du relev√© et de l‚Äôoccurrence, <code class="docutils literal notranslate"><span class="pre">D√©terminateur</span></code>) (#834 par &#64;jbrieuclp)</p></li>
<li><p>Occtax : Cr√©ation d‚Äôun trigger g√©n√©rique de calcul de l‚Äôaltitude qui n‚Äôest ex√©cut√© que si l‚Äôaltitude n‚Äôest pas post√©e (#848)</p></li>
<li><p>Ajout d‚Äôune table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister les applications mobiles, l‚ÄôURL de leur APK et d‚Äôune API pour interroger le contenu de cette table. Les fichiers des applications et leurs fichiers de configurations peuvent √™tre charg√©s dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/mobile</span></code> (#852)</p></li>
<li><p>Ajout d‚Äôun offset et d‚Äôune limite sur la route de la couleur des taxons (utilis√©e uniquement par Occtax-mobile actuellement)</p></li>
<li><p>Support des fonds de carte au format WMS (<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>), (#890 par &#64;jbdesbas)</p></li>
<li><p>Ajout d‚Äôun champs texte <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code></p></li>
<li><p>Am√©lioration des perfomances du module de validation, en revoyant la vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les requ√™tes et en g√©n√©rant le GeoJSON au niveau de la BDD (#923)</p></li>
<li><p>Ajout d‚Äôune fonction SQL d‚Äôinsertion de donn√©es dans la synthese (et une fonction python associ√©e)</p></li>
<li><p>Compl√©ments de la documentation (Permissions des utilisateurs, Occhab‚Ä¶)</p></li>
<li><p>Ajout de scripts de migration des donn√©es de GINCO1 vers GeoNature (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco</span></code>)</p></li>
<li><p>Trigger Occtax vers Synth√®se : Am√©lioration du formatage des heures avec <code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code> dans la fonction <code class="docutils literal notranslate"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</p></li>
<li><p>Barre de navigation : Clarification de l‚Äôic√¥ne d‚Äôouverture du menu, ajout d‚Äôun param√®tre <code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de changer le nom du fichier du logo de l‚Äôapplication (#897 par &#64;jbrieuclp)</p></li>
<li><p>M√©dias : Am√©lioration des fonctions backend</p></li>
<li><p>Mise √† jour de jQuery en version 3.5.0</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code> et du trigger sur la Synth√®se qui la remplissait pour utiliser la vue mat√©rialis√©e <code class="docutils literal notranslate"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant les noms de recherche de tous les taxons de Taxref, enti√®rement revue dans TaxHub 1.7.0</p></li>
<li><p>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe de jointure des tables</p></li>
<li><p>Ajout de fonctions SQL d‚Äôinsertion de donn√©es dans la Synth√®se (<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row()</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python associ√©e (<code class="docutils literal notranslate"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>) pour l‚ÄôAPI permettant de poster dans la Synth√®se (#736). Utilis√©e par le module Monitoring.</p></li>
<li><p>Ajout du plugin Leaflet.Deflate (#934  par &#64;jpm-cbna)</p></li>
<li><p>Connexion au CAS INPN : Association des JDD aux modules Occtax et Occhab (param√©trable) quand on importe les JDD de l‚Äôutilisateur qui se connecte (dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.cor_module_dataset</span></code>)</p></li>
<li><p>Mise √† jour des librairies Python Utils-Flask-SQLAlchemy (en version 0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant de mettre en place les exports au format GeoPackage et corrigeant les exports de SHP contenant des g√©om√©tries multiples</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Mise √† jour des URL de la documentation utilisateur des modules, renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Validation : Correction de l‚Äôouverture de la fiche d‚Äôinformation d‚Äôune observation (#858)</p></li>
<li><p>Modification de l‚Äôattribution de la hauteur du composant <code class="docutils literal notranslate"><span class="pre">map-container</span></code> pour permettre d‚Äôadapter la hauteur de la carte si la hauteur d‚Äôun conteneur parent est modifi√©. Et que <code class="docutils literal notranslate"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</p></li>
<li><p>Mise √† jour de la librairie python Markupsafe en version 1.1, corrigeant un probl√®me de setuptools (#881)</p></li>
<li><p>Page Maintenance : Correction de l‚Äôaffichage de l‚Äôimage (par &#64;jpm-cbna)</p></li>
<li><p>Correction du multiselect du composant <code class="docutils literal notranslate"><span class="pre">pnx-nomenclatures</span></code> (#885 par &#64;jpm-cbna)</p></li>
<li><p>Correction de l‚Äù<code class="docutils literal notranslate"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> (#901 par &#64;jbrieuclp)</p></li>
<li><p>Utilisation de NVM quand on installe les d√©pendances javascript (#926 par &#64;jpm-cbna)</p></li>
<li><p>Formulaire JDD : Correction de l‚Äôaffichage de la liste des modules (#861)</p></li>
<li><p>Correction de l‚Äôutilisation des param√®tres du proxy (#944)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature.</p>
<ul class="simple">
<li><p>Vous devez d‚Äôabord mettre √† jour TaxHub en version 1.7.0</p></li>
<li><p>Si vous mettez √† jour TaxHub, vous pouvez mettre √† jour Taxref en version 13. Il est aussi possible de le faire en diff√©r√©, plus tard</p></li>
<li><p>Vous pouvez mettre √† jour UsersHub en version 2.1.2</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</p></li>
<li><p>Si vous avez mis √† jour Taxref en version 13, r√©percutez les √©volutions au niveau des nomenclatures avec le script SQL <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>. Sinon vous devrez l‚Äôex√©cuter plus tard, apr√®s avoir mis √† jour Taxref en version 13. Apr√®s avoir mis √† jour Taxref en version 13, pensez √† mettre √† jour le param√®tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code>.</p></li>
<li><p>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</p></li>
<li><p>Installer les d√©pendances de la librairie Python WeasyPrint :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libcairo2</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpango</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpangocairo</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libgdk</span><span class="o">-</span><span class="n">pixbuf2</span><span class="mf">.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libffi</span><span class="o">-</span><span class="n">dev</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">shared</span><span class="o">-</span><span class="n">mime</span><span class="o">-</span><span class="n">info</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Corriger l‚Äôutilisation des param√®tres du proxy (#944) dans le fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh</span></code> en rempla√ßant les 2 lignes :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_http&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_https&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Vous pouvez supprimer les associations des observations de la synth√®se aux zonages limitrophes, si vous n‚Äôavez pas d‚Äôobservations sans g√©om√©trie (#719) :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">cor_area_synthese</span> <span class="n">cas</span>
<span class="n">USING</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">synthese</span> <span class="n">s</span><span class="p">,</span> <span class="n">ref_geo</span><span class="o">.</span><span class="n">l_areas</span> <span class="n">a</span>
<span class="n">WHERE</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_synthese</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">id_synthese</span> <span class="n">AND</span> <span class="n">a</span><span class="o">.</span><span class="n">id_area</span> <span class="o">=</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_area</span>
<span class="n">AND</span> <span class="n">public</span><span class="o">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="id17">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id17" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibilit√© de charger les commandes d‚Äôun module dans les commandes de GeoNature</p></li>
<li><p>Ajout de commentaires dans le fichier d‚Äôexemple de configuration <code class="docutils literal notranslate"><span class="pre">config/default_config.toml.example</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôune incoh√©rence dans le d√©compte des JDD sur la page d‚Äôaccueil en leur appliquant le CRUVED (#752)</p></li>
<li><p>Mont√©e de version de la librairie <code class="docutils literal notranslate"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour compatibilit√© avec la version 1.0.0 du module d‚Äôexport</p></li>
</ul>
</section>
<section id="id18">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id18" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Installation globale : Compatibilit√© Debian 10 (PostgreSQL 11, PostGIS 2.5)</p></li>
<li><p>Installation globale : Passage √† Taxhub 1.6.4 et UsersHub 2.1.1</p></li>
<li><p>Utilisation g√©n√©ralis√©e des nouvelles librairies externalis√©es de s√©rialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</p></li>
<li><p>Possibilit√© de r√©gler le timeout de Gunicorn pour √©viter le plantage lors de requ√™tes longues</p></li>
<li><p>Ne pas zoomer sur les observations au premier chargement de la carte (#838)</p></li>
<li><p>Leaflet-draw : Ajout de la possibilit√© de zoomer sur le point (par &#64;joelclems)</p></li>
<li><p>Ajout du nom vernaculaire dans les fiches d‚Äôinformation des relev√©s d‚ÄôOcctax (par &#64;FloVollmer / #826)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôinstallation de Node.js et npm par l‚Äôutilisation g√©n√©ralis√©e de nvm (#832 et #837)</p></li>
<li><p>Fixation de la version de Node.js en 10.15.3 (dans le fichier <code class="docutils literal notranslate"><span class="pre">fronted/.nvmrc</span></code>)</p></li>
<li><p>Ajout d‚Äôune r√©f√©rence de l‚Äôobjet Leaflet <code class="docutils literal notranslate"><span class="pre">L</span></code> afin qu‚Äôil soit utilis√© dans les modules et changement du typage de l‚Äô√©venement Leaflet <code class="docutils literal notranslate"><span class="pre">MouseEvent</span></code> en <code class="docutils literal notranslate"><span class="pre">L.LeafletMouseEvent</span></code></p></li>
<li><p>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</p></li>
<li><p>Corrections de typos dans la documentation d‚Äôadministration (#840 - par &#64;sogalgeeko)</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version depuis la 2.2.x, mais en suivant les notes des versions interm√©diaires (NB : il n‚Äôest pas n√©cessaire d‚Äôex√©cuter le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> des versions pr√©c√©dentes)</p></li>
<li><p>Installez <code class="docutils literal notranslate"><span class="pre">pip3</span></code> et <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
<span class="n">sudo</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span><span class="o">==</span><span class="mf">20.0.1</span>
</pre></div>
</div>
</li>
<li><p>Rajoutez la ligne <code class="docutils literal notranslate"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> puis rechargez supervisor (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code>). Il s‚Äôagit du temps maximal (en seconde) autoris√© pour chaque requ√™te. A augmenter, si vous avez d√©j√† rencontr√© des probl√®mes de timeout.</p></li>
<li><p>Depuis le r√©pertoire <code class="docutils literal notranslate"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal notranslate"><span class="pre">nvm</span> <span class="pre">install</span></code></p></li>
</ul>
</section>
<section id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de No√´l (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>D√©veloppement du module Occhab (Occurrences d‚Äôhabitats) bas√© sur une version minimale du standard SINP du m√™me nom et s‚Äôappuyant sur le r√©f√©rentiel Habref du SINP (#735)</p>
<ul>
<li><p>Consultation (carte-liste) des stations et affichage de leurs habitats</p></li>
<li><p>Recherche (et export) des stations par jeu de donn√©es, habitats ou dates</p></li>
<li><p>Saisie d‚Äôune station et de ses habitats</p></li>
<li><p>Possibilit√© de saisir plusieurs habitats par station</p></li>
<li><p>Saisie des habitats bas√©e sur une liste pr√©-d√©finie √† partir d‚ÄôHabref. Possibilit√© d‚Äôint√©grer toutes les typologies d‚Äôhabitat ou de faire des listes r√©duites d‚Äôhabitats</p></li>
<li><p>Possibilit√© de charger un fichier GeoJson, KML ou GPX sur la carte et d‚Äôutiliser un de ses objets comme g√©om√©trie de station</p></li>
<li><p>Mise en place d‚Äôune API Occhab (Get, Post, Delete, Export stations et habitats et r√©cup√©rer les valeurs par d√©faut des nomenclatures)</p></li>
<li><p>Calcul automatique des altitudes (min/max) et de la surface d‚Äôune station</p></li>
<li><p>Gestion des droits (en fonction du CRUVED de l‚Äôutilisateur connect√©)</p></li>
<li><p>D√©finition des valeurs par d√©faut dans la BDD (param√©trable par organisme)</p></li>
<li><p>Possibilit√© de masquer des champs du formulaire</p></li>
</ul>
</li>
<li><p>Cr√©ation d‚Äôun sous-module autonome ou int√©gr√© pour g√©rer l‚ÄôAPI d‚ÄôHabref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :</p>
<ul>
<li><p>Rechercher un habitat dans Habref (avec usage du trigramme pour la pertinence du r√©sultat)</p></li>
<li><p>Obtenir les infos d‚Äôun habitat et de ses correspondances √† partir de son cd_hab</p></li>
<li><p>Obtenir les habitats d‚Äôune liste (avec ou sans leur code en plus de leur nom et filtrable par typologie)</p></li>
<li><p>Obtenir la liste des typologies (filtrable par liste d‚Äôhabitats)</p></li>
</ul>
</li>
<li><p>Mise √† jour du module des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version 1.3.2 incluant notamment :</p>
<ul>
<li><p>Ajout de nomenclatures SINP concernant les habitats</p></li>
<li><p>Ajout d‚Äôune contrainte d‚Äôunicit√© sur la combinaison des champs <code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal notranslate"><span class="pre">t_nomenclatures</span></code></p></li>
</ul>
</li>
<li><p>Association des JDD √† des modules pour filtrer les JDD utilis√©s dans Occtax ou dans Occhab notamment (#399)</p></li>
<li><p>Mise √† jour de Angular 4 √† Angular 7 (performances, ‚Ä¶.) par &#64;jbrieuclp</p></li>
<li><p>Ajout d‚Äôune documentation utilisateur pour le module Synth√®se : <a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a> (par &#64;amandine-sahl)</p></li>
<li><p>OCCTAX : Am√©lioration importante des performances de la liste des relev√©s (par &#64;jbrieuclp) (#690, #740)</p></li>
<li><p>Am√©liorations des performances des exports de Occtax et de Synth√®se et ajout d‚Äôindex dans Occtax (par &#64;gildeluermoz) (#560)</p></li>
<li><p>Partage de scripts de sauvegarde de l‚Äôapplication et de la BDD dans <code class="docutils literal notranslate"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</p></li>
<li><p>Externalisation des librairies d‚Äôoutils Flask et SQLAlchemy (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir les factoriser et les utiliser dans d‚Äôautres applications. Cela am√©liore aussi les performances des jointures.</p></li>
<li><p>SYNTHESE : Ajout d‚Äôun export de la liste des esp√®ces (#805)</p></li>
<li><p>SYNTHESE : Baser la port√©e de tous les exports (y compris Statuts) sur l‚Äôaction E (#804)</p></li>
<li><p>METADONNEES : Affichage des ID des JDD et CA</p></li>
<li><p>OCCTAX : Conserver le fichier GPX ou GeoJSON charg√© sur la carte quand on enchaine des relev√©s et ajouter de la transparence sur les g√©om√©tries utilis√©s dans les relev√©s pr√©c√©dents (#813)</p></li>
<li><p>OCCTAX : Clarification de l‚Äôergonomie pour ajouter un d√©nombrement sur un taxon (#780)</p></li>
<li><p>Ajout des dates de creation et de modification dans les tables <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> et triggers pour les calculer automatiquement</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">geom_local</span></code>, <code class="docutils literal notranslate"><span class="pre">altitude_min</span></code> et <code class="docutils literal notranslate"><span class="pre">altitude_max</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer automatiquement (#812)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">id_module</span></code>, <code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal notranslate"><span class="pre">id_nomenclature_grp_typ</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</p></li>
<li><p>Le composant g√©n√©rique FileLayer expose un <code class="docutils literal notranslate"><span class="pre">output</span></code> pour r√©cuperer la g√©om√©trie s√©lectionn√©e (un observable de MapService √©tait utilis√© auparavant)</p></li>
<li><p>Support des markers sur le composant <code class="docutils literal notranslate"><span class="pre">leaflet-draw</span></code></p></li>
<li><p>Possibilit√© de ne pas activer le composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> au lancement lorsque celui-ci est utilis√© (input <code class="docutils literal notranslate"><span class="pre">defaultEnable</span></code>)</p></li>
<li><p>Ajout d‚Äôinputs <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">medias</span></code> et <code class="docutils literal notranslate"><span class="pre">datalist</span></code> au composant DynamicForm permettant de g√©n√©rer des formulaires dynamiques.</p></li>
<li><p>Am√©liorations diverses du composant DynamicForm (par &#64;joelclems)</p></li>
<li><p>Ajout d‚Äôun param√®tre dans le cas o√π le serveur se trouve derri√®re un proxy (<code class="docutils literal notranslate"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal notranslate"><span class="pre">proxy_https</span></code> dans <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>)</p></li>
<li><p>Ajout d‚Äôune route permettant de r√©cup√©rer la liste des r√¥les d‚Äôune liste √† partir de son code (par &#64;joelclems)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>MENU Side nav : Correction pour ne pas afficher les modules pour lesquels le param√®tre <code class="docutils literal notranslate"><span class="pre">active_frontend</span></code> est False (#822)</p></li>
<li><p>OCCTAX : Gestion de l‚Äô√©dition des occurrences o√π le JDD a √©t√© d√©sactiv√©, en ne permettant pas de modifier le JDD (#694)</p></li>
<li><p>OCCTAX : Correction d‚Äôune faiblesse lors de la r√©cup√©ration des informations taxonomiques d‚Äôun relev√© (utilisation d‚Äôune jointure plut√¥t que l‚ÄôAPI TaxHub) (#751)</p></li>
<li><p>OCCTAX : Correction des longues listes de taxons dans les tooltip des relev√©s en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</p></li>
<li><p>OCCTAX : Masquer le bouton <code class="docutils literal notranslate"><span class="pre">T√©l√©charger</span></code> si l‚Äôutilisateur n‚Äôa pas de droits d‚Äôexport dans le module (E = 0)</p></li>
<li><p>OCCTAX : Correction de l‚Äôaffichage des relev√©s dans la liste (#777)</p></li>
<li><p>OCCTAX : Correction des exports quand on filtre sur un obervateur en texte</p></li>
<li><p>SYNTHESE : Filtre sur <code class="docutils literal notranslate"><span class="pre">date_max</span></code> en prenant <code class="docutils literal notranslate"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code> pour prendre en compte les observations avec un horaire (#778)</p></li>
<li><p>SYNTHESE : Correction des boutons radios pour les filtres taxonomiques avanc√©s bas√©s sur les attributs TaxHub (#763)</p></li>
<li><p>SYNTHESE : Correction de la recherche par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> dans le composant <code class="docutils literal notranslate"><span class="pre">SearchTaxon</span></code> (#824)</p></li>
<li><p>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</p></li>
<li><p>INSCRIPTION : Correction si aucun champ additionnel n‚Äôa √©t√© ajout√© au formulaire (par &#64;jbrieuclp) (#746)</p></li>
<li><p>INSCRIPTION : Correction de l‚Äôusage des param√®tres <code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> et <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</p></li>
<li><p>Simplification de l‚Äô√©criture des logs dans le script <code class="docutils literal notranslate"><span class="pre">install_db.sh</span></code></p></li>
<li><p>Correction de l‚Äôinstallation des requirements.txt lors de l‚Äôinstallation d‚Äôun module (#764 par &#64;joelclems)</p></li>
<li><p>COMMONS : Modification des champs de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> de type CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal notranslate"><span class="pre">module_path</span></code>, <code class="docutils literal notranslate"><span class="pre">module_target</span></code>, <code class="docutils literal notranslate"><span class="pre">module_external_url</span></code>) (#799)</p></li>
<li><p>COMMONS : Ajout de contraintes d‚Äôunicit√© pour les champs <code class="docutils literal notranslate"><span class="pre">module_path</span></code> et <code class="docutils literal notranslate"><span class="pre">module_code</span></code> de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code></p></li>
<li><p>pnx-geojson : Am√©lioration du zoom, gestion des styles</p></li>
<li><p>Migration des donn√©es GeoNature V1 vers V2 (<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>NB: La version 2.3.0 n‚Äôest pas compatible avec le module Dashboard. Si vous avez le module Dashboard install√©, ne passez pas √† cette nouvelle version. Compatibilit√© dans la 2.3.1.</p>
<ul class="simple">
<li><p>Lancer le script de migration qui va installer et remplir le nouveau sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_habitats</span></code> avec Habref et mettre √† jour le sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/install/migration
chmod +x 2.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
<p>V√©rifier que la migration s‚Äôest bien d√©roul√©e dans le fichier <code class="docutils literal notranslate"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul class="simple">
<li><p>Lancer le script SQL de mise √† jour de la BDD de GeoNature <a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></p></li>
<li><p>Vous pouvez installer le nouveau module Occhab (Occurrences d‚Äôhabitats) si vous le souhaitez :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_occhab /occhab
deactivate
</pre></div>
</div>
<ul class="simple">
<li><p>Lors de la migration (<code class="docutils literal notranslate"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les JDD actifs sont associ√©s par d√©faut au module Occtax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>). A chacun d‚Äôadapter si besoin, en en retirant certains. Pour utiliser le module Occhab, vous devez y associer au moins un JDD.</p></li>
</ul>
</section>
<section id="id19">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id19" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>La route de changement de mot de passe √©tait d√©sactiv√©e par le mauvais param√®tre (<code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</p></li>
<li><p>D√©sactivation du mode ¬´¬†enchainement des relev√©s¬†¬ª en mode √©dition (#669). Correction effacement du m√™me relev√© (#744)</p></li>
<li><p>Correction d‚Äôaffichage du module m√©tadonn√©es lorsque les AF n‚Äôont pas de JDD pour des raisons de droit (#743)</p></li>
<li><p>Diverses corrections de doublons d‚Äôimport et de logs de d√©bugs (#742)</p></li>
<li><p>Mont√©e de version du sous-module d‚Äôauthentification: 1.4.2</p></li>
</ul>
</section>
<section id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôinterfaces et de param√®tres de cr√©ation de compte, de r√©cup√©ration de son mot de passe et d‚Äôadministration de son profil, bas√© sur l‚ÄôAPI UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia) #615</p></li>
<li><p>Ajout d‚Äôune fonctionnalit√© de cr√©ation automatique d‚Äôun CA et d‚Äôun JDD personnel lors de la validation d‚Äôun compte cr√©√© automatiquement (param√©trable)</p></li>
<li><p>Am√©lioration du composant de cr√©ation dynamique de formulaire (support de text-area, checkbox simple et multiple et exemple d‚Äôutilisation √† partir de la conf GeoNature)</p></li>
<li><p>Le composant ‚Äúobservateur‚Äù permet de rechercher sur le nom ou le pr√©nom (utilisation des RegEx) #567</p></li>
<li><p>Mise √† jour de Flask en version 1.1.1</p></li>
<li><p>Nouvelle version du sous-module d‚Äôauthentification (1.4.1), compatible avec UsersHub 2.1.0</p></li>
<li><p>Mise √† jour du sous-module de nomenclatures (version 1.3.0)</p></li>
<li><p>Mise √† jour et clarification du MCD (<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par &#64;jpm-cbna</p></li>
<li><p>Ajout d‚Äôune tutoriel vid√©o d‚Äôinstallation dans la documentation (<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug sur les export CSV en utilisant la librairie Python standard <code class="docutils literal notranslate"><span class="pre">csv</span></code> (#733)</p></li>
<li><p>SYNTHESE API : Passage de la route principale de r√©cup√©ration des donn√©es en POST plut√¥t qu‚Äôen GET (#704)</p></li>
<li><p>SYNTHESE BDD : Suppression automatique des aires intersect√©es (<code class="docutils literal notranslate"><span class="pre">synthese.cor_area_synthese</span></code>) lorsqu‚Äôune observation est supprim√©e (DELETE CASCADE)</p></li>
<li><p>SYNTHESE : Prise en compte du param√®tre <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code> (#707)</p></li>
<li><p>OCCTAX : Correction d‚Äôune autocompl√©tion automatique erron√©e de la date max en mode √©dition (#706)</p></li>
<li><p>VALIDATION : Am√©liorations des performances, par &#64;jbrieuclp (#710)</p></li>
<li><p>Prise en compte des sous-taxons pour le calcul des r√®gles de sensibilit√©</p></li>
<li><p>Correction des contraintes CHECK sur les tables li√©es √† la sensibilit√©</p></li>
<li><p>Compl√©ment et correction des scripts de migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
<li><p>Correction et clarification de la documentation d‚Äôadministration des listes de taxons et de sauvegarde et restauration de la BDD (par &#64;lpofredc)</p></li>
<li><p>Correction de la rotation des logs</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Passer le script de migration suivant: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous souhaitez activer les fonctionnalit√©s de cr√©ation de compte, veuillez lire <strong>attentivement</strong> cette documentation : <a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></p></li>
<li><p>Si vous activez la cr√©ation de compte, UsersHub 2.1.0 doit √™tre install√©. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de version</a>.</p></li>
</ul>
</section>
<section id="id20">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id20" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>SYNTHESE : Correction d‚Äôune URL en dur pour la recherche de rangs taxonomiques</p></li>
<li><p>OCCTAX : Affichage uniquement des JDD actifs</p></li>
<li><p>VALIDATION : Abaissement de la limite d‚Äôaffichage de donn√©es sur la carte par d√©faut + message indicatif</p></li>
<li><p>Migration : Suppression d‚Äôun lien symbolique qui cr√©ait des liens en cascade</p></li>
<li><p>Am√©lioration de la documentation (&#64;dthonon)</p></li>
<li><p>Am√©lioration de la rapidit√© d‚Äôinstallation du MNT gr√¢ce √† la suppression d‚Äôun param√®tre inutile</p></li>
<li><p>BACKOFFICE : Correction d‚Äôune URL incorrecte et customisation</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0, passez directement √† cette version en suivant les notes de version de la 2.1.1.</p>
</section>
<section id="id21">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id21" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>SYNTHESE: Factorisation du formulaire de recherche (utilis√© dans le module synthese et validation)</p></li>
<li><p>SYNTHESE: Simplification et correction du module de recherche avanc√©e d‚Äôun taxon en le limitant √† l‚Äôordre (performances)</p></li>
<li><p>SYNTHESE: Ajout d‚Äôun composant de recherche taxonomique avanc√© bas√© sur les rangs taxonomiques (modules synthese et validation), bas√© sur la nouvelle fonction <code class="docutils literal notranslate"><span class="pre">taxonomie.find_all_taxons_children</span></code> ajout√©e √† TaxHub</p></li>
<li><p>Cr√©ation d‚Äôun backoffice d‚Äôadmnistration dans le coeur de GeoNature. Bas√© sur Flask-admin, les modules peuvent alimenter dynamiquement le backoffice avec leur configuration</p></li>
<li><p>Mise en place d‚Äôune documentation d√©veloppeur automatique de l‚ÄôAPI √† partir des docstring et des composants frontend, g√©n√©r√©e par Travis et d√©sormais accessible √† l‚Äôadresse <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</p></li>
<li><p>Am√©lioration de la documentation (triggers, installation, module validation)</p></li>
<li><p>Suppression du module d‚Äôexemple, remplac√© par un template de module (<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</p></li>
<li><p>Ajout d‚Äôun champ <code class="docutils literal notranslate"><span class="pre">validable</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code> controlant les donn√©es pr√©sentes dans le module VALIDATION (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</p></li>
<li><p>VALIDATION: Lister toutes les donn√©es de la synth√®se ayant un <code class="docutils literal notranslate"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui ont un enregistrement dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code></p></li>
<li><p>VALIDATION: On ne liste plus les <code class="docutils literal notranslate"><span class="pre">id_nomenclatures</span></code> des types de validation √† utiliser, dans la configuration du module. Mais on utilise toutes les nomenclatures activ√©es du type de nomenclature <code class="docutils literal notranslate"><span class="pre">STATUT_VALID</span></code>. (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</p></li>
<li><p>Ajout de tests sur les ajouts de JDD et CA</p></li>
<li><p>Ajout d‚Äôune fonctionnalit√© d‚Äôenvoie d‚Äôemail via Flask-Mail dans le coeur de GeoNature</p></li>
<li><p>Am√©lioration des performances: ajout d‚Äôindex sur Occtax et Metadonn√©es</p></li>
<li><p>Script d‚Äôimport des m√©tadonn√©es √† partir du webservice MTD de l‚ÄôINPN (&#64;DonovanMaillard)</p></li>
<li><p>Compl√©ment, correction et compatibilit√© 2.1.0 des scripts de migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Nombreuses corrections du module de validation (non utilisation des id_nomenclature, simplification des vues et de la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code>)</p></li>
<li><p>Ordonnancement de listes d√©roulantes (#685)</p></li>
<li><p>OCCTAX : correction de l‚Äô√©dition d‚Äôun relev√© √† la g√©om√©trie de type Polyline (#684)</p></li>
<li><p>OCCTAX : correction l‚Äô√©dition et du contr√¥le conditionnel des champs de ¬´¬†preuves¬†¬ª (preuve d‚Äôexistence num√©rique / non num√©rique) (#679)</p></li>
<li><p>OCCTAX : correction du parametre <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en compte (#670)</p></li>
<li><p>OCCTAX: correction de la date_max non remplie lorsque <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></p></li>
<li><p>OCCTAX: correction d‚Äôun bug lors de l‚Äôenchainement de relev√© lorsque l‚Äôheure est remplie</p></li>
<li><p>SYNTHESE: correction des doublons lorsqu‚Äôil y a plusieurs observateurs</p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> sur les champs de recherche de type texte (recherche sur Preuve num√©rique) (#530)</p></li>
<li><p>D√©sactivation du mode ¬´¬†enchainer les relev√©s¬†¬ª en mode √©dition (#699)</p></li>
<li><p>Correction de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> √† la place de <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de suivi √† des modules</p></li>
<li><p>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</p></li>
<li><p>Le trigger remplissant <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> en intersectant <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les zonages ayant le champs <code class="docutils literal notranslate"><span class="pre">enabled=true</span></code></p></li>
<li><p>Correction <code class="docutils literal notranslate"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</p></li>
<li><p>MAJ de s√©curit√© de Bootstrap (en version 4.3.1)</p></li>
<li><p>L‚Äôancien module export du coeur est enlev√© en vue de la sortie du nouveau module export</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Passer TaxHub en version 1.6.3 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</p></li>
<li><p>Passer le script de migration <code class="docutils literal notranslate"><span class="pre">data/2.1.0to2.1.1.sql</span></code></p></li>
<li><p>Si vous aviez modifier les <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> dans la surcouche de la configuration du module validation, supprimer les car on se base maintenant sur les <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code></p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</section>
<section id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Int√©gration du module Validation dans GeoNature (d√©velopp√© par &#64;JulienCorny, financ√© par &#64;sig-pnrnm)</p></li>
<li><p>Ajout de tables, r√®gles et fonctions permettant de calculer la sensibilit√© des occurrences de taxon de la synth√®se (#284)</p></li>
<li><p>Occtax - Possibilit√© d‚Äôenchainer les saisies de relev√©s et de garder les informations du relev√© (#633)</p></li>
<li><p>Occtax - Am√©lioration de l‚Äôergonomie de l‚Äôinterface MapList pour clarifier la recherche et l‚Äôajout d‚Äôun relev√© + ajout compteur (#467)</p></li>
<li><p>R√©vision de l‚Äôinterface du module M√©tadonn√©es, listant les cadres d‚Äôacquisition et leurs jeux de donn√©es (par &#64;jbrieuclp)</p></li>
<li><p>Ajout d‚Äôun m√©canisme du calcul des taxons observ√©s par zonage g√©ographique (#617)</p></li>
<li><p>Les mailles INPN (1, 5, 10km) sont int√©gr√©es √† l‚Äôinstallation (avec un param√®tre)</p></li>
<li><p>Statistiques de la page d‚Äôaccueil - Ajout d‚Äôun param√®tre permettant de les d√©sactiver (#599)</p></li>
<li><p>Occtax - Date par d√©faut param√©trable (#351)</p></li>
<li><p>Support des g√©ometries multiples (MultiPoint, MultiPolygone, MultiLigne) dans la synth√®se et Occtax (#609)</p></li>
<li><p>Synthese - Affichage des zonages intersect√©s dans un onglet s√©par√© (#579)</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>R√©vision compl√®te des scripts de migration de GeoNature v1 √† v2 (<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code>)</p></li>
<li><p>Masquer l‚Äôexport du module Synth√®se si son CRUVED est d√©fini √† 0 (#608)</p></li>
<li><p>Correction de la v√©rification du CRUVED du module METADONNEES (#601)</p></li>
<li><p>Correction de la v√©rification du CRUVED lorsque get_role = False</p></li>
<li><p>Correction de la traduction sur la page de connexion (par &#64;jbrieuclp)</p></li>
<li><p>Occtax - Retour du composant GPS permettant de charger un marker √† partir de coordonn√©es X et Y (#624)</p></li>
<li><p>Correction lors d‚Äôimport de fichier GPX ayant une altitude (#631)</p></li>
<li><p>Occtax - Correction du filtre Observateur texte libre (#598)</p></li>
<li><p>M√©tadonn√©es - Inversion des domaines terrestre/marin (par &#64;xavyeah39)</p></li>
<li><p>M√©tadonn√©es - Correction de l‚Äô√©dition des cadres d‚Äôacquisition (#654, par &#64;DonovanMaillard)</p></li>
<li><p>Mise √† jour de s√©curit√© de Jinja2 et SQLAlchemy</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Lancer le script de migration de la base de donn√©es :</p>
<p>Cette nouvelle version de GeoNature int√®gre les mailles INPN (1, 5, 10km) dans le r√©ferentiel g√©ographique. Si vous ne souhaitez pas les installer, lancer le script ci dessous en passant le param√®tre <code class="docutils literal notranslate"><span class="pre">no-grid</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p>Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande d‚Äôinstallation du module puis sortir du virtualenv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id22">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id22" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>D√©veloppement : ajout d‚Äôune fonction de g√©n√©ration dynamique de requ√™te SQL (avec v√©rification et cast des types)</p></li>
<li><p>Synthese : Ajout d‚Äôun message indiquant que le module affiche les derni√®res observations par d√©faut</p></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li><p>Synthese : correction du filtre CRUVED pour les port√©es 1 et 2 sur la route <code class="docutils literal notranslate"><span class="pre">synthese/for_web</span></code> (#584)</p></li>
<li><p>Synthese : correction du bug lorsque la g√©om√©trie est null (#580)</p></li>
<li><p>Synthese : Correction de la redirection vers le module de saisie (#586)</p></li>
<li><p>Synthese : Correction de la valeur par d√©faut de la nomenclature <code class="docutils literal notranslate"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal notranslate"><span class="pre">Pr√©sent</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">NSP</span></code>)</p></li>
<li><p>Configuration carto : correction du bug d‚Äôarrondissement des coordonn√©es g√©ographiques (#582)</p></li>
<li><p>Correction du trigger de calcul de la geom locale</p></li>
<li><p>Recr√©ation de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait √©t√© supprim√©e lors de la migration RC3 vers RC4</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_releve_list</span></code></p></li>
<li><p>Correction ajout rang et cd_nom sur l‚Äôautocomplete de la synthese, absent dans le script de migration</p></li>
<li><p>DEPOBIO : Correction de la d√©connexion au CAS INPN</p></li>
<li><p>Occtax et Metadata: correction lors de la mise √† jour d‚Äôun √©lement (Merge mal g√©r√© par SQLAlchemy lorsqu‚Äôon n‚Äôa pas une valeur NULL) (#588)</p></li>
<li><p>Composant ¬´¬†jeu de donn√©es¬†¬ª : retour √† l‚Äôaffichage du nom long (#583)</p></li>
<li><p>Am√©lioration du style du composant multiselect</p></li>
<li><p>Metadata : formulaire cadre d‚Äôacquisition - listage uniquement des cadres d‚Äôacquisition parent pour ne pas avoir de cadres d‚Äôacquisition imbriqu√©s</p></li>
<li><p>Ajouts de tests automatis√©s compl√©mentaires</p></li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cuter le script de migration SQL du sous-module Nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</p></li>
<li><p>Ex√©cuter le script de migration SQL de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standardis√©e, plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<img alt="http://geonature.fr/img/gn-login.jpg" src="http://geonature.fr/img/gn-login.jpg" />
<p>Pour plus de d√©tails sur les √©volutions apport√©es dans la version 2, consultez les d√©tails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Possibilit√© de charger un fichier (GPX, GeoJson ou KML) sur la carte pour la saisie dans le module Occtax (#256)</p></li>
<li><p>Ajout d‚Äôun moteur de recherche de lieu (bas√© sur l‚ÄôAPI OpenStreetMap Nominatim) sur les modules cartographiques (#476)</p></li>
<li><p>Int√©gration du plugin leaflet markerCluster permettant d‚Äôafficher d‚Äôavantage d‚Äôobservations sur les cartes et de g√©rer leurs superposition (#559)</p></li>
<li><p>Synth√®se : possibilit√© de grouper plusieurs types de zonages dans le composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Design de la page de login</p></li>
<li><p>Int√©gration d‚Äôun bloc stat sur la page d‚Äôaccueil</p></li>
<li><p>Ajout d‚Äôun export des m√©tadonn√©es dans la synth√®se</p></li>
<li><p>Centralisation de la configuration cartographique dans la configuration globale de GeoNature (<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>)</p></li>
<li><p>Cartographie : zoom sur l‚Äôemprise des r√©sultats apr√®s une recherche</p></li>
<li><p>Migration de la gestion des m√©tadonn√©es dans un module √† part : ‚ÄúMETADATA‚Äù (#550)</p></li>
<li><p>Export vue synth√®se customisable (voir doc)</p></li>
<li><p>Lien vers doc par module (customisables dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>) (#556)</p></li>
<li><p>Ajout du code du d√©partement dans les filtres par commune (#555)</p></li>
<li><p>Ajout du rang taxonomique et du cd_nom apr√®s les noms de taxons dans la recherche taxonomique (#549)</p></li>
<li><p>Mise √† jour des communes fournies lors de l‚Äôinstallation (IGN admin express 2019) (#537)</p></li>
<li><p>Synth√®se : Ajout du filtre par organisme (#531), affichage des acteurs dans les fiches d√©tail et les exports</p></li>
<li><p>Synthese: possibilit√© de filtrer dans les listes d√©roulantes des jeux de donn√©es et cadres d‚Äôacquisition</p></li>
<li><p>Filtre de la recherche taxonomique par r√®gne et groupe INPN retir√© des formulaires de recherche (#531)</p></li>
<li><p>Suppression du champ validation dans le sch√©ma de BDD Occtax car cette information est stock√©e dans la table verticale <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans les fiches Occtax et Synth√®se</p></li>
<li><p>Ajout d‚Äôune vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la r√©cup√©ration du dernier statut de validation d‚Äôune observation</p></li>
<li><p>Suppression de toutes les r√©f√©rences √† <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code> en vue de le supprimer de TaxHub</p></li>
<li><p>S√©paration des commentaires sur l‚Äôobservation et sur le contexte (relev√©) dans la Synth√®se et simplification des triggers de Occtax vers Synth√®se (#478)</p></li>
<li><p>Nouveau logo GeoNature (#346)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Am√©liorations importantes des performances de la synth√®se (#560)</p></li>
<li><p>Synth√®se : correction li√©e aux filtres multiples et aux filtres g√©ographiques de type cercle</p></li>
<li><p>Ajout d‚Äôune contrainte <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre <code class="docutils literal notranslate"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#554)</p></li>
<li><p>Occtax : possibilit√© de saisir un d√©nombrement √©gal √† 0 (cas des occurrences d‚Äôabsence)</p></li>
<li><p>Occtax : retour √† l‚Äôemprise cartographique pr√©c√©dente lorsqu‚Äôon enchaine les relev√©s (#570)</p></li>
<li><p>Occtax : correction de l‚Äôautomplissage du champ <code class="docutils literal notranslate"><span class="pre">hour_max</span></code> lors de l‚Äô√©dition d‚Äôun relev√©</p></li>
<li><p>Divers compl√©ments de la documentation (merci &#64;jbdesbas, &#64;xavyeah39 et &#64;DonovanMaillard)</p></li>
<li><p>Ajout de contraintes d‚Äôunicit√© sur les UUID_SINP pour emp√™cher les doublons (#536)</p></li>
<li><p>Corrections et compl√©ments des tests automatiques</p></li>
<li><p>Am√©lioration de l‚Äôinstallation des modules GeoNature</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li><p>Sauvegarder toutes ses donn√©es car l‚Äôop√©ration est complexe et non-automatis√©e</p></li>
<li><p>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Passer aux derni√®res versions de UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation compl√®te</p></li>
<li><p>Adaptez les scripts pr√©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et ex√©cutez-les pas √† pas. Attention ces scripts ont √©t√© faits pour la version 2.0.0-rc.1 et sont donc √† ajuster, tester, compl√©ter et adapter √† votre contexte</p></li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la migration.</p>
<ul class="simple">
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires.</p></li>
<li><p>Les personnes ayant configur√© leur fichier <code class="docutils literal notranslate"><span class="pre">map.config.ts</span></code> devront le r√©percuter dans <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, suite √† la centralisation de la configuration cartographique (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section <code class="docutils literal notranslate"><span class="pre">[MAPCONFIG]</span></code>).</p></li>
<li><p>La configuration des exports du module synth√®se a √©t√© modifi√©e (voir <a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>). Supprimer la variable``[SYNTHESE.EXPORT_COLUMNS]`` dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Voir l‚Äôexemple dans le fichier (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section) pour configurer les exports.</p></li>
<li><p>Supprimer la variable <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a √©t√© ajout√©e dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>.</p></li>
<li><p>Pour simplifier son √©dition, le template personalisable de la page d‚Äôaccueil (<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>) a √©t√© modifi√© (la carte des 100 derni√®re observations n‚Äôy figure plus). Veuillez supprimer tout ce qui se situe √† partir de la ligne 21 (<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</p></li>
<li><p>Ex√©cuter le script de migration SQL: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</p></li>
<li><p>Le backoffice de gestion des m√©tadonn√©es est dor√©navant un module GeoNature √† part. Le script migration pr√©c√©demment lanc√© pr√©voit de mettre un CRUVED au groupe_admin et groupe_en_poste pour le nouveau module METADATA. Les groupes nouvellement cr√©√©s par les administrateurs et n‚Äôayant de CRUVED pour l‚Äôobjet METADATA (du module Admin), se retrouvent avec le CRUVED h√©rit√© de GeoNature. L‚Äôadministrateur devra changer lui-m√™me le CRUVED de ces groupes pour le nouveau module METADATA via le backoffice des permissions.</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
</ul>
</section>
<section id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Mise en place de logs rotatifs pour √©viter de surcharger le serveur</p></li>
<li><p>Centralisation des logs applicatifs dans le dossier <code class="docutils literal notranslate"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Synth√®se - Correction et am√©lioration de la gestion des dates (#540)</p></li>
<li><p>Am√©lioration des tests automatis√©s</p></li>
<li><p>Correction et compl√©ment ds scripts d‚Äôinstallation des modules GeoNature</p></li>
<li><p>Remplacement de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> par <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code></p></li>
<li><p>Compl√©ment des documentations de customisation, d‚Äôadministration et de d√©veloppement</p></li>
<li><p>Ajout d‚Äôune documentation de migration de donn√©es Serena vers GeoNature (<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>) par &#64;xavyeah39</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</p></li>
<li><p>Ex√©cutez la mise √† jour de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p></li>
<li><p>Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de GeoNature dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus associer les sites de suivi de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> √† des applications, utilis√© par les modules de suivi (Flore, habitat, chiro). Le m√©canisme est remplac√© par une association des sites de suivi aux modules. La cr√©ation de la nouvelle table est automatis√©e (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la migration des √©ventuelles donn√©es existantes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> vers <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code>, √† faire manuellement.</p></li>
<li><p>Afin que les logs de l‚Äôapplication soient tous √©crits au m√™me endroit, modifier le fichier <code class="docutils literal notranslate"><span class="pre">geonature-service.conf</span></code> (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la ligne <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code> (en rempla√ßant &lt;MON_USER&gt; par votre utilisateur linux).</p></li>
<li><p>Vous pouvez √©galement mettre en place un syst√®me de logs rotatifs (syst√®me permettant d‚Äôarchiver les fichiers de logs afin qu‚Äôils ne surchargent pas le serveur - conseill√© si votre serveur a une capacit√© disque limit√©e). Cr√©er le fichier suivant <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes suivantes dans le fichier nouvellement cr√©√© (en rempla√ßant &lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">MON_USER</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/*.</span><span class="n">log</span> <span class="p">{</span>
<span class="n">daily</span>
<span class="n">rotate</span> <span class="mi">8</span>
<span class="n">size</span> <span class="mi">100</span><span class="n">M</span>
<span class="n">create</span>
<span class="n">compress</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ex√©cutez ensuite la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Mise √† jour des paquets du frontend (#538)</p></li>
<li><p>Correction d‚Äôun conflit entre Marker et Leaflet-draw</p></li>
<li><p>Utilisation du param√®tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> au niveau de l‚Äôapplication</p></li>
<li><p>Corrections mineures diverses</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Sortie de versions correctives de UsersHub (2.0.2 - <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) et TaxHub (1.6.1 - <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) √† appliquer aussi</p></li>
<li><p>Vous pouvez vous r√©f√©rer √† la documentation globale de mise √† jour de GeoNature RC3 vers RC4 par &#64;DonovanMaillard (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</p></li>
</ul>
</section>
<section id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Int√©gration de la gestion des permissions (CRUVED) dans la BDD de GeoNature, g√©r√© via une interface d‚Äôadministration d√©di√© (#517)</p></li>
<li><p>Mise en place d‚Äôun syst√®me de permissions plus fin par module et par objet (#517)</p></li>
<li><p>Mise en place d‚Äôun m√©canimse g√©n√©rique pour la gestion des permissions via des filtres : filtre de type port√©e (SCOPE), taxonomique, g√©ographique etc‚Ä¶ (#517)</p></li>
<li><p>Compatibilit√© avec UsersHub version 2</p></li>
<li><p>L‚Äôadministration des permissions ne propose que les r√¥les qui sont actif et qui ont un profil dans GeoNature</p></li>
<li><p>Ajout du composant Leaflet.FileLayer dans le module Synth√®se pour pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme g√©om√©trie de recherche (#256)</p></li>
<li><p>Ajout et utilisation de l‚Äôextension PostgreSQL <code class="docutils literal notranslate"><span class="pre">pg_tgrm</span></code> permettant d‚Äôam√©liorer l‚ÄôAPI d‚Äôautocompl√©tion de taxon dans la synth√®se, en utilisant l‚Äôalgorithme des trigrammes (<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>), fonctionnel aussi dans les autres modules si vous mettez √† jour TaxHub en version 1.6.0.</p></li>
<li><p>Nouvel exemple d‚Äôimport de donn√©es historiques vers GeoNature V2 : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a> (par &#64;DonovanMaillard)</p></li>
<li><p>Compl√©ment de la documentation HTTPS et ajout d‚Äôune documentation Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l‚Äôid_digitiser lors de la mise √† jour (#481)</p></li>
<li><p>Corrections multiples de la prise en compte du CRUVED (#496)</p></li>
<li><p>Deconnexion apres inactivit√© de l‚Äôutilisateur (#490)</p></li>
<li><p>Suppression des heures au niveau des dates de l‚Äôexport occtax (#485)</p></li>
<li><p>Correction du message d‚Äôerreur quand on n‚Äôa pas de JDD (#479)</p></li>
<li><p>Correction du champs commentaire dans les exports d‚ÄôOcctax s√©par√© entre relev√© et occurrence (#478)</p></li>
<li><p>Correction des param√®tres de la fonction <code class="docutils literal notranslate"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</p></li>
<li><p>Correction de l‚Äôadministration des m√©tadonn√©es (#466 #420)</p></li>
<li><p>M√©tadonn√©es (JDD et CA) : ne pas afficher les utilisateurs qui sont des groupes dans les acteurs</p></li>
<li><p>Ajout d‚Äôun champs dans la Synth√®se permettant de stocker de quel module provient une occurrence et fonctions SQL associ√©es (#412)</p></li>
<li><p>Am√©lioration du style des champs obligatoires</p></li>
<li><p>Am√©liorations mineures de l‚Äôergonomie d‚ÄôOcctax</p></li>
<li><p>Correction du spinner qui tournait en boucle lors de l‚Äôexport CSV de la Synth√®se (#451)</p></li>
<li><p>Correction des tests automatis√©s</p></li>
<li><p>Am√©lioration des performances des intersections avec les zonages de <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code></p></li>
<li><p>Compl√©ment de la documentation de d√©veloppement</p></li>
<li><p>Simplification de la configuration des gn_modules</p></li>
<li><p>Occtax : ordonnancement des observation par date (#467)</p></li>
<li><p>Occtax : Remplissage automatique de l‚Äôheure_max √† partir de l‚Äôheure_min (#522)</p></li>
<li><p>Suppression des warnings lors du build du frontend</p></li>
<li><p>Correction de l‚Äôinstallation des modules GeoNature</p></li>
<li><p>Ajout d‚Äôun message quand on n‚Äôa pas acc√®s √† une donn√©e d‚Äôun module</p></li>
<li><p>Affichage du nom du module dans le Header (#398)</p></li>
<li><p>Correction des outils cartographiques dans Occtax</p></li>
<li><p>Correction compl√©mentaire des styles des lignes sans remplissage (#458)</p></li>
<li><p>MaplistService : correction du zoom sur les polygones et polylignes</p></li>
<li><p>Composant Areas et Municipalities : remise √† z√©ro de la liste d√©roulante quand on efface la recherche ou remet √† jour les filtres</p></li>
<li><p>Composant Taxonomy : la recherche autocomplet√©e est lanc√©e m√™me si on tape plus de 20 caract√®res. Le nombre de r√©sultat renvoy√© est d√©sormais param√©trable (#518)</p></li>
<li><p>Limitation du nombre de connexions √† la BDD en partageant l‚Äôinstance <code class="docutils literal notranslate"><span class="pre">DB</span></code> avec les sous-modules</p></li>
<li><p>Installation : utilisation d‚Äôun r√©pertoire <code class="docutils literal notranslate"><span class="pre">tmp</span></code> local et non plus au niveau syst√®me pour limiter les probl√®mes de droits (#503)</p></li>
<li><p>Evolution du template d‚Äôexemple de module GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>) pour utiliser l‚Äôinstance DB et utiliser les nouveaux d√©corateurs de permissions (CRUVED)</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle version, il est n√©cessaire d‚Äôavoir install√© UsersHub version 2.x au pr√©alable. Suivez donc sa documentation (<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) avant de proc√©der √† la mont√©e de version de GeoNature.</p></li>
<li><p>Ex√©cuter la commande suivante pour ajouter l‚Äôextension <code class="docutils literal notranslate"><span class="pre">pg_trgm</span></code>, en rempla√ßant la variable <code class="docutils literal notranslate"><span class="pre">$db_name</span></code> par le nom de votre BDD : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></p></li>
<li><p>Mettez √† jour TaxHub en version 1.6.0 pour b√©n√©ficier de l‚Äôam√©lioration de la recherche taxonomique dans tous les modules</p></li>
<li><p>Ex√©cutez la mise √† jour de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</p></li>
<li><p>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Note d√©veloppeurs</strong></p>
<ul class="simple">
<li><p>Vous pouvez faire √©voluer les modules GeoNature en utilisant l‚Äôinstance <code class="docutils literal notranslate"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts d‚Äôinstallation (#498)</p></li>
<li><p>Il n‚Äôest plus n√©c√©ssaire de d√©finir un <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans la configuration des modules GeoNature.</p></li>
<li><p>La gestion des permissions a √©t√© revue et est d√©sormais internalis√©e dans GeoNature (voir <a class="reference external" href="http://docs.geonature.fr/development.html#developpement-backend">http://docs.geonature.fr/development.html#developpement-backend</a>), il est donc necessaire d‚Äôutiliser les nouveaux d√©corateurs d√©crit dans la doc pour r√©cup√©rer le CRUVED.</p></li>
</ul>
</section>
<section id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">√¨nstall_all.sh</span></code> au niveau de la g√©n√©ration de la configuration Apache de TaxHub et UsersHub (#493)</p></li>
<li><p>Suppression du Servername dans la configuration Apache de TaxHub du script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Compl√©ment de la documentation de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous migrez depuis une version 2.0.0-rc.2, installez directement cette version corrective plut√¥t que la 2.0.0-rc.3, mais en suivant les notes de versions de la 2.0.0-rc.3</p></li>
<li><p>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal notranslate"><span class="pre">/</span></code>, consultez sa documentation <a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur Debian 8, probl√®me de version de PostGIS qui ne s‚Äôinstalle pas correctement</p></li>
</ul>
</section>
<section id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<ul class="simple">
<li><p>Possibilit√© d‚Äôutiliser le MNT en raster ou en vecteur dans la BDD (+ doc MNT) #439 (merci &#64;mathieubossaert)</p></li>
<li><p>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</p></li>
<li><p>INSTALL_ALL - Am√©lioration de la conf Apache de TaxHub pour g√©rer son URL sans <code class="docutils literal notranslate"><span class="pre">/</span></code> √† la fin</p></li>
<li><p>Dessin cartographique d‚Äôune autre couleur (rouge) que les observations (bleu)</p></li>
<li><p>Occtax : retour au zoom pr√©c√©dent lors de l‚Äôenchainement de relev√© (#436)</p></li>
<li><p>Occtax : observateur rempli par d√©faut avec l‚Äôutilisateur connect√© (#438)</p></li>
<li><p>Prise en compte des g√©om√©tries nulles dans la fonction <code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Gestion plus compl√®te des donn√©es exemple int√©gr√©es ou non lors de l‚Äôinstallation (#446)</p></li>
<li><p>Compl√©ment des diff√©rentes documentations</p></li>
<li><p>Compl√©ment FAQ (#441)</p></li>
<li><p>Documentation de la customisation (merci &#64;DonovanMaillard)</p></li>
<li><p>Am√©lioration de l‚Äôarchitecture du gn_module d‚Äôexemple</p></li>
<li><p>Clarification de la configuration des gn_modules</p></li>
<li><p>Lire le fichier <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> pour l‚Äôafficher dans l‚Äôinterface (#421)</p></li>
<li><p>Utilisation de la vue <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et non plus <code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> par d√©faut pour les exports Occtax (#462)</p></li>
<li><p>Compl√©ment et correction des vues <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et <code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> (#462)</p></li>
<li><p>Mise √† jour de Marshmallow (2.5.0 =&gt; 2.5.1)</p></li>
<li><p>Am√©liorations des routes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de la configuration des modules de suivi pour pouvoir utiliser le nom d‚Äôune application plut√¥t que son identifiant</p></li>
<li><p>Export Synth√®se - Remplacement de la barre de t√©l√©chargement par un spinner (#451)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Doc Import niveau 2 : Corrections et compl√©ments</p></li>
<li><p>Correction du trigger Occtax &gt; Synth√®se qui met √† jour le champs <code class="docutils literal notranslate"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</p></li>
<li><p>Correction et am√©lioration de la fonction <code class="docutils literal notranslate"><span class="pre">install_gn_module</span></code></p></li>
<li><p>Correction coquille dans le mod√®le <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et la fonction <code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Installation uniquement sur un environnement 64 bits (documentation + v√©rification) #442 (merci &#64;jbrieuclp et &#64;sig-pnrnm)</p></li>
<li><p>Correction et d√©coupage des scripts de mise √† jour de la BDD depuis la version Beta5</p></li>
<li><p>Correction de l‚Äô√©dition des date_debut et date_fin de Occtax (#457)</p></li>
<li><p>Correction des exports depuis la Synth√®se et int√©gration de la g√©om√©trie des observations (#461 et #456)</p></li>
<li><p>Ne pas remplir <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si <code class="docutils literal notranslate"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</p></li>
<li><p>Edition d‚Äôun relev√© Occtax - Ne pas recalculer l‚Äôaltitude existante (#424)</p></li>
<li><p>Correction de l‚Äôactivation du formulaire Occtax apr√®s localisation du relev√© (#469 et #471)</p></li>
<li><p>Carte - Enlever le remplissage des lignes (#458)</p></li>
<li><p>Am√©lioration du script de mise √† jour de GeoNature (<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#465)</p></li>
<li><p>Suppression d‚Äôun doublon dans le mod√®le de <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> (merci &#64;lpofredc)</p></li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li><p>Mise √† jour de TaxHub (Doc utilisateur, configuration Apache, script d‚Äôimport des m√©dias depuis API INPN Taxref et remise √† z√©ro des s√©quences)</p></li>
<li><p>Script de migration des donn√©es SICEN (ObsOcc) vers GeoNature : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></p></li>
<li><p>Script d‚Äôimport continu depuis une BDD externe vivante (avec exemple SICEN) : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></p></li>
<li><p>Module Suivi Flore Territoire fonctionnel et installable (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Chiro fonctionnel et installable (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que son Frontend g√©n√©rique pour les protocoles de suivi (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</p></li>
<li><p>Ebauche d‚Äôun module pour les protocoles CMR (Capture-Marquage-Recapture) : <a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></p></li>
<li><p>MCD du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>MCD du module Flore Prioritaire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</p></li>
<li><p>Consolidation du backend et premiers d√©veloppements du frontend de GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</p></li>
<li><p>Cr√©ation d‚Äôun script exp√©rimental d‚Äôinstallation de GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la proc√©dure standard de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Ex√©cutez l‚Äôupdate de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</p></li>
<li><p>Il est aussi conseill√© de mettre √† jour TaxHub en 1.5.1 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa configuration pour qu‚Äôil fonctionne sans <code class="docutils literal notranslate"><span class="pre">/</span></code> √† la fin de son URL</p></li>
<li><p>Attention, si vous installez cette version avec le script global <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code>, il cr√©√© un probl√®me dans la configuration Apache de UserHub (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et supprime tous les <code class="docutils literal notranslate"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation de UsersHub (<a class="reference external" href="https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>) puis relancer Apache (<code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>). Il est conseill√© d‚Äôinstaller plut√¥t la version corrective.</p></li>
</ul>
</section>
<section id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</p></li>
<li><p>Am√©lioration du composant Download</p></li>
<li><p>Am√©lioration du ShapeService</p></li>
<li><p>Compl√©ments de la documentation</p></li>
<li><p>Int√©gration de la documentation D√©veloppement backend dans la documentation</p></li>
<li><p>Nettoyage du code</p></li>
<li><p>Mise √† jour de la doc de l‚ÄôAPI : <a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></p></li>
<li><p>Configuration de la carte (<code class="docutils literal notranslate"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM par d√©faut car OpenTopoMap ne s‚Äôaffiche pas √† petite √©chelle</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code></p></li>
<li><p>Ne pas afficher le debug dans le recherche de la synth√®se</p></li>
<li><p>Correction du bug de d√©connexion entre TaxHub et GeoNature (#423)</p></li>
<li><p>Correction de la fiche info d‚ÄôOcctax</p></li>
<li><p>Champs Multiselect : Ne pas afficher les valeurs selectionn√©es dans la liste quand on modifie un objet</p></li>
<li><p>Trigger Occtax vers Synth√®se : Correction des probl√®mes d‚Äôheure de relev√©s mal copi√©s dans la Synth√®se</p></li>
<li><p>Correction des altitudes (non abouti) (#424)</p></li>
<li><p>Donn√©es exemple : Suppression de l‚Äù<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code> dans la synth√®se</p></li>
<li><p>Suppression d‚Äôun <code class="docutils literal notranslate"><span class="pre">id_municipality</span></code> en dur dans une route</p></li>
<li><p>Suppression de la librairie Certifi non utilis√©e</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la proc√©dure standard de mise √† jour de GeoNature</p></li>
<li><p>Ex√©cuter l‚Äôupdate de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</p></li>
</ul>
</section>
<section id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standarde, plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<p>Pr√©sentation et suivi des d√©veloppements : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li><p>Message d‚Äôintroduction customisable</p></li>
<li><p>Carte des 100 derni√®res observations</p></li>
<li><p>CSS g√©n√©ral de l‚Äôapplication surcouchable</p></li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des donn√©es Faune, Flore et Fonge de type Contact selon le standard Occurrences de taxon du SINP (<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li><p>D√©veloppement des formulaires de saisie, page de recherche, fiche d√©tail, API, CRUVED et export</p></li>
<li><p>Possibilit√© de masquer ou afficher les diff√©rents champs dans le formulaire Occtax (#344)</p></li>
<li><p>D√©veloppement du formulaire de mani√®re g√©n√©rique pour pouvoir r√©utiliser ses diff√©rents √©l√©ments dans d‚Äôautres modules sous forme de composants Angular</p></li>
<li><p>Configuration possible du module (Niveau de zoom, champs affich√©es, export‚Ä¶)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d‚ÄôOcctax √† partir du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un formulaire en d√©clarant ses champs et leur type (#318)</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant que sur les d√©buts de mot et en affichant en premier les noms de r√©f√©rence (<code class="docutils literal notranslate"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</p></li>
<li><p>Multilingue fourni avec fran√ßais et anglais (extensible √† d‚Äôautres langues)</p></li>
<li><p>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans Occtax. #363 et #366</p></li>
<li><p>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de jeu de donn√©es ou si il y a eu un probl√®me lors de la r√©cup√©ration des JDD depuis MTD</p></li>
<li><p>Prise en compte du CRUVED au niveau des routes et du front pour adapter les contenus et fonctionnalit√©s aux droits de l‚Äôutilisateur</p></li>
<li><p>Mise en place des triggers alimentant la synth√®se √† partir des donn√©es saisies et modifi√©es dans Occtax</p></li>
</ul>
<p><strong>Synth√®se</strong></p>
<p>Module permettant de rechercher parmi les donn√©es des diff√©rentes sources pr√©sentes ou int√©gr√©es dans la base de donn√©es de GeoNature</p>
<ul class="simple">
<li><p>Mise en place du backend, de l‚ÄôAPI et du frontend #345</p></li>
<li><p>Interface de consultation, de recherche et d‚Äôexport dans la Synth√®se</p></li>
<li><p>Synth√®se : Calcul automatique (trigger) des zonages de chaque observation (communes, zonages r√©glementaires et naturels)</p></li>
<li><p>Recherche sur les zonages g√©n√©rique et param√©trable</p></li>
<li><p>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge, milieu, attribut taxonomique, nomenclature, date, p√©riode, commune, zonage, cadre d‚Äôacquisition, jeu de donn√©es, observateur, polygone, rectange ou cercle dessin√©</p></li>
<li><p>Retour √† la fiche source possible si l‚Äôobservation a √©t√© saisie dans un module de GeoNature</p></li>
<li><p>Affichage de la fiche d√©tail de chaque observation</p></li>
<li><p>Attributs TaxHub dynamiques et param√©trables</p></li>
<li><p>Configuration possible du module (colonnes, limites de recherche et d‚Äôexport, zoom, export‚Ä¶)</p></li>
<li><p>Export bas√© sur une vue (observations et statuts)</p></li>
<li><p>Prise en compte du CRUVED pour d√©finir les donn√©es √† afficher et √† exporter #412</p></li>
<li><p>Recherche de taxons : Liste bas√©e sur une table aliment√©e automatiquement par les taxons pr√©sents au moins une fois dans la Synth√®se</p></li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports bas√©s sur des vues</p>
<ul class="simple">
<li><p>Mise en place temporaire d‚Äôun export unique, bas√© sur une vue s‚Äôappuyant sur les donn√©es de Occtax, par jeu de donn√©es</p></li>
<li><p>A remplacer par le module g√©n√©rique <a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de d√©veloppement) permettant de g√©n√©rer des exports √† volont√© en cr√©ant des vues et en les affectant √† des utilisateurs ou des groupes. Chaque export sera accompagn√© de son API standardis√©e et document√©e</p></li>
</ul>
<p><strong>Admin</strong></p>
<p>Module d‚Äôadministration des tables centrales de GeoNature</p>
<ul class="simple">
<li><p>Mise en place d‚Äôun module (incomplet) permettant de g√©rer les m√©tadonn√©es et les nomenclatures</p></li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li><p>Mise en place d‚Äôun syst√®me baptis√© CRUVED permettant de d√©finir globalement ou par module 6 actions sont possibles (Create / Read / Update / Validate / Export / Delete) sur 3 port√©es possibles (Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es)</p></li>
<li><p>Ces √©volutions ont √©t√© int√©gr√©es au niveau du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de la base de donn√©es de UsersHub, de son module (<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des routes de l‚ÄôAPI GeoNature et des interfaces</p></li>
</ul>
<p><strong>Bases de donn√©es</strong></p>
<ul class="simple">
<li><p>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et groupe 2 INPN des taxons.</p></li>
<li><p>Mise en place de tables de stockage verticales (historique, m√©dias et validation) #339</p></li>
<li><p>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√© (<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une table des communes, une table g√©n√©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</p></li>
<li><p>Evolution du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique, souple et complet. Il permet d‚Äôattribuer des actions possibles √† un r√¥le (utilisateur ou groupe), sur une port√©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es.</p></li>
<li><p>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas d√©finie au niveau du module, on prend celle de l‚Äôapplication parente. #292</p></li>
<li><p>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne lui est pas list√© dans le Menu et il ne lui est pas accessible si il en connait l‚ÄôURL. #360</p></li>
<li><p>D√©veloppement des m√©tadonn√©es dans la BDD (sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la base du standard M√©tadonn√©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de g√©rer des jeux de donn√©es, des cadres d‚Äôacquisition, des acteurs (propri√©taire, financeur, producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un jeu de donn√©es.</p></li>
<li><p>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</p></li>
<li><p>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP (#209)</p></li>
<li><p>Cr√©ation du sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique des modules de suivi (sites et visites centralis√©s) et les routes associ√©es</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre communes aux autres modules : l‚Äôhistorique des actions sur chaque objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s √† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et de validation des donn√©es mises en place sur le module Occtax. #339</p></li>
<li><p>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et d‚Äôune fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes d‚Äôun taxon (√©tendue des observations, date min et max, altitude min et max, nombre d‚Äôobservations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>). D√©sactiv√©e pour le moment.</p></li>
<li><p>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la projection locale √† partir de la g√©om√©trie 4326 (#370)</p></li>
<li><p>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur <code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> lors de la cr√©ation de leur contenu (code_nomenclature) (#384)</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_imports</span></code> int√©grant des fonctions SQL permettant d‚Äôimporter un CSV dans la BDD et de mapper des champs de tables import√©es avec ceux d‚Äôune table de GeoNature pour g√©n√©rer le script <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></p></li>
<li><p>D√©but de script de migration GeoNature V1 vers GeoNature V2</p></li>
<li><p>Nombreuses fonctions int√©gr√©es dans les sch√©mas de la BDD</p></li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li><p>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian (8 et 9) et Ubuntu (16 et 18)</p></li>
<li><p>Scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES-MNHN)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>R√©daction d‚Äôune documentation concernant l‚Äôinstallation (autonome ou globale), l‚Äôutilisation, l‚Äôadministration et le d√©veloppement : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
<p><strong>D√©veloppement</strong></p>
<ul class="simple">
<li><p>D√©coupage de l‚Äôapplication en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues (#173)</p></li>
<li><p>D√©veloppement de composants Angular g√©n√©riques pour pouvoir les utiliser dans plusieurs modules sans avoir √† les red√©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities, Observers, DynamicForm, MapList‚Ä¶)</p></li>
<li><p>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour limiter les donn√©es affich√©es √† un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature directement au CAS de l‚ÄôINPN, sans UsersHub (cas de l‚Äôinstance nationale INPN de GeoNature).</p></li>
<li><p>Connexion possible au webservice METADONNEES de l‚ÄôINPN pour y r√©cup√©rer les jeux de donn√©es en fonction de l‚Äôutilisateur connect√©, avec mise √† jour des JDD √† chaque appel de la route</p></li>
<li><p>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de modules dans GeoNature (#306)</p></li>
<li><p>Ajout de tests unitaires au niveau du backend et du frontend</p></li>
<li><p>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</p></li>
<li><p>D√©but de cr√©ation du module de gestion des m√©dias (backend uniquement)</p></li>
<li><p>Mise en place d‚Äôune configuration globale et d‚Äôune configuration par module</p></li>
<li><p>Fonction d‚Äôinstallation d‚Äôun module et de g√©n√©ration des fichiers de configuration</p></li>
<li><p>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend dans GeoNature</p></li>
<li><p>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une vue non mapp√©e</p></li>
<li><p>Mise en place d‚Äôun script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li><p>Module Export en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export s‚Äôappuie sur une vue. Il sera possible aux administrateurs d‚Äôune GeoNature d‚Äôajouter autant de vues que n√©cessaires dans son GeoNature.</p></li>
<li><p>Module de validation des donn√©es en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</p></li>
<li><p>Module Suivi Flore territoire en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Habitat en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</p></li>
<li><p>gn_module_suivi_chiro refondu pour devenir un module de GeoNature V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</p></li>
<li><p>Projet suivi utilis√© comme Frontend g√©n√©rique et autonome pour le Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</p></li>
<li><p>GeoNature-citizen en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</p></li>
<li><p>GeoNature-mobile en cours de refonte pour compatibilit√© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</p></li>
<li><p>GeoNature-atlas en cours d‚Äôajustements pour compatibilit√© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/issues/162">https://github.com/PnX-SI/GeoNature-atlas/issues/162</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li><p>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Idem pour UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation compl√®te</p></li>
<li><p>Adaptez les scripts pr√©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et √©x√©cutez-les</p></li>
</ul>
<p><em>TODO : MAJ depuis V1 √†  tester et compl√©ter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p>Supprimer le sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code> puis le recr√©er dans sa version RC1 (#430)</p></li>
<li><p>Ex√©cuter l‚Äôupdate de la BDD GeoNature (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du sous-module Nomenclature (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p></li>
<li><p>Suivre la proc√©dure habituelle de mise √† jour</p></li>
<li><p>Ex√©cuter les commandes suivantes :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">geonature</span><span class="o">/</span><span class="n">backend</span>
<span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">geonature</span> <span class="n">generate_frontend_modules_route</span>
<span class="n">geonature</span> <span class="n">frontend_build</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de JDD ou si il y a eu un probl√®me lors de la r√©cup√©ration des JDD de MTD</p></li>
<li><p>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et d‚Äôune fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes d‚Äôun taxon (√©tendue des observations, date min et max, altitude min et max, nombre d‚Äôobservations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</p></li>
<li><p>L‚Äôexport OccTax est d√©sormais bas√© sur une vue qu‚Äôil est possible d‚Äôadapter</p></li>
<li><p>Ajouts de nouveaux tests automatis√©s du code et mise en place de Travis pour les lancer automatiquement √† chaque commit (<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</p></li>
<li><p>Ajout de donn√©es test</p></li>
<li><p>Mise √† jour des scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES)</p></li>
<li><p>D√©placement de la table centrale de gestion des param√®tres <code class="docutils literal notranslate"><span class="pre">t_parameters</span></code> dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> (#376)</p></li>
<li><p>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la projection locale √† partir de la g√©om√©trie 4326 (#370)</p></li>
<li><p>Regroupement des fichiers li√©s √† l‚Äôinstallation et la mise √† jour dans un r√©pertoire d√©di√© (<code class="docutils literal notranslate"><span class="pre">install</span></code>) (#383)</p></li>
<li><p>Mise en place de scripts de migration global de la BDD (<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du sch√©ma <code class="docutils literal notranslate"><span class="pre">pr_occtax</span></code> (<code class="docutils literal notranslate"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>), d‚Äôun script g√©n√©rique de migration de l‚Äôapplication (<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) et d‚Äôune doc de mise √† jour (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication</a>)</p></li>
<li><p>R√©int√©gration des fichiers de configuration, de logs et des modules externes dans les r√©pertoires de l‚Äôapplication (#375)</p></li>
<li><p>Ajout de routes √† <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code></p></li>
<li><p>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Am√©liorations et documentation des commandes d‚Äôinstallation d‚Äôun module</p></li>
<li><p>Ajout des unit√©s g√©ographiques dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code></p></li>
<li><p>Ajout d‚Äôun bouton <code class="docutils literal notranslate"><span class="pre">Annuler</span></code> dans le formulaire Occtax</p></li>
<li><p>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur <code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> (#384)</p></li>
<li><p>Migration du SQL de <code class="docutils literal notranslate"><span class="pre">ref_nomenclautres</span></code> dans le d√©p√¥t du sous-module (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</p></li>
<li><p>D√©but de mise en place d‚Äôun backoffice (m√©tadonn√©es et nomenclatures)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>OccTax : Correction du double post</p></li>
<li><p>OccTax : Correction des droits dans les JDD</p></li>
<li><p>OccTax : Correction de l‚Äôaffichage des observers_txt dans la fiche d‚Äôun relev√©</p></li>
<li><p>Correction de la gestion g√©n√©rique des m√©dias</p></li>
<li><p>Suppression du lien entre <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> (#374)</p></li>
<li><p>Compl√©ments et relecture de la documentation</p></li>
<li><p>Correction</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez √† jour votre GeoNature depuis une Beta4 :</p>
<ul class="simple">
<li><p>T√©l√©chargez la beta5 et renommer les r√©pertoires :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">PnX</span><span class="o">-</span><span class="n">SI</span><span class="o">/</span><span class="n">GeoNature</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">unzip</span> <span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature_old</span><span class="o">/</span>
<span class="n">mv</span> <span class="n">GeoNature</span><span class="o">-</span><span class="n">geonature2beta</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ex√©cutez le script de migration <code class="docutils literal notranslate"><span class="pre">install/migration/beta4tobeta5.sh</span></code> depuis la racine de votre GeoNature :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">cd</span> <span class="n">geonature</span>
<span class="o">./</span><span class="n">install</span><span class="o">/</span><span class="n">migration</span><span class="o">/</span><span class="n">beta4tobeta5</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Celui-ci va r√©cup√©rer vos fichiers de configuration, d√©placer les modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li><p>Si vous avez d√©velopp√© des modules externes, voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un lien symbolique depuis le r√©pertoire <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> et en r√©int√©grant la configuration du module dans son r√©pertoire <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
</ul>
</section>
<section id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Synth√®se : d√©but de mise en place du backend, de l‚ÄôAPI et du frontend #345</p></li>
<li><p>Compl√©ment de la nomenclature des M√©thodes de d√©termination et suppression du champs Complement_Determination. Merci &#64;DonovanMaillard. #341</p></li>
<li><p>Nouveaux composants Angular (SelectSearch, Municipalities, Observers)</p></li>
<li><p>Am√©lioration de composants Angular (Date du jour par d√©faut, Option de tri des nomenclatures, DynamicForm</p></li>
<li><p>Connexion √† MTD INPN : Mise √† jour des JDD √† chaque appel de la route</p></li>
<li><p>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</p></li>
<li><p>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas d√©finie au niveau du module, on prend celle de l‚Äôapplication parente. #292</p></li>
<li><p>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne lui est pas list√© dans le Menu et il ne lui ai pas accessible si il en connait l‚ÄôURL. #360</p></li>
<li><p>Mise en place d‚Äôun sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre communes aux autres modules : l‚Äôhistorique des actions sur chaque objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s √† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et de validation des donn√©es mises en place sur le module Occtax. #339</p></li>
<li><p>Am√©lioration de l‚Äôergonomie du MapList de OccTax. #361</p></li>
<li><p>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans OccTax. #363 et #366</p></li>
<li><p>Am√©lioration du module g√©n√©rique <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de ses sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a> et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></p></li>
<li><p>Am√©lioration et compl√©ments des scripts d‚Äôinstallation</p></li>
<li><p>Mise en place d‚Äôun script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Compl√©ment des diff√©rentes documentations</p></li>
<li><p>Ajout d‚Äôune documentation d‚Äôadministration d‚ÄôOccTax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</p></li>
</ul>
</section>
<section id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Travail sur le module g√©n√©rique de Suivi int√©gr√© √† GeoNature (<code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</p></li>
<li><p>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend dans GeoNature</p></li>
<li><p>Mise en place de tests automatiques au niveau du Frontend</p></li>
<li><p>M√©nage et r√©organisation du code du Frontend</p></li>
<li><p>Factorisation et harmonisation des composants g√©n√©riques Angular</p></li>
<li><p>Suppression des blocs non fonctionnels sur la Home</p></li>
<li><p>Mise √† jour de la doc et du MCD</p></li>
<li><p>Possibilit√© de masquer ou afficher les diff√©rents champs dans le formulaire Occtax (#344)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d‚ÄôOccTax √† partir du nouveau composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un formulaire en d√©clarant les champs (#318)</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant que sur les d√©buts de mot et en affichant en premier les noms de r√©f√©rence (ordrer_by cd_nom=cd_ref DESC) - #334</p></li>
<li><p>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une vue non mapp√©e</p></li>
<li><p>Suppression des options vides dans les listes d√©roulantes des nomenclatures</p></li>
<li><p>Ajout de quelques param√®tres (niveau de zoom mini dans chaque module, ID de la liste des taxons saisissables dans Occtax‚Ä¶)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la pagination du composant MapList</p></li>
<li><p>Correction des droits attribu√©s automatiquement quand on se connecte avec le CAS</p></li>
<li><p>Correction de l‚Äôinstallation optionnelle de UsersHub dans le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li><p>D√©but de refonte du module Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connect√© au module g√©n√©rique de suivi de GeoNature, dont le front sera externe √† GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</p></li>
<li><p>Maquettage et avanc√©e sur le module Validation (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</p></li>
<li><p>D√©finition du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>Piste de d√©finition du module Interop√©rabilit√© (<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</p></li>
</ul>
</section>
<section id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Compl√©ments de la documentation (sch√©ma architecture, administration, installation, d√©veloppement, FAQ‚Ä¶)</p></li>
<li><p>Am√©lioration de l‚Äôergonomie du module OccTax (composant MapList, filtres, colonnes et formulaires) et du module Exports</p></li>
<li><p>Am√©lioration du composant de recherche d‚Äôun taxon (#324)</p></li>
<li><p>Am√©lioration et optimisation de la s√©rialisation des donn√©es</p></li>
<li><p>Ajout de tests unitaires au niveau du backend</p></li>
<li><p>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</p></li>
<li><p>Migration du module occtax dans le r√©pertoire <code class="docutils literal notranslate"><span class="pre">/contrib</span></code> pour homog√©n√©iser les modules</p></li>
<li><p>Cr√©ation du sch√©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique des modules de suivi (sites et visites centralis√©s)</p></li>
<li><p>D√©but de cr√©ation du module g√©n√©rique des protocoles de suivi</p></li>
<li><p>D√©but de cr√©ation du module de gestion des m√©dias</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Corrections de l‚Äôinstallation globale et autonome</p></li>
<li><p>Renommage Contact en OccTax (en cours)</p></li>
<li><p>Nettoyage du sch√©ma des m√©tadonn√©es (<code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>)</p></li>
</ul>
</section>
<section id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte de la base de donn√©es pour la rendre plus standarde, plus g√©n√©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l‚Äôapplication</p></li>
</ul>
<p>Pr√©sentation et suivi du projet : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Refonte de la base de donn√©es du module Contact, renomm√© en OccTax, s‚Äôappuyant sur le standard Occurrence de taxons du SINP (#183)</p></li>
<li><p>D√©veloppement du module OccTax regroupant les contacts Faune, Flore, Fonge et Mortalit√© (avec formulaire de consultation et de saisie des donn√©es)</p></li>
<li><p>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et groupe 2 INPN des taxons.</p></li>
<li><p>D√©coupage de l‚Äôapplication en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues (#173)</p></li>
<li><p>D√©veloppement de composants g√©n√©riques pour pouvoir les utiliser dans plusieurs modules sans avoir √† les red√©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURES‚Ä¶)</p></li>
<li><p>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√© (<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une table des communes, une table g√©n√©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</p></li>
<li><p>Evolution du sch√©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique, souple et complet. Il permet d‚Äôattribuer des actions possibles √† un r√¥le (utilisateur ou groupe), sur une port√©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es.</p></li>
<li><p>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour limiter les donn√©es affich√©es √† un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature au CAS de l‚ÄôINPN, sans utiliser GeoNature (utilis√© pour l‚Äôinstance nationale INPN de GeoNature). GeoNature peut aussi se connecter au webservice METADONNEES de l‚ÄôINPN pour y r√©cup√©rer les jeux de donn√©es en fonction de l‚Äôutilisateur connect√©.</p></li>
<li><p>Mise en place d‚Äôun module d‚Äôexport. Chaque export s‚Äôappuie sur une vue. Il sera possible √† chaque administrateur d‚Äôajouter autant de vues que n√©cessaires dans son GeoNature. Pour le moment, un export au format SINP Occurrence de taxons a √©t√© int√©gr√© par d√©faut.</p></li>
<li><p>D√©veloppement des m√©tadonn√©es dans la BDD (schema <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la base du standard M√©tadonn√©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de g√©rer des jeux de donn√©es, des cadres d‚Äôacquisition, des acteurs (propri√©taire, financeur, producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un jeu de donn√©es.</p></li>
<li><p>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</p></li>
<li><p>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP (#209)</p></li>
<li><p>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de modules dans GeoNature (#306)</p></li>
<li><p>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian 8 et 9</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Installation globale de GeoNature (avec TaxHub et UsersHub) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></p></li>
<li><p>Installation autonome de GeoNature / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></p></li>
<li><p>Manuel utilisateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></p></li>
<li><p>Manuel administrateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></p></li>
<li><p>D√©veloppement (API, modules et composants) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></p></li>
</ul>
<p>Documentation compl√®te disponible sur <a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li><p>Finalisation MCD du module Synth√®se</p></li>
<li><p>Triggers d‚Äôalimentation automatique de la Synth√®se depuis le module OccTax</p></li>
<li><p>D√©veloppement de l‚Äôinterface du module Synth√®se</p></li>
<li><p>Am√©lioration et g√©n√©ricit√© du module OccTax (m√©dias, import GPX, champs masquables et pseudo-champs)</p></li>
<li><p>G√©n√©ricit√© du module d‚Äôexport</p></li>
<li><p>D√©veloppement du module de validation (#181)</p></li>
<li><p>D√©veloppement d‚Äôun module de suivi des habitats avec une gestion g√©n√©rique des sites et visites de suivi</p></li>
<li><p>D√©veloppement d‚Äôun module de collecte citoyenne (#242)</p></li>
</ul>
</section>
<section id="id23">
<h2>1.9.1 (2018-05-17)<a class="headerlink" href="#id23" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Installation - Suppression des couches SIG (communes, znieff‚Ä¶) pour les t√©l√©charger sur <a class="reference external" href="http://geonature.fr/data/inpn/layers/">http://geonature.fr/data/inpn/layers/</a> et ainsi all√©ger le d√©p√¥t de 158 Mo.</p></li>
<li><p>Compl√©ments mineurs de la documentation</p></li>
<li><p>Migration du script <code class="docutils literal notranslate"><span class="pre">install_all</span></code> en Debian 9. La doc et le script Debian 8 restent disponibles dans le r√©pertoire <code class="docutils literal notranslate"><span class="pre">docs/install_all</span></code></p></li>
<li><p>Corrections mineures de triggers</p></li>
<li><p>Compatibilit√© avec TaxHub 1.3.2, UsersHub 1.3.1, GeoNature-atlas 1.3.2</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.9.1, en prenant en compte les notes des diff√©rentes versions interm√©diaires, notamment les scripts de mise √† jour de la BDD ainsi que les √©ventuels nouveaux param√®tres √† ajouter.</p></li>
<li><p>Ex√©cuter le script de mise √† jour de la BDD <code class="docutils literal notranslate"><span class="pre">data/update_1.9.0to1.9.1.sql</span></code></p></li>
</ul>
</section>
<section id="id24">
<h2>1.9.0 (2017-07-06)<a class="headerlink" href="#id24" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>ATTENTION : Les √©volutions de cette version concernent aussi la webapi. Si vous utilisez les applications GeoNature-mobile, vous devez attendre la sortie d‚Äôune version de GeoNature-mobile-webapi (https://github.com/PnEcrins/GeoNature-mobile-webapi) compatible avec cette version 1.9.0 de GeoNature.</strong> Coming soon !</p>
<p>A noter aussi que cette version de GeoNature est compatible avec GeoNature-atlas 1.2.4 et +.</p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout de la cr√©ation des index spatiaux √† la cr√©ation initiale de la base.</p></li>
<li><p>Cr√©ation ou mise √† jour des g√©om√©tries compatible PostGIS 2.</p></li>
<li><p>Ajout du champ diffusable (oui/non) dans le formulaire web de saisie, uniquement pour ContactFaune et Mortalit√© (TODO : faire la m√™me chose pour les autres protocoles).</p></li>
<li><p>Multi-projection : Les versions ant√©rieures de GeoNature n‚Äô√©taient compatibles qu‚Äôavec la projection Lambert 93 (srid: 2154). Cette version permet de choisir sa projection locale. Elle ajoute un param√®tre <code class="docutils literal notranslate"><span class="pre">srid_local</span></code> dans le <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> et renomme tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> des tables ¬´¬†m√©tier¬†¬ª.
Ce param√®tre est notamment utilis√© lors de la cr√©ation de la base pour affecter le srid de la projection locale √† tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> pr√©sents dans les tables de la base. Ce param√®tre est √©galement utilis√© pour mettre en coh√©rence le syst√®me de projection local utilis√© dans toutes les couches SIG pr√©sentes dans la base et les g√©om√©tries stock√©es dans les champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> des tables ¬´¬†m√©tier¬†¬ª. Le param√©trage du service WMS dans <code class="docutils literal notranslate"><span class="pre">wms/wms.map</span></code> est √©galement pris en charge par le script d‚Äôinstallation de l‚Äôapplication.</p></li>
<li><p>Correction de l‚Äôinstallation de npm</p></li>
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> mis √† jour avec les nouvelles versions de GeoNature-atlas, de TaxHub et de UsersHub.</p></li>
</ul>
<p>IMPORTANT : toutes les couches SIG ins√©r√©es dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">layers</span></code> doivent √™tre dans la projection fournie pour le param√®tre <code class="docutils literal notranslate"><span class="pre">srid_local</span></code>. L‚Äôapplication est livr√©e avec un ensemble de couches en Lambert 93 concernant la m√©tropole. Une installation avec une autre projection, hors m√©tropole, doit donc se faire sans l‚Äôinsertion des couches SIG. Vous devrez manuellement fournir le contenu des tables du sch√©ma <code class="docutils literal notranslate"><span class="pre">layers</span></code> dans la projection choisie.</p>
<p><strong>Notes de versions</strong></p>
<ul class="simple">
<li><p>Vous pouvez ajouter les param√®tres <code class="docutils literal notranslate"><span class="pre">srid_local</span></code>, <code class="docutils literal notranslate"><span class="pre">install_sig_layers</span></code> et <code class="docutils literal notranslate"><span class="pre">add_sample_data</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> en vous inspirant du fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini.sample</span></code>. Toutefois ces param√®tres ne sont utilis√©s que pour une nouvelle installation et notamment pour l‚Äôinstallation de la base.</p></li>
<li><p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.9.0, en prenant en compte les notes des diff√©rentes versions interm√©diaires, notamment les scripts de mise √† jour de la BDD ainsi que les √©ventuels nouveaux param√®tres √† ajouter.</p></li>
<li><p>Si vous migrez depuis la version 1.8.3, ex√©cutez le fichier SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.3to1.9.0.sql</span></code>. Comme GeoNature ne fonctionne jusque l√† que pour des structures de m√©tropole, il est bas√© sur le fait que le champ <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> reste en Lambert 93 (2154). Assurez-vous que le param√®tre <code class="docutils literal notranslate"><span class="pre">$srid_local</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> est √©gal √† <code class="docutils literal notranslate"><span class="pre">2154</span></code>.
ATTENTION : ce script SQL renomme tous les champs <code class="docutils literal notranslate"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> de la BDD de GeoNature. Ceci affecte de nombreuses tables, de nombreux triggers et de nombreuses vues de la base. Le script n‚Äôint√®gre que les vues fournies par d√©faut. Si vous avez cr√©√© des vues sp√©cifiques, notamment pour le module d‚Äôexport, ou si vous avez modifi√© des vues fournies, vous devez adapter/compl√©ter le script. Vous pouvez vous inspirer de son contenu.</p></li>
<li><p>RAPPEL : Ceci affecte √©galement la webapi des applications mobiles. Vous devez donc mettre √† jour votre webapi si vous utilisez la saisie sur les applications mobiles. Une release de la webapi devrait sortir bient√¥t.</p></li>
</ul>
</section>
<section id="id25">
<h2>1.8.4 (2017-04-10)<a class="headerlink" href="#id25" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script d‚Äôinstallation globale (<code class="docutils literal notranslate"><span class="pre">install_all</span></code>) si l‚Äôutilisateur de BDD par d√©faut a √©t√© renomm√© (<code class="docutils literal notranslate"><span class="pre">data/grant.sql</span></code>)</p></li>
<li><p>Correction de la cr√©ation des vues qui remontent la liste des taxons dans les 3 contacts</p></li>
</ul>
</section>
<section id="id26">
<h2>1.8.3 (2017-02-23)<a class="headerlink" href="#id26" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Multi-organisme : l‚Äôorganisme associ√© √† la donn√©e est d√©sormais celui de l‚Äôutilisateur connect√© dans l‚Äôapplication (lors de la cr√©ation d‚Äôune observation uniquement).</p></li>
<li><p>Taxonomie : cr√©ation d‚Äôune liste <code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">possible</span></code>, rempla√ßant l‚Äôattribut <code class="docutils literal notranslate"><span class="pre">Saisie</span></code>. Cela permet de choisir les synonymes que l‚Äôon peut saisir ou non dans GeoNature en se basant sur les <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> (<code class="docutils literal notranslate"><span class="pre">bib_listes</span></code> et <code class="docutils literal notranslate"><span class="pre">cor_nom_liste</span></code>) et non plus sur les <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> (<code class="docutils literal notranslate"><span class="pre">bib_attributs</span></code> et <code class="docutils literal notranslate"><span class="pre">cor_taxon_attribut</span></code>). Voir le script de migration SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code> pour bien basculer les informations de l‚Äôattribut dans la nouvelle liste.</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">synthese.v_tree_taxons_synthese</span></code> potentiellement bloquante √† l‚Äôouverture de la synth√®se.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">utilisateurs.bib_observateurs</span></code> inutile.</p></li>
<li><p>Cr√©ation des index spatiaux manquants (performances)</p></li>
<li><p>Clarification et corrections mineures du script <code class="docutils literal notranslate"><span class="pre">install_all</span></code></p></li>
<li><p>Ajout du MCD de la 1.8 (par &#64;xavier-pnm)</p></li>
<li><p>Am√©liorations du nom des fichiers export√©s depuis la Synth√®se (par &#64;sylvain-m)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez supprimer les lignes concernant le param√®tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_organisme</span> <span class="pre">=</span> <span class="pre">...</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>, l‚Äôorganisme n‚Äô√©tant plus un param√®tre fixe mais d√©sormais celui de l‚Äôutilisateur connect√©.</p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.3, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.2, √©x√©cutez le fichier SQL <code class="docutils literal notranslate"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code>.</p>
</section>
<section id="id27">
<h2>1.8.2 (2017-01-11)<a class="headerlink" href="#id27" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Modularit√© des scripts SQL de cr√©ation de la base en les dissociant par protocole et en regroupant les triggers dans les sch√©mas de chaque protocole (pr√©paration GeoNature V2)</p></li>
<li><p>Correction d‚Äôune requ√™te dans flore station (ind√©pendance vis √† vis de flore patrimoniale)</p></li>
<li><p>Correction du trigger <code class="docutils literal notranslate"><span class="pre">synthese_update_fiche_cflore</span></code> (&#64;ClaireLagaye)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.2, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.1, √©x√©cutez le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.8.1to1.8.2.sql</span></code>. Consultez les derni√®res lignes de ce fichier : vous devez √©valuer si la requ√™te d‚Äôinsertion dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.cor_taxon_attribut</span></code> doit √™tre faite ou non (vous pourriez avoir d√©j√† constat√© et corrig√© cette erreur lors d‚Äôune pr√©c√©dente migration). Cela corrige l‚Äôabsence de taxons prot√©g√©s dans votre synthese en r√©cup√©rant les informations de protection pr√©sentes dans le champ <code class="docutils literal notranslate"><span class="pre">filtre3</span></code> de la table <code class="docutils literal notranslate"><span class="pre">save.bib_taxons</span></code></p>
</section>
<section id="id28">
<h2>1.8.1 (2017-01-05)<a class="headerlink" href="#id28" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout des sauvegardes et de l‚Äôinstallation globale avec un exemple d√©taill√© dans la documentation : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Optimisation et correction de la vue qui retourne l‚Äôarbre des rangs taxonomiques (synthese.v_tree_taxons_synthese)</p></li>
<li><p>Mise en coh√©rence des donn√©es exemple de GeoNature-atlas avec les crit√®res des vues mat√©rialis√©es de GeoNature-atlas</p></li>
<li><p>Mise √† jour de 2 triggers du Contact Flore (&#64;ClaireLagaye)</p></li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.1, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.0, √©x√©cutez le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.8to1.8.1.sql</span></code></p>
</section>
<section id="id29">
<h2>1.8.0 (2016-12-14)<a class="headerlink" href="#id29" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Passage √† TAXREF version 9</p></li>
<li><p>Acc√®s √† la synth√®se en consultation uniquement pour des utilisateurs enregistr√©s avec des droits 1</p></li>
<li><p>Ajout d‚Äôun champ <code class="docutils literal notranslate"><span class="pre">diffusion</span></code> (oui/non) dans la table <code class="docutils literal notranslate"><span class="pre">synthese.syntheseff</span></code>, utilisable dans GeoNature-atlas. Pas d‚Äôinterface de gestion de ce champ pour le moment. CF #132</p></li>
<li><p>Cr√©ation d‚Äôun script d‚Äôinstallation simplifi√© pour un pack UsersHub, TaxHub, GeoNature et GeoNature-atlas : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/docs/install_all">https://github.com/PnX-SI/GeoNature/tree/master/docs/install_all</a></p></li>
<li><p>Factorisation des SQL de cr√©ation des sch√©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> en les r√©cup√©rant dans les d√©pots TaxHub et UsersHub</p></li>
<li><p>Compatibilit√© avec l‚Äôapplication <a class="reference external" href="https://github.com/PnX-SI/TaxHub">TaxHub</a> qui permet de g√©rer la taxonomie √† partir de TAXREF. Cela induit d‚Äôimportants changements dans le sch√©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code>, notamment le renommage de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_taxons</span></code> en <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code>, la suppression de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_filtres</span></code> et l‚Äôutilisation de <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_attributs</span></code> (voir <a class="reference external" href="https://github.com/PnX-SI/TaxHub/issues/71">https://github.com/PnX-SI/TaxHub/issues/71</a> pour plus d‚Äôinformations). Voir aussi le fichier de migration <code class="docutils literal notranslate"><span class="pre">data/update_1.7to1.8.sql</span></code> qui permet d‚Äôautomatiser ces √©volutions de la BDD</p></li>
<li><p>Compatibilit√© avec l‚Äôapplication <a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas">GeoNature-atlas</a> qui permet de diffuser les donn√©es de la synth√®se faune et flore dans un atlas en ligne (exemple : <a class="reference external" href="http://biodiversite.ecrins-parcnational.fr">http://biodiversite.ecrins-parcnational.fr</a>)</p></li>
<li><p>Cr√©ation d‚Äôun site internet de pr√©sentation de GeoNature : <a class="reference external" href="http://geonature.fr">http://geonature.fr</a></p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Am√©lioration des triggers concernant la suppression de fiches orphelines</p></li>
<li><p>Affichage par d√©faut du nom latin dans Contact flore et Contact invert√©br√©s</p></li>
<li><p>Correction des exports lors de la pr√©sence de points-virgules dans les commentaires. Fix #143</p></li>
<li><p>Suppression du besoin d‚Äôun super utilisateur lors de l‚Äôinstallation de la BDD. Fix #141</p></li>
<li><p>Correction de l‚ÄôID des protocoles mortalit√© et invertebres dans la configuration par d√©faut</p></li>
<li><p>Suppression d‚Äôun doublon dans le fichier de configuration symfony de l‚Äôapplication</p></li>
<li><p>Correction des coordonn√©es lors de l‚Äôexport de donn√©es Flore Station</p></li>
<li><p>Autres corrections mineures</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Ex√©cuter le script SQL de migration r√©alisant les modifications de la BDD de la version 1.7.X √† 1.8.0 <code class="docutils literal notranslate"><span class="pre">data/update_1.7to1.8.sql</span></code></p></li>
<li><p>Mettre √† jour taxref en V9 en vous inspirant du script <code class="docutils literal notranslate"><span class="pre">data/taxonomie/inpn/update_taxref_v8tov9</span></code></p></li>
</ul>
<p><strong>TaxHub</strong></p>
<p>L‚Äôapplication TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>) est d√©sormais fonctionnelle, document√© et installable.</p>
<p>Elle vous aidera √† g√©rer vos taxons et l‚Äôensemble du sch√©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code>, pr√©sent dans la BDD de GeoNature.</p>
<p>TaxHub √©voluera pour int√©grer progressivement de nouvelles fonctionnalit√©s.</p>
<p>Il est conseill√© de ne pas installer la base de donn√©es de TaxHub ind√©pendamment et de connecter l‚Äôapplication directement sur le la base de donn√©es de GeoNature.</p>
<p><strong>GeoNature-atlas</strong></p>
<p>GeoNature-atlas est √©galement bas√© sur le sch√©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> de TaxHub. Ainsi TaxHub permet la saisie des informations relatives aux taxons (descriptions, milieux, photos, liens, PDF‚Ä¶). GeoNature-atlas dispose de sa propre base de donn√©es mais pour fonctionner en connexion avec le contenu de la base GeoNature il faut √† minima disposer d‚Äôune version 1.8 de GeoNature.</p>
<dl class="field-list simple">
<dt class="field-odd">notes</dt>
<dd class="field-odd"><p>Une r√©gression dans le contenu de Taxref V9 conduit √† la suppression de l‚Äôinformation concernant le niveau de protection des esp√®ces (r√©gional, national, international,‚Ä¶).
Cette information √©tait utilis√©e par GeoNature, notamment pour d√©finir les textes √† retenir pour la colonne <code class="docutils literal notranslate"><span class="pre">concerne_mon_territoire</span></code> de la table <code class="docutils literal notranslate"><span class="pre">taxonomie.taxref_protection_articles</span></code>.
Vous devez d√©sormais remplir cette colonne manuellement.</p>
</dd>
</dl>
</section>
<section id="id30">
<h2>1.7.4 (2016-07-06)<a class="headerlink" href="#id30" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li><p>Correction du script d‚Äôinstallation des tables li√©es au Contact flore (5a1fb07)</p></li>
<li><p>Mise en coh√©rence avec GeoNature-mobile utilisant les classes ‚Äúgasteropodes‚Äù et ‚Äúbivalves‚Äù et non la classe g√©n√©rique ‚Äúmollusques‚Äù.</p></li>
</ul>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Corrections de mise en forme de la documentation</p></li>
<li><p>Ajout de la liste rouge France de TaxRef lors d‚Äôune nouvelle installation (f4be2b6). A ne pas prendre en compte dans le cas d‚Äôune mise √† jour.</p></li>
<li><p>Ajout du MCD de la BDD - <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png">https://github.com/PnX-SI/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png</a></p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.4 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</p></li>
<li><p>Remplacer <code class="docutils literal notranslate"><span class="pre">id_classe_mollusques</span></code> par <code class="docutils literal notranslate"><span class="pre">id_classe_gasteropodes</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> et renseigner la valeur en coh√©rence avec l‚Äù<code class="docutils literal notranslate"><span class="pre">id_liste</span></code> retenu dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_listes</span></code> pour les gast√©ropodes. Attention, vous devez avoir √©tabli une correspondance entre les taxons gast√©ropodes et bivalves et leur liste dans la table <code class="docutils literal notranslate"><span class="pre">taxonomie.cor_taxon_liste</span></code>.</p></li>
</ul>
</section>
<section id="id31">
<h2>1.7.3 (2016-05-19)<a class="headerlink" href="#id31" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li><p>Correction de coordonn√©es vides dans l‚Äôexport de Flore station. cf <a class="reference external" href="https://github.com/PnX-SI/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096">https://github.com/PnX-SI/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096</a></p></li>
<li><p>Correction des triggers en base concernant un bug de saisie pour les taxons dont le taxon de r√©f√©rence n‚Äôest pas pr√©sent dans <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_taxons</span></code>.</p></li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la proc√©dure classique de mise √† jour. <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.3 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</p></li>
<li><p>Pour passer de la 1.7.2 √† la 1.7.3 vous devez ex√©cuter le script <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.7.2to1.7.3.sql</span></code>.</p></li>
</ul>
</section>
<section id="id32">
<h2>1.7.2 (2016-04-27)<a class="headerlink" href="#id32" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Correction d‚Äôun bug dans l‚Äôexport XLS depuis Flore Station.</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.2 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</p></li>
</ul>
</section>
<section id="id33">
<h2>1.7.1 (2016-04-27)<a class="headerlink" href="#id33" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Ajout des listes flore manquantes dans le script de mise √† jour <code class="docutils literal notranslate"><span class="pre">data/update_1.6to1.7.sql</span></code>.</p></li>
</ul>
</section>
<section id="id34">
<h2>1.7.0 (2016-04-24)<a class="headerlink" href="#id34" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li><p>Ajout du contact flore</p></li>
<li><p>Correction et compl√©ments dans les statistiques et mise en param√®tre de leur affichage ou non, ainsi que de la date de d√©but √† prendre en compte pour leur affichage.</p></li>
<li><p>Ajout d‚Äôun module d‚Äôexport des donn√©es permettant d‚Äôoffrir, en interne ou √† des partenaires, un lien de t√©l√©chargement des donn√©es bas√© sur une ou des vues de la base de donn√©es (un fichier par vue). Voir <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Modification des identifiants des listes pour compatibilit√© avec les applications GeoNature-Mobile.</p></li>
<li><p>Compl√©ment dans la base de donn√©es pour compatibilit√© avec les applications GeoNature-Mobile.</p></li>
<li><p>Correction d‚Äôune erreur sur l‚Äôimportation de shape pour la recherche g√©ographique</p></li>
<li><p>WMS : correction de la liste des sites N2000, correction de l‚Äôaffichage de l‚Äôaire optimale d‚Äôadh√©sion des parcs nationaux et retrait des sites inscrits et class√©s</p></li>
<li><p>Correction d‚Äôun bug permettant la saisie d‚Äôune date d‚Äôobservation post√©rieure √† aujourd‚Äôhui dans Flore station</p></li>
<li><p>Mention de la version de taxref sur la page d‚Äôaccueil</p></li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la proc√©dure classique de mise √† jour. <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p>
<p><strong>1.</strong> Modification des identifiants des listes de taxons pour compatibilit√© avec les applications GeoNature-Mobile.</p>
<p>Dans GeoNature-Mobile, les taxons sont filtrables par classe sur la base d‚Äôun <code class="docutils literal notranslate"><span class="pre">id_classe</span></code>. Ces id sont inscrits en dur dans le code des applications mobiles.</p>
<p>Dans la base GeoNature les classes taxonomiques sont configurables grace au vues <code class="docutils literal notranslate"><span class="pre">v_nomade_classes</span></code> qui utilisent les listes (<code class="docutils literal notranslate"><span class="pre">taxonomie.bib_listes</span></code>).</p>
<p>Les <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> ont donc √©t√© mis √† jour pour √™tre compatibles avec les <code class="docutils literal notranslate"><span class="pre">id_classe</span></code> des applications mobiles.</p>
<p>Voir le script SQL d‚Äôupdate <code class="docutils literal notranslate"><span class="pre">data/update_1.6to1.7.sql</span></code> et LIRE ATTENTIVEMENT LES COMMENTAIRES.</p>
<ul class="simple">
<li><p>En lien avec les modifications ci-dessus, mettre √† jour les variables des classes taxonomiques correspondant aux modification des <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code></p></li>
<li><p>Ajouter dans le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> les variables <code class="docutils literal notranslate"><span class="pre">$struc_abregee</span></code>, <code class="docutils literal notranslate"><span class="pre">$struc_long</span></code>, <code class="docutils literal notranslate"><span class="pre">$taxref_version</span></code>, <code class="docutils literal notranslate"><span class="pre">$show_statistiques</span></code> et <code class="docutils literal notranslate"><span class="pre">$init_date_statistiques</span></code> (voir le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</p></li>
</ul>
<p><strong>2.</strong> Pour ajouter le Contact flore</p>
<ul class="simple">
<li><p>Ex√©cuter le script sql <code class="docutils literal notranslate"><span class="pre">data/2154/contactflore.sql</span></code></p></li>
<li><p>Ajouter les variables <code class="docutils literal notranslate"><span class="pre">$id_lot_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">$id_protocole_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">$id_source_cflore</span> <span class="pre">=</span> <span class="pre">7</span></code> et <code class="docutils literal notranslate"><span class="pre">$appname_cflore</span> <span class="pre">=</span> <span class="pre">'Contact</span> <span class="pre">flore</span> <span class="pre">-</span> <span class="pre">GeoNature';</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> (voir le fichier d‚Äôexemple <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</p></li>
<li><p>Ajouter les variables  <code class="docutils literal notranslate"><span class="pre">id_lot_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">id_protocole_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">id_source_contactflore</span> <span class="pre">=</span> <span class="pre">7</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> (voir le fichier d‚Äôexemple <code class="docutils literal notranslate"><span class="pre">web/js/config.js.sample</span></code>)</p></li>
<li><p>l‚Äôenregistrement correspondant au contact flore dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code> doit √™tre actif (derni√®re colonne) pour que le contact flore soit accessible depuis la page d‚Äôaccueil.</p></li>
</ul>
<p><strong>3.</strong> Afin de mettre √† jour la configuration WMS, vous devez ex√©cuter le fichier <code class="docutils literal notranslate"><span class="pre">wms/update1.6to1.7.sh</span></code>.</p>
<p>Au pr√©alable, assurez vous que les informations renseign√©es dans le fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code> sont √† jour. L‚Äôancien fichier sera sauvegard√© sous <code class="docutils literal notranslate"><span class="pre">wms/wms_1.6.map</span></code>. Vous pourrez faire le choix de conserver ou de supprimer ce fichier de sauvegarde qui ne sera pas utilis√© par l‚Äôapplication.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">wms</span><span class="o">/</span><span class="n">update1</span><span class="mf">.6</span><span class="n">to1</span><span class="mf">.7</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4.</strong> Mise en place du module d‚Äôexport</p>
<ul>
<li><p>Cr√©er les vues retournant les donn√©es attendues.</p></li>
<li><p>Configurer le module dans le fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code> √† partir de l‚Äôexemple du fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>); section <code class="docutils literal notranslate"><span class="pre">configuration</span> <span class="pre">du</span> <span class="pre">module</span> <span class="pre">d'export</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Vous pouvez param√©trer plusieurs modules avec un nom pour chacun grace au param√®tre <code class="docutils literal notranslate"><span class="pre">exportname</span></code></p></li>
<li><p>Pour chacun des modules seuls les utilisateurs de geonature dont le <code class="docutils literal notranslate"><span class="pre">id_role</span></code> figure dans le tableau <code class="docutils literal notranslate"><span class="pre">authorized_roles_ids</span></code> peuvent exporter les donn√©es mises √† disposition par le module d‚Äôexport.</p></li>
<li><p>Chaque module peut comporter autant que vues que n√©cessaire (un bouton par vue g√©n√©rera un fichier zip par vue). Renseigner le tableau <code class="docutils literal notranslate"><span class="pre">views</span></code> pour chacun des modules.</p></li>
<li><p>Voir la documentation ici : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Attribution des droits n√©cessaires pour le r√©pertoire permettant l‚Äôenregistrement temporaire des fichiers g√©n√©r√©s par le module d‚Äôexport.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">775</span> <span class="n">web</span><span class="o">/</span><span class="n">uploads</span><span class="o">/</span><span class="n">exports</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>R√©tablir les droits d‚Äô√©criture et vider le cache</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">cache</span><span class="o">/</span>
<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">log</span><span class="o">/</span>
<span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id35">
<h2>1.6.0 (2016-01-14)<a class="headerlink" href="#id35" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Pour les changements dans la base de donn√©es vous pouvez ex√©cuter le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.5to1.6.sql</span></code></p></li>
<li><p>Mise √† jour de la configuration Apache. Modifier le fichier <code class="docutils literal notranslate"><span class="pre">apache/wms.conf</span></code> en vous basant sur l‚Äôexemple <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/apache/wms.conf.sample#L16-L17">https://github.com/PnX-SI/GeoNature/blob/master/apache/wms.conf.sample#L16-L17</a></p></li>
<li><p>Ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">$id_application</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> (voir la valeur utilis√©e pour GeoNature dans les tables <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs.cor_role_droit_application</span></code>)</p></li>
<li><p>Ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">import_shp_projection</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code> - voir l‚Äôexemple dans le fichier <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/configmap.js.sample#L35</span></code></p></li>
<li><p>Supprimer toute r√©f√©rence √† gps_user_projection dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code></p></li>
<li><p>Ajouter un tableau JSON des projections disponibles pour l‚Äôoutil de pointage GPS : <code class="docutils literal notranslate"><span class="pre">gps_user_projections</span></code> dans <code class="docutils literal notranslate"><span class="pre">web/js/configmap.map</span></code>. Respecter la structure d√©finie dans <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/configmap.js.sample#L7-L14</span></code>. Attention de bien respecter la structure du tableau JSON et notamment sa syntaxe (accolades, virgules, nom des objects, etc‚Ä¶)</p></li>
<li><p>Ajouter les <code class="docutils literal notranslate"><span class="pre">id_liste</span></code> pour les classes faune filtrables dans les formulaires de saisie dans le fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.map</span></code>. Ceci concerne les variables <code class="docutils literal notranslate"><span class="pre">id_classe_oiseaux</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_mammiferes</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_amphibiens</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_reptiles</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_poissons</span></code> et <code class="docutils literal notranslate"><span class="pre">id_classe_ecrevisses</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_insectes</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_arachnides</span></code>, <code class="docutils literal notranslate"><span class="pre">id_classe_myriapodes</span></code> et  <code class="docutils literal notranslate"><span class="pre">id_classe_mollusques</span></code>. Voir l‚Äôexemple dans le fichier <code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature/blob/master/web/js/config.js.sample#L32-44</span></code></p></li>
<li><p>Taxref a √©t√© mis √† jour de la version 7 √† 8. GeoNature 1.6.0 peut fonctionner avec la version 7. Cependant il est conseill√© de passer en taxref V8 en mettant √† jour la table <code class="docutils literal notranslate"><span class="pre">synthese.taxref</span></code> avec la version 8. Cette mise √† jour pouvant avoir un impact fort sur vos donn√©es, son automatisation n‚Äôa pas √©t√© pr√©vue. Le script SQL de migration de vos donn√©es de taxref V7 vers taxref V8 n‚Äôest donc pas fourni. Pour une installation nouvelle de la base de donn√©es, GeoNature 1.6.0 est fourni avec taxref V8.</p></li>
<li><p>Le routing a √©t√© mis √† jour, vous devez vider le cache de Symfony pour qu‚Äôil soit pris en compte. Pour cela, placez vous dans le r√©pertoire racine de l‚Äôapplication et effectuez la commande suivante :</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Les recherches dans la synth√®se sont d√©sormais faites sur le <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> et non plus sur le <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> pour retourner tous les synonymes du taxon recherch√© - Fix #92</p></li>
<li><p>Passage de taxref V7 √† Taxref V8 - Fix #34</p></li>
<li><p>Int√©gration de la premi√®re version de l‚ÄôAPI permettant d‚Äôint√©grer des donn√©es dans la synth√®se depuis une source externe - <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/geonature_webapi_doc.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/geonature_webapi_doc.rst</a></p></li>
<li><p>Mise en param√®tre du <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> - Fix #105</p></li>
<li><p>Recharger la synthese apr√®s suppression d‚Äôun enregistrement - Fix #94</p></li>
<li><p>L‚Äôutilisateur peut lui-m√™me d√©finir le syst√®me de coordonn√©es dans l‚Äôoutil de pointage GPS - Fix #107</p></li>
<li><p>Mise en param√®tre de la projection de la shape import√©e comme zone de recherche dans la synth√®se</p></li>
<li><p>Les exports XLS et SHP comportent le <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> ET le <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> de tous les synonymes du nom recherch√© ainsi que le nom_latin (bib_taxons) ET le nom_valide (taxref) - Fix #92</p></li>
<li><p>SAISIE invert√©br√©s - Ajout d‚Äôun filtre Mollusques - Fix #117</p></li>
<li><p>Am√©lioration du vocabulaire utilis√© sur la page d‚Äôaccueil - #118</p></li>
<li><p>Affichage d‚Äôun message pendant le chargement des exports</p></li>
<li><p>Mise en place de statistiques automatiques sur la page d‚Äôaccueil, bas√©es sur les listes de taxons. A compl√©ter.</p></li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Int√©gration de la librairie <code class="docutils literal notranslate"><span class="pre">OpenLayers.js</span></code> en local dans le code car les liens distants ne fonctionnaient plus - Fix #97</p></li>
<li><p>Correction d‚Äôune erreur lors de l‚Äôenregistrement de la saisie invert√©br√©s - Fix #104</p></li>
<li><p>Correction d‚Äôune erreur de redirection si on choisit ¬´¬†Quitter¬†¬ª apr√®s la saisie de l‚Äôenregistrement (contact faune, mortalit√© et invert√©br√©s) - Fix #102</p></li>
<li><p>Correction du trigger <code class="docutils literal notranslate"><span class="pre">contactfaune.synthese_update_cor_role_fiche_cf()</span></code> - Fix #95</p></li>
<li><p>Correction d‚Äôun bug dans les listes d√©roulantes des taxons filtr√©e par classe qui n‚Äôaffichaient rien - Fix #109</p></li>
<li><p>Correction d‚Äôun bug sur le contenu des exports shape avec le crit√®re de protection activ√© - Fix #114</p></li>
<li><p>Correction et adaptation faune-flore des exports shape</p></li>
<li><p>SYNTHESE - Correction de la liste des taxons sans nom fran√ßais - Fix #116</p></li>
<li><p>Corrections CSS sur la page d‚Äôaccueil - Fix #115</p></li>
<li><p>Correction sur la largeur de la liste des r√©sultats de la synth√®se - Fix #110</p></li>
<li><p>Correction des doublons dans la recherche multi-taxons - Fix #101</p></li>
<li><p>Autres corrections mineures</p></li>
</ul>
</section>
<section id="id36">
<h2>1.5.0 (2015-11-26)<a class="headerlink" href="#id36" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Pour les changements dans la base de donn√©es vous pouvez ex√©cuter le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.4to1.5.sql</span></code></p></li>
<li><p>Le bandeau de la page d‚Äôaccueil <code class="docutils literal notranslate"><span class="pre">web/images/bandeau_faune.jpg</span></code> a √©t√© renomm√© en <code class="docutils literal notranslate"><span class="pre">bandeau_geonature.jpg</span></code>. Renommez le votre si vous aviez personnalis√© ce bandeau.</p></li>
<li><p>Si vous souhaitez d√©sactiver certains programmes dans le ¬´¬†Comment ?¬†¬ª de la synth√®se vous devez utiliser le champs <code class="docutils literal notranslate"><span class="pre">actif</span></code> de la table <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code>.</p></li>
<li><p>Compl√©ter si n√©cessaire les champs <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">picto</span></code>, <code class="docutils literal notranslate"><span class="pre">groupe</span></code> et <code class="docutils literal notranslate"><span class="pre">actif</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code>.</p></li>
<li><p>Nouvelle r√©partition des param√®tres de configuration javascript en 2 fichiers (<code class="docutils literal notranslate"><span class="pre">config.js</span></code> et <code class="docutils literal notranslate"><span class="pre">configmap.js</span></code>). Vous devez reprendre vos param√®tres de configuration du fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code> et les ventiler dans ces deux fichiers.</p></li>
<li><p>Ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code>;</p></li>
<li><p>Retirer le param√®tre <code class="docutils literal notranslate"><span class="pre">fuseauUTM;</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">web/js/config.js</span></code>;</p></li>
<li><p>Bien d√©finir le syst√®me de coordonn√©es √† utiliser pour les pointages par coordonn√©es fournies en renseignant le param√®tre <code class="docutils literal notranslate"><span class="pre">gps_user_projection</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">web/js/configmap.js</span></code>;</p></li>
<li><p>Ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p></li>
<li><p>Ajouter le param√®tre <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$srid_ol_map</span> <span class="pre">=</span> <span class="pre">3857;</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p></li>
<li><p>L‚Äôaltitude est calcul√©e automatiquement √† partir du service ¬´¬†Alticodage¬†¬ª de l‚ÄôAPI GeoPortail de l‚ÄôIGN et non pluas √† partir de la couche <code class="docutils literal notranslate"><span class="pre">layers.l_isolines20</span></code>. Ajoutez ce service dans votre contrat API Geoportail. Il n‚Äôest donc plus n√©cessaire de remplir la couche <code class="docutils literal notranslate"><span class="pre">layers.l_isolines20</span></code>. Cette couche peut toutefois encore √™tre utile si l‚Äôutilisateur supprime l‚Äôaltitude calcul√©e par l‚ÄôAPI Geoportail dans les formulaires de saisie.</p></li>
<li><p>Le loup et le lynx sont retir√©s par d√©faut de la saisie (saisie recommand√©e dans le protocole national du r√©seau grands pr√©dateurs)</p></li>
<li><p>Le cerf, chamois et le bouquetin doivent √™tre saisis selon 6 crit√®res de sexe et age et non 5 comme les autres taxons. Comportement peut-√™tre chang√© en modifiant la vue <code class="docutils literal notranslate"><span class="pre">contactfaune.v_nomade_taxons_faune</span></code>.</p></li>
<li><p>Mortailit√© est d√©sormais une source √† part enti√®re alors qu‚Äôelles √©taient m√©lang√©es avec la source ContactFaune pr√©c√©demment. Si vous avez d√©j√† des donn√©es de mortalit√© enregistr√©es, vous devez adapter la requ√™te SQL ci-dessous avec votre <code class="docutils literal notranslate"><span class="pre">id_source</span></code> pour Mortalit√© et l‚Äôex√©cuter :</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">synthese</span><span class="o">.</span><span class="n">syntheseff</span> <span class="n">SET</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">WHERE</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">AND</span> <span class="n">id_critere_synthese</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Optimisation des vues aux chargement des listes de taxons. Fixes #64</p></li>
<li><p>G√©n√©ricit√© des champs dans <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code> (champs <code class="docutils literal notranslate"><span class="pre">sitpn</span></code> renomm√© en <code class="docutils literal notranslate"><span class="pre">public</span></code>). Fixes #68</p></li>
<li><p>Ajout d‚Äôun champ <code class="docutils literal notranslate"><span class="pre">actif</span></code> √† la table <code class="docutils literal notranslate"><span class="pre">meta.bib_programmes</span></code> permettant de masquer certains programmes dans le ¬´¬†Comment ?¬†¬ª de la synth√®se. Fixes #66</p></li>
<li><p>Ajout d‚Äôun champ <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">picto</span></code>, <code class="docutils literal notranslate"><span class="pre">groupe</span></code> et <code class="docutils literal notranslate"><span class="pre">actif</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code> pour g√©n√©rer la page d‚Äôaccueil dynamiquement et de mani√®re g√©n√©rique. Fixes #69</p></li>
<li><p>Construire dynamiquement la liste des liens vers la saisie des diff√©rents protocoles √† partir de la table <code class="docutils literal notranslate"><span class="pre">synthese.bib_sources</span></code>. Fixes #69</p></li>
<li><p>Tous les styles des √©l√©ments de la page d‚Äôaccueil ont √©t√© pass√©s en CSS. Fixes #57</p></li>
<li><p>Am√©lioration de l‚Äôinterface pendant le chargement des diff√©rentes applications (synth√®se, flore station, formualires de saisie‚Ä¶). Fixes #65</p></li>
<li><p>Recentrage sur la position de l‚Äôutilisation en utilisant le protocole de g√©olocalisation int√©gr√© au navigateur de l‚Äôutilisateur. Fixes #65</p></li>
<li><p>Un message automatique conseille les utilisateurs d‚ÄôInternet Explorer de plut√¥t utiliser Firefox ou Chrome. Fixes #65</p></li>
<li><p>Tri par d√©faut par date d√©croissante des 50 derni√®res observations affich√©es √† l‚Äôouverture de la Synth√®se. Fixes #51</p></li>
<li><p>Vocabulaire. ¬´¬†Dessiner un point¬†¬ª remplac√© par ¬´¬†Localiser l‚Äôobservation¬†¬ª. Fixes #66</p></li>
<li><p>Mise √† jour des copyrights dans les pieds de page de toutes les applications.</p></li>
<li><p>Refonte du CSS du formulaire de login avec bootstrap et une image de fond diff√©rente.</p></li>
<li><p>Refonte Bootstrap de la page d‚Äôaccueil.</p></li>
<li><p>Homog√©n√©isation du pied de page.</p></li>
<li><p>FloreStation et Bryophytes - Homog√©n√©iser interaction carte liste - ajout d‚Äôun popup au survol. Fixes #74</p></li>
<li><p>Suppression d‚Äôimages non utilis√©es dans le r√©pertoire <code class="docutils literal notranslate"><span class="pre">web/images</span></code>.</p></li>
<li><p>Mise en coh√©rence des vues taxonomiques faune. Fixes #81</p></li>
<li><p>Calcul de l‚Äôaltitude √† partir du service ¬´¬†Alticodage¬†¬ª de l‚ÄôAPI GeoPortail de l‚ÄôIGN.</p></li>
<li><p>Factorisation et g√©n√©ralisation du module permettant un positionnement des pointages par saisie de coordonn√©es selon projection et bbox fournies en param√®tres de config.</p></li>
<li><p>Cr√©ation d‚Äôune configuration javascript carto d√©di√©e (<code class="docutils literal notranslate"><span class="pre">configmap.js</span></code>).</p></li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li><p>Correction des probl√®mes de saisie de la version 1.4.0 li√©s √† la migration de la taxonomie.</p></li>
<li><p>Correction de bugs dans Flore Station et Bryophytes (Zoom, recherche</p></li>
</ul>
</section>
<section id="id37">
<h2>1.4.0 (2015-10-16)<a class="headerlink" href="#id37" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>La gestion de la taxonomie a √©t√© mis en conformit√© avec le sch√©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> de la base de donn√©es de TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>). Ainsi le sch√©ma <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> int√©gr√© √† GeoNature 1.3.0 doit √™tre globalement revu. L‚Äôensemble des modifications peuvent √™tre r√©alis√©es en √©xecutant la partie correspondante dans le fichier <code class="docutils literal notranslate"><span class="pre">data/update_1.3to1.4.sql</span></code> (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.3to1.4.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/update_1.3to1.4.sql</a>).</p></li>
<li><p>De nouveaux param√®tres ont potentiellement √©t√© ajout√©s √† l‚Äôapplication. Apr√®s avoir r√©cup√©r√© le fichier de configuration de votre version 1.3.0, v√©rifiez les changements √©ventuels des diff√©rents fichiers de configuration.</p></li>
<li><p>Modification du nom de l‚Äôhost host h√©bergeant la base de donn√©es. databases ‚Äì&gt; geonatdbhost. A changer ou ajouter dans le <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code> si vous avez d√©j√† install√© GeoNature.</p></li>
<li><p>Suivez la proc√©dure de mise √† jour : <a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a></p></li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>A l‚Äôinstallation initiale, chargement en base des zones √† statuts juridiques pour toute la France m√©tropolitaine √† partir des sources de l‚ÄôINPN</p></li>
<li><p>A l‚Äôinstallation initiale, chargement en base de toutes les communes de France</p></li>
<li><p>Mise en place de la compatibilit√© de la base avec le schema de TaxHub</p></li>
</ul>
</section>
<section id="id38">
<h2>1.3.0 (2015-02-11)<a class="headerlink" href="#id38" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>Pr√©-Version de GeoNature - Faune ET Flore. Le fonctionnement de l‚Äôensemble n‚Äôa pas √©t√© totalement test√©, des bugs sont identifi√©s, d‚Äôautres subsistent certainement.</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Grosse √©volution de la base de donn√©es</p></li>
<li><p>Ajout de deux applications de saisie flore (flore station et bryophytes)</p></li>
<li><p>Int√©gration de la flore en sythese</p></li>
<li><p>Ajouter un id_lot, id_organisme, id_protocole dans toutes les tables pour que ces id soit ajout√©s vers la synthese en trigger depuis les tables et pas avec des valeurs en dur dans les triggers. Ceci permet d‚Äôutiliser les param√®tres de conf de GeoNature</p></li>
<li><p>Ajout d‚Äôune fonction √† la base pour correction du dysfonctionnement du wms avec mapserver</p></li>
<li><p>Suppression du champ id_taxon en synthese et lien direct de la synthese avecle taxref. ceci permet d‚Äôajouter des donn√©es en synthese directement dans la base sans ajouter tous les taxons manquants dans la table bib_taxons</p></li>
<li><p>Suppression de la notion de coeur dans les crit√®re de recherche en synthese</p></li>
<li><p>Ajout d‚Äôun filtre faune flore fonge dans la synthese</p></li>
<li><p>Ajout de l‚Äôembranchement et du regne dans les exports</p></li>
<li><p>Permettre √† des partenaires de saisir mais d‚Äôexporter uniquement leurs donn√©es perso</p></li>
<li><p>Ajout du d√©terminateur dans les formulaires invert√©br√©s et contactfaune + en synthese</p></li>
<li><p>Ajout du r√©f√©rentiel g√©ographique de toutes les communes de France m√©tropolitaine</p></li>
<li><p>Ajout des zones √† statuts juridiques de la r√©gion sud-est (national √† venir)</p></li>
<li><p>Bugs fix</p></li>
</ul>
<p><strong>BUG √† identifier</strong></p>
<p>Installation :</p>
<ul class="simple">
<li><p>corriger l‚Äôinsertion de donn√©es flore station qui ne fonctionne pas</p></li>
</ul>
<p>Bryophythes :</p>
<ul class="simple">
<li><p>Corriger la recherche avanc√©e par date sans ann√©es</p></li>
</ul>
<p>Synth√®se :</p>
<ul class="simple">
<li><p>la construction de l‚Äôarbre pour choisir plusieurs taxons ne tient pas compte des filtres</p></li>
<li><p>le fonctionnement des unit√©s geographiques n‚Äôa pas √©t√© test√© (initialement con√ßu uniquement pour la faune)</p></li>
</ul>
</section>
<section id="id39">
<h2>1.2.0 (2015-02-11)<a class="headerlink" href="#id39" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>Version stabilis√©e de GeoNature - Faune uniquement (Synth√®se Faune + Saisie ContactFauneVertebre, ContactFauneInvertebre et Mortalit√©).</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Modification du nom de l‚Äôapplication de FF-synthese en GeoNature</p></li>
<li><p>Changement du nom des utilisateurs PostgreSQL</p></li>
<li><p>Changement du nom de la base de donn√©es</p></li>
<li><p>Mise √† jour de la documentation (<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a>)</p></li>
<li><p>Automatisation de l‚Äôinstallation de la BDD</p></li>
<li><p>Renommer les tables pour plus de g√©n√©ricit√©</p></li>
<li><p>Supprimer les tables inutiles ou trop sp√©cifiques</p></li>
<li><p>Gestion des utilisateurs externalis√©e et centralis√©e avec UsersHub (<a class="reference external" href="https://github.com/PnX-SI/UsersHub">https://github.com/PnX-SI/UsersHub</a>)</p></li>
<li><p>Correction de bugs</p></li>
<li><p>Pr√©paration de l‚Äôint√©gration de la Flore pour passer de GeoNature Faune √† GeoNature Faune-Flore</p></li>
</ul>
</section>
<section id="id40">
<h2>1.1.0 (2014-12-11)<a class="headerlink" href="#id40" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Modification du sch√©ma de la base pour √™tre compatible taxref v7</p></li>
<li><p>Import automatis√© de taxref v7</p></li>
<li><p>Suppression des tables de hi√©rarchie taxonomique (famille, ordre, ‚Ä¶) afin de simplifier l‚Äôutilisation de la taxonomie.</p></li>
<li><p>Cr√©ation de la notion de groupe (para-taxonomique) √† la place de l‚Äôutilisation des classes.</p></li>
<li><p>Ajout de donn√©es pour pouvoir tester de fa√ßon compl√®te l‚Äôapplication (invert√©br√©s, vert√©br√©s)</p></li>
<li><p>Ajout de donn√©es exemples</p></li>
<li><p>Bugs fix</p></li>
</ul>
</section>
<section id="id41">
<h2>1.0.0 (2014-12-10)<a class="headerlink" href="#id41" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<p>Version fonctionnelle des applications : visualisation de la synth√®se faune, saisie d‚Äôune donn√©e de contact (vert√©br√©s, invert√©br√©s, mortalit√©)</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li><p>Documentation de l‚Äôinstallation d‚Äôun serveur Debian wheezy pas √† pas</p></li>
<li><p>Documentation de la mise en place de la base de donn√©es</p></li>
<li><p>Documentation de la mise en place de l‚Äôapplication et de son param√©trage</p></li>
<li><p>Script d‚Äôinsertion d‚Äôun jeu de donn√©es test</p></li>
<li><p>Passage √† PostGIS v2</p></li>
<li><p>Mise en param√®tre de la notion de lot, protocole et source</p></li>
</ul>
<p><strong>Prochaines √©volutions</strong></p>
<ul class="simple">
<li><p>Script d‚Äôimport de taxref v7</p></li>
<li><p>Utilisation pr√©f√©rentielle de la taxonomie de taxref plut√¥t que les tables de hi√©rarchie taxonomique</p></li>
</ul>
</section>
<section id="id42">
<h2>0.1.0 (2014-12-01)<a class="headerlink" href="#id42" title="Lien permanent vers cette rubrique">ÔÉÅ</a></h2>
<ul class="simple">
<li><p>Cr√©ation du projet et de la documentation</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="authors.html" class="btn btn-neutral float-left" title="AUTEURS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Pr√©c√©dent</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2019, PnE, PnC.</p>
  </div>

  Compil√© avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">th√®me</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>