<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHANGELOG &mdash; Documentation GeoNature 2.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=e8570148"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=d99ca74e"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="API REFERENCES" href="api-references.html" />
    <link rel="prev" title="AUTEURS" href="authors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="index.html" class="icon icon-home">
            GeoNature
              <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">INSTALLATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CHANGELOG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#talpa-europaea-2024-02-28">2.14.0 - Talpa europaea ğŸ‘“ (2024-02-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.13.4 (2023-12-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.13.3 (2023-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2.13.2 (2023-09-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.13.1 (2023-09-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#carpodacus-erythrinus-2023-08-23">2.13.0 - Carpodacus erythrinus ğŸ¤ (2023-08-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.12.3 (2023-05-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.12.2 (2023-04-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">2.12.1 (2023-04-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cyathea-borbonica-2023-03-27">2.12.0 - Cyathea borbonica ğŸŒ´ (2023-03-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">2.11.2 (2023-01-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.11.1 (2023-01-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ilex-aquifolium-2022-12-21">2.11.0 - Ilex aquifolium ğŸ„ (2022-12-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">2.10.4 (2022-11-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">2.10.3 (2022-11-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">2.10.2 (2022-11-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">2.10.1 (2022-11-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alouatta-macconnelli-2022-11-02">2.10.0 - Alouatta macconnelli ğŸ’ (2022-11-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">2.9.2 (2022-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">2.9.1 (2022-01-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actias-luna-2022-01-13">2.9.0 - Actias luna ğŸ¦‹ (2022-01-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">2.8.1 (2021-10-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vaccinium-myrtillus-2021-10-18">2.8.0 - Vaccinium myrtillus ğŸŒ¿ (2021-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">2.7.5 (2021-07-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id18">2.7.4 (2021-07-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">2.7.3 (2021-07-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">2.7.2 (2021-07-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">2.7.1 (2021-07-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#androsace-delphinensis-2021-06-30">2.7.0 - Androsace delphinensis ğŸŒ¼ (2021-06-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id22">2.6.2 (2021-02-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id23">2.6.1 (2021-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saxifraga-2021-02-04">2.6.0 - Saxifraga ğŸŒ¸ (2021-02-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id24">2.5.5 (2020-11-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id25">2.5.4 (2020-11-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id26">2.5.3 (2020-11-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id27">2.5.2 (2020-10-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id28">2.5.1 (2020-10-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manidae-2020-09-30">2.5.0 - Manidae (2020-09-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id29">2.4.1 (2020-06-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de mÃ©tadonnÃ©es (2020-06-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id30">2.3.2 (2020-02-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id31">2.3.1 (2020-02-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de NoÃ«l (2019-12-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id32">2.2.1 (2019-10-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id33">2.1.2 (2019-07-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id34">2.1.1 (2019-07-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id35">2.0.1 (2019-03-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versions-1-2014-2018">Versions 1 (2014-2018)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-references.html">API REFERENCES</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CHANGELOG</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/CHANGELOG.md.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Link to this heading">ïƒ</a></h1>
<section id="talpa-europaea-2024-02-28">
<h2>2.14.0 - Talpa europaea ğŸ‘“ (2024-02-28)<a class="headerlink" href="#talpa-europaea-2024-02-28" title="Link to this heading">ïƒ</a></h2>
<p>Cette nouvelle version de GeoNature propose de nouvelles fonctionnalitÃ©s comme le floutage de donnÃ©es sensibles dans le module SynthÃ¨se ainsi quâ€™un systÃ¨me de validation automatique des donnÃ©es basÃ© sur les profils de taxons.<br />
Elle intÃ©gre aussi plusieurs mises Ã  jour des versions des librairies python utilisÃ©es comme Flask (3.0) et SQLAlchemy (1.4).</p>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Le support de Debian 10 a Ã©tÃ© arrÃªtÃ©, votre serveur doit Ãªtre en Debian 11 ou 12</p></li>
<li><p>Mettre Ã  jour TaxHub en version 1.13.3 (ou plus) et optionnellement UsersHub (2.4.0 ou plus)</p></li>
<li><p>Si vous les utilisez, mettez Ã  jour les modules Import (version 2.3.0), Export (version 1.7.0), Monitoring (version 0.7.2) et Dashboard (version 1.5.0), avec la nouvelle procÃ©dure consistant uniquement Ã  tÃ©lÃ©charger, dÃ©zipper et renommer les dossiers des modules</p></li>
<li><p>Si vous utilisez dâ€™autres modules externes, vÃ©rifiez quâ€™ils disposent dâ€™une version compatible avec GeoNature 2.14 (SQLAlchemy 1.4, Python 3.9 minimum, supression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code>)</p></li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez les fonds IGN, mettez Ã  jour les URL des flux dans votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> (#2789)</p></li>
</ul>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>[SynthÃ¨se] Floutage des donnÃ©es sensibles (#2558)</p>
<ul>
<li><p>Il est dÃ©sormais possible de dÃ©finir un filtre Â«Â Flouter les donnÃ©es sensiblesÂ Â» sur les actions <em>Lire</em> et <em>Exporter</em> du module SynthÃ¨se</p></li>
<li><p>Pour les utilisateurs qui ont ce filtre de permission appliquÃ©, les donnÃ©es sensibles seront floutÃ©es lors de leur affichage ou de leur export dans le module SynthÃ¨se, en fonction des mailles ou zonages dÃ©finis dans les rÃ¨gles de sensibilitÃ© du SINP</p></li>
<li><p>En mode Mailles, les donnÃ©es sensibles dont la gÃ©omÃ©trie floutÃ©e est plus grande que la maille affichÃ©e sont exclues</p></li>
<li><p>Dans lâ€™onglet Â«Â ZonageÂ Â» des fiches des observations de la SynthÃ¨se, on affiche uniquement les zonages plus grands que la gÃ©omÃ©trie floutÃ©e des donnÃ©es sensibles</p></li>
<li><p>Si un utilisateur dispose de permissions filtrÃ©es sur les donnÃ©es sensibles, alors les filtres par zonage sâ€™appuie sur une intersection spatiale avec les gÃ©omÃ©tries floutÃ©es pour ne pas renvoyer dâ€™informations plus prÃ©cises sur les donnÃ©es floutÃ©es</p></li>
<li><p>La documentation sur le sensibilitÃ© des donnÃ©es a Ã©tÃ© complÃ©tÃ©e : https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite)</p></li>
<li><p>Le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">BLUR_SENSITIVE_OBSERVATIONS</span></code> permet de basculer sur lâ€™exclusion des donnÃ©es sensibles plutÃ´t que leur floutage, comme implÃ©mentÃ© dans la version 2.13</p></li>
</ul>
</li>
<li><p>[Validation] Fonction de validation automatique basÃ©e sur les profils de taxons (non activÃ©e par dÃ©faut et surcouchable avec une fonction spÃ©cifique) (#2600)</p></li>
<li><p>[SynthÃ¨se] Ajout des groupes 3 INPN dans les filtres et les exports de la SynthÃ¨se (#2621, #2637)</p></li>
<li><p>[Occtax] Ajout de la possibilitÃ© dâ€™associer des nomenclatures Ã  des groupes 3 INPN (#2684)</p></li>
<li><p>[Authentification] PossibilitÃ© dâ€™ajouter des liens externes (#2917)</p></li>
<li><p>[Carte] Mise Ã  jour des exemples dâ€™URL de fonds de carte IGN (#2789)</p></li>
<li><p>[RefGeo] RÃ©percussion du remplacement du champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> par <code class="docutils literal notranslate"><span class="pre">geom_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#2809)</p></li>
<li><p>[Documentation] Ajout de diagrammes dâ€™architecture dans la documentation (#2760)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™affichage du nom du module quand on revient Ã  la page dâ€™accueil (#2795)</p></li>
<li><p>[SynthÃ¨se] Correction de lâ€™affichage du nom du taxon observÃ© quand les profils de taxons sont dÃ©sactivÃ©s (#2820)</p></li>
<li><p>[Carte] Conservation de la gÃ©omÃ©trie existante lorsquâ€™on annule la modification dâ€™une gÃ©omÃ©trie (#2778)</p></li>
<li><p>[MÃ©tadonnÃ©es] Correction de lâ€™affichage du type de financement sur les fiches dÃ©tail des CA et JDD (#2840)</p></li>
<li><p>[Occhab] Correction des permissions avec portÃ©e limitÃ©e (#2909)</p></li>
<li><p>[Occtax] Correction de la suppression dâ€™un champ additionnel (#2923)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour vers SQLAlchemy 1.4 (#1812)</p></li>
<li><p>Mise Ã  jour vers Flask 3 (#2751)</p></li>
<li><p>Mise Ã  jour de Black en version 24 (#2879)</p></li>
<li><p>Suppression des modules dÃ©prÃ©ciÃ©s : <code class="docutils literal notranslate"><span class="pre">utilsgeometry.py</span></code>, <code class="docutils literal notranslate"><span class="pre">utilssqlalchemy.py</span></code>, <code class="docutils literal notranslate"><span class="pre">config_manager.py</span></code> (#2751)</p></li>
<li><p>IntÃ©gration de la documentation automatique des composants Frontend (avec <code class="docutils literal notranslate"><span class="pre">compodoc</span></code>) et des fonctions et classes du backend (avec <code class="docutils literal notranslate"><span class="pre">sphinx-autoapi</span></code>) (#2765)</p></li>
<li><p>Abandon du systÃ¨me dâ€™authentification par cookie, sauf pour le module Admin. Le token dâ€™authentification (JWT) est maintenant passÃ© dans chaque appel Ã  lâ€™API dans le header HTTP Â«Â Authorization BearerÂ Â». Il est aussi fourni par la route de login du sous-module dâ€™authentification et stockÃ© dans le localStorage (#2586, #2161, #490, #2574)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code> (#2747)</p></li>
<li><p>Passage du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">--line-length</span></code> de Black de 99 Ã  100 caractÃ¨res (#2847)</p></li>
<li><p>Modification de <code class="docutils literal notranslate"><span class="pre">TModules</span></code> pour Ã©viter de lever lâ€™erreur de polymorphisme de SQLAlchemy (#2792)</p></li>
<li><p>Fin du support de Debian 10 et de Python 3.7 (#1787)</p></li>
<li><p>Changement de lâ€™ensemble des requÃªtes SQLAlchemy au style 2.0 (#2751)</p></li>
<li><p>Augmentation du nombre de tests unitaires dans : <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">occtax</span></code>, <code class="docutils literal notranslate"><span class="pre">occhab</span></code>, <code class="docutils literal notranslate"><span class="pre">synthese</span></code> (#2751)</p></li>
<li><p>Modification des <code class="docutils literal notranslate"><span class="pre">fixtures</span></code> : <code class="docutils literal notranslate"><span class="pre">datasets</span></code>, <code class="docutils literal notranslate"><span class="pre">stations</span></code> + <code class="docutils literal notranslate"><span class="pre">user</span></code>(#2751). PossibilitÃ© de crÃ©er des utilisateurs de tests avec des permissions plus fines (#2915)</p></li>
</ul>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;amandine-sahl, &#64;Pierre-Narcisi, &#64;jacquesfize, &#64;TheoLechemia, &#64;bouttier, &#64;mvergez, &#64;andriacap, &#64;edelclaux, &#64;VincentCauchois, &#64;MoulinZ, &#64;pierre56, &#64;camillemonchicourt</p>
</section>
<section id="id1">
<h2>2.13.4 (2023-12-15)<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>[SynthÃ¨se] Ajout des colonnes <code class="docutils literal notranslate"><span class="pre">group[1,2,3]_inpn</span></code> Ã  la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_web_app</span></code> (#2798, par &#64;andriacap)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[MÃ©tadonnÃ©es] Masquage des rÃ©fÃ©rences bibliograhpiques dans le formulaire des cadres dâ€™acquisition en attendant la finalisation du dÃ©veloppement du backend (#2562, par &#64;DonovanMaillard)</p></li>
<li><p>[Occtax] Correction du problÃ¨me de chargement de la liste de JDD lors de la crÃ©ation dâ€™un relevÃ© (#2815, par &#64;andriacap)</p></li>
<li><p>[SynthÃ¨se et validation] Ajout de la mÃ©thode de dÃ©termination dans la fiche dÃ©tail dâ€™une observation (#2785, par &#64;DonovanMaillard)</p></li>
<li><p>[Frontend] Correction de la prise en compte des filtres dans le composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2777, par &#64;joelclems)</p></li>
<li><p>[SynthÃ¨se] Optimisation du chargement de lâ€™affichage des observations groupÃ©es par maille (#2766, par &#64;mvergez)</p></li>
<li><p>[Accueil] Optimisation du chargement des statistiques gÃ©nÃ©rales (#2771, par &#64;mvergez)</p></li>
<li><p>[SynthÃ¨se] Correction et enrichissement de la configuration des colonnes affichÃ©es dans la liste des observations (#2749, par &#64;mvergez)</p></li>
<li><p>[SynthÃ¨se] Correction de la recherche par attribut TaxHub de type Â«Â multiselectÂ Â» (#2767, par &#64;mvergez)</p></li>
<li><p>[Occtax] Tri alphabÃ©tique de la liste des Â«Â Mes lieuxÂ Â» (#2805, par &#64;DonovanMaillard)</p></li>
<li><p>[Documentation] Corrections et complÃ©ments de la documentation dâ€™administrateur (#2812, par &#64;marie-laure-cen)</p></li>
</ul>
</section>
<section id="id2">
<h2>2.13.3 (2023-10-17)<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[MÃ©tadonnÃ©es] Correction de lâ€™affichage des descriptions dans les fiches des cadres dâ€™acquisition (#2716, par &#64;mvergez)</p></li>
<li><p>[Admin] Correction de la modification des permissions sensibles (#2697, par &#64;Pierre-Narcisi)</p></li>
<li><p>[SynthÃ¨se] Correction de la documentation du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code> (#1892, par &#64;camillemonchicourt)</p></li>
<li><p>[MÃ©dias] Conservation de la rotation des images des vignettes (#2742, par &#64;MathRdt)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Utilisation du fichier <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> pour les tests automatiques des contributions dans la branche <code class="docutils literal notranslate"><span class="pre">master</span></code> (#2739, par &#64;Pierre-Narcisi)</p></li>
<li><p>DÃ©placement des dÃ©pendances de dÃ©veloppement des types Leaflet vers les dÃ©pendances de production (#2744, par &#64;TheoLechemia)</p></li>
<li><p>Prise en compte du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">creatableInModule</span></code> du composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> dans les dynamic forms (#2736, par &#64;amandine-sahl)</p></li>
</ul>
</section>
<section id="id3">
<h2>2.13.2 (2023-09-28)<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>[SynthÃ¨se] Ajout dâ€™un filtre par module de provenance (#2670, par &#64;andriacap)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction des dÃ©connexions non effectives dans les versions 2.13.0 et 2.13.1 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction des permissions vÃ©rifiÃ©es pour pouvoir supprimer un signalement en prenant en compte le C du module Validation, et non pas le R qui nâ€™existe pas sur ce module (#2710, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de lâ€™API des applications mobiles quand le chemin de lâ€™APK est absolu (#2708, par &#64;joelclems)</p></li>
<li><p>Correction des permissions des listes de JDD dans les modules de saisie (Occtax, Occhab, Import) en prenant en compte la portÃ©e du C du module, et pas seulement du R du module MÃ©tadonnÃ©es (#2712, par &#64;Pierre-Narcisi)</p></li>
<li><p>Utilisation de lâ€™heure locale du serveur pour lancer les taches Celery (#2725, par &#64;bouttier)</p></li>
<li><p>Fermeture des connexions Ã  la BDD Ã  la fin des taches Celery (#2724, par &#64;bouttier)</p></li>
<li><p>Correction de lâ€™affichage du bouton permettant dâ€™importer directement depuis la fiche dâ€™un JDD, nÃ©cessitant la version 2.2.3 du module Import (#2713, par &#64;bouttier)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Ajout du thÃ¨me Bootstrap au composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2727, par &#64;TheoLechemia)</p></li>
<li><p>Docker : utilisation de python 3.11 (#2728, par &#64;bouttier)</p></li>
<li><p>DÃ©placement du <code class="docutils literal notranslate"><span class="pre">DispatcherMiddleware</span></code> aprÃ¨s les fichiers statiques customisÃ©s (#2720, par &#64;bouttier)</p></li>
<li><p>Suppression du script <code class="docutils literal notranslate"><span class="pre">03b_populate_db_for_test.sh</span></code> (#2726, par &#64;bouttier)</p></li>
</ul>
<p><strong>ğŸ“ Documentation</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de la documentation suite aux Ã©volutions des permissions dans la 2.13.0 (par &#64;camillemonchicourt)</p></li>
</ul>
</section>
<section id="id4">
<h2>2.13.1 (2023-09-15)<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h2>
<p>Lâ€™installation de GeoNature (ainsi que ses 4 modules externes principaux, TaxHub et UsersHub) avec Docker est dÃ©sormais complet et fonctionnel. Voir la documentation sur https://docs.geonature.fr/installation.html#docker.<br />
Câ€™est la maniÃ¨re la plus simple de dÃ©ployer GeoNature avec ses 4 modules externes principaux (Import, Export, Dashboard, Monitoring) mais aussi de les mettre Ã  jour, avec seulement quelques lignes de commandes, Ã  partir des images construites automatiquement et du fichier <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> global, fourni dans le dÃ©pÃ´t <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services">GeoNature-Docker-services</a>.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>AmÃ©lioration de lâ€™affichage des taxons en passant Ã  la ligne quand ils sont trop longs (#2690, par &#64;JulienCorny)</p></li>
<li><p>AmÃ©lioration du <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> de GeoNature (#2623, par &#64;joelclems et &#64;bouttier)</p></li>
<li><p>Ne pas renvoyer les modules dÃ©sactivÃ©s dans la route <code class="docutils literal notranslate"><span class="pre">/modules</span></code> (#2693, par &#64;bouttier)</p></li>
<li><p>Mise Ã  jour de TaxHub en version 1.12.1 (#2623, par &#64;joelclems)</p></li>
<li><p>Mise Ã  jour de Utils-Flask-SQLAlchemy en version 0.3.6 et UsersHub-authentification-module en version 1.6.10 (#2704, par &#64;TheoLechemia)</p></li>
<li><p>Mise Ã  jour de diffÃ©rentes dÃ©pendances Python (#2704, par &#64;TheoLechemia)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction des dÃ©connexions non effectives sur la 2.13.0 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction de la configuration NGINX des prÃ©fixes quand GeoNature est dÃ©ployÃ© avec Docker (#2698, par &#64;bouttier)</p></li>
<li><p>Correction des permissions vÃ©rifiÃ©es pour pouvoir supprimer un signalement en prenant en compte le R du module Validation, et non pas le V du module SynthÃ¨se (#2705, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de lâ€™Ã©pinglage des observations qui Ã©tait encore partagÃ© entre utilisateurs, et non pas individuels (#2702, par &#64;Pierre-Narcisi)</p></li>
<li><p>[SynthÃ¨se] Correction de la recherche de taxons avec des accents (#2676, par &#64;Pierre-Narcisi)</p></li>
<li><p>[SynthÃ¨se] Correction des couleurs des mailles quand on clique sur diffÃ©rentes mailles successivement en mode maille (#2677, par &#64;Pierre-Narcisi)</p></li>
</ul>
<p><strong>ğŸ“ Documentation</strong></p>
<ul class="simple">
<li><p>Documentation de la nouvelle interface dâ€™administration des permissions (#2605, par &#64;camillemonchicourt), disponible sur https://docs.geonature.fr/user-manual.html#admin</p></li>
<li><p>Mise Ã  jour de la documentation dâ€™installation Docker suite Ã  la sortie dâ€™un Docker Compose complet et fonctionnel sur <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services/">GeoNature-Docker-services</a> (#2703)</p></li>
<li><p>Correction de petites fautes dâ€™orthographe (#2674, par &#64;omahs)</p></li>
<li><p>Correction du template dâ€™issue (#2700, par &#64;mvergez)</p></li>
</ul>
</section>
<section id="carpodacus-erythrinus-2023-08-23">
<h2>2.13.0 - <a class="reference external" href="https://www.ecrins-parcnational.fr/breve/roselin-gondouins">Carpodacus erythrinus</a> ğŸ¤ (2023-08-23)<a class="headerlink" href="#carpodacus-erythrinus-2023-08-23" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p>RÃ©vision globale des permissions pour pouvoir leur associer dâ€™autres types de filtres (sensibilitÃ© notamment), les simplifier et clarifier en supprimant lâ€™hÃ©ritage et en dÃ©finissant les permissions disponibles pour chaque module.</p></li>
<li><p>PossibilitÃ© de filtrer les donnÃ©es dans la SynthÃ¨se selon leur sensibilitÃ©, mais sans floutage pour le moment (Ã  venir), en affichant ou non les donnÃ©es sensibles selon les permissions de lâ€™utilisateur.</p></li>
<li><p>VÃ©rifiez que vos modules soient compatibles avec le nouveau mÃ©canisme de dÃ©claration des permissions disponibles. Câ€™est le cas pour les modules Import, Export, Dashboard, Monitorings et Zones humides.</p></li>
<li><p>Cette nouvelle version est compatible avec Debian 12. Le support de Debian 10 sera arrÃªtÃ© prochainement.</p></li>
</ul>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Refonte complÃ¨te des permissions (#2487)</p>
<ul>
<li><p>Suppression de lâ€™hÃ©ritage des permissions du module Â«Â GeoNatureÂ Â» vers les autres modules, et de lâ€™objet Â«Â AllÂ Â» vers les Ã©ventuels autres objets des modules. Chaque permission dans un module doit dÃ©sormais Ãªtre dÃ©finie explicitement. Cela entraine de devoir dÃ©finir plus de permissions (Ã  lâ€™installation dâ€™un nouveau module notamment) mais aussi de les rendre plus lisibles, additives et explicites (#2474)</p></li>
<li><p>Evolution du modÃ¨le de donnÃ©es des permissions pour Ã©largir les possibilitÃ©s de filtrage des permissions au-delÃ  de lâ€™appartenance (anciennement nommÃ©e portÃ©e ou scope) (#2472)</p></li>
<li><p>Suppression des permissions ayant une appartenance de niveau 0 (Aucune donnÃ©e). En effet, en supprimant lâ€™hÃ©ritage des permissions et en les dÃ©finissant par module de maniÃ¨re explicite, si un groupe ou utilisateur nâ€™a aucune permission sur un module, alors il nâ€™y accÃ¨de pas et ne le voit pas dans le menu latÃ©ral. Si il a nâ€™importe quelle permission sur un module, alors il y accÃ¨de.</p></li>
<li><p>Suppression du filtre dâ€™appartenance de niveau 3 (Toutes les donnÃ©es). En effet, celui-ci est dÃ©sormais redondant avec lâ€™ajout dâ€™une permission sans filtre.</p></li>
<li><p>DÃ©finition des permissions disponibles dans chaque module dans la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_permissions.t_permissions_available</span></code>, pour ne proposer que des permissions qui ont un usage quand on ajoute ou modifie les permissions dâ€™un utilisateur (#2489)</p></li>
<li><p>Refonte de lâ€™interface dâ€™administration des permissions (Flask-admin) ne proposant que les permissions disponibles, affichant les permissions explicites dâ€™un utilisateur et calculant celles effectives provenant dâ€™un groupe auquel il appartient (#2605)</p></li>
<li><p>Optimisation et agrÃ©gation des permissions</p></li>
<li><p>[SynthÃ¨se] Ajout dâ€™un filtre sur la sensibilitÃ© des donnÃ©es, permettant de les afficher et de les exporter ou non Ã  un groupe ou utilisateurs (pas de floutage pour le moment)  (#2504 / #2584)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">permissions</span> <span class="pre">supergrant</span></code> permettant dâ€™ajouter toutes les permissions disponibles Ã  un utilisateur ou groupe super-administrateur (#2557)</p></li>
<li><p>Ajout de la vÃ©rification des permissions manquantes sur diffÃ©rentes routes (#2542 / #1863)</p></li>
</ul>
</li>
<li><p>Ajout de notifications quand un commentaire est ajoutÃ© sur une observation (#2460)</p></li>
<li><p>AmÃ©lioration des performances de la recherche de taxons dans Occtax et dans la SynthÃ¨se (#2592 / https://github.com/PnX-SI/TaxHub/issues/384)</p></li>
<li><p>Support de Debian 12 (avec Python 3.11, PostgreSQL 15 et PostGIS 3.3) (#1787)</p></li>
<li><p>[Admin] Fixer la barre de navigation du menu latÃ©ral et possibilitÃ© de la rabbatre (#2556)</p></li>
<li><p>[SynthÃ¨se] Ajout dâ€™un filtre par source (#2513)</p></li>
<li><p>[SynthÃ¨se] Ajout dâ€™un filtre par <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> (#2516)</p></li>
<li><p>[SynthÃ¨se] Recherche des observateurs multiples et insensible aux accents (#2568)</p></li>
<li><p>[Occtax] Ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPANDED_TAXON_ADVANCED_DETAILS</span></code> permettant dâ€™ouvrir par dÃ©faut les champs avancÃ©s du formulaire de renseignement du taxon (#2446)</p></li>
<li><p>Conservation du fond de carte utilisÃ© quand on navigue dans les modules (#2619)</p></li>
<li><p>Suppression des mÃ©dias orphelins basculÃ©e dans une tache Celery Beat lancÃ©e automatiquement toutes les nuits (<code class="docutils literal notranslate"><span class="pre">clean_attachments</span></code>), et non plus Ã  lâ€™ajout ou suppression dâ€™un autre mÃ©dia (#2436)</p></li>
<li><p>Ajout dâ€™une documentation utilisateur sur le module MÃ©tadonnÃ©es - https://docs.geonature.fr/user-manual.html#metadonnees (#2662)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[Occtax] Correction du dÃ©placement du marqueur de localisation poncutelle dâ€™un relevÃ© (#2554 et #2552)</p></li>
<li><p>[Occtax] Correction du centrage sur la carte quand on modifie un relevÃ©</p></li>
<li><p>[Occtax] Correction de lâ€™affichage de la gÃ©omÃ©trie du prÃ©cÃ©dent relevÃ© quand on enchaine des relevÃ©s de type polygone puis point (#2657)</p></li>
<li><p>Correction de la sÃ©lection automatique des valeurs par dÃ©faut numÃ©riques dans les champs de type Â«Â Liste dÃ©roulante (Select)Â Â» des formulaires dynamiques (#2540)</p></li>
<li><p>Correction de la gestion des entiers pour les champs additionnels de type Â«Â checkboxÂ Â» (#2518)</p></li>
<li><p>Correction de lâ€™envoi Ã  plusieurs destinataires des emails de demande de crÃ©ation de compte (#2389)</p></li>
<li><p>RÃ©cupÃ©ration du contenu du champs Â«Â OrganismeÂ Â» dans le formulaire de demande de crÃ©ation de compte (#1760)</p></li>
<li><p>AmÃ©lioration des messages lors de la demande de crÃ©ation de compte (#2575)</p></li>
<li><p>Correction du graphique dans lâ€™export PDF des cadres dâ€™acquisition (#2618)</p></li>
<li><p>[SynthÃ¨se] Correction de lâ€™affichage des gÃ©omÃ©tries de type multipoint (#2536)</p></li>
<li><p>[SynthÃ¨se] Correction des filtres par dÃ©faut (#2634)</p></li>
<li><p>[SynthÃ¨se] Correction des filtres gÃ©ographiques multiples (#2639)</p></li>
<li><p>[MÃ©tadonnÃ©es] Correction de lâ€™affichage du formulaire de filtres avancÃ©s (#2649)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>DÃ©coupage du script <code class="docutils literal notranslate"><span class="pre">install/03_create_db.sh</span></code> en 2 (avec la crÃ©ation du fichier <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db.sh</span></code>) notamment pour amÃ©liorer la dockerisation de GeoNature (#2544)</p></li>
<li><p>Ajout dâ€™un script <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db_for_test.sh</span></code> pouvant Ãªtre utilisÃ© par la CI de test des modules GeoNature (#2544)</p></li>
<li><p>Ajout dâ€™un script <code class="docutils literal notranslate"><span class="pre">install/assets/docker_startup.sh</span></code> pour lancer les migrations Alembic depuis le docker de GeoNature (#2544)</p></li>
<li><p>CrÃ©ation dâ€™un fichier <code class="docutils literal notranslate"><span class="pre">install/assets/db/add_pg_extensions.sql</span></code> regroupant la crÃ©ation des extensions PostgreSQL (#2544)</p></li>
<li><p>AmÃ©lioration de <code class="docutils literal notranslate"><span class="pre">APPLICATION_ROOT</span></code> pour quâ€™il fonctionne en mode dÃ©veloppement (#2546)</p></li>
<li><p>AmÃ©lioration des modÃ¨les de la SynthÃ¨se pour prendre en compte les valeurs par dÃ©faut des nomenclatures (#2524)</p></li>
<li><p>Meilleure portabilitÃ© des scripts dans les diffÃ©rents systÃ¨mes Unix (#2435)</p></li>
<li><p>Mise Ã  jour des dÃ©pendances Python (#2596)</p></li>
<li><p>Documentation de dÃ©veloppement des permissions (#2585)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Mettre Ã  jour TaxHub en version 1.12.0 (ou plus) et optionnellement UsersHub</p></li>
<li><p>Si vous les utilisez, mettez Ã  jour les modules Import, Export, Monitoring et Dashboard dans leurs versions compatibles avec GeoNature 2.13, avec la nouvelle procÃ©dure consistant uniquement Ã  tÃ©lÃ©charger, dÃ©zipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Si vous utilisez dâ€™autres modules externes, vÃ©rifiez quâ€™ils disposent dâ€™une version compatible avec GeoNature 2.13, ou faites-les Ã©voluer pour quâ€™ils dÃ©clarent leurs permissions disponibles (exemple : #2543)</p></li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Les permissions existantes sur vos diffÃ©rents groupes et utilisateurs sont rÃ©cupÃ©rÃ©es et remises Ã  plat automatiquement sans systÃ¨me dâ€™hÃ©ritage. VÃ©rifiez cependant les permissions aprÃ¨s la mise Ã  jour de vos groupes et utilisateurs.</p></li>
<li><p>DÃ©sormais, quand vous installerez un nouveau module (ou sous-module), pour le voir affichÃ© dans le menu et y avoir accÃ¨s, il faudra lui appliquer des permissions aux groupes ou utilisateurs qui doivent y accÃ©der.</p></li>
</ul>
<p>âœ… Exemple de procÃ©dure de mise Ã  jour depuis une version 2.12 : https://geonature.fr/documents/procedures/2023-10-GN-212to213.txt</p>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;TheoLechemia / &#64;VincentCauchois / &#64;Pierre-Narcisi / &#64;joelclems / &#64;andriacap / &#64;mvergez / &#64;JulienCorny / &#64;MathRdt / &#64;DonovanMaillard / &#64;camillemonchicourt</p>
</section>
<section id="id5">
<h2>2.12.3 (2023-05-09)<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[SynthÃ¨se] Correction du filtre des observations Ã©pinglÃ©es pour ne remonter que celles de lâ€™utilisateur connectÃ© (#2507 par &#64;mvergez)</p></li>
<li><p>[SynthÃ¨se] Correction de la recherche gÃ©ographique avec chargement dâ€™un fichier local (#2522 par &#64;bouttier et &#64;mvergez)</p></li>
<li><p>[Admin] Correction dâ€™une rÃ©gression des performances dâ€™Ã©dition des permissions (#2523 par &#64;bouttier)</p></li>
<li><p>ComplÃ©ments de la documentation (page maintenance, migration avec git, configuratrion dynamique, #2526, #2501, #2503 par &#64;camillemonchicourt)</p></li>
<li><p>[MÃ©tadonnÃ©es] Correction des droits de modification des cadres dâ€™acquisition</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> (#2525 par &#64;bouttier)</p></li>
<li><p>Correction du downgrade dâ€™une migration Alembic dâ€™Occtax (#2500 par &#64;JulienCorny)</p></li>
<li><p>Correction et ation de la page de maintenance (#2535)</p></li>
<li><p>Correction de la synchronisation des JDD et de lâ€™association aux modules (#2532 par &#64;VincentCauchois)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.cruved_scope_for_user_in_module</span></code> est remplacÃ©e par <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.get_scopes_by_action</span></code></p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous utilisez la page de maintenance, celle-ci a Ã©tÃ© revue, <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">rÃ©fÃ©rez vous Ã  la documentation</a> afin de la mettre Ã  jour.</p>
<p>Si vous utilisiez des champs additionnels avec des checkbox, lors de leur changement de type (recommandÃ© dans les notes de version de la 2.12.0) il est important que les valeurs du champ <code class="docutils literal notranslate"><span class="pre">field_values</span></code> continue Ã  avoir des Â«Â stringÂ Â» dans la clÃ© values : [{Â«Â labelÂ Â»: Â«Â UnÂ Â», Â«Â valueÂ Â»: Â«Â 1Â Â»}] sans quoi il y aura des problÃ¨me Ã  lâ€™Ã©dition. Pour les nouveaux champs additionnels, il est cependant bien possible de mettre des entiers dans la clÃ© <code class="docutils literal notranslate"><span class="pre">value</span></code> [{Â«Â labelÂ Â»: Â«Â UnÂ Â», Â«Â valueÂ Â»: 1}]</p>
</section>
<section id="id6">
<h2>2.12.2 (2023-04-18)<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se : ajout dâ€™un filtre sur les observations avec ou sans commentaire (#2469, par &#64;mvergez)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se - mode maille : rÃ©cupÃ©ration des observations hors rÃ©fÃ©rentiel de mailles pour affichage dans la liste, garantissant ainsi un nombre dâ€™observations indentique entre le mode point et le mode maille (#2495, par &#64;TheoLechemia)</p></li>
<li><p>SynthÃ¨se : correction des filtres mÃ©dias / Ã©pinglage / signalement / commentaires pour fonctionner Ã©galement de maniÃ¨re nÃ©gative (#2469)</p></li>
<li><p>Backoffice des permissions :</p>
<ul>
<li><p>Correction du module lors du contrÃ´le dâ€™accÃ¨s (#2483, par &#64;VincentCauchois)</p></li>
<li><p>Correction de la gestion du CRUVED des rÃ´les sans permissions (#2496)</p></li>
</ul>
</li>
<li><p>Commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> :</p>
<ul>
<li><p>Correction de la dÃ©tection du module_code (#2482)</p></li>
<li><p>Reload de la config aprÃ¨s lâ€™exÃ©cution de <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> (#2493)</p></li>
</ul>
</li>
<li><p>Occhab : tri des stations par date (#2477)</p></li>
<li><p>Validation : correction des filtres avancÃ©s (#2470, par &#64;joelclems)</p></li>
<li><p>Admin : contrÃ´le du R pour lâ€™accÃ¨s en lecture (#2491)</p></li>
<li><p>Admin : rajout de lâ€™objet NOTIFICATIONS afin de pouvoir en dÃ©finir ses permissions (#2490)</p></li>
<li><p>Login : dÃ©sactivation du spinner aprÃ¨s une tentative de login Ã©chouÃ©e</p></li>
</ul>
</section>
<section id="id7">
<h2>2.12.1 (2023-04-11)<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de quelques dÃ©pendances python (#2438, par &#64;MathRdt)</p></li>
<li><p>Mise Ã  jour de Utils-Flask-SQLAlchemy en version 0.3.3</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction et ations des performances des recherches par statut de protection, notamment quand elles sont associÃ©es Ã  une recherche gÃ©ographique (#2450, par &#64;amandine-sahl)</p></li>
<li><p>Correction dâ€™une rÃ©gression des performances lors de la rÃ©cupÃ©ration des JDD (#2462, par &#64;mvergez)</p></li>
<li><p>Correction de jointures manquantes pour le calcul des permissions lors de la rÃ©cupÃ©ration des JDD (#2463, par &#64;mvergez)</p></li>
<li><p>Correction des champs additionnels de type liste (#2447, par &#64;TheoLechemia)</p></li>
<li><p>Correction dâ€™une incompatibilitÃ© Python 3.7 (#2464, par &#64;TheoLechemia)</p></li>
<li><p>Suppression en cascade des permissions et associations aux sites lors de la suppresion dâ€™un module (#2466, par &#64;jbrieuclp &amp; &#64;VincentCauchois)</p></li>
<li><p>Mise Ã  jour des habitats dans la SynthÃ¨se quand ils sont modifiÃ©s dans un relevÃ© Occtax (#2468, par &#64;JulienCorny)</p></li>
</ul>
</section>
<section id="cyathea-borbonica-2023-03-27">
<h2>2.12.0 - Cyathea borbonica ğŸŒ´ (2023-03-27)<a class="headerlink" href="#cyathea-borbonica-2023-03-27" title="Link to this heading">ïƒ</a></h2>
<p><strong>â© En bref</strong></p>
<ul class="simple">
<li><p>Affichage agrÃ©gÃ© des observations dans la SynthÃ¨se (performances et lisibilitÃ©) (#1847 et #1878)</p></li>
<li><p>Filtres par dÃ©faut dans la SynthÃ¨se (#2261)</p></li>
<li><p>Optimisation des performances des exports de la SynthÃ¨se (#1434)</p></li>
<li><p>Optimisation du chargement des jeux de donnÃ©es dans le module MÃ©tadonnÃ©es pour en er les performances (#2004)</p></li>
<li><p>IntÃ©gration par dÃ©faut de Taxref v16, BDC statuts v16 et rÃ©fÃ©rentiel de sensibilitÃ© v16</p></li>
<li><p>PossibilitÃ© de gÃ©rer les tables des applications mobiles et des modules depuis le module Â«Â AdminÂ Â»</p></li>
<li><p>Configuration dynamique sans rebuild (#2205)</p></li>
<li><p>Centralisation de la configuration des modules dans GeoNature (#2423)</p></li>
<li><p>Historisation des suppressions dans la SynthÃ¨se, nÃ©cessaire pour GN2PG notamment (#789)</p></li>
<li><p>RÃ©organisation des dossiers pour simplifier la customisation et les mises Ã  jour (#2306)</p></li>
<li><p>Stabilisation de la dockerisation (#2206)</p></li>
<li><p>Refactorisation dâ€™Occhab, module de rÃ©fÃ©rence et documentation dÃ©veloppeurs associÃ©e</p></li>
<li><p>Refactorisation des permissions (simplification, optimisation, centralisation, performances, tests)</p></li>
<li><p>Mise Ã  jour dâ€™Angular en version 15 (#2154)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Si vous utilisez des modules spÃ©cifiques (hors Import, Export, Dashboard, Monitoring), vÃ©rifiez quâ€™ils disposent dâ€™une version compatible avec GeoNature 2.12 (compatibilitÃ© Angular 15, rÃ©vision des permissions, configuration dynamique)</p></li>
<li><p>Si vous les utilisez, mettre Ã  jour les modules Import en version 2.1.0 (ou plus), Export en version 1.4.0, Dashboard en version 1.3.0 (ou plus) et Monitoring en version 0.5.0 (ou plus) avec la nouvelle procÃ©dure consistant uniquement Ã  tÃ©lÃ©charger, dÃ©zipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Mettez Ã  jour TaxHub en version 1.11 (ou plus)</p></li>
<li><p>La vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code> dÃ©finissant la structure et le contenu des exports de la SynthÃ¨se a Ã©tÃ© modifiÃ©e pour Ãªtre optimisÃ©e. Si vous lâ€™aviez customisÃ©e, reportÃ©e vos modifications manuellement aprÃ¨s la mise Ã  jour de GeoNature</p></li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> se charge de dÃ©placer automatiquement les diffÃ©rents fichiers suite Ã  la rÃ©organisation des dossiers (customisation, mÃ©dias, mobile, configuration centralisÃ©e des modules)</p></li>
<li><p>Les mÃ©dias (incluant les fichiers dâ€™Occtax-mobile) sont dÃ©placÃ©s dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/media/</span></code></p></li>
<li><p>Il nâ€™est plus nÃ©cessaire de rebuilder le frontend ni de recharger GeoNature manuellement Ã  chaque modification de la configuration de GeoNature ou de ses modules</p></li>
<li><p>Les taches automatisÃ©es sont dÃ©sormais gÃ©rÃ©es par Celery Beat et installÃ©es avec GeoNature. Si vous aviez mis en place des crons pour mettre Ã  jour les profils de taxons (ou les donnÃ©es du module Dashboard, ou les exports planifiÃ©s du module Export), supprimez les (dans <code class="docutils literal notranslate"><span class="pre">/etc/cron.d/geonature</span></code> ou <code class="docutils literal notranslate"><span class="pre">crontab</span> <span class="pre">-e</span></code>) car ils ne sont plus utiles</p></li>
<li><p>Il est fortement conseillÃ© dâ€™utiliser la configuration Apache gÃ©nÃ©rÃ©e par dÃ©faut dans <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> et de lâ€™inclure dans votre vhost (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature.conf</span></code> et/ou <code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature-le-ssl.conf</span></code>), en suivant la <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">documentation dÃ©diÃ©e</a></p></li>
<li><p>Si vous aviez customisÃ© la page dâ€™accueil de GeoNature en modifiant les composants <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/footer/footer.component.html</span></code> ceux-ci ont Ã©tÃ© supprimÃ©s au profit de paramÃ¨tres de configuration. Il vous faut donc dÃ©placer votre customisation dans les paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code> de la nouvelle section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> de la configuration de GeoNature.
Vous pouvez renseigner du code HTML sur plusieurs lignes en le plaÃ§ant entre triple quote (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;&quot;&quot;</span></code>).</p></li>
<li><p>Les paramÃ¨tres de configuration suivants ont Ã©tÃ© supprimÃ©s et doivent Ãªtre retirÃ©s de votre fichier de configuration (<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>) sâ€™ils sont prÃ©sents :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> (si vous aviez renommÃ© votre logo, dÃ©placez le dans <code class="docutils literal notranslate"><span class="pre">geonature/custom/images/logo_structure.png</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPLOAD_FOLDER</span></code> (si vous lâ€™aviez dÃ©placÃ©, renommez votre dossier dâ€™upload en <code class="docutils literal notranslate"><span class="pre">attachments</span></code> et placez-le dans le dossier des mÃ©dias (<code class="docutils literal notranslate"><span class="pre">geonature/backend/media/</span></code> par dÃ©faut, paramÃ©trable via <code class="docutils literal notranslate"><span class="pre">MEDIA_FOLDER</span></code>))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BASE_DIR</span></code></p></li>
</ul>
</li>
<li><p>Occtax et champs additionnels :</p>
<ul>
<li><p>Les champs additionnels de type <code class="docutils literal notranslate"><span class="pre">bool_radio</span></code> ne sont plus supportÃ©s.
Si vous utilisiez ce type de widget dans vos champs additionnels dâ€™Occtax, ils seront automatiquement remplacÃ©s par un widget de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>.
Vous devez changer le champs <code class="docutils literal notranslate"><span class="pre">field_values</span></code> sur le modÃ¨le suivant : <code class="docutils literal notranslate"><span class="pre">[{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">vrai&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">true</span> <span class="pre">},</span> <span class="pre">{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">faux&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">false</span> <span class="pre">}]</span></code>.</p></li>
<li><p>Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent dÃ©sormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)<br />
La rÃ©trocompatibilitÃ© avec des listes simples est maintenue, mais vous Ãªtes invitÃ©s Ã  modifier ces champs dans le backoffice.<br />
Pour conserver le bon affichage lors de lâ€™Ã©dition des donnÃ©es, renseignez lâ€™ancienne valeur deux fois dans la clÃ© <code class="docutils literal notranslate"><span class="pre">value</span></code> et la clÃ© <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></li>
</ul>
</li>
</ul>
<p>âœ… Exemple de procÃ©dure de mise Ã  jour depuis une version 2.11 : https://geonature.fr/documents/procedures/2023-04-GN-211to212.txt</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul>
<li><p>Configuration dynamique du frontend : le frontend rÃ©cupÃ¨re dynamiquement sa configuration depuis le backend. Pour cela, il nÃ©cessite uniquement lâ€™adresse de lâ€™<code class="docutils literal notranslate"><span class="pre">API_ENDPOINT</span></code> qui doit Ãªtre renseignÃ©e dans le fichier <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/config.json</span></code>. En consÃ©quence, il nâ€™est plus nÃ©cessaire de rebuilder le frontend lors dâ€™une modification de la configuration de GeoNature ou de ses modules (#2205)</p></li>
<li><p>Personnalisation de la page dâ€™accueil : ajout dâ€™une section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> contenant les paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code>. Ceux-ci peuvent contenir du code HTML qui est chargÃ© dynamiquement avec la configuration, Ã©vitant ainsi la nÃ©cessitÃ© dâ€™un rebuild du frontend (#2300)</p></li>
<li><p>SynthÃ¨se : AgrÃ©gation des observations ayant la mÃªme gÃ©omÃ©trie pour ne les charger quâ€™une seule fois, et ainsi amÃ©liorer les performances et la lisibilitÃ© (#1847)</p></li>
<li><p>SynthÃ¨se : PossibilitÃ© dâ€™afficher les donnÃ©es agrÃ©gÃ©es par maille (#1878). La fonctionnalitÃ© est configurable avec les paramÃ¨tres suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[SYNTHESE]</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_ENABLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;M10&quot;</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_BY_DEFAULT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">    </span><span class="c1"># affichage groupÃ© par dÃ©faut</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_LEGEND_CLASSES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">.   # voir fichier de configuration dâ€™exemple</span>
</pre></div>
</div>
</li>
<li><p>SynthÃ¨se : PossibilitÃ© de dÃ©finir des filtres par dÃ©faut avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">SYNTHESE.DEFAULT_FILTERS</span></code> (#2261)</p></li>
<li><p>MÃ©tadonnÃ©es : Chargement des jeux de donnÃ©es seulement quand on clique sur un cadre dâ€™acquisition dans la liste des mÃ©tadonnÃ©es, pour amÃ©liorer les performances du module, en ne chargeant pas tous les jeux de donnÃ©es par dÃ©faut (#2004)</p></li>
<li><p>Champs additionnels : Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent dÃ©sormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)</p></li>
<li><p>Admin : PossibilitÃ© de gÃ©rer la table des applications mobiles (<code class="docutils literal notranslate"><span class="pre">t_mobile_apps</span></code>) dans le module Â«Â AdminÂ Â» de GeoNature, notamment pour faciliter la gestion des mises Ã  jour de Occtax-mobile (#2352)</p></li>
<li><p>PossibilitÃ© de configurer les modules (picto, doc, label) directement depuis le module Admin (#2409)</p></li>
<li><p>PossibilitÃ© dâ€™afficher un bouton de gÃ©olocalisation sur les cartes des formulaires Occtax et Occhab (#2338), activable avec le paramÃ¨tre suivant :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[MAPCONFIG]</span>
<span class="w">    </span><span class="n">GEOLOCATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</li>
<li><p>Profils mis Ã  jour automatiquement par Celery Beat, toutes les nuits par dÃ©faut (#2412)</p></li>
<li><p>Ajout de lâ€™intÃ©gration de Redis Ã  lâ€™outil de logs Sentry, pour amÃ©liorer la prÃ©cisions des traces</p></li>
<li><p>PossibilitÃ© de dÃ©finir des rÃ¨gles de notifications par dÃ©faut, sâ€™appliquant aux utilisateurs nâ€™ayant pas de rÃ¨gle spÃ©cifique. Pour cela, il suffit dâ€™insÃ©rer une rÃ¨gle dans la table <code class="docutils literal notranslate"><span class="pre">gn_notifications.t_notifications_rules</span></code> avec <code class="docutils literal notranslate"><span class="pre">id_role=NULL</span></code> (#2267)</p></li>
<li><p>Publication automatique de deux images Docker <code class="docutils literal notranslate"><span class="pre">geonature-backend</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature-frontend</span></code> (#2206). Leur utilisation nâ€™a pas encore Ã©tÃ© Ã©prouvÃ©e et leur utilisation en production nâ€™est de ce fait pas recommandÃ©e.</p></li>
<li><p>AmÃ©lioration de la fiabilitÃ© du processus de migration</p></li>
<li><p>Ajout dâ€™un index sur la colonne <code class="docutils literal notranslate"><span class="pre">gn_synthese.cor_area_synthese.id_area</span></code>. La colonne <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> est dÃ©jÃ  couverte par lâ€™index multiple <code class="docutils literal notranslate"><span class="pre">(id_synthese,</span> <span class="pre">id_area)</span></code>.</p></li>
<li><p>IntÃ©gration de TaxRef v16 et du rÃ©fÃ©rentiel de sensibilitÃ© associÃ© pour les nouvelles installations de GeoNature</p></li>
<li><p>Ã‰volution de la gestion des fichiers statiques et des mÃ©dias (#2306) :</p>
<ul>
<li><p>SÃ©paration des fichiers statiques (applicatif, fournis par GeoNature) et des fichiers mÃ©dias (gÃ©nÃ©rÃ©s par lâ€™applications). Sont dÃ©placÃ©s du dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code> vers le dossier <code class="docutils literal notranslate"><span class="pre">backend/media</span></code> les sous-dossiers suivants : <code class="docutils literal notranslate"><span class="pre">medias</span></code>, <code class="docutils literal notranslate"><span class="pre">exports</span></code>, <code class="docutils literal notranslate"><span class="pre">geopackages</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile</span></code>, <code class="docutils literal notranslate"><span class="pre">pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">shapefiles</span></code>. De plus, lâ€™ancien dossier <code class="docutils literal notranslate"><span class="pre">medias</span></code> est renommÃ© <code class="docutils literal notranslate"><span class="pre">attachments</span></code>.</p></li>
<li><p>Ajout des paramÃ¨tres de configuration suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">ROOT_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dossier absolu du backend&quot;</span>
<span class="n">STATIC_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;static&quot;</span><span class="w">    </span><span class="c1"># dossier absolu ou relatif Ã  ROOT_PATH</span>
<span class="n">STATIC_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/static&quot;</span><span class="w">      </span><span class="c1"># URL dâ€™accÃ¨s aux fichiers statiques</span>
<span class="n">MEDIA_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;media&quot;</span><span class="w">      </span><span class="c1"># dossier absolu ou relatif Ã  ROOT_PATH</span>
<span class="n">MEDIA_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/media&quot;</span><span class="w">        </span><span class="c1"># URL dâ€™accÃ¨s aux mÃ©dias</span>
</pre></div>
</div>
</li>
<li><p>Ajout dâ€™un dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> Ã  la racine de GeoNature et du paramÃ¨tre associÃ© <code class="docutils literal notranslate"><span class="pre">CUSTOM_STATIC_FOLDER</span></code>. Les fichiers statiques rÃ©clamÃ©s sont cherchÃ©s en prioritÃ© dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code>, puis, si non trouvÃ©s, dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>. Ainsi, si besoin de modifier un fichier statique, on placera un fichier du mÃªme nom dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> plutÃ´t que de modifier le fichier original (par exemple, <code class="docutils literal notranslate"><span class="pre">custom/images/logo_structure.png</span></code>). Voir la <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#customisation">documentation sur la customisation</a>.</p></li>
<li><p>Retrait du prÃ©fixe <code class="docutils literal notranslate"><span class="pre">static/media/</span></code> aux chemins dâ€™accÃ¨s des fichiers joints (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias.media_path</span></code>)</p></li>
<li><p>Retrait du prÃ©fixe <code class="docutils literal notranslate"><span class="pre">static/mobile/</span></code> aux chemins dâ€™accÃ¨s des APK des applications mobiles (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps.relative_path_apk</span></code>)</p></li>
<li><p>Certains fichiers statiques sont renommÃ©s :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">static/css/custom.css</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">static/css/metadata_pdf_custom.css</span></code></p></li>
</ul>
</li>
<li><p>Certains assets du frontend sont dÃ©placÃ©s vers les fichiers statiques du backend pour profiter du mÃ©canisme de customisation :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">backend/static/css/frontend.css</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/favicon.ico</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">backend/static/images/favicon.ico</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/login_background.jpg</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">backend/static/images/login_background.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_sidebar.jpg</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_sidebar.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_structure.png</span></code> â†’ <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_structure.png</span></code></p></li>
</ul>
</li>
<li><p>Le lien symbolique <code class="docutils literal notranslate"><span class="pre">static/images/logo_structure.jpg</span></code> est supprimÃ© au profit de lâ€™utilisation de <code class="docutils literal notranslate"><span class="pre">logo_sidebar.jpg</span></code></p></li>
<li><p>Les dÃ©placements mentionnÃ©s ci-dessus sont effectuÃ©s par le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code></p></li>
</ul>
</li>
<li><p>Mise Ã  jour des dÃ©pendances :</p>
<ul class="simple">
<li><p>TaxHub 1.11.1</p></li>
<li><p>UsersHub 2.3.3</p></li>
<li><p>UsersHub-authentification-module 1.6.5</p></li>
<li><p>Habref-api-module 0.3.2</p></li>
<li><p>Nomenclature-api-module 1.5.4</p></li>
<li><p>RefGeo 1.3.0</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.2</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.7</p></li>
</ul>
</li>
<li><p>Refonte des permissions et suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_roles_permissions</span></code> qui posait des problÃ¨mes de performances du nombre dâ€™utilisateurs (#2196 et #2360)</p></li>
<li><p>La recherche du fichier de configuration des modules sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (code du module en minuscule) dans le rÃ©pertoire de configuration de GeoNature devient prioritaire devant lâ€™utilisation du fichier <code class="docutils literal notranslate"><span class="pre">conf_gn_module.toml</span></code> dans le rÃ©pertoire de configuration du module.
Le script de mise Ã  jour dÃ©place les fichiers de configuration des modules vers le dossier centralisÃ© de configuration de GeoNature (#2423)</p></li>
<li><p>Rechargement automatique de GeoNature quand on modifie un fichier de configuration dâ€™un module dans lÂ Â» dossier centralisÃ© (#2418)</p></li>
<li><p>Ã‰volution de la configuration Apache <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> pour activer la compression gzip des rÃ©ponses de lâ€™API (#2266) et pour servir les mÃ©dias et les fichiers statiques par Apache (#2430).
Ã€ reporter dans votre configuration Apache si celle-ci nâ€™importe pas cette configuration fournie par dÃ©faut.</p></li>
<li><p>Le script de mise Ã  jour (<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) peut prendre en argument le chemin vers lâ€™ancienne installation GeoNature.
Il peut sâ€™agir du mÃªme dossier que la nouvelle installation GeoNature (cas dâ€™une mise Ã  jour dâ€™un dossier GeoNature avec Git).</p></li>
<li><p>Ajout dâ€™une historisation des suppressions de la synthÃ¨se Ã  travers un trigger peuplant la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_log_synthese</span></code> (#789)
Une API <code class="docutils literal notranslate"><span class="pre">/synthese/log</span></code> permet dâ€™obtenir lâ€™historique des insertions, mises Ã  jour et suppressions dans la synthÃ¨se (notamment utile pour GN2PG).</p></li>
<li><p>AmÃ©lioration de la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> qui dÃ©tecte dÃ©sormais automatiquement le code du module (#2396)</p></li>
<li><p>SynthÃ¨se : Optimisation de la requÃªte par statuts de protection (#2329)</p></li>
<li><p>Occtax : Optimisation des triggers de calcul automatique des altitudes pour ne les lancer que quand la gÃ©omÃ©trie du relevÃ© est modifiÃ©e (#2137)</p></li>
<li><p>Occtax et Occhab : Ajout dâ€™une pastille indiquant le nombre de filtres activÃ©s</p></li>
<li><p>AmÃ©lioration du message renvoyÃ© Ã  lâ€™utilisateur en cas de Timout (#2417)</p></li>
<li><p>AmÃ©lioration du composant gÃ©nÃ©rique de selection dâ€™un jeu de donnÃ©es, en selectionnant automatiquement le JDD si la liste nâ€™en contient quâ€™un et que le champs est obligatoire (#1049)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se : changement du type de <code class="docutils literal notranslate"><span class="pre">entity_source_pk_value</span></code> de <code class="docutils literal notranslate"><span class="pre">Integer</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">Unicode</span></code> dans le modÃ¨le pour correspondre Ã  la base de donnÃ©es</p></li>
<li><p>Correction de lâ€™accÃ¨s public automatique activable avec <code class="docutils literal notranslate"><span class="pre">?access=public</span></code> dans lâ€™URL (#1650)</p></li>
<li><p>Correction de la fonctionnalitÃ© de rÃ©cupÃ©ration du mot de passe</p></li>
<li><p>Correction de la commande dâ€™import du rÃ©fÃ©rentiel sensibilitÃ© pour correctement gÃ©rer les critÃ¨res comportementales</p></li>
<li><p>Occtax : correction du filtre sur les organismes</p></li>
<li><p>SynthÃ¨se : correction dâ€™un problÃ¨me de performance de lâ€™export (vue <code class="docutils literal notranslate"><span class="pre">v_synthese_for_export</span></code>) (#1434)</p></li>
<li><p>Correction dâ€™un problÃ¨me de dÃ©tection de lâ€™emplacement des modules avec les versions rÃ©centes de <code class="docutils literal notranslate"><span class="pre">pip</span></code> (#2365, #2364)</p></li>
<li><p>Occhab : correction du CRUVED sur la liste des jeux de donnÃ©es ouvert Ã  la saisie</p></li>
<li><p>Occtax : correction du contrÃ´le des dates du formulaire dâ€™Ã©dition des relevÃ©s (#2318)</p></li>
<li><p>Correction des acteurs dans les exports PDF des mÃ©tadonnÃ©es (#2034)</p></li>
<li><p>Correction des graphiques dans les exports PDF des cadres dâ€™acquisition (#2231)</p></li>
<li><p>Correction du script de synchronisation des mÃ©tadonnÃ©es depuis MTD INPN (#2314)</p></li>
<li><p>Correction de lâ€™appel en double de la route des notifications (#2356)</p></li>
<li><p>Correction de lâ€™URL vers la documentation depuis la page dâ€™accueil</p></li>
<li><p>Correction du formulaire Occtax quand un relevÃ© nâ€™a pas dâ€<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> (#2421)</p></li>
<li><p>Correction de lâ€™affichage des tooltips sur la liste des obsrvations de la SynthÃ¨se (#2348)</p></li>
<li><p>Correction du chargement des dates dÃ©but et date fin quand on modifie un relevÃ© dans Occtax ou une station dans OCchab (#2071)</p></li>
<li><p>Correction de la rÃ©cupÃ©ration des emails dans lâ€™interface Â«Â Mon compteÂ Â» (#2346)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Suppression du support du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du dÃ©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2162)</p></li>
<li><p>Suppression des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">redirect_on_expiration</span></code> et <code class="docutils literal notranslate"><span class="pre">redirect_on_invalid_token</span></code> du dÃ©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2360)</p></li>
<li><p>Remplacement des usages du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du dÃ©corateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> par <code class="docutils literal notranslate"><span class="pre">get_scope</span></code> dans le code de GeoNature et des modules <em>contrib</em> (#2164, #2199)</p></li>
<li><p>Suppression de multiples fonctions du package <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools</span></code>, notamment la classe <code class="docutils literal notranslate"><span class="pre">UserCruved</span></code>Â ; se reporter Ã  la documentation dÃ©veloppeur afin de connaÃ®tre les fonctions utilisables dans votre code (#2360)</p></li>
<li><p>Migration GeoNature : le venv est mis Ã  jour plutÃ´t que dâ€™Ãªtre supprimÃ© et recrÃ©Ã© (#2332)</p></li>
<li><p>Les erreurs de validation Marshmallow sont automatiquement converties en erreur 400 (BadRequest)</p></li>
<li><p>Les modules <em>contrib</em> doivent Ã©galement Ãªtre formatÃ©s avec <code class="docutils literal notranslate"><span class="pre">prettier</span></code></p></li>
<li><p>Fiabilisation des exports PDF (#2232)</p></li>
<li><p>Le composant de carte <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code> a un nouvel input <code class="docutils literal notranslate"><span class="pre">geolocation</span></code> permettant dâ€™activer le bouton de gÃ©olocalisation</p></li>
<li><p>Ajout du mixin <code class="docutils literal notranslate"><span class="pre">geonature.utils.schema.CruvedSchemaMixin</span></code> permettant dâ€™ajouter la propriÃ©tÃ© (exclue par dÃ©faut) <code class="docutils literal notranslate"><span class="pre">cruved</span></code> Ã  un schÃ©ma Marshmallow</p></li>
<li><p>Lâ€™accÃ¨s aux paramÃ¨tre de configuration ne se fait plus Ã  partir des fichiers gÃ©nÃ©rÃ©s <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> (GeoNature) ou <code class="docutils literal notranslate"><span class="pre">ModuleConfig</span></code> (modules), mais uniquement Ã  partir du <code class="docutils literal notranslate"><span class="pre">ConfigService</span></code> en charge de la rÃ©cupÃ©ration dynamique de la configuration (#2205).</p></li>
<li><p>Mise Ã  jour dâ€™Angular version 12 Ã  15 et mise Ã  jour de nombreuses dÃ©pendances frontend (#2154)</p></li>
<li><p>Nettoyage des dÃ©pendances frontend de GeoNature. Si vous utilisiez certaines dÃ©pendances supprimÃ©es de GeoNature dans vos modules, vous devez les rajouter dans un fichier <code class="docutils literal notranslate"><span class="pre">package-lock.json</span></code> dans le dossier frontend de votre module.</p></li>
<li><p>Suppression de la route obsolÃ¨te <code class="docutils literal notranslate"><span class="pre">/config</span></code></p></li>
<li><p>Ajout du context manager <code class="docutils literal notranslate"><span class="pre">start_sentry_child</span></code> permettant de rapporter dans les traces Sentry le temps dâ€™exÃ©cution de certaines tÃ¢ches coÃ»teuses (#2289)</p></li>
<li><p>Refactorisation du module Occhab (#2324) avec passage Ã  Marshmallow.
Ajout Ã  cette occasion de plusieurs fonctions et classes utilitaires au dÃ©pÃ´t <em>Utils-Flask-SQLAlchemy-Geo</em>.
Suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_releve_occtax</span></code>.
Module de rÃ©fÃ©rence pour les dÃ©veloppements et documentation associÃ©e (#2331)</p></li>
<li><p>DÃ©placement des routes gÃ©ographiques et des tests associÃ©s vers le dÃ©pÃ´t <em>RefGeo</em> (#2342)</p></li>
<li><p>AmÃ©lioration des tests des permissions</p></li>
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">get_scopes_by_module</span></code> cherche dans le contexte applicatif (variable <code class="docutils literal notranslate"><span class="pre">g</span></code>) la prÃ©sence de <code class="docutils literal notranslate"><span class="pre">g.current_module</span></code> et <code class="docutils literal notranslate"><span class="pre">g.current_object</span></code> lorsquâ€™ils ne sont pas fournis en paramÃ¨tre.</p></li>
<li><p>Travaux en cours : compatibilitÃ© SQLAlchemy 1.3 &amp; 1.4 / Flask-SQLAlchemy 2 &amp; 3 (#1812)</p></li>
<li><p>Mise Ã  jour de Chart.js de la version 2 Ã  4</p></li>
<li><p>PossibilitÃ© de dÃ©finir lâ€™URL par dÃ©faut de la documentation dâ€™un module par un entrypoint nommÃ© <code class="docutils literal notranslate"><span class="pre">doc_url</span></code></p></li>
</ul>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;ch-cbna / &#64;bouttier / &#64;TheoLechemia / &#64;jpm-cbna / &#64;bastyen / &#64;Gaetanbrl / &#64;VincentCauchois / &#64;joelclems / &#64;amandine-sahl / &#64;andriacap / &#64;mvergez / &#64;DonovanMaillard / &#64;dece / &#64;lpofredc / &#64;MathRdt / &#64;gildeluermoz / &#64;maximetoma / &#64;pierre56 / &#64;cecchi-a / &#64;jbrieuclp / &#64;camillemonchicourt</p>
</section>
<section id="id8">
<h2>2.11.2 (2023-01-19)<a class="headerlink" href="#id8" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un import manquant dans un fichier de migration des donnÃ©es dâ€™exemple dâ€™Occtax (#2285)</p></li>
<li><p>Correction dâ€™un problÃ¨me de lâ€™installation globale en mode dÃ©veloppement</p></li>
</ul>
</section>
<section id="id9">
<h2>2.11.1 (2023-01-18)<a class="headerlink" href="#id9" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la documentation de la sensibilitÃ© (#2234)</p></li>
<li><p>Correction de lâ€™accÃ¨s aux notifications lorsque la gestion des comptes utilisateurs est activÃ©e</p></li>
<li><p>Correction des migrations Alembic des donnÃ©es dâ€™exemple Occtax afin de supporter les migrations depuis GeoNature â‰¤ 2.9 (#2240, #2248)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> afin de supporter les anciens modules dont le passage Ã  Alembic nÃ©cessite un stamp manuel</p></li>
</ul>
</section>
<section id="ilex-aquifolium-2022-12-21">
<h2>2.11.0 - Ilex aquifolium ğŸ„ (2022-12-21)<a class="headerlink" href="#ilex-aquifolium-2022-12-21" title="Link to this heading">ïƒ</a></h2>
<p><strong>â© En bref</strong></p>
<ul class="simple">
<li><p>Utilisation de la BDC statuts dans la SynthÃ¨se pour les filtres et infos sur les statuts des espÃ¨ces</p></li>
<li><p>Mise Ã  jour des rÃ¨gles de sensibilitÃ© du SINP</p></li>
<li><p>Notifications (changement de statut de validation de mes observations)</p></li>
<li><p>Filtre des mÃ©tadonnÃ©es par zonage gÃ©ographique</p></li>
<li><p>Affichage de zonages sur les cartes (depuis le ref_geo, un WMS, un WFS ou un GeoJSON)</p></li>
<li><p>Suppression du support des modules non packagÃ©s</p></li>
<li><p>Simplification et amÃ©lioration des commandes dâ€™installation et de mise Ã  jour des modules</p></li>
<li><p>AmÃ©lioration du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> de mise Ã  jour de GeoNature</p></li>
<li><p>Nettoyage du frontend et amÃ©lioration de la sÃ©paration backend/frontend</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul>
<li><p>Mettre Ã  jour TaxHub en version 1.10.7</p></li>
<li><p>Si vous utilisez des modules spÃ©cifiques (hors Import, Export, Dashboard, Monitoring), vÃ©rifiez quâ€™ils disposent dâ€™une version packagÃ©e compatible avec GeoNature 2.11 (#2058)</p></li>
<li><p>Si vous aviez mis en place lâ€™accÃ¨s public Ã  GeoNature, adaptez sa configuration avec le nouveau paramÃ¨tre unique <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Attention, le script de migration de la version 2.11 a une rÃ©gression et ne rÃ©cupÃ¨re plus automatiquement la configuration des modules fournis avec GeoNature (Occtax, Occhab, Validation). Rapatriez manuellement vos Ã©ventuels fichiers de configuration de ces modules si vous en avez crÃ©Ã© :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>geonature_old/contrib/occtax/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/occtax/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_validation/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_validation/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_occhab/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_occhab/config/conf_gn_module.toml
</pre></div>
</div>
</li>
<li><p>Si vous les utilisez, mettre Ã  jour les modules Dashboard en version 1.2.1 (ou plus) et Monitoring en version 0.4.0 (ou plus), <strong>aprÃ¨s</strong> la mise Ã  jour de GeoNature</p></li>
<li><p>Vous pouvez dÃ©sactiver les textes de la BDC statuts ne correspondant par Ã  votre territoire.
Voir rubrique Â«Â 5. Configurer les filtres des statuts de protection et des listes rougesÂ Â» de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>Vous pouvez mettre Ã  jour vos rÃ¨gles de sensibilitÃ© si vous utilisez TaxRef versions 14 ou 15 :</p>
<ul>
<li><p>DÃ©sinstallez les rÃ¨gles fournies par Alembic :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>~/geonature/backend/venv/bin/activate
geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_sensitivity_inpn@base
</pre></div>
</div>
</li>
<li><p>Vous nâ€™avez probablement plus besoin des anciennes rÃ©gions que vous pouvez alors supprimer de votre rÃ©fÃ©rentiel gÃ©ographique :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_geo_fr_regions_1970@base
</pre></div>
</div>
</li>
<li><p>Assurez-vous que votre rÃ©fÃ©rientiel gÃ©ographique contienne les dÃ©partements :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>upgrade<span class="w"> </span>ref_geo_fr_departments@head
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v15, insÃ©rez les nouvelles rÃ¨gles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;RÃ©fÃ©rentiel sensibilitÃ© TAXREF v15 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401875<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV15_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V15_31032022/RefSensibilite_15.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v14, insÃ©rez les nouvelles rÃ¨gles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;RÃ©fÃ©rentiel sensibilitÃ© TAXREF v14 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401876<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV14_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V14_31032022/RefSensibilite_14.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>RafraÃ®chissez la vue matÃ©rialisÃ©e prÃ©-calculant les taxons enfants :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>refresh-rules-cache
</pre></div>
</div>
</li>
<li><p>Relancez le calcul de la sensibilitÃ© des observations de la synthÃ¨se :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>update-synthese
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<p>âœ… Exemple de procÃ©dure de mise Ã  jour depuis une version 2.9 : https://geonature.fr/documents/procedures/2023-01-GN-29to211.txt</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>[SynthÃ¨se] Ajout de filtres sur les statuts de protection et les listes rouges dans le fenÃªtre de recherche avancÃ©e basÃ©s sur la <a class="reference external" href="https://inpn.mnhn.fr/programme/base-de-connaissance-statuts/presentation">BDC Statuts</a>.
Ajout des paramÃ¨tres de configuration <code class="docutils literal notranslate"><span class="pre">STATUS_FILTERS</span></code> et <code class="docutils literal notranslate"><span class="pre">RED_LISTS_FILTERS</span></code> dans la section <code class="docutils literal notranslate"><span class="pre">SYNTHESE</span></code>. Il est possible de modifier les listes et statuts affichÃ©s comme indiquÃ© dans la documentation de la configuration du module SYNTHESE. (#1492)</p></li>
<li><p>[SynthÃ¨se] Affichage dans la fiche dâ€™une observation, onglet <em>Taxonomie</em>, des informations issues de la <em>BDC Statuts</em> (statuts de protection, listes rouges) en rapport avec le taxon et lâ€™emplacement gÃ©ographique de lâ€™observation sÃ©lectionnÃ©e (#1492)</p></li>
<li><p>[SynthÃ¨se] Lâ€™export des statuts de protection est maintenant basÃ© sur les donnÃ©es de la <em>BDC Statuts</em> (#1492)</p></li>
<li><p>Documentation dans la rubrique Â«Â 5. Configurer les filtres des statuts de protection et des listes rougesÂ Â» de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>PossibilitÃ© dâ€™afficher des zonages sur les cartes (#974).
Ces derniers peuvent provenir :</p>
<ul>
<li><p>dâ€™un flux WMS ou WFS</p></li>
<li><p>dâ€™un fichier ou flux GeoJSON</p></li>
<li><p>du rÃ©fÃ©rentiel gÃ©ographique interne
Les couches sont configurables via le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">REF_LAYERS</span></code> de la section <code class="docutils literal notranslate"><span class="pre">MAPCONFIG</span></code>.
Par dÃ©faut un WMS des limites administrativs de lâ€™IGN et un WMS des ZNIEFF 1 continentales en mÃ©tropole sont affichÃ©s.</p></li>
</ul>
</li>
<li><p>Ajout dâ€™un mÃ©canisme de notifications (#1873).
Lâ€™utilisateur peut choisir de souscrire, pour chaque type de notificaton, sâ€™il veut Ãªtre notifiÃ© dans GeoNature et/ou par e-mail.
Les templates de notifications peuvent Ãªtre modifiÃ©s par lâ€™administrateur dans le module Admin.
Actuellement seule la notification du changement du statut de validation des observations est implÃ©mentÃ©e.
Les fonctionnalitÃ©s de notifications sont activÃ©es par dÃ©faut, mais peuvent Ãªtre dÃ©sactivÃ©es globalement en passant le paramÃ¨tre de GeoNature <code class="docutils literal notranslate"><span class="pre">NOTIFICATIONS_ENABLED</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Recherche des mÃ©tadonnÃ©es par emprise gÃ©ographique des observations (#1768)
Le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">METADATA_AREA_FILTERS</span></code> permet de spÃ©cifier les types de zonages gÃ©ographiques disponibles Ã  la recherche (communes, dÃ©partements et rÃ©gions activÃ©s par dÃ©faut).</p></li>
<li><p>Mise Ã  jour des rÃ¨gles de sensibilitÃ© des observations (incluant les rÃ¨gles nationales et rÃ©gionales mises Ã  plat au niveau des dÃ©partements) pour TaxRef version 14 et 15 (#1891)</p></li>
<li><p>IntÃ©gration et mise Ã  jour de la documentation sur les rÃ©gles et le calcul de la sensibilitÃ©</p></li>
<li><p>Ajout de sous-commandes pour la gestion du rÃ©fÃ©rentiel de sensibilitÃ© :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> : information sur les rÃ¨gles prÃ©sentes dans la base de donnÃ©es</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">remove-referential</span></code> : supprimer les rÃ¨gles dâ€™une source donnÃ©e</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">add-referential</span></code> : ajouter de nouvelles rÃ¨gles
Les nouvelles installations de GeoNature reposent sur lâ€™utilisation de ces commandes pour fournir les rÃ¨gles SINP de sensibilitÃ© du 31/03/2022.
Ces derniÃ¨res sont fournies Ã  lâ€™Ã©chelle du dÃ©partement et non plus des anciennes rÃ©gions.
La branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_sensitivity_inpn</span></code> ne doit plus Ãªtre utilisÃ©e et sera supprimÃ©e dans une prochaine version de GeoNature.</p></li>
</ul>
</li>
<li><p>Deux Dockerfiles permettant de gÃ©nÃ©rer une image frontend et une image backend ont Ã©tÃ© intÃ©grÃ©s.
La dockerisation de GeoNature reste toutefois un travail en cours, et lâ€™utilisation de ces images nâ€™est pas encore officiellement supportÃ©e (#2206)</p></li>
<li><p>Les colonnes <code class="docutils literal notranslate"><span class="pre">id_source</span></code> de la synthÃ¨se et <code class="docutils literal notranslate"><span class="pre">id_module</span></code> des relevÃ©s Occtax sont dÃ©sormais <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> (#2186)</p></li>
<li><p>Suppression de la section <code class="docutils literal notranslate"><span class="pre">[PUBLIC_ACCESS]</span></code> dans les paramÃ¨tres de configuration, remplacÃ©e par un unique paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Blocage de la possibilitÃ© de modifier son compte pour lâ€™utilisateur public (#2218)</p></li>
<li><p>PossibilitÃ© dâ€™accÃ©der directement Ã  une page de GeoNature avec lâ€™utilisateur public, sans passer par la page dâ€™authentification (#1650)</p></li>
<li><p>Support de la configuration par variable dâ€™environnement prÃ©fixÃ©e par <code class="docutils literal notranslate"><span class="pre">GEONATURE_</span></code> (<em>e.g</em> <code class="docutils literal notranslate"><span class="pre">GEONATURE_SQLALCHEMY_DATABASE_URI</span></code>). Les paramÃ¨tres dÃ©finis ainsi peuvent Ãªtre exclus de la configuration TOML, y compris les paramÃ¨tres obligatoires</p></li>
<li><p>Activation de <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/periodic-tasks.html">Celery Beat</a> permettant de lancer des tÃ¢ches pÃ©riodiquement</p></li>
<li><p>Mise Ã  jour des dÃ©pendances :</p>
<ul>
<li><p>TaxHub 1.10.7</p></li>
<li><p>UsersHub</p></li>
<li><p>UsersHub-authentification-module 1.6.2</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.1</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.6</p></li>
</ul>
</li>
<li><p>Modules GeoNature et sÃ©paration backend/frontend (#2088) :</p>
<ul>
<li><p>Suppression du support des modules non packagÃ©s (#2058).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">install-packaged-gn-module</span></code> devient <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>.</p></li>
<li><p>Suppression des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules, (#2165).</p></li>
<li><p>Recherche de la configuration des modules Ã©galement dans le dossier <code class="docutils literal notranslate"><span class="pre">config</span></code> de GeoNature, sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (le code du module Ã©tant en minuscule).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-module-configuration</span></code> est renommÃ©e <code class="docutils literal notranslate"><span class="pre">generate-frontend-module-config</span></code> par homogÃ©nÃ©itÃ© avec la commande <code class="docutils literal notranslate"><span class="pre">generate-frontend-config</span></code>.</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-configuration</span></code> gÃ©nÃ¨re la configuration frontend de tous les modules actifs en plus de la configuration GeoNature (puis lance le build du frontend).</p></li>
<li><p>Les liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> sont supprimÃ©s au profit de liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">frontend/external_modules</span></code> pointant directement vers le dossier <code class="docutils literal notranslate"><span class="pre">frontend</span></code> des modules considÃ©rÃ©s. Ces liens sont crÃ©Ã©s par la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>. Le processus de migration convertit automatiquement vos liens symboliques existants.</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> permettant dâ€™insÃ©rer le module dans la table <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> et de monter sa branche Alembic afin de crÃ©er ou mettre Ã  jour son schÃ©ma de base de donnÃ©es.
Il nâ€™est pas nÃ©cessaire de lancer cette commande manuellement pour les modules installÃ©s avec la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> sauf lorsque cette derniÃ¨re est appelÃ©e avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">--upgrade-db=false</span></code>.</p></li>
<li><p>Les assets frontend ne sont plus collectÃ©s dans un dossier portant le nom du module. Le mainteneur du module doit donc crÃ©er cette arborescence lui-mÃªme.</p></li>
</ul>
</li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Installation dâ€™une dÃ©pendance Debian manquante pour Cypress (#2125)</p></li>
<li><p>Les fichiers de service systemd ont Ã©tÃ© corrigÃ©s pour fonctionner sur une machine sans PostgreSQL (BDD sur un autre hÃ´te)</p></li>
<li><p>La <em>BDC Statuts</em> est maintenance chargÃ©e lors de lâ€™intÃ©gration continue juste aprÃ¨s le chargement des dÃ©partements (#1492)</p></li>
<li><p>Ajout de lâ€™<code class="docutils literal notranslate"><span class="pre">id_module</span></code> aux relevÃ©s des donnÃ©es dâ€™exemple Occtax</p></li>
<li><p>Correction du chargement du module Validation (#2183)</p></li>
<li><p>Correction du script de migration pour gÃ©rer la migration de lâ€™ensemble des modules externes</p></li>
<li><p>Correction de la gestion du protocole (http / https) lors des redirections automatique de Flask (redirection en cas de slash manquant en fin dâ€™URL)</p></li>
<li><p>RafraÃ®chissement du cache des rÃ¨gles de sensibilitÃ© en fin dâ€™installation</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Nettoyage du frontend : dÃ©pendances, configuration Angular</p></li>
<li><p>RÃ©vision importante de la documentation, de dÃ©veloppement notamment</p></li>
<li><p>Les fichiers <code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code> et <code class="docutils literal notranslate"><span class="pre">tsconfig.app.json</span></code> nâ€™ont plus besoin dâ€™Ãªtre gÃ©nÃ©rÃ©s (#2088)</p></li>
<li><p>Suppression des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules Ã  rÃ©percuter dans les modules (#2165)</p></li>
<li><p>HomogÃ©nÃ©isation de la configuration entre <code class="docutils literal notranslate"><span class="pre">current_app.config</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature.utils.config.config</span></code></p></li>
<li><p>Compilation en production sans AOT (#1855)</p></li>
<li><p>Lâ€™installation du backend, du frontend et des modules peut dÃ©sormais Ãªtre faite sans disposer de la BDD (#1359)</p></li>
<li><p>Ajout de UsersHub aux dÃ©pendances (dÃ©veloppement uniquement)</p></li>
<li><p>Correction du chemin du marqueur Leaflet (#2223)</p></li>
</ul>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;jpm-cbna / &#64;pierrejego / &#64;Gaetanbrl / &#64;amandine-sahl / &#64;VincentCauchois / &#64;antoinececchimnhn / &#64;metourneau / &#64;bouttier / &#64;TheoLechemia / &#64;camillemonchicourt</p>
</section>
<section id="id10">
<h2>2.10.4 (2022-11-30)<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour du RefGeo en version 1.2.1 afin de corriger une
rÃ©gression des performances dans la synthÃ¨se</p></li>
<li><p>Correction de la gÃ©nÃ©ration du rapport de sensibilitÃ© dans les
fiches des mÃ©tadonnÃ©es</p></li>
<li><p>Correction dâ€™un filtre de permissions sur les jeux de donnÃ©es
(#2160)</p></li>
<li><p>Correction des boutons dâ€™ajout de donnÃ©es dans les jeux de donnÃ©es
(#2152)</p></li>
<li><p>Ajout dâ€™une dÃ©pendance Ã  GeoNature dans les migrations Occtax pour
corriger un problÃ¨me alÃ©atoire lors du passage des migrations
(#2178)</p></li>
</ul>
</section>
<section id="id11">
<h2>2.10.3 (2022-11-15)<a class="headerlink" href="#id11" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Optimisation dâ€™une migration Occtax particuliÃ¨rement lente en
dÃ©sactivant temporairement les triggers (#2138)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonctionnalitÃ© dâ€™inscription des utilisateurs
(#1874)</p></li>
<li><p>Correction dâ€™une rÃ©gression des performances de la routes <code class="docutils literal notranslate"><span class="pre">/modules</span></code>
(#2136)</p></li>
</ul>
</section>
<section id="id12">
<h2>2.10.2 (2022-11-09)<a class="headerlink" href="#id12" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Documentation de la fonctionnalitÃ© de duplication dâ€™Occtax</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script de migration pour gÃ©nÃ©rer la configuration
frontend des modules</p></li>
<li><p>Correction des triggers dâ€™Occtax pour correctement identifier la
bonne source</p></li>
</ul>
</section>
<section id="id13">
<h2>2.10.1 (2022-11-08)<a class="headerlink" href="#id13" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">DISABLED_MODULES</span></code></p></li>
<li><p>Installation des dÃ©pendances frontend des modules dans le dossier
frontend des modules eux-mÃªmes</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> ignore les modules dont le chargement a
rencontrÃ© une erreur (#2109)</p></li>
<li><p>Correction et amÃ©lioration du script de mise Ã  jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#2110)</p></li>
<li><p>Correction de la commande dâ€™installation des modules non packagÃ©s
avec le routing dynamique (#2107)</p></li>
<li><p>Correction du message de confirmation dâ€™enregistrement dâ€™un cadre
dâ€™acquisition (#2108)</p></li>
<li><p>Correction dâ€™une rÃ©gression de la 2.10.0 sur la route de
rÃ©cupÃ©ration des jeux de donnÃ©es impactant Occtax-mobile</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passez directement Ã  cette version plutÃ´t que la 2.10.0, mais en
suivant les notes de version de la 2.10.0, en vous aidant
Ã©ventuellement de lâ€™exemple de migration.</p></li>
</ul>
</section>
<section id="alouatta-macconnelli-2022-11-02">
<h2>2.10.0 - Alouatta macconnelli ğŸ’ (2022-11-02)<a class="headerlink" href="#alouatta-macconnelli-2022-11-02" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p><strong>Angular 12, tests automatisÃ©s frontend et backend</strong></p></li>
<li><p><strong>Discussions, signalement, partage, Ã©pinglage dâ€™une occurrence</strong></p></li>
</ul>
<p>ğŸ”§ Passage de la version 7 Ã  12 dâ€™Angular. Avant de mettre Ã  jour
GeoNature sur cette version, vÃ©rifiez que les modules que vous utilisez
sont disponibles dans une version compatible avec GeoNature 2.10.0 ou
plus (compatibilitÃ© Angular 12).</p>
<p>Modules compatibles Ã  date de la publication de la version 2.10 de
GeoNature :</p>
<ul class="simple">
<li><p>Import</p></li>
<li><p>Export</p></li>
<li><p>Dashboard</p></li>
<li><p>Monitoring</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p><strong>Avant</strong> de mettre Ã  jour GeoNature :</p>
<ul>
<li><p>Mettre Ã  jour les versions de TaxHub (1.10.4) et UsersHub
(2.3.1), sans la partie migration de la base de donnÃ©es avec
Alembic (elle sera faite lors de la mise Ã  jour de GeoNature)</p></li>
<li><p>Mettre Ã  jour les modules compatibles avec GeoNature 2.10, en
vous limitant aux Ã©tapes Â«Â TÃ©lÃ©chargement de la nouvelle version
du moduleÂ Â», Â«Â Renommage des rÃ©pertoiresÂ Â» et Â«Â Rapatriement de
la configurationÂ Â». La compilation de chaque module sera faite
automatiquement lors de la mise Ã  jour de GeoNature</p></li>
<li><p>Les nouveaux fichiers de logs seront placÃ©s dans le dossier
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/</span></code>. Vous pouvez archiver ou supprimer les
anciens fichiers de log (<code class="docutils literal notranslate"><span class="pre">/var/log/geonature.log*</span></code>).</p></li>
<li><p>Supprimer les paramÃ¨tres de configuration qui ont disparu sâ€™ils
sont prÃ©sents dans votre fichier de configuration
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code></p></li>
</ul>
</li>
<li><p>Installation du worker Celery : il vous faut installer le broker
<code class="docutils literal notranslate"><span class="pre">redis</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>redis
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Suivez la procÃ©dure de mise Ã  jour classique de GeoNature
(<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Suivez les Ã©ventuelles notes de version spÃ©cifiques des modules
installÃ©s (SQL de migration de leur schÃ©ma de BDD, stamp Alembic de
la BDD)</p></li>
</ul>
<p>âœ… Un <a class="reference external" href="https://geonature.fr/documents/procedures/2022-11-GN-210-Migrate.txt">exemple de migration complÃ¨te de GeoNature 2.9 Ã  2.10, ses
dÃ©pendances et ses modules principaux est disponible</a>
(pour information et Ã  adapter Ã  votre contexte).</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de dupliquer le module Occtax (#621)</p></li>
<li><p>AmÃ©lioration des fiches des observations dans les modules SynthÃ¨se
et Validation (#1474)</p></li>
<li><p>Ajout dâ€™un permalien sur les fiches des observations dans les
modules SynthÃ¨se et Validation (#1727)</p></li>
<li><p>Signaler une occurrence et paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ALERT_MODULES</span></code> associÃ©
(#1750)</p></li>
<li><p>Epingler une occurrence et son paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">PIN_MODULES</span></code> associÃ©
(#1819)</p></li>
<li><p>Discussions sur une occurrence et ses paramÃ¨tres
<code class="docutils literal notranslate"><span class="pre">DISCUSSION_MODULES</span></code> et <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MAX_LENGTH</span></code> associÃ©s (#1731)</p></li>
<li><p>Mise Ã  jour dâ€™Angular de la version 7 Ã  12 et des dÃ©pendances
javascript liÃ©es (#1547)</p></li>
<li><p>Mise en place de tests automatisÃ©s frontend avec Cypress, simulant
les actions de lâ€™utilisateur et vÃ©rifiant la conformitÃ© des
rÃ©sultats dans les modules Occtax, SynthÃ¨se et MÃ©tadonnÃ©es</p></li>
<li><p>Renforcement et nettoyage des tests automatisÃ©s backend
(augmentation de la couverture de code de 49,8% Ã  63,1%)</p></li>
<li><p>Documentation de lâ€™utilisation et de la mise en place des tests
automatisÃ©s backend et frontend.</p></li>
<li><p>Simplification du CRUVED minimum pour accÃ©der Ã  GeoNature, ne
nÃ©cessitant plus dâ€™avoir obligatoirement un CRUVED dÃ©fini au niveau
global de GeoNature (#1622)</p></li>
<li><p>[MÃ©tadonnÃ©es] Remplacement de la liste des imports par la liste
des sources dans la fiche des JDD (#1249)</p></li>
<li><p>[MÃ©tadonnÃ©es] Lister les cadres dâ€™acquisition par ordre
alphabÃ©tique</p></li>
<li><p>[Admin] AmÃ©lioration de lâ€™interface (#2101)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">status</span></code> permettant de lister les
migrations Alembic, leurs dÃ©pendances et identifier celles qui ont
Ã©tÃ© appliquÃ©es ou non (#1574)</p></li>
<li><p>Ajout dâ€™un worker Celery pour lâ€™exÃ©cution de tÃ¢ches asynchrones</p></li>
<li><p>DÃ©placement du fichier de log GeoNature vers
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/geonature.log</span></code>.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.cor_sensitivity_synthese</span></code> et
des triggers associÃ©s (#1710)</p></li>
<li><p>Suppression du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code>
permettant dâ€™ajouter le filtre sur lâ€™observers_txt en ILIKE sur
les portÃ©e 1 et 2 du CRUVED</p></li>
<li><p>Documentation : Ajout dâ€™exemples de configuration pour utiliser les
fonds IGN (#1703)</p></li>
<li><p>Documentation : ComplÃ©ment de la documentation sur les calculs de la
sensibilitÃ©</p></li>
<li><p>Suppression du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code>. Le SRID
local est fourni Ã  lâ€™installation, puis auto-dÃ©tectÃ© depuis la base
de donnÃ©es Ã  lâ€™usage.</p></li>
<li><p>Suppression du paramÃ¨tre de configuration
<code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code>.</p></li>
<li><p>[Occtax] RÃ©vision du style des fiches dâ€™information des relevÃ©s
(#1876)</p></li>
<li><p>[Occtax] Ajout des valeurs par dÃ©faut directement dans la base de
donnÃ©es (#1857)</p></li>
<li><p>[Monitoring] Ajout dâ€™un trigger calculant automatiquement
lâ€™altitude des sites</p></li>
<li><p>[Profils] Ajout des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">default_spatial_precision</span></code>,
<code class="docutils literal notranslate"><span class="pre">default_temporal_precision_days</span></code> et <code class="docutils literal notranslate"><span class="pre">default_active_life_stage</span></code>
dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.t_parameters</span></code>, remplaÃ§ant les valeurs par
dÃ©faut dÃ©finies au niveau du rÃ¨gne dans la table
<code class="docutils literal notranslate"><span class="pre">gn_profiles.cor_taxons_parameters</span></code></p></li>
<li><p>Ajout dâ€™une couche dâ€™objets linÃ©aires dans le rÃ©fÃ©rentiel
gÃ©ographique (<a class="reference external" href="https://github.com/PnX-SI/RefGeo/pull/4">https://github.com/PnX-SI/RefGeo/pull/4</a>)</p></li>
<li><p>Installation de la version 15 de Taxref par dÃ©faut lors des
nouvelles installations</p></li>
<li><p>PossibilitÃ© de limiter la recherche de lieux Ã  un ou plusieurs pays
avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">OSM_RESTRICT_COUNTRY_CODES</span></code> (#2010)</p></li>
<li><p>On ne peut pas fermer un cadre dâ€™acquisition qui ne contient que
des jeux de donnÃ©es sans donnÃ©es</p></li>
<li><p>Rechargement (<code class="docutils literal notranslate"><span class="pre">reload</span></code>) automatique de GeoNature quand on modifie la
configuration de GeoNature (#2045)</p></li>
<li><p>RedÃ©marrage (<code class="docutils literal notranslate"><span class="pre">restart</span></code>) automatique du worker Celery lors du
redÃ©marrage de GeoNature (#2045)</p></li>
<li><p>SynthÃ¨se : ajout dâ€™un message lors du chargement des donnÃ©es
(#1637)</p></li>
<li><p>Cartes : Faire remonter la gÃ©omÃ©trie de lâ€™objet selectionnÃ© dans la
liste (#2036)</p></li>
<li><p>Ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code>, suite Ã  la suppression du
paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> (#1635)</p></li>
<li><p>[MetadonnÃ©es] Formulaire des CA : correction de la saisie des CA
parents (#2097)</p></li>
<li><p>[Accueil] AmÃ©lioration du formatage des nombres dans le bloc de
statistiques (#2085)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Remise en place de la rotation automatique des fichiers de logs
(#1627)</p></li>
<li><p>[OCCTAX] Ajout des valeurs par dÃ©faut des nomenclatures au niveau
de la base de donnÃ©es (#1857)</p></li>
<li><p>[OCCTAX] Correction dâ€™un bug dâ€™Ã©dition de gÃ©omÃ©trie non pris en
compte</p></li>
<li><p>Map List: Ã  la selection dâ€™une ligne dans le tableau, placement de
la gÃ©omÃ©trie correspondante au dessus des autres gÃ©omÃ©tries (#2036)</p></li>
<li><p>Correction de lâ€™URL pour la mise Ã  jour des mots de passe (#1620)</p></li>
<li><p>Statistiques sur la page dâ€™accueil : utilisation des bonnes
permissions (action R du module SYNTHESE). Les donnÃ©es et la carte
sont masquÃ©es si les permissions sont manquantes.</p></li>
<li><p>AmÃ©lioration du responsive de la page dâ€™accueil (#1682)</p></li>
<li><p>Correction de lâ€™intÃ©gration des rÃ©gions quand GeoNature nâ€™est pas
installÃ© avec la projection 2154 (#1695)</p></li>
<li><p>[Occtax] Correction de lâ€™affichage de la liste tronquÃ©e des
habitats (#1701)</p></li>
<li><p>Correction du style des tooltips (#1775)</p></li>
<li><p>[Validation] Correction du filtre par observations disposant dâ€™un
mÃ©dia (#1757)</p></li>
<li><p>[Validation] Chargement des observations ayant un UUID uniquement</p></li>
<li><p>[SynthÃ¨se] AmÃ©lioration de la liste dans la recherche des taxons
(#1803)</p></li>
<li><p>Correction des URL et redirection de renouvellement du mot de passe
(#1810 / #1620)</p></li>
<li><p>Correction du CSS du bloc introduction de la page dâ€™accueil
(#1824)</p></li>
<li><p>Suppression de lâ€™accÃ¨s Ã  la gestion du compte pour lâ€™utilisateur
Â«Â publicÂ Â» (#1844)</p></li>
<li><p>RÃ©duction du niveau de logs de lâ€™outil Fiona pour amÃ©liorer les
performances des exports en format SIG (#1875)</p></li>
<li><p>Correction de la concatÃ©nation des champs additionnels au niveau des
triggers de Occtax vers SynthÃ¨se et correction des donnÃ©es dans la
SynthÃ¨se (#1467)</p></li>
<li><p>Correction des donnÃ©es dans la SynthÃ¨se suite au problÃ¨me
dâ€™enregistrement des dÃ©nombrements dans Occtax, corrigÃ© dans la
version 2.9.0 (#1479)</p></li>
<li><p>Correction des triggers de Occtax vers SynthÃ¨se lors de la
modification de dÃ©nombrements multiples et correction des donnÃ©es
dans la SynthÃ¨se (#1821)</p></li>
<li><p>Modification du script de dÃ©marrage <code class="docutils literal notranslate"><span class="pre">systemd</span></code> pour lancer GeoNature
et son worker Celery aprÃ¨s PostgreSQL (#1970)</p></li>
<li><p>Correction de lâ€™installation de psycopg2 (#1994)</p></li>
<li><p>Correction de la route de rÃ©cupÃ©ration des jeux de donnÃ©es quand on
lui passe plusieurs filtres</p></li>
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code> en cas
de valeurs nulles</p></li>
<li><p>[OCCTAX] Correction dâ€™un bug dâ€™Ã©dition de gÃ©omÃ©trie non pris en
compte (#2023)</p></li>
<li><p>[OCCTAX] Correction de lâ€™affichage des dates en utilisant lâ€™UTC
pour Ã©viter les soucis de fuseaux horaires diffÃ©rents entre le
serveur et le navigateur de lâ€™utilisateur (#2005)</p></li>
<li><p>[MÃ©tadonnÃ©es] Correction de lâ€™affichage des boutons de crÃ©ation
dâ€™un JDD et dâ€™un CA seulement si lâ€™utilisateur en a les droits
(#1822)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour dâ€™Angular de la version 7 Ã  12 Ã  rÃ©percuter dans les
modules spÃ©cifiques (<a class="reference external" href="https://update.angular.io/?v=7.2-12.0">https://update.angular.io/?v=7.2-12.0</a>)</p></li>
<li><p>Mise Ã  jour des dÃ©pendances backend et frontend</p></li>
<li><p>Mise Ã  jour de Flask version 1.1 Ã  2.2</p></li>
<li><p>Routage dynamique des modules, supprimant la nÃ©cessitÃ© de gÃ©nÃ©rer le
fichier de routage du frontend (#2059)</p></li>
<li><p>Ajout de Celery pour les traitements asynchrones</p></li>
<li><p>PossibilitÃ© de configurer GeoNature avec un fichier python en
dÃ©finissant le nom du module dans la variable dâ€™environnement
<code class="docutils literal notranslate"><span class="pre">GEONATURE_SETTINGS</span></code></p></li>
<li><p>Utilisation de la pagination fournit par Flask-SQLAlchemy pour
<code class="docutils literal notranslate"><span class="pre">get_color_taxon()</span></code></p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_exports.t_config_export</span></code> et du schÃ©ma
<code class="docutils literal notranslate"><span class="pre">gn_exports</span></code> crÃ©Ã©s par GeoNature (si le module Export nâ€™est pas
dÃ©jÃ  installÃ©) (#1642)</p></li>
<li><p>Suppression des commandes GeoNature <code class="docutils literal notranslate"><span class="pre">dev-front</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend-build</span></code>
(#1800, #2088) :</p></li>
<li><p>RÃ©tablissement de lâ€™utilisation de <code class="docutils literal notranslate"><span class="pre">nvm</span></code> pour installer NodeJS
(#1726)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">default-config</span></code></p></li>
<li><p>Externalisation du <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>, de son schÃ©ma de donnÃ©es et de ses
modÃ¨les en tant que module indÃ©pendant dans un dÃ©pÃ´t dÃ©diÃ© (#228)</p></li>
<li><p>IntÃ©gration des rÃ©gions par dÃ©faut lors de lâ€™installation de
GeoNature</p></li>
<li><p>AmÃ©lioration des composants frontend DynamicForm</p></li>
<li><p>PossibilitÃ© de filtrer le composant frontend Â«Â nomenclatureÂ Â» par
rÃ¨gne ou Goup2INPN</p></li>
<li><p>AmÃ©lioration du style des tooltips (#1717)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">refresh-rules-cache</span></code>
pour rafraichir la vue matÃ©rialisÃ©
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules_cd_ref</span></code> (Ã  lancer Ã  chaque
modification de rÃ¨gles dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules</span></code>)</p></li>
<li><p>La configuration du module nâ€™est pas Ã©crasÃ©e lors dâ€™une
rÃ©installation de ce dernier</p></li>
<li><p>Suppression de la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_decode_nomenclatures</span></code></p></li>
<li><p>GÃ©nÃ©ration automatique de la documentation quand on publie une
nouvelle version</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">ref_geo</span> <span class="pre">info</span></code> qui compte le nombre
de zonages par type</p></li>
<li><p>Suppression des dÃ©pendances Â«Â geogÂ Â» et Â«Â numpyÂ Â» en utilisation la
fonction PostGIS <code class="docutils literal notranslate"><span class="pre">ST_DWithin</span></code> pour la recherche par cercle (#1972)</p></li>
<li><p>La variable dâ€™environnement <code class="docutils literal notranslate"><span class="pre">DATA_DIRECTORY</span></code> permet de dÃ©finir un
dossier pour la mise en cache et rÃ©utilisation des ressources
tÃ©lÃ©chargÃ©es lors de la crÃ©ation de la base de donnÃ©es</p></li>
<li><p>Chargement de la configuration des modules packagÃ©s directement lors
de lâ€™import du module <code class="docutils literal notranslate"><span class="pre">config</span></code> (avant mÃªme lâ€™appel Ã  <code class="docutils literal notranslate"><span class="pre">create_app</span></code>)
(#2055)</p></li>
</ul>
<p><strong>ğŸ“ Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;antoinececchimnhn / &#64;TheoLechemia / &#64;jpm-cbna /
&#64;mvergez / &#64;ophdlv / &#64;Adrien-Pajot / &#64;Gaetanbrl / &#64;pierrejego /
&#64;jbrieuclp / &#64;amandine-sahl / &#64;joelclems / &#64;metourneau /
&#64;gildeluermoz / &#64;camillemonchicourt</p>
</section>
<section id="id14">
<h2>2.9.2 (2022-02-15)<a class="headerlink" href="#id14" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Optimisation du nombre dâ€™informations renvoyÃ©es par lâ€™API pour les
utilisateurs et les organismes</p></li>
<li><p>Ajout dâ€™une commande pour relancer le calcul de la sensibilitÃ©,
utile en cas de modification du rÃ©fÃ©rentiel de sensibilitÃ© :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">update-synthese</span></code>. Elle sâ€™appuie sur la
fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code>.</p></li>
<li><p>Le niveau de diffusion dans la synthÃ¨se nâ€™est plus calculÃ©
automatiquement Ã  partir du niveau de sensibilitÃ© (#1711)</p></li>
<li><p>Le niveau de sensibilitÃ© tient compte du comportement de
lâ€™occurrence (<code class="docutils literal notranslate"><span class="pre">OCC_COMPORTEMENT</span></code>), en plus du statut biologique
(<code class="docutils literal notranslate"><span class="pre">STATUT_BIO</span></code>)</p></li>
<li><p>Optimisation du recalcul de la sensibilitÃ© lors de la mise Ã  jour de
la synthÃ¨se (trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>)</p></li>
<li><p>Ajout de tests unitaires sur les fonctions de calcul de la
sensibilitÃ©</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™une rÃ©gression sur la rÃ©cupÃ©ration de la liste des
taxons (#1672)</p></li>
<li><p>Correction de lâ€™authentification au CAS de lâ€™INPN</p></li>
<li><p>Correction du calcul de la sensibilitÃ© (#1284) :</p>
<ul>
<li><p>Gestion correcte de la prÃ©sence de plusieurs rÃ¨gles avec et sans
critÃ¨re statut biologique</p></li>
<li><p>Utilisation de la rÃ¨gle la plus sensible quand plusieurs rÃ¨gles
sâ€™appliquent</p></li>
</ul>
</li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>La correction de la fonction de calcul de la sensibilitÃ© est suivie
dâ€™un recalcul automatique du niveau de sensibilitÃ© des donnÃ©es
prÃ©sentes dans la synthÃ¨se. Si vous ne souhaitez pas procÃ©der Ã  ce
recalcul, ajoutez le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">recompute-sensitivity=false</span></code> lors
de la mise Ã  jour de la base de donnÃ©es avec la commande
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code> (lancÃ©e automatiquement par le script
<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x recompute-sensitivity=false
</pre></div>
</div>
</li>
<li><p>Le niveau de diffusion des donnÃ©es dans la synthÃ¨se est remis Ã 
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> si celui-ci Ã©quivaut au niveau de sensibilitÃ©. Seuls les
niveaux de diffusion qui diffÃ©rent sont laissÃ©s intacts. Si vous
souhaitez rectifier vous-mÃªmes vos niveaux de diffusion et ne pas
les remettre Ã  <code class="docutils literal notranslate"><span class="pre">NULL</span></code> quand ils sont Ã©quivalents au niveau de
sensibilitÃ©, vous pouvez ajouter le paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">clear-diffusion-level=false</span></code> lors de la mise Ã  jour de la base
de donnÃ©es :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x clear-diffusion-level=false
</pre></div>
</div>
<p>Si vous redescendez Ã  lâ€™Ã©tat antÃ©rieur de votre base de donnÃ©es, les
niveaux de diffusion seront restaurÃ©s Ã  partir du niveau de
sensibilitÃ© ; vous pouvez Ã©viter ceci avec
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">restore-diffusion-level=false</span></code>.</p>
</li>
</ul>
</section>
<section id="id15">
<h2>2.9.1 (2022-01-27)<a class="headerlink" href="#id15" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Utilisation du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">page</span></code> de Flask Ã  la place du paramÃ¨tre
maison <code class="docutils literal notranslate"><span class="pre">offset</span></code> pour la pagination des routes (rÃ©tro-compatible)</p></li>
<li><p>Installation de TaxHub en version 1.9.4 (version corrective) par
dÃ©faut</p></li>
<li><p>Ajout du paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code> (par dÃ©faut
<code class="docutils literal notranslate"><span class="pre">GN</span></code>) (#1635)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™URL de rÃ©initialisation de mot passe envoyÃ©e par
email (#1620)</p></li>
<li><p>Correction dâ€™un problÃ¨me dâ€™authentification avec le CAS</p></li>
<li><p>Occtax : Correction des listes dÃ©roulantes masquÃ©es dans le bloc
dÃ©nombrement, en rajoutant un scroll</p></li>
<li><p>Correction de lâ€™URL de lâ€™API de TaxHub (slash final manquant) pour
lâ€™affichage des photos sur la fiche dâ€™un profil de taxon</p></li>
<li><p>Correction de la synchronisation des mÃ©tadonnÃ©es depuis MTD</p></li>
<li><p>Correction de la gÃ©nÃ©ration du token quand on utilise le CAS de
lâ€™INPN pour se connecter Ã  GeoNature</p></li>
<li><p>Correction des permissions trop restrictives dâ€™accÃ¨s aux donnÃ©es de
la synthÃ¨se</p></li>
<li><p>Correction de la pagination de la route <code class="docutils literal notranslate"><span class="pre">/color_taxon</span></code> en rajoutant
un ordonnancement par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> et <code class="docutils literal notranslate"><span class="pre">id_area</span></code> (utilisÃ© par
Occtax-mobile)</p></li>
<li><p>Contournement dâ€™un problÃ¨me de redirection incorrecte par lâ€™API de
TaxHub lorsque celui-ci est mal configurÃ© (#1438, #1616)</p></li>
</ul>
</section>
<section id="actias-luna-2022-01-13">
<h2>2.9.0 - Actias luna ğŸ¦‹ (2022-01-13)<a class="headerlink" href="#actias-luna-2022-01-13" title="Link to this heading">ïƒ</a></h2>
<p><strong>Profils de taxons</strong></p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Construction automatique dâ€™une fiche dâ€™identitÃ© (profil) par taxon
grÃ¢ce aux observations validÃ©es prÃ©sentes dans la base de donnÃ©es
(altitude min/max, distribution spatiale, date de premiÃ¨re/derniÃ¨re
observation, nombre de donnÃ©es valides, phÃ©nologie) (#917 par
&#64;DonovanMaillard, &#64;lepontois, &#64;Adrien-Pajot, &#64;TheoLechemia,
&#64;bouttier, &#64;amandine-sahl, &#64;jpm-cbna)</p>
<ul>
<li><p>CrÃ©ation dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_profiles</span></code> dans la BDD contenant les
tables, les vues, les fonctions et les paramÃ¨tres de calcul des
profils de taxons
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql">https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql</a>)
(#1103)</p></li>
<li><p>Mise en place de lâ€™API des profils de taxons (#1104)</p></li>
<li><p>Affichage des scores de chaque observation par rapport au profil
du taxon dans la liste des observations du module Validation,
ainsi que dans les fiches dÃ©tails des observations dans les
modules SynthÃ¨se et Validation (#1105)</p></li>
<li><p>Ajout de filtres des observations par score ou critÃ¨re des
profils de taxon dans le module Validation (#1105)</p></li>
<li><p>Ajout dâ€™une alerte de contextualisation dâ€™une observation par
rapport au profil de taxon, lors de sa saisie dans le module
Occtax</p></li>
<li><p>Mise en place de paramÃ¨tres pour activer ou non les profils de
taxons, paramÃ©trer leurs rÃ¨gles et dÃ©finir les statut de
validation pris en compte pour le calcul des profils
(Â«Â Certain-trÃ¨s probableÂ Â» et Â«Â ProbableÂ Â» par dÃ©faut)</p></li>
<li><p>Documentation des profils de taxons et de leur paramÃ¨trage
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#profils-de-taxons">https://docs.geonature.fr/admin-manual.html#profils-de-taxons</a>)</p></li>
<li><p>Suppression de la vue matÃ©rialisÃ©e
<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code> et de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon()</span></code> qui nâ€™Ã©taient
pas utilisÃ©es</p></li>
</ul>
</li>
<li><p>[OCCTAX] Ajout dâ€™un bouton permettant dâ€™annuler la modification
dâ€™un taxon (#1508 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Ajout de valeurs par dÃ©faut aux champs additionnels
(<code class="docutils literal notranslate"><span class="pre">gn_commons.t_additional_fields.default_value</span></code>)</p></li>
<li><p>[OCCTAX] Ajout dâ€™un filtre avancÃ© par <code class="docutils literal notranslate"><span class="pre">id_releve</span></code></p></li>
<li><p>[SYNTHESE] Ajout dâ€™un filtre avancÃ© par UUID dâ€™observation
(#973)</p></li>
<li><p>AmÃ©lioration des listes dÃ©roulantes en passant Ã  la librairie
<code class="docutils literal notranslate"><span class="pre">ng-select2</span></code> pour les composants multiselects (#616
par &#64;jbrieuclp)</p></li>
<li><p>Gestion du rÃ©fÃ©rentiel des rÃ©gions par Alembic (#1475)</p></li>
<li><p>Ajout des anciennes rÃ©gions (1970-2016), inactives par dÃ©faut, mais
utiles pour les rÃ¨gles rÃ©gionales de sensibilitÃ©</p></li>
<li><p>Gestion du rÃ©fÃ©rentiel de sensibilitÃ© (rÃ¨gles nationales et
rÃ©gionales) par Alembic (#1576)</p></li>
<li><p>Ajout dâ€™une documentation sur le calcul de la sensibilitÃ© des
observations
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite">https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite</a>,
par &#64;mvergez)</p></li>
<li><p>[SYNTHESE] AmÃ©lioration de la fenÃªtre de limite dâ€™affichage
atteinte (#1520 par &#64;jpm-cbna)</p></li>
<li><p>[OCCHAB] Utilisation de tout Habref par dÃ©faut si aucune liste
dâ€™habitats nâ€™est renseignÃ©e dans la configuration du module</p></li>
<li><p>[METADONNEES] Attribuer des droits Ã  un utilisateur sur un JDD si
il a des droits sur son cadre dâ€™acquisition</p></li>
<li><p>Association automatique et paramÃ©trable des jeux de donnÃ©es
personnels auto-gÃ©nÃ©rÃ©s Ã  des modules (Occtax par dÃ©faut) (#1555)</p></li>
<li><p>Utilisation du C du CRUVED de lâ€™utilisateur pour lister les jeux de
donnÃ©es dans lesquels il peut ajouter des donnÃ©es dans les
diffÃ©rents modules (et non plus le R du CRUVED sur GeoNature)
(#659)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>[OCCTAX] Correction de lâ€™enregistrement des dÃ©nombrements lors de
lâ€™enchainement des relevÃ©s (#1479 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Correction du filtre du champs Â«Â HabitatÂ Â» par typologie
dâ€™habitat</p></li>
<li><p>[ADMIN] Correction de lâ€™affichage du module (#1427
par &#64;jbrieuclp)</p></li>
<li><p>[ADMIN] SÃ©curisation du module (#839)</p></li>
<li><p>[VALIDATION] Corrections de la validation des observations (#1485
/ #1529)</p></li>
<li><p>[METADONNEES] AmÃ©lioration des performances (#1559)</p></li>
<li><p>[METADONNEES] Correction de la suppression des JDD</p></li>
<li><p>[METADONNEES] Correction de lâ€™export PDF des JDD (#1544)</p></li>
<li><p>[METADONNEES] Correction des permissions (#1528)</p></li>
<li><p>[METADONNEES] Correction de la recherche avancÃ©e</p></li>
<li><p>[SYNTHESE] Correction de la recherche sur les champs gÃ©nÃ©riques de
type nombre entier (#1519 par &#64;jpm-cbna)</p></li>
<li><p>[SYNTHESE] Correction des permissions</p></li>
<li><p>[SYNTHESE] Correction du lien entre les filtres CA et JDD (#1530)</p></li>
<li><p>[OCCHAB] Correction du chargement de la configuration, des fiches
info et de la modification dâ€™une station</p></li>
<li><p>[METADONNEES] AmÃ©liorations des performances et des contrÃ´les du
formulaire des acteurs pour les JDD et les CA (par &#64;joelclems)</p></li>
<li><p>Correction de la redirection vers le formulaire de login en cas de
cookie corrompu (#1550 par &#64;antoinececchimnhn)</p></li>
<li><p>Correction de la crÃ©ation de compte utilisateur (#1527)</p></li>
<li><p>Mise Ã  jour du module Habref-api-module pour corrections de
certaines donnÃ©es dâ€™Habref</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Migration vers la librairie <code class="docutils literal notranslate"><span class="pre">gn-select2</span></code> pour les listes dÃ©roulantes
des formulaires (#616 / #1285 par &#64;jbrieuclp)</p></li>
<li><p>Documentation de dÃ©veloppement backend revue et complÃ©tÃ©e (#1559,
<a class="reference external" href="https://docs.geonature.fr/development.html#developpement-backend">https://docs.geonature.fr/development.html#developpement-backend</a>)</p></li>
<li><p>AmÃ©lioration de nombreuses routes et fonctions du backend</p></li>
<li><p>Ajouts de tests automatisÃ©s du backend</p></li>
<li><p>Mise en place dâ€™une intÃ©gration continue pour exÃ©cuter
automatiquement les tests backend et leur couverture de code avec
GitHub Actions, Ã  chaque commit ou pull request dans les branches
<code class="docutils literal notranslate"><span class="pre">develop</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code> (#1568,
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/actions">https://github.com/PnX-SI/GeoNature/actions</a>)</p></li>
<li><p>[VALIDATION] Suppression des vues SQL et optimisation des routes</p></li>
<li><p>GÃ©nÃ©ration automatique et alÃ©atoire du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p>[SYNTHESE] Remplacement de <code class="docutils literal notranslate"><span class="pre">as_literal</span></code> par <code class="docutils literal notranslate"><span class="pre">json.loads</span></code>, plus
performant (par &#64;antoinececchimnhn)</p></li>
<li><p>PossibilitÃ© de filter la route <code class="docutils literal notranslate"><span class="pre">synthese/taxa_distribution</span></code> par
<code class="docutils literal notranslate"><span class="pre">id_source</span></code> (#1446 par &#64;mvergez)</p></li>
<li><p>Factorisation du composant <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code> avec le composant
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Ajout du composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> dans dynamic-form</p></li>
<li><p>Ajout dâ€™un input <code class="docutils literal notranslate"><span class="pre">valueFieldName</span></code> aux composants <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code>.</p></li>
<li><p>Mise Ã  jour de nombreuses dÃ©pendances</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>La liste des JDD dans les modules de saisie (Occtax, Occhab,
Monitoring et Import) se base dÃ©sormais sur le C du CRUVED de
lâ€™utilisateur au niveau du module (ou du C du CRUVED de GeoNature
si lâ€™utilisateur nâ€™a pas de CRUVED sur le module), au lieu du R de
GeoNature jusquâ€™Ã  prÃ©sent. Vous devrez donc potentiellement adapter
vos permissions Ã  ce changement de comportement (#659)</p></li>
<li><p>Si vous avez surcouchÃ© le paramÃ¨tre de configuration <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code>
de la section <code class="docutils literal notranslate"><span class="pre">[SYNTHESE]</span></code>, veuillez remplacer <code class="docutils literal notranslate"><span class="pre">id_type</span></code> par
<code class="docutils literal notranslate"><span class="pre">type_code</span></code> (voir <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">id_type</span> <span class="o">=</span> <span class="mi">25</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">type_code</span> <span class="o">=</span> <span class="s2">&quot;COM&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Si vous aviez modifiÃ© les colonnes de la liste des observations du
module Validation en adaptant la vue
<code class="docutils literal notranslate"><span class="pre">gn_validation.v_synthese_validation_forwebapp</span></code>, celle-ci a Ã©tÃ©
supprimÃ©e et il suffit dÃ©sormais dâ€™indiquer les colonnes souhaitÃ©es
dans la configuration du module. Voir documentation
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles">http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles</a>)</p></li>
<li><p>Les nouvelles fonctionnalitÃ©s liÃ©es aux profils de taxons
nÃ©cessitent de rafraichir des vues materialisÃ©es Ã  intervalles
rÃ©guliers et donc de crÃ©er une tÃ¢che planfiÃ©e (cron). Voir
documentation
(<a class="reference external" href="https://docs.geonature.fr/installation.html#taches-planifiees">https://docs.geonature.fr/installation.html#taches-planifiees</a>)</p></li>
<li><p>Les rÃ©gions sont maintenant disponibles via des migrations Alembic.
Si vous possÃ©dez dÃ©jÃ  les rÃ©gions, vous pouvez lâ€™indiquer Ã  Alembic
:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_geo@head
geonature db stamp d02f4563bebe
</pre></div>
</div>
</li>
<li><p>Le rÃ©fÃ©rentiel de sensibilitÃ© est dÃ©sormais disponible via une
migration Alembic. Celui-ci nÃ©cessite le rÃ©fÃ©rentiel des rÃ©gions
(branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions</span></code>), ainsi que le rÃ©fÃ©rentiel des
anciennes rÃ©gions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions_1970</span></code>) â€“
lâ€™installation de ces rÃ©fÃ©rentiels est automatique avec
lâ€™installation des rÃ¨gles de sensibilitÃ©.</p>
<ul>
<li><p>Si vous possÃ©dez dÃ©jÃ  le rÃ©fÃ©rentiel, vous pouvez lâ€™indiquer Ã 
Alembic :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db stamp 7dfd0a813f86
</pre></div>
</div>
</li>
<li><p>Si vous avez installÃ© GeoNature 2.8.X, le rÃ©fÃ©rentiel de
sensibilitÃ© nâ€™a pas Ã©tÃ© installÃ© automatiquement. Vous pouvez
lâ€™installer manuellement :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_sensitivity_inpn@head
</pre></div>
</div>
</li>
</ul>
<p>Par dÃ©faut, seule les rÃ¨gles nationales sont activÃ©es, vous laissant
le soin dâ€™activer vos rÃ¨gles locales en base vous-mÃªme. Vous pouvez
Ã©galement demander, lors de lâ€™installation du rÃ©fÃ©rentiel, Ã  activer
(resp. dÃ©sactiver) toutes les rÃ¨gles en ajout Ã  la commande Alembic
lâ€™option <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=true</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=false</span></code>).</p>
</li>
<li><p>Si vous souhaitez surcoucher les paramÃ¨tres par dÃ©faut de Gunicorn
(app_name, timeoutâ€¦), depuis le passage Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code> dans la
version 2.8.0, câ€™est dÃ©sormais Ã  faire dans un fichier <code class="docutils literal notranslate"><span class="pre">environ</span></code> Ã 
la racine du dossier de votre GeoNature (#1588,
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#parametres-gunicorn">https://docs.geonature.fr/admin-manual.html#parametres-gunicorn</a>)</p></li>
<li><p>Si vous les utilisez, mettez Ã  jour les modules Import, Export et
Monitoring dans leurs derniÃ¨res versions compatibles avec le version
2.9.0 de GeoNature</p></li>
</ul>
</section>
<section id="id16">
<h2>2.8.1 (2021-10-17)<a class="headerlink" href="#id16" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout de lâ€™indication du dÃ©partement au formulaire des communes
(#1480)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">group2inpn</span></code> et <code class="docutils literal notranslate"><span class="pre">regne</span></code> au formulaire des
nomenclatures (#1481)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
<li><p>Mise-Ã -jour corrective de <a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.7">UsersHub-authentification-module
1.5.7</a></p></li>
</ul>
</section>
<section id="vaccinium-myrtillus-2021-10-18">
<h2>2.8.0 - Vaccinium myrtillus ğŸŒ¿ (2021-10-18)<a class="headerlink" href="#vaccinium-myrtillus-2021-10-18" title="Link to this heading">ïƒ</a></h2>
<p><strong>Gestion de la base de donnÃ©es avec Alembic</strong></p>
<p>âš ï¸ Avant de mettre Ã  jour GeoNature, vÃ©rifiez que les modules que vous
utilisez disposent dâ€™une version compatible avec la 2.8.0, suite au
passage Ã  la version 3 de Marshmallow.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Support de Debian 11 / Python 3.9</p></li>
<li><p>Passage de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code></p></li>
<li><p>Gestion de la base de donnÃ©es et de ses Ã©volutions avec Alembic
(#880)</p></li>
<li><p>Mise Ã  jour de la procÃ©dure dâ€™installation afin dâ€™utiliser Alembic
(#880)</p></li>
<li><p>RÃ©vision et rÃ©organisation des scripts et de la documentation
dâ€™installation</p></li>
<li><p>Passage Ã  la version 3 de Marshmallow (#1451)</p></li>
<li><p>Suppression du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code>, celui-ci est automatiquement
dÃ©terminÃ© Ã  partir de la base de donnÃ©es et du code de lâ€™application</p></li>
<li><p>Ajout dâ€™un index sur le champs <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code></p></li>
<li><p>Mise Ã  jour des dÃ©pendances</p>
<ul>
<li><p><a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub
1.9.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.6">UsersHub-authentification-module
1.5.6</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/releases/tag/1.4.4">Nomenclature-api-module
1.4.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Habref-api-module/releases/tag/0.2.0">Habref-api-module
0.2.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy/releases/tag/0.2.4">Utils-Flask-SQLAlchemy
0.2.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo/releases/tag/0.2.1">Utils-Flask-SQLAlchemy-Geo
0.2.1</a></p></li>
</ul>
</li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Corrections et amÃ©liorations des formulaires dynamiques et des
champs additionnels</p></li>
<li><p>Correction de lâ€™envoi dâ€™email lors de la rÃ©cupÃ©ration du mot de
passe (#1471)</p></li>
<li><p>Occtax : Correction du focus sur le champs Â«Â taxonÂ Â» quand on
enchaine les taxons (#1462)</p></li>
<li><p>Occtax : Correction du formulaire de modification quand le relevÃ©
est une ligne ou un polygone (#1461)</p></li>
<li><p>Occtax : Correction de la conservation de la date quand on enchaine
les relevÃ©s (#1442)</p></li>
<li><p>Occtax : Correction du paramÃ¨tre dâ€™export des champs additionnels
(#1440)</p></li>
<li><p>SynthÃ¨se : correction de la recherche par jeu de donnÃ©es (#1494)</p></li>
<li><p>Correction de lâ€™affichage des longues listes dÃ©roulantes dans les
champs additionnels (#1442)</p></li>
<li><p>Mise Ã  jour de la table <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> lors de lâ€™ajout de
nouvelles zones via un trigger sur la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1433)</p></li>
<li><p>Correction de lâ€™export PDF des fiches de mÃ©tadonnÃ©es (#1449)</p></li>
<li><p>Jeux de donnÃ©es : correction de lâ€™affichage des imports sources</p></li>
<li><p>Correction de la configuration Apache et de la gestion par flask
dâ€™un GeoNature accessible sur un prÃ©fix (e.g. <code class="docutils literal notranslate"><span class="pre">/geonature</span></code>) (#1463)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
<li><p>Correction des champs additionnels de type boutons radios (#1464 et
#1472)</p></li>
<li><p>Occtax : Correction du contrÃ´le des heures quand on est sur 2 mois
distincts (#1468)</p></li>
<li><p>Suppression de nombreux identifiants en dur dans les scripts SQL de
crÃ©ation de la BDD</p></li>
<li><p>Correction du trigger dâ€™Occtax vers la SynthÃ¨se pour le champs
<code class="docutils literal notranslate"><span class="pre">Comportement</span></code> (#1469)</p></li>
<li><p>Correction des fonctions <code class="docutils literal notranslate"><span class="pre">get_default_nomenclature_value</span></code></p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> (#1488)</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> pour rÃ©cupÃ©rer le fichier
<code class="docutils literal notranslate"><span class="pre">custom.scss</span></code> depuis son nouvel emplacement (#1430)</p></li>
<li><p>Correction du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code></p></li>
<li><p>MÃ©tadonnÃ©es : Suppression en cascade sur les tables
<code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_territory</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_protocol</span></code>
(#1452)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code> :
rechargement des entry points aprÃ¨s installation avec pip dâ€™un
module packagÃ©</p></li>
<li><p>Correction dâ€™un bug lors de lâ€™ajout dâ€™un cadre dâ€™acquisition</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de plusieurs dÃ©pendances</p></li>
<li><p>Packetage des modules fournis avec GeoNature</p></li>
<li><p>Lâ€™utilisateur connectÃ© est maintenant accessible via
<code class="docutils literal notranslate"><span class="pre">g.current_user</span></code></p></li>
<li><p>Nettoyage et refactoring divers</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Mettre Ã  jour <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases/tag/2.2.1">UsersHub en version
2.2.1</a> et
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub en version
1.9.0</a> (si vous
les utilisez) <strong>en sautant leur Ã©tape de passage Ã  Alembic</strong> (car la
mise Ã  jour de GeoNature se charge dÃ©sormais de mettre Ã  jour aussi
les schÃ©mas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>)</p></li>
<li><p>Suppression de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> :</p>
<ul class="simple">
<li><p>Stopper GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">stop</span> <span class="pre">geonature2</span></code></p></li>
<li><p>Supprimer le fichier de configuration supervisor de GeoNature :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code></p></li>
<li><p>Si supervisor nâ€™est plus utilisÃ© par aucun service (rÃ©pertoire
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/</span></code> vide), il peut Ãªtre dÃ©sinstallÃ©
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span> <span class="pre">supervisor</span></code>)</p></li>
</ul>
</li>
<li><p>Suivre la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Passage Ã  <code class="docutils literal notranslate"><span class="pre">systemd</span></code> :</p>
<ul class="simple">
<li><p>Copier le fichier <code class="docutils literal notranslate"><span class="pre">install/assets/geonature.service</span></code> dans
<code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code></p></li>
<li><p>Ã‰diter <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/geonature.service</span></code> et remplacer les
variables <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> (votre utilisateur linux courant) et
<code class="docutils literal notranslate"><span class="pre">${BASE_DIR}</span></code> (chemin absolu du rÃ©pertoire de GeoNature) par les
valeurs appropriÃ©es</p></li>
<li><p>Lancer la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code></p></li>
<li><p>Pour dÃ©marrer GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">geonature</span></code></p></li>
<li><p>Pour lancer GeoNature automatiquement au dÃ©marrage du serveur :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">geonature</span></code></p></li>
</ul>
</li>
<li><p>Correction de la configuration Apache : si vous servez GeoNature sur
un prÃ©fixe (typiquement <code class="docutils literal notranslate"><span class="pre">/geonature/api</span></code>), assurez vous que ce
prÃ©fixe figure bien Ã©galement Ã  la fin des directives <code class="docutils literal notranslate"><span class="pre">ProxyPass</span></code> et
<code class="docutils literal notranslate"><span class="pre">ProxyPassReverse</span></code> comme dans lâ€™exemple suivant :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/geonature/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/geonature/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/geonature/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Si vous servez GeoNature sur un sous-domaine, vÃ©rifiez ou modifier
la configuration Apache :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Pensez Ã  recharger Apache si vous Ãªtes amenÃ© Ã  en changer la
configuration : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">reload</span> <span class="pre">apache2</span></code></p>
</li>
<li><p>Passage Ã  Alembic :</p>
<ul class="simple">
<li><p>Sâ€™assurer dâ€™avoir une base de donnÃ©es de GeoNature en version
2.7.5</p></li>
<li><p>Si vous avez UsersHub installÃ©, ajoutez dans votre configuration
GeoNature la section suivante (en adaptant le chemin) :</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ALEMBIC]</span>
<span class="na">VERSION_LOCATIONS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;/path/to/usershub/app/migrations/versions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Entrer dans le virtualenv afin dâ€™avoir la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
disponible : <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">backend/venv/bin/activate</span></code></p></li>
<li><p>ExÃ©cuter les commandes suivantes afin dâ€™indiquer Ã  Alembic
lâ€™Ã©tat de votre base de donnÃ©es :</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>f06cc80cc8ba<span class="w">  </span><span class="c1"># GeoNature 2.7.5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>0dfdbfbccd63<span class="w">  </span><span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des communes</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>3fdaa1805575<span class="w">  </span><span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des dÃ©partements</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>586613e2faeb<span class="w">  </span><span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 1Ã—1</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>7d6e98441e4c<span class="w">  </span><span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 5Ã—5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>ede150d9afd9<span class="w">  </span><span class="c1"># rÃ©fÃ©rentiel gÃ©ographique des mailles 10Ã—10</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>1715cf31a75d<span class="w">  </span><span class="c1"># MNT de lâ€™IGN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si vous aviez dÃ©jÃ  intallÃ© certains modules, vous devez
lâ€™indiquer Ã  Alembic :</p>
<ul>
<li><p>Module <em>Occtax</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">f57107d2d0ad</span></code></p></li>
<li><p>Module <em>Occhab</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">2984569d5df6</span></code></p></li>
</ul>
</li>
<li><p>Mettre sa base de donnÃ©es Ã  jour avec Alembic :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
</ul>
<p>Pour plus dâ€™information sur lâ€™utilisation dâ€™Alembic, voir la
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#administration-avec-alembic">documentation administrateur de
GeoNature</a>.</p>
</li>
</ul>
</section>
<section id="id17">
<h2>2.7.5 (2021-07-28)<a class="headerlink" href="#id17" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>CompatibilitÃ© avec Occtax-mobile 1.3. PossibilitÃ© dâ€™ajouter la
query string <code class="docutils literal notranslate"><span class="pre">fields</span></code> sur la route <code class="docutils literal notranslate"><span class="pre">meta/datasets</span></code> pour choisir les
champs renvoyÃ©s par lâ€™API</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id18">
<h2>2.7.4 (2021-07-23)<a class="headerlink" href="#id18" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un import manquant entrainant un problÃ¨me de
compilation du frontend (#1424)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id19">
<h2>2.7.3 (2021-07-22)<a class="headerlink" href="#id19" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>MÃ©tadonnÃ©es : ajout des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_DS</span></code> et
<code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_AF</span></code> pour limiter les rÃ´les utilisables au
niveau des jeux de donnÃ©es et des cadres dâ€™acquisition (#1417)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">mtd_sync</span></code> qui permet de synchroniser les
mÃ©tadonnÃ©es de toute une instance depuis le flux MTD du SINP</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™affichage des jeux de donnÃ©es sur les fiches des
cadres dâ€™acquisition (#1410)</p></li>
<li><p>Doc : PrÃ©cision des OS supportÃ©s (Debian 10 uniquement en
production)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>Support des commandes Flask au niveau de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
(<code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code>â€¦)</p></li>
<li><p>Ajout des sous-modules en tant que dÃ©pendances</p></li>
<li><p>Ajout dâ€™une commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="id20">
<h2>2.7.2 (2021-07-05)<a class="headerlink" href="#id20" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>OCCTAX : correction de la vÃ©rification du CRUVED (#1413)</p></li>
<li><p>OCCTAX : correction du dÃ©grisement du formulaire au chargement de la
fonctionnalitÃ© Â«Â mes lieuxÂ Â» (#1414)</p></li>
<li><p>OCCTAX : DÃ©placement des champs additionnels pour les dÃ©nombrements
avant les mÃ©dias (#1409)</p></li>
<li><p>Suppression des champs additionnels de type Â«Â taxonomyÂ Â» qui
nâ€™Ã©taient pas supportÃ©s</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql</a>)</p></li>
</ul>
</section>
<section id="id21">
<h2>2.7.1 (2021-07-02)<a class="headerlink" href="#id21" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Installation des dÃ©pendances javascript des modules lors de la
migration de version de GeoNature (#1252)</p></li>
<li><p>Installation de la version 1.8.1 de TaxHub par dÃ©faut Ã  la place de
la 1.8.0</p></li>
<li><p>IntÃ©gration de la documentation permettant de mettre en place
lâ€™accÃ¨s public Ã  GeoNature</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="androsace-delphinensis-2021-06-30">
<h2>2.7.0 - Androsace delphinensis ğŸŒ¼ (2021-06-30)<a class="headerlink" href="#androsace-delphinensis-2021-06-30" title="Link to this heading">ïƒ</a></h2>
<p>NÃ©cessite la version 1.8.x de TaxHub.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Compatible avec TaxHub 1.8.x qui inclut notamment la migration
(optionnelle) vers Taxref version 14 et lâ€™ajout de la BDC statuts</p></li>
<li><p>Installation globale migrÃ©e de Taxref version 13 Ã  14</p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ajouter des champs additionels par JDD ou
globaux au module et documentation liÃ©e (#1007)</p></li>
<li><p>Occtax/Synthese : Ajout des champs additionnels dans les exports
(#1114)</p></li>
<li><p>Occtax/Synthese : Affichage des champs additionnels dans les fiches
info</p></li>
<li><p>Customisation : possibilitÃ© de changer le CSS sans rebuilder
lâ€™application</p></li>
<li><p>Admin : CrÃ©ation dâ€™un backoffice dâ€™administration des champs
additionels (#1007)</p></li>
<li><p>Admin : CrÃ©ation dâ€™une documentation dâ€™administration des champs
additionnels (#1007)</p></li>
<li><p>Occtax : PossibilitÃ© de dÃ©sactiver la recherche de taxon par liste
(#1315)</p></li>
<li><p>Occtax : Par dÃ©faut la recherche de taxon nâ€™interroge pas une liste
mais tout Taxref, si aucune liste de taxons nâ€™a Ã©tÃ© spÃ©cifiÃ©e dans
la configuration du module Occtax (voir notes de version) (#1315)</p></li>
<li><p>Occtax/MetadonnÃ©es : possibilitÃ© dâ€™associer une liste de taxons Ã 
un JDD (implÃ©mentÃ© uniquement dans Occtax) (#1315)</p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ajouter les infos sur les mÃ©dias dans les
exports (paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ADD_MEDIA_IN_EXPORT</span></code>) (#1326)</p></li>
<li><p>Occtax : PossibilitÃ© de paramÃ©trer lâ€™affichage des champs du
composant MEDIA dans OCCTAX (paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">MEDIA_FIELDS_DETAILS</span></code> -
#1287)</p></li>
<li><p>Occtax : PossibilitÃ© de filtrer la liste des habitats du formulaire
avec les nouveaux paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ID_LIST_HABITAT</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_TYPO_HABITAT</span></code></p></li>
<li><p>Occtax : PossibilitÃ© dâ€™ouvrir le module avec un JDD prÃ©-selectionnÃ©
en passant le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code> dans lâ€™URL (#1071)</p></li>
<li><p>Accueil : RÃ©organisation des blocs (#1375)</p></li>
<li><p>Accueil : Ajout dâ€™un paramÃ¨tre controlant la frÃ©quence de MAJ du
cache des statistiques de la page dâ€™accueil (<code class="docutils literal notranslate"><span class="pre">STAT_BLOC_TTL</span></code>, par
dÃ©faut 1h: 3600 secondes) (#1320)</p></li>
<li><p>AmÃ©lioration des performances de rÃ©cupÃ©ration des modules et du
CRUVED</p></li>
<li><p>Monitoring : Ajout dâ€™un trigger garantissant la cohÃ©rence entre
<code class="docutils literal notranslate"><span class="pre">date_min</span></code> et <code class="docutils literal notranslate"><span class="pre">date_max</span></code> et historisation de la table
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_visit_observer</span></code> (#1247)</p></li>
<li><p>La page dâ€™authentification affiche dÃ©sormais le nom de
lâ€™application (<code class="docutils literal notranslate"><span class="pre">appName</span></code>) dÃ©fini dans la configuration de GeoNature
(#1277)</p></li>
<li><p>PossibilitÃ© dâ€™ouvrir lâ€™accÃ¨s Ã  GeoNature sans authentification
(voir documentation dâ€™administration) (#1323)</p></li>
<li><p>MÃ©tadonnÃ©es : Optimisation du temps de chargement des listes des CA
et JDD (#1291)</p></li>
<li><p>MÃ©tadonnÃ©es : Passage de la version 1.3.9 du standard SINP Ã  la
version 1.3.10 et ajout des champs liÃ©s dans les formulaires
(#1291)</p></li>
<li><p>MÃ©tadonnÃ©es : RÃ©vision du design la partie Â«Â ActeursÂ Â» du formulaire
et mise Ã  part de lâ€™acteur de type Â«Â Contact principalÂ Â»,
obligatoire dans le standard SINP</p></li>
<li><p>MÃ©tadonnÃ©es : Ordonnancement des JDD par leur nom</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout de la suppression en cascade au niveau des
tables des CA et des JDD</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un message quand un CA ou JDD nâ€™a pas
dâ€™acteur (#1404)</p></li>
<li><p>SynthÃ¨se et validation : Ajout dâ€™un filtre avancÃ©
<code class="docutils literal notranslate"><span class="pre">PossÃ¨de</span> <span class="pre">des</span> <span class="pre">mÃ©dias</span></code> (#1179, #1338, #1180)</p></li>
<li><p>SynthÃ¨se : Affichage du contenu json du champs des donnÃ©es
additionnelles, dans la fiche dÃ©tail dâ€™une observation</p></li>
<li><p>SynthÃ¨se : Ajout de la possibilitÃ© dâ€™afficher la colonne
Â«Â EffectifÂ Â» dans la liste des observations</p></li>
<li><p>DynamicForm : enrichissement des formulaires dynamiques pour les
mÃ©dias, lâ€™ajout de liens externes</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© de la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">area_code</span></code> dans <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#1270)</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© du champs <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code></p></li>
<li><p>Mise Ã  jour des versions de nombreuses dÃ©pendances Python et
Javascript</p></li>
<li><p>Support du gestionnaire dâ€™erreurs Sentry</p></li>
<li><p>Compression des images</p></li>
<li><p>Ajout dâ€™un script permettant dâ€™identifier les doublons dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/duplicates_deletion</span></code> (#1324)</p></li>
<li><p>Validation : possibilitÃ© de passer des fonctions dans la liste des
colonnes affichÃ©es (pour dÃ©coder une nomenclature)</p></li>
<li><p>Validation : Les paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code> et
<code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> sont regroupÃ©s en un seul paramÃ¨tre
nommÃ© <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : Correction dâ€™un bug sur le champs observateur lors de la
modification dâ€™un relevÃ© (#1177)</p></li>
<li><p>Occtax : Renseignement par dÃ©faut de lâ€™utilisateur connectÃ© Ã  la
crÃ©ation dâ€™un relevÃ© en mode Â«Â observers_txtÂ Â» (#1292)</p></li>
<li><p>Occtax : DÃ©placement des boutons dâ€™action Ã  gauche dans la liste
des taxons dâ€™un relevÃ© pour Ã©viter quâ€™ils soient masquÃ©s quand les
noms de taxon sont longs (#1299 et #1337)</p></li>
<li><p>Occtax : Correction de la possibilitÃ© de modifier un relevÃ© si U=1
(#1365)</p></li>
<li><p>Occtax : Suppression du zoom quand on localise le relevÃ© (#1317)</p></li>
<li><p>Occtax : Correction du nombre de lignes affichÃ©es aprÃ¨s une
recherche</p></li>
<li><p>Occtax : Correction de la suppression dâ€™un habitat lors de la
modification dâ€™un relevÃ© (#1296)</p></li>
<li><p>Occtax : Correction des champs Â«Â HabitatÂ Â» et Â«Â LieuÂ Â» quand on
enchaine des relevÃ©s (#1191)</p></li>
<li><p>Occtax : Correction de lâ€™enchainement des saisies (#1300)</p></li>
<li><p>Occtax : Correction de lâ€™affichage des taxons quand le nom est long
(#1299, #1337)</p></li>
<li><p>Occtax : Correction de lâ€™observateur par dÃ©faut en mode
<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code></p></li>
<li><p>Occtax : Correction des messages dâ€™information multiples (#1367)</p></li>
<li><p>Occtax : Correction de la mise Ã  jour du Â«Â digitiserÂ Â» lors dâ€™une
Ã©dition de relevÃ© (#1392)</p></li>
<li><p>Occtax : Correction du trigger alimentant les observateurs de la
synthÃ¨se depuis Occtax (#1399)</p></li>
<li><p>MÃ©tadonnÃ©es : Correction de la suppression dâ€™un JDD sans donnÃ©es,
depuis la liste des JDD (#1312)</p></li>
<li><p>MÃ©tadonnÃ©es : Correction de la rÃ©cupÃ©ration des valeurs de
nomenclature depuis MTD nâ€™existant pas dans GeoNature (#1297)</p></li>
<li><p>Authentification : Redirection vers la page login aprÃ¨s une pÃ©riode
dâ€™inactivitÃ© (#1193)</p></li>
<li><p>RÃ©solution des problÃ¨mes de permission sur le fichier
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> (#1003)</p></li>
</ul>
<p><strong>ğŸ’» DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© dâ€™utiliser la commande <code class="docutils literal notranslate"><span class="pre">flask</span></code> (eg <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">shell</span></code>)</p></li>
<li><p>PrÃ©paration de lâ€™utilisation dâ€™Alembic pour la gestion des
migrations de la structure de la BDD (#880)</p></li>
<li><p>PossibilitÃ© dâ€™importer des modules packagÃ©s (#1272)</p></li>
<li><p>RÃ©organisation des fichiers <code class="docutils literal notranslate"><span class="pre">requirements</span></code> et installation des
branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> des dÃ©pendances du fichier <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></p></li>
<li><p>Simplification de la gestion des erreurs</p></li>
<li><p>CrÃ©ation de templates pour les configurations Apache de GeoNature,
TaxHub et UsersHub, utilisÃ©s par le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Ajout du plugon <code class="docutils literal notranslate"><span class="pre">leaflet-image</span></code></p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">type</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> pour
gÃ©rer le polymorphisme, utilisÃ© dans le module Monitoring</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">meta_create_date</span></code> et <code class="docutils literal notranslate"><span class="pre">meta_update_date</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code></p></li>
<li><p>Diverses amÃ©liorations mineures de lâ€™architecture du code</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul>
<li><p>Mettez Ã  jour TaxHub 1.8.x avant dâ€™effectuer la mise Ã  jour de
GeoNature : <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez le Ã  jour en version
0.2.4 minimum avant de mettre Ã  jour GeoNature</p></li>
<li><p>Si vous nâ€™aviez pas renseignÃ© de valeur pour le paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">id_taxon_list</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code> du module Occtax, la
liste 100 nâ€™est plus passÃ©e par defaut et le module va rechercher
sur tout Taxref. Si vous souhaitez utiliser une liste de taxons dans
la saisie Occtax, veuillez renseigner lâ€™identifiant de votre liste
dans la configuration du module</p></li>
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql</a>)</p></li>
<li><p>Le script SQL de mise Ã  jour va supprimer et recrÃ©er les vues
<code class="docutils literal notranslate"><span class="pre">pr_occtax.v_export_occtax</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>
pour y intÃ©grer les champs additionnels. Si vous aviez modifiÃ© ces
vues, adaptez le script de mise Ã  jour de GeoNature 2.6.2 Ã  2.7.0,
ou rÃ©percuter vos modifications aprÃ¨s la mise Ã  jour, Ã  appliquer
aussi dans votre Ã©ventuelle surcouche des paramÃ¨tres
<code class="docutils literal notranslate"><span class="pre">default_columns_export</span></code> (dans
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code>) et <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code>
(dans <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>)</p></li>
<li><p>Le fichier de customisation CSS a Ã©tÃ© dÃ©placÃ© de
<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/custom.scss</span></code> vers
<code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> pour pouvoir Ãªtre modifiÃ© sans
devoir rebuilder lâ€™application. Son dÃ©placement est fait
automatiquement lors de la mise Ã  jour de GeoNature. Si vous avez
customisÃ© les styles dans ce fichier et notamment fait rÃ©fÃ©rence Ã 
dâ€™autres fichiers, vÃ©rifiez ou adaptez leurs chemins</p></li>
<li><p>Si vous aviez renseigner un des deux paramÃ¨tres
<code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> dans le
module Validation, il est nÃ©cessaire de les remplacer par le nouveau
paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
<li><p>Modifier dans le fichier
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>, remplacer
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> par <code class="docutils literal notranslate"><span class="pre">supervisor.log</span></code> dans la variable
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s|\(stdout_logfile = .*\)/gn_errors.log|\1/supervisor.log|&#39;</span><span class="w"> </span>/etc/supervisor/conf.d/geonature-service.conf
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>reload
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id22">
<h2>2.6.2 (2021-02-15)<a class="headerlink" href="#id22" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>MetadonnÃ©es : correction dâ€™un bug sur la fiche JDD si le module
dâ€™import nâ€™est pas installÃ©</p></li>
<li><p>MetadonnÃ©es : correction de lâ€™affichage de certains champs sur la
fiche des cadres dâ€™acquisition</p></li>
<li><p>MetadonnÃ©es : la recherche rapide nâ€™est plus sensible Ã  la casse
casse</p></li>
</ul>
</section>
<section id="id23">
<h2>2.6.1 (2021-02-11)<a class="headerlink" href="#id23" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_tri_cal_sensi_diff_level_on_each_statement()</span></code> non
compatible avec PostgreSQL 10 (#1255)</p></li>
<li><p>SynthÃ¨se : correction de lâ€™affichage du filtre Â«Â statut de
validationÂ Â» (#1267)</p></li>
<li><p>Permissions : correction de lâ€™URL de redirection aprÃ¨s
lâ€™Ã©dition des permissions (#1253)</p></li>
<li><p>PrÃ©cision de la documentation de mise Ã  jour de GeoNature (#1251)</p></li>
<li><p>Ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dans le fichier
dâ€™exemple de configuration (#1066 par &#64;jbdesbas)</p></li>
<li><p>SÃ©curitÃ© : suppression dâ€™une route inutile</p></li>
<li><p>Correction de lâ€™URL de la doc sur la page dâ€™accueil</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script de mise Ã  jour de la BDD du sous-module de
nomenclature :
https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature
(https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql)</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature
(http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application)</p></li>
</ul>
</section>
<section id="saxifraga-2021-02-04">
<h2>2.6.0 - Saxifraga ğŸŒ¸ (2021-02-04)<a class="headerlink" href="#saxifraga-2021-02-04" title="Link to this heading">ïƒ</a></h2>
<p>NÃ©cessite Debian 10, car cette nouvelle version nÃ©cessite PostgreSQL 10
minimum (qui nâ€™est pas fourni par dÃ©faut avec Debian 9) pour les
triggers dÃ©clenchÃ©s Â«Â on each statementÂ Â», plus performants.</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SensibilitÃ© : Ajout dâ€™un trigger sur la synthÃ¨se dÃ©clenchant
automatiquement le calcul de la sensibilitÃ© des observations et
calculant ensuite leur niveau de diffusion (si celui-ci est NULL) en
fonction de la sensibilitÃ© (#413 et #871)</p></li>
<li><p>Ajout du format GeoPackage (GPKG) pour les exports SIG, plus simple,
plus lÃ©ger, plus performant et unique que le SHAPEFILE. Les exports
au format SHP restent pour le moment utilisÃ©s par dÃ©faut (modifiable
dans la configuration des modules Occtax, Occhab et SynthÃ¨se)
(#898)</p></li>
<li><p>Performances : Suppression du trigger le plus lourd calculant les
couleurs des taxons par unitÃ©s gÃ©ographiques. Il est remplacÃ© par
une vue utilisant le nouveau paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>, dÃ©finissant le
code du type de zonage Ã  utiliser pour les unitÃ©s gÃ©ographiques dans
Occtax-mobile (Mailles de 5km par dÃ©faut) (#997)</p></li>
<li><p>Performances : AmÃ©lioration du trigger de la SynthÃ¨se calculant les
zonages dâ€™une observation en ne faisant un <code class="docutils literal notranslate"><span class="pre">ST_Touches()</span></code> seulement
si lâ€™observation nâ€™est pas un point et en le passant
<code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">each</span> <span class="pre">statement</span></code> (#716)</p></li>
<li><p>MÃ©tadonnÃ©es : Refonte de la liste des CA et JDD avec lâ€™ajout
dâ€™informations et dâ€™actions, ainsi quâ€™une recherche avancÃ©e
(#889)</p></li>
<li><p>MÃ©tadonnÃ©es : RÃ©vision des fiches info des CA et JDD avec lâ€™ajout
dâ€™actions, du tableau des imports et du tÃ©lÃ©chargement des rapports
dâ€™UUID et de sensibilitÃ© (#889)</p></li>
<li><p>MÃ©tadonnÃ©es: Ajout de la fonctionnalitÃ© de fermeture (dÃ©pot) au
niveau du CA (qui ferme tous les JDD du CA), seulement si le CA a au
moins un JDD. DÃ©sactivÃ©e par dÃ©faut via le paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">ENABLE_CLOSE_AF</span></code> (#889 par &#64;alainlaupinmnhn)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™envoyer un email automatique au
crÃ©ateur et Ã  lâ€™utilisateur dâ€™un CA quand celui-ci est fermÃ©
(#889)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™ajouter un titre spÃ©cifique aux exports
PDF des CA quand ceux-ci sont fermÃ©s, par exemple pour en faire un
certificat (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™importer directement dans un JDD actif
depuis le module MÃ©tadonnÃ©es, dÃ©sactivÃ© par dÃ©faut (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : AmÃ©lioration des possibilitÃ©s de customisation des PDF
des fiches de mÃ©tadonnÃ©es</p></li>
<li><p>MÃ©tadonnÃ©es : AmÃ©lioration des fiches dÃ©tail des CA et JDD et ajout
de la liste des imports dans les fiches des JDD (#889)</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un spinner lors du chargement de la liste des
mÃ©tadonnÃ©es et parallÃ©lisation du calcul du nombre de donnÃ©es par
JDD (#1231)</p></li>
<li><p>SynthÃ¨se : PossibilitÃ© dâ€™ouvrir le module avec un JDD
prÃ©selectionnÃ© (<code class="docutils literal notranslate"><span class="pre">&lt;URL_GeoNature&gt;/#/synthese?id_dataset=2</span></code>) et ajout
dâ€™un lien direct depuis le module MÃ©tadonnÃ©es (#889)</p></li>
<li><p>SynthÃ¨se : ajout de web service pour le calcul du nombre
dâ€™observations par un paramÃ¨tre donnÃ© (JDD, module, observateur),
et du calcul de la bounding-box par jeu de donnÃ©es</p></li>
<li><p>Synthese : ajout dâ€™un filtre avancÃ© <code class="docutils literal notranslate"><span class="pre">PossÃ¨de</span> <span class="pre">mÃ©dias</span></code></p></li>
<li><p>Exports au format SHP remplacÃ©s par dÃ©faut par le format GeoPackage
(GPKG) plus simple, plus lÃ©ger, plus performant et unique. Les
exports SHP restent activables dans la configuration des modules
(#898)</p></li>
<li><p>Occtax : ajout du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_VERNACULAR_NAME</span></code> qui contrÃ´le
lâ€™affichage du nom vernaculaire vs nom complet sur les interfaces
(Defaut = true: afffiche le nom vernaculaire)</p></li>
<li><p>Validation : PrÃ©remplir lâ€™email Ã  lâ€™observateur avec des
informations paramÃ©trables sur lâ€™occurrence (date, nom du taxon,
commune, mÃ©dias) (#981)</p></li>
<li><p>Validation : PossibilitÃ© de paramÃ¨trer les colonnes affichÃ©es dans
la liste des observations (#980)</p></li>
<li><p>PossibilitÃ© de customiser le logo principal (GeoNature par dÃ©faut)
dans <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/</span></code></p></li>
<li><p>Ajout dâ€™un champs json <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code>
(#1111)</p></li>
<li><p>ComplÃ©ment des scripts de migration des donnÃ©es depuis GINCO
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/</span></code>)</p></li>
<li><p>Barre de navigation : Mention plus gÃ©nÃ©rique et gÃ©nÃ©rale des auteurs
et contributeurs</p></li>
<li><p>Redirection vers le formulaire dâ€™authentification si on tente
dâ€™accÃ©der Ã  une page directement sans Ãªtre authentifiÃ© et sans
passer par le frontend (#1193)</p></li>
<li><p>Connexion Ã  MTD : possibilitÃ© de filtrer les JDD par instance, avec
le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_INSTANCE_FILTER</span></code>, par exemple pour ne rÃ©cupÃ©rer que
les JDD de sa rÃ©gion (#1195)</p></li>
<li><p>Connexion Ã  MTD : rÃ©cupÃ©ration du crÃ©ateur et des acteurs (#922,
#1008 et #1196)</p></li>
<li><p>Connexion Ã  MTD : rÃ©cupÃ©ration du nouveau champs
<code class="docutils literal notranslate"><span class="pre">statutDonneesSource</span></code> pour indiquer si le JDD est dâ€™origine
publique ou privÃ©e</p></li>
<li><p>CrÃ©ation dâ€™une commande GeoNature permettant de rÃ©cupÃ©rer les JDD,
CA et acteurs depuis le webservice MTD de lâ€™INPN, en refactorisant
les outils existants dâ€™import depuis ce webservice</p></li>
<li><p>Ajout de contraintes dâ€™unicitÃ© sur certains champs des tables de
mÃ©tadonnÃ©es et de la table des sources (#1215)</p></li>
<li><p>CrÃ©ation dâ€™un script permettant de remplacer les rÃ¨gles de
sensibilitÃ© nationales et rÃ©gionales, par les rÃ¨gles dÃ©partementales
plus prÃ©cises (<code class="docutils literal notranslate"><span class="pre">data/scripts/sensi/import_sensi_depobio.sh</span></code>),
uniquement utilisÃ© pour DEPOBIO pour le moment, en attendant de
clarifier dans une prochaine release le fonctionnement que lâ€™on
retient par dÃ©faut dans GeoNature (#413)</p></li>
<li><p>CrÃ©ation dâ€™un script permettant dâ€™importer les rÃ©gions dans le
rÃ©fÃ©rentiel gÃ©ographique (<code class="docutils literal notranslate"><span class="pre">data/migrations/insert_reg.sh</span></code>)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occhab : Export SIG (GPKG ou SHP) corrigÃ© (#898)</p></li>
<li><p>Meilleur nettoyage des sessions enregistrÃ©es dans le navigateur
(#1178)</p></li>
<li><p>Correction des droits CRUVED et de leur hÃ©ritage (#1170)</p></li>
<li><p>SynthÃ¨se : Retour du bouton pour revenir Ã  lâ€™observation dans son
module dâ€™origine (Occtax par exemple) depuis la fiche info dâ€™une
observation (#1147)</p></li>
<li><p>SynthÃ¨se : Suppression du message Â«Â Aucun historique de validationÂ Â»
quand une observation nâ€™a pas encore de validation (#1147)</p></li>
<li><p>SynthÃ¨se : Correction du CRUVED sur le R = 1 (ajout des JDD de
lâ€™utilisateur)</p></li>
<li><p>SynthÃ¨se : Correction de lâ€™export des statuts basÃ© sur une
recherche gÃ©ographique (#1203)</p></li>
<li><p>Occtax : Correction de lâ€™erreur de chargement de lâ€™observateur
lors de la modification dâ€™un relevÃ© (#1177)</p></li>
<li><p>Occtax : Suppression de lâ€™obligation de remplir les champs
Â«Â DÃ©terminateurÂ Â» et Â«Â MÃ©thode de dÃ©terminationÂ Â»</p></li>
<li><p>MÃ©tadonnÃ©es : Suppression du graphique de rÃ©partition des espÃ¨ces
dans les exports PDF car il Ã©tait partiellement fonctionnel</p></li>
<li><p>SynthÃ¨se : Fonction <code class="docutils literal notranslate"><span class="pre">import_row_from_table</span></code>, test sur
<code class="docutils literal notranslate"><span class="pre">LOWER(tbl_name)</span></code></p></li>
<li><p>Redirection vers le formulaire dâ€™authentification si lâ€™on essaie
dâ€™accÃ©der Ã  une URL sans Ãªtre authentifiÃ© et sans passer par le
frontend (#1193)</p></li>
<li><p>Script dâ€™installation globale : prise en compte du paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">install_grid_layer</span></code> permettant dâ€™intÃ©grer ou non les mailles dans
le <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> lors de lâ€™installation initiale (#1133)</p></li>
<li><p>SynthÃ¨se : Changement de la longueur du champs <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> de
la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (de 255 Ã  5000 caractÃ¨res)</p></li>
<li><p>SensibilitÃ© : Corrections des contraintes NOT VALID (#1245)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql</a>)</p></li>
<li><p>Toutes les nouvelles donnÃ©es intÃ©grÃ©es dans le SynthÃ¨se auront leur
niveau de sensibilitÃ© et de diffusion calculÃ©s automatiquement. Vous
pouvez ajouter ou dÃ©sactiver des rÃ¨gles de sensibilitÃ© dans la table
<code class="docutils literal notranslate"><span class="pre">gn_sensivity.t_sensitivity_rules</span></code></p></li>
<li><p>Vous pouvez aussi exÃ©cuter le script qui va calculer automatiquement
le niveau de sensibilitÃ© et de diffusion de toutes les donnÃ©es dÃ©jÃ 
prÃ©sentes dans la SynthÃ¨se, Ã©ventuellement en lâ€™adaptant Ã  votre
contexte :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql</a></p></li>
<li><p>Mettez Ã  jour de la longueur du champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese.reference_biblio</span></code> Ã  5000 charactÃ¨res. ExÃ©cutez
la commande suivante dans la console :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">geonature2db</span> <span class="pre">-c</span> <span class="pre">&quot;UPDATE</span> <span class="pre">pg_attribute</span> <span class="pre">SET</span> <span class="pre">atttypmod</span> <span class="pre">=</span> <span class="pre">5004</span> <span class="pre">WHERE</span> <span class="pre">attrelid</span> <span class="pre">=</span> <span class="pre">'gn_synthese.synthese'::regclass</span> <span class="pre">AND</span> <span class="pre">attname</span> <span class="pre">=</span> <span class="pre">'reference_biblio';&quot;</span></code></p></li>
<li><p>ExÃ©cuter le script de mise Ã  jour de la BDD du sous-module de
nomenclature :
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql</a></p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez Occtax-mobile, vous pouvez modifier la valeur du
nouveau paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>
pour lui indiquer le code du type de zonage que vous utilisez pour
les unitÃ©s gÃ©ographiques (mailles de 5km par dÃ©faut)</p></li>
<li><p>Si vous disposez du module dâ€™import, vous devez le mettre Ã  jour en
version 1.1.1</p></li>
</ul>
</section>
<section id="id24">
<h2>2.5.5 (2020-11-19)<a class="headerlink" href="#id24" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un composant fil dâ€™ariane (#1143)</p></li>
<li><p>Ajout de la possiblitÃ© de dÃ©sactiver les composants <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> (#1142)</p></li>
<li><p>Ajout de tests sur les routes pour assurer la compatibilitÃ© avec les
applications mobiles</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug de rÃ©cupÃ©ration du CRUVED sur les modules
(#1146)</p></li>
<li><p>Correction des validateurs sur les preuves dâ€™existence (#1134)</p></li>
<li><p>Correction de la rÃ©cupÃ©ration des dossiers dans <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>
dans le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code></p></li>
<li><p>Correction de lâ€™affichage de lâ€™utilisateur dans la navbar
lorsquâ€™on est connectÃ© via le CAS INPN</p></li>
</ul>
</section>
<section id="id25">
<h2>2.5.4 (2020-11-17)<a class="headerlink" href="#id25" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout de scripts <code class="docutils literal notranslate"><span class="pre">sql</span></code> et <code class="docutils literal notranslate"><span class="pre">sh</span></code> de restauration des medias dans
<code class="docutils literal notranslate"><span class="pre">data/medias</span></code> (#1148)</p></li>
<li><p>Ajout dâ€™un service pour pouvoir rÃ©cupÃ©rer les informations sur
lâ€™utilisateur connectÃ©</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction des mÃ©dias qui sont actuellement tous supprimÃ©s
automatiquement aprÃ¨s 24h, et non pas seulement ceux orphelins
(#1148)</p></li>
<li><p>Correction des permissions sur les fiches info des relevÃ©s dans
Occtax avec la dÃ©sactivation du bouton de modification du relevÃ©
quand lâ€™utilisateur nâ€™en a pas les droits</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous aviez associÃ© des mÃ©dias Ã  des observations dans Occtax ou
autre et quâ€™ils ont Ã©tÃ© supprimÃ©s, vous pouvez les retrouver dans
la table dâ€™historisation des actions
(<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_commons.t_history_actions</span> <span class="pre">WHERE</span> <span class="pre">table_content-&gt;'id_media'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span> <span class="pre">AND</span> <span class="pre">operation_type</span> <span class="pre">=</span> <span class="pre">'D'</span></code>)</p></li>
<li><p>Pour restaurer les mÃ©dias supprimÃ©s depuis la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_history_actions</span></code> vous pouvez :</p>
<ul>
<li><p>exÃ©cuter le script SQL <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sql</span></code> qui va
recrÃ©er les mÃ©dias supprimÃ©s dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code></p></li>
<li><p>exÃ©cuter le script BASH <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sh</span></code>
(<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">/home/`whoami`/geonature/data/medias/restore_medias.sh</span></code>
en <code class="docutils literal notranslate"><span class="pre">sudo</span></code> si besoin) qui va renommer des fichiers supprimÃ©s en
supprimant le prÃ©fixe <code class="docutils literal notranslate"><span class="pre">deleted_</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id26">
<h2>2.5.3 (2020-11-04)<a class="headerlink" href="#id26" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Mise en place de lâ€™hÃ©ritage du CRUVED au niveau des objets des
modules (#1028)</p></li>
<li><p>RÃ©vision de lâ€™export des observations de la SynthÃ¨se (noms plus
lisibles, ajout des communes et dâ€™informations taxonomiques,
complÃ©ment des champs existants (#755)</p></li>
<li><p>Ajout dâ€™un paramÃ¨tre permettant dâ€™ajouter un message personnalisÃ©
Ã  la fin des emails (inscriptions, exportsâ€¦) (#1050
par &#64;jpm-cbna)</p></li>
<li><p>Ajout dâ€™une alerte de dÃ©prÃ©ciation sur les fonctions
<code class="docutils literal notranslate"><span class="pre">utils-sqlalchemy</span></code> prÃ©sentes dans GeoNature</p></li>
<li><p>Ajout dâ€™un widget de type Â«Â HTMLÂ Â» dans les formulaires dynamiques,
permettant dâ€™ajouter des informations dans un formulaire (#1043 et
#1068 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© dâ€™ajouter un texte dâ€™aide sur les champs
des formulaires dynamiques (#1065 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de dÃ©finir un min et un max au composant
commun <code class="docutils literal notranslate"><span class="pre">date</span></code> (#1069 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de dÃ©finir le nombre de lignes du composant
commun <code class="docutils literal notranslate"><span class="pre">textarea</span></code> (#1067 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilitÃ© de contrÃ´ler par une expression rÃ©guliÃ¨re le
contenu dâ€™un champs de type <code class="docutils literal notranslate"><span class="pre">text</span></code> des formulaires dynamiques
(#1073 par &#64;FlorentRICHARD44)</p></li>
<li><p>Ajout de la possibilitÃ© de masquer certains champs du composant
<code class="docutils literal notranslate"><span class="pre">media</span></code> (#1072, #1078 et #1083 par &#64;metourneau)</p></li>
<li><p>Ajout dâ€™un spinner sur les statistiques de la page dâ€™accueil
(#1086 par &#64;jpm-cbna)</p></li>
<li><p>Ajout dâ€™un composant dâ€™autocomplete multiselect <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code>
permettant de rechercher des taxons dans tout lâ€™arbre taxonomique
et de limiter la recherche Ã  un rang</p></li>
<li><p>PossibilitÃ© dâ€™ajouter plusieurs cartes sur la mÃªme page Ã  lâ€™aide
du composant <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code></p></li>
<li><p>HomogÃ©nÃ©isation du style du code et documentation des pratiques de
dÃ©veloppement</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™affichage des noms des validateurs sur la liste
dans le module validation (#1091 par &#64;lpofredc)</p></li>
<li><p>Corrections mineures de lâ€™export des observations de la SynthÃ¨se
(#1108)</p></li>
<li><p>SynthÃ¨se : Correction du masquage de la recherche par arbre
taxonomique (#1057 par &#64;jpm-cbna)</p></li>
<li><p>Ajout du champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_biogeo_status</span></code> dans la Synthese
(correspondance standard : statut biogÃ©ographique). La BDD est
remplie avec la valeur par dÃ©faut de la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.default_nomenclature_value</span></code> (valeur = non renseignÃ©e)</p></li>
<li><p>Accueil : Correction de lâ€™affichage du nom du module (#1087)</p></li>
<li><p>Correction du trigger de mise Ã  jour dâ€™Occtax vers la SynthÃ¨se
(champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> non mis Ã  jour) (#1117 par &#64;jbrieuclp)</p></li>
<li><p>Correction du paramÃ¨tre stockant la version de Taxref, passÃ© Ã  13.0
pour les nouvelles installations (#1097 par &#64;RomainBaghi)</p></li>
<li><p>Correction de lâ€™affichage en double des markers dans Leaflet.draw
(#1095 par &#64;FlorentRICHARD44)</p></li>
<li><p>SynthÃ¨se : Correction des filtres avancÃ©s par technique
dâ€™observation et mÃ©thode de dÃ©termination (#1110 par &#64;jbrieuclp)</p></li>
<li><p>RecrÃ©ation du fichier de configuration Ã  chaque installation (#1074
par &#64;etot)</p></li>
<li><p>Annulation de lâ€™insertion du module lorsquâ€™une erreur est levÃ©e Ã 
lâ€™installation dâ€™un module</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>DÃ©sormais les objets des modules (par exemple les objets
â€™Permissionsâ€™ et â€™Nomenclaturesâ€™ du module â€™ADMINâ€™) hÃ©ritent
automatiquement des permissions dÃ©finies au niveau du module parent
et Ã  dÃ©faut au niveau de GeoNature (#1028). Il sâ€™agit dâ€™une
Ã©volution de mise en cohÃ©rence puisque les modules hÃ©ritaient dÃ©jÃ 
des permissions de GeoNature, mais pas leurs objets. Si vous avez
dÃ©fini des permissions particuliÃ¨res aux niveaux des objets,
vÃ©rifier leur cohÃ©rence avec le nouveau fonctionnement. NB : si vous
aviez mis des droits R=0 pour un groupe au module â€™ADMINâ€™, les
utilisateurs de ce groupe ne pourront pas accÃ©der aux sous-modules
â€™permissionsâ€™ et â€™nomenclaturesâ€™.</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql</a>).
Attention, si vous avez customisÃ© les vues des exports Occtax et
SynthÃ¨se, elles seront supprimÃ©es et recrÃ©es automatiquement par le
script SQL de mise Ã  jour de la BDD de GeoNature pour intÃ©grer leurs
Ã©volutions rÃ©alisÃ©es dans cette nouvelle version. RÃ©visez
Ã©ventuellement ces vues avant et/ou aprÃ¨s la mise Ã  jour.</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
<li><p>Les noms de colonnes de lâ€™export de la SynthÃ¨se ont Ã©tÃ© entiÃ¨rement
revus dans la vue fournie par dÃ©faut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouchÃ© le
paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vÃ©rifiez les noms des colonnes.</p></li>
<li><p>VÃ©rifiez que la valeur du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> correspond bien Ã  votre version actuelle
de Taxref (11.0 ou 13.0).</p></li>
</ul>
</section>
<section id="id27">
<h2>2.5.2 (2020-10-13)<a class="headerlink" href="#id27" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : correction du problÃ¨me dâ€™installation du module dans le
fichier <code class="docutils literal notranslate"><span class="pre">schemas.py</span></code></p></li>
<li><p>Synthese : correction de la fonctions SQL
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table</span></code> et rÃ©percussion dans le fichier
<code class="docutils literal notranslate"><span class="pre">gn_synthese/process.py</span></code></p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql</a>)</p></li>
</ul>
</section>
<section id="id28">
<h2>2.5.1 (2020-10-06)<a class="headerlink" href="#id28" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dÃ©finissant si les
adresses email des observateurs sont affichÃ©es ou non dans les
fiches info des observations des modules SynthÃ¨se et Validation
(#1066)</p></li>
<li><p>Occtax : correction de lâ€™affichage du champs Â«Â Technique de
collecte CampanuleÂ Â» (#1059)</p></li>
<li><p>Occtax : correction du fichier dâ€™exemple de configuration
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml.example</span></code> (#1059)</p></li>
<li><p>Occtax : paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> renommÃ©
<code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> et dÃ©sactivÃ© par dÃ©faut (#1060)</p></li>
<li><p>Occtax : quand le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> est dÃ©sactivÃ©,
remise en place du fonctionnement de lâ€™outil Â«Â Echainer les
relevÃ©sÂ Â». Dans ce cas, quand on enchaine les relevÃ©s, on conserve
le JDD, les observateurs, les dates et heures dâ€™un relevÃ© Ã 
lâ€™autre (#1060)</p></li>
<li><p>Occtax : correction de lâ€™observateur par dÃ©faut en mode
<code class="docutils literal notranslate"><span class="pre">observers_as_txt</span></code></p></li>
<li><p>Verification des UUID : autoriser toutes les versions (#1063)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
</ul>
</section>
<section id="manidae-2020-09-30">
<h2>2.5.0 - Manidae (2020-09-30)<a class="headerlink" href="#manidae-2020-09-30" title="Link to this heading">ïƒ</a></h2>
<p>Occtax v2 et mÃ©dias</p>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Refonte de lâ€™ergonomie et du fonctionnement du module de saisie
Occtax (#758 et #860 par &#64;jbrieuclp et &#64;TheoLechemia)</p>
<ul>
<li><p>Enregistrement continu au fur et Ã  mesure de la saisie dâ€™un
relevÃ©</p></li>
<li><p>DÃ©coupage en 2 onglets (Un pour le relevÃ© et un onglet pour les
taxons)</p></li>
<li><p>AmÃ©lioration de la liste des taxons saisis sur un relevÃ© (#635
et #682)</p></li>
<li><p>AmÃ©lioration de la saisie au clavier</p></li>
<li><p>Zoom rÃ©alisÃ© dans la liste des relevÃ© conservÃ© quand on saisit
un nouveau relevÃ© (#436 et #912)</p></li>
<li><p>Filtres conservÃ©s quand on revient Ã  la liste des relevÃ©s
(#772)</p></li>
<li><p>PossibilitÃ© de conserver les informations saisies entre 2 taxons
ou relevÃ©s, dÃ©sactivable avec le paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> (#692)</p></li>
<li><p>Correction de la mise Ã  jour des dates de dÃ©but et de fin
(#977)</p></li>
<li><p>Affichage dâ€™une alerte si on saisit 2 fois le mÃªme taxon sur un
mÃªme relevÃ©</p></li>
<li><p>Fiche dâ€™information dâ€™un relevÃ© complÃ©tÃ©e et mise Ã  jour</p></li>
</ul>
</li>
<li><p>Passage de la version 1.2.1 Ã  la version 2.0.0 du standard
Occurrences de taxon (dans les modules Occtax, SynthÃ¨se et
Validation) (#516)</p>
<ul>
<li><p>Ajout des champs Â«Â ComportementÂ Â», Â«Â NomLieuÂ Â», Â«Â HabitatÂ Â»,
Â«Â MÃ©thode de regroupementÂ Â», Â«Â Type de regroupementÂ Â» et
Â«Â ProfondeurÂ Â»</p></li>
<li><p>Ajout du champs Â«Â PrÃ©cisionÂ Â» dans Occtax et suppression de sa
valeur par dÃ©faut Ã  100 m</p></li>
<li><p>Renommage du champs Â«Â MÃ©thode dâ€™observationÂ Â» en Â«Â Technique
dâ€™observationÂ Â»</p></li>
<li><p>Suppression du champs Â«Â Technique dâ€™observationÂ Â» actuel de la
synthÃ¨se</p></li>
<li><p>Renommage du champs Â«Â Technique dâ€™observationÂ Â» actuel
dâ€™Occtax en Â«Â Technique de collecte CampanuleÂ Â»</p></li>
<li><p>Ajout et mise Ã  jour de quelques nomenclatures</p></li>
<li><p>Ajout dâ€™un document de suivi de lâ€™implÃ©mentation du standard
Occurrences de taxon dans GeoNature
(<code class="docutils literal notranslate"><span class="pre">docs/implementation_gn_standard_occtax2.0.ods</span></code>) (#516)</p></li>
</ul>
</li>
<li><p>Passage de la version 1.3.9 Ã  la version 1.3.10 du standard de
MÃ©tadonnÃ©es. Mise Ã  jour des nomenclatures Â«Â CA_OBJECTIFSÂ Â» et mise
Ã  jour des mÃ©tadonnÃ©es existantes en consÃ©quence
(par &#64;DonovanMaillard)</p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">addtional_data</span></code> de type <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code>, en prÃ©vision de lâ€™ajout des champs
additionnels dans Occtax et SynthÃ¨se (#1007)</p></li>
<li><p>Mise en place de la gestion transversale et gÃ©nÃ©rique des mÃ©dias
(images, audios, vidÃ©os, PDFâ€¦) dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code> et le
Dynamic-Form (#336) et implÃ©mentation dans le module Occtax
(dÃ©sactivables avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MEDIAS</span></code>) (#620
par &#64;joelclems)</p></li>
<li><p>Mise en place de miniatures et dâ€™aperÃ§us des mÃ©dias, ainsi que de
nombreux contrÃ´les des fichiers et de leurs formats</p></li>
<li><p>Affichage des mÃ©dias dans les fiches dâ€™information des modules de
saisie, ainsi que dans les modules SynthÃ¨se et Validation</p></li>
<li><p>Ajout de la fonctionnalitÃ© Â«Â Mes lieuxÂ Â» (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_places</span></code>),
permettant de stocker la gÃ©omÃ©trie de ieux individuels frÃ©quemment
utilisÃ©s, implÃ©mentÃ©e dans le module cartographique dâ€™Occtax
(dÃ©sactivable avec le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ENABLE_MY_PLACES</span></code>) (#246
par &#64;metourneau)</p></li>
<li><p>Tri de lâ€™ordre des modules dans le menu latÃ©ral par ordre
alphabÃ©tique par dÃ©faut et possibilitÃ© de les ordonner avec le
nouveau champs <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules.module_order</span></code> (#787
par &#64;alainlaupinmnhn)</p></li>
<li><p>ArrÃªt du support de lâ€™installation packagÃ©e sur Debian 9 et Ubuntu
16 pour passer Ã  Python version 3.6 et plus</p></li>
<li><p>Prise en charge de PostGIS 3 et notamment lâ€™installation de
lâ€™extension <code class="docutils literal notranslate"><span class="pre">postgis_raster</span></code> (#946 par &#64;jpm-cbna)</p></li>
<li><p>CrÃ©ation de compte : Envoi automatique dâ€™un email Ã  lâ€™utilisateur
quand son compte est validÃ©. NÃ©cessite la version 2.1.3 de UsersHub
(#862 et #1035 par &#64;jpm-cbna)</p></li>
</ul>
<p><strong>Ajouts mineurs</strong></p>
<ul class="simple">
<li><p>HomogÃ©nÃ©isation des styles des boutons (#1026)</p></li>
<li><p>Factorisation du code des fiches infos dâ€™une observation dans les
modules SynthÃ¨se et Validation (#1053)</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un paramÃ¨tre permettant de dÃ©finir le nombre
de CA affichÃ©s sur la page (100 par dÃ©faut)</p></li>
<li><p>MÃ©tadonnÃ©es : Tri des CA et JDD par ordre alphabÃ©tique</p></li>
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> dans la table des CA
et des JDD, utilisÃ© en plus des acteurs pour le CRUVED des JDD
(#921)</p></li>
<li><p>Dynamic-Form : Ajout dâ€™un composant Â«Â selectÂ Â» prenant une API en
entrÃ©e (#1029)</p></li>
<li><p>Dynamic-Form : Ajout de la possibilitÃ© dâ€™afficher une dÃ©finition
dâ€™un champs sous forme de tooltip</p></li>
<li><p>CAS INPN : Redirection vers la page de connexion de GeoNature quand
on se dÃ©connecte</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur <code class="docutils literal notranslate"><span class="pre">schema_name</span></code> et <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
sur la table <code class="docutils literal notranslate"><span class="pre">gn_commons_bib_tables_location_unique</span></code> (#962)</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur <code class="docutils literal notranslate"><span class="pre">id_organism</span></code> et
<code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> (#988)</p></li>
<li><p>Ajout de la possibilitÃ© de filtrer le composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> du
Dynamic-Form par <code class="docutils literal notranslate"><span class="pre">module_code</span></code> pour pouvoir choisir parmis les JDD
associÃ©es Ã  un module (#964)</p></li>
<li><p>Mise Ã  jour de <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> en version 2.8.5, sqlalchemy en 1.3.19,
marshmallow en 2.15.6, virtualenv en 20.0.31 (par &#64;jpm-cbna)</p></li>
<li><p>Mises Ã  jour de sÃ©curitÃ© diverses</p></li>
<li><p>AmÃ©liorations des scripts <code class="docutils literal notranslate"><span class="pre">install/install_db.sh</span></code> et
<code class="docutils literal notranslate"><span class="pre">install/install_app.sh</span></code> (par &#64;jpm-cbna)</p></li>
<li><p>Ajout de lâ€™autocomplÃ©tion des commandes <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (#999
par &#64;jpm-cbna)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh.sample</span></code></p></li>
<li><p>AmÃ©lioration du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code> en vÃ©rifiant
la prÃ©sence des dossiers optionnels avant de les copier</p></li>
<li><p>AmÃ©lioration des fonctions
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row_format_insert_data</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row</span></code> pour prendre en charge la gÃ©nÃ©ration
des geojson dans PostGIS 3</p></li>
<li><p>Documentation administrateur : PrÃ©cisions sur les labels, pictos et
ordres des modules dans le menu de navigation latÃ©ral</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Module Validation : Affichage des commentaires du relevÃ© et de
lâ€™observation (#978 et #854)</p></li>
<li><p>Module Validation : Ne lister que les observations ayant un UUID et
vÃ©rification de sa validitÃ© (#936)</p></li>
<li><p>Module Validation : Correction et homogÃ©nÃ©isation de lâ€™affichage et
du tri des observations par date (#971)</p></li>
<li><p>Module Validation : Correction de lâ€™affichage du statut de
validation aprÃ¨s mise Ã  jour dans la liste des observations (#831)</p></li>
<li><p>Module Validation : Correction de lâ€™affichage du nom du validateur</p></li>
<li><p>Module Validation : AmÃ©lioration des performances avec lâ€™ajout
dâ€™un index sur le champs <code class="docutils literal notranslate"><span class="pre">uuid_attached_row</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> (#923 par &#64;jbdesbas)</p></li>
<li><p>Suppression du trigger en double
<code class="docutils literal notranslate"><span class="pre">tri_insert_synthese_cor_role_releves_occtax</span></code> sur
<code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> (#762 par &#64;jbrieuclp)</p></li>
<li><p>Passage des requÃªtes dâ€™export de la synthÃ¨se en POST plutÃ´t quâ€™en
GET (#883)</p></li>
<li><p>Correction du traitement du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">offset</span></code> de la route
<code class="docutils literal notranslate"><span class="pre">synthese/color_taxon</span></code> utilisÃ© par Occtax-mobile (#994)</p></li>
<li><p>Correction et complÃ©ment des scripts de migration de donnÃ©es depuis
GINCO v1 (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/occtax.sql</span></code>)</p></li>
<li><p>Import des utilisateurs depuis le CAS INPN : Activer les
utilisateurs importÃ©s par dÃ©faut et rÃ©cupÃ©rer leur email</p></li>
<li><p>Calcul automatique de la sensibilitÃ© : Ajout de la rÃ©cursivitÃ© dans
la rÃ©cupÃ©ration des critÃ¨res de sensibilitÃ© au niveau de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_sensitivity.get_id_nomenclature_sensitivity</span></code> (#284)</p></li>
<li><p>Typo sur le terme Â«Â Preuve dâ€™existenceÂ Â» (par &#64;RomainBaghi)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Nomenclatures : Commencer par exÃ©cuter le script SQL de mise Ã  jour
du schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> de la BDD
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql</a>)</p></li>
<li><p>ExÃ©cuter ensuite le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql</a>).
Attention, si vous avez customisÃ© les vues des exports Occtax et
SynthÃ¨se, elles seront supprimÃ©es et recrÃ©es automatiquement par le
script SQL de mise Ã  jour de la BDD de GeoNature pour sâ€™adapter aux
Ã©volutions du standard Occtax en version 2.0.0. RÃ©visez
Ã©ventuellement ces vues avant et/ou aprÃ¨s la mise Ã  jour. Le script
SQL de mise Ã  jour vÃ©rifiera aussi si vous avez dâ€™autres vues (dans
le module Export notamment) qui utilisent le champs
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> qui doit Ãªtre renommÃ© et
lâ€™indiquera dÃ¨s le dÃ©but de lâ€™exÃ©cution du script, en lâ€™arrÃªtant
pour que vous puissiez modifier ou supprimer ces vues bloquant la
mise Ã  jour.</p></li>
<li><p>Les colonnes de lâ€™export de la SynthÃ¨se ont Ã©tÃ© partiellement revus
dans la vue fournie par dÃ©faut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouchÃ© le
paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vÃ©rifiez les noms des colonnes.</p></li>
<li><p>A partir la version 2.5.0 de GeoNature, la version 3.5 de Python
nâ€™est plus supportÃ©e. Seules les versions 3.6 et + le sont. Si vous
Ãªtes encore sur Debian 9 (fourni par dÃ©faut avec Python 3.5),
veuillez suivre les instructions de mise Ã  jour de Python sur cette
version
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9">https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9</a>).
Il est cependant plutÃ´t conseillÃ© de passer sur Debian 10 pour
rester Ã  jour sur des versions maintenues</p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>A noter, quelques changements dans les paramÃ¨tres du module Occtax.
Les paramÃ¨tres dâ€™affichage/masquage des champs du formulaire ont
Ã©voluÃ© ainsi :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_meth</span></code> devient <code class="docutils literal notranslate"><span class="pre">obs_tech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_technique</span></code> devient <code class="docutils literal notranslate"><span class="pre">tech_collect</span></code></p></li>
</ul>
</li>
<li><p>A noter aussi que cette version de GeoNature est compatible avec la
version 1.1.0 minimum dâ€™Occtax-mobile (du fait de la mise du
standard Occurrence de taxons)</p></li>
</ul>
</section>
<section id="id29">
<h2>2.4.1 (2020-06-25)<a class="headerlink" href="#id29" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Occurrences sans gÃ©omÃ©trie prÃ©cise : Ajout dâ€™un champs
<code class="docutils literal notranslate"><span class="pre">id_area_attachment</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> permettant
dâ€™associer une observation Ã  un zonage dans le rÃ©fÃ©rentiel
gÃ©ographique (<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code>) (#845 et #867)</p></li>
<li><p>Ajout dâ€™un champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code>
pour pouvoir afficher les zonages du rÃ©fÃ©rentiel gÃ©ographique sur
les cartes (#867)</p></li>
<li><p>Ajout de lâ€™import par dÃ©faut des dÃ©partements de France mÃ©tropole
dans le rÃ©fÃ©rentiel gÃ©ographique lors de lâ€™installation de
GeoNature (en plus des actuelles communes et grilles)</p></li>
<li><p>Mise Ã  jour des communes importÃ©es sur la version de fÃ©vrier 2020
dâ€™Admin express IGN pour les nouvelles installations</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug dâ€™affichage des fonds de carte WMTS de lâ€™IGN,
apparu dans la version 2.4.0 avec lâ€™ajout du support des fonds WMS
(#890)</p></li>
<li><p>Gestion des exceptions de type <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> lors de lâ€™import
des commandes dâ€™un module</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql</a></p></li>
<li><p>Suivez la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Vous pouvez alors lancer le script dâ€™insertion des dÃ©partements de
France mÃ©tropole dans le rÃ©ferentiel gÃ©ographique (optionnel) :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh</a>.
VÃ©rifier le dÃ©roulement de lâ€™import dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/insert_departements.log</span></code></p></li>
</ul>
</section>
<section id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de mÃ©tadonnÃ©es (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>MÃ©tadonnÃ©es : Ajout dâ€™une fiche pour chaque jeu de donnÃ©es et
cadres dâ€™acquisition, incluant une carte de lâ€™Ã©tendue des
observations et un graphique de rÃ©partition des taxons par Groupe
INPN (#846 par &#64;FloVollmer)</p></li>
<li><p>MÃ©tadonnÃ©es : PossibilitÃ© dâ€™exporter les fiches des JDD et des CA
en PDF, gÃ©nÃ©rÃ©s par le serveur avec WeasyPrint. Logo et entÃªtes
modifiables dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/images/</span></code> (#882
par &#64;FloVollmer)</p></li>
<li><p>MÃ©tadonnÃ©es : ImplÃ©mentation du CRUVED sur la liste des CA et JDD
(#911)</p></li>
<li><p>MÃ©tadonnÃ©es : Affichage de tous les CA des JDD pour lequels
lâ€™utilisateur connectÃ© a des droits (#908)</p></li>
<li><p>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration
(optionnelle) vers Taxref version 13</p></li>
<li><p>Installation globale migrÃ©e de Taxref version 11 Ã  13</p></li>
<li><p>SynthÃ¨se et zonages : Ne pas inclure lâ€™association aux zonages
limitrophes dâ€™une observation quand sa gÃ©omÃ©trie est Ã©gale Ã  un
zonage (maille, communeâ€¦) (#716 par &#64;jbdesbas)</p></li>
<li><p>SynthÃ¨se : Ajout de la possibilitÃ© dâ€™activer la recherche par
observateur Ã  travers une liste, avec ajout des paramÃ¨tres
<code class="docutils literal notranslate"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> par dÃ©faut) et
<code class="docutils literal notranslate"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</p></li>
<li><p>SynthÃ¨se : AmÃ©lioration de la recherche des observateurs. Non prise
en compte de lâ€™ordre des noms saisis (#834 par &#64;jbrieuclp)</p></li>
<li><p>SynthÃ¨se : Ajout de filtres avancÃ©s (<code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">par</span></code> basÃ© sur
<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code>, <code class="docutils literal notranslate"><span class="pre">Commentaire</span></code> du relevÃ© et de lâ€™occurrence,
<code class="docutils literal notranslate"><span class="pre">DÃ©terminateur</span></code>) (#834 par &#64;jbrieuclp)</p></li>
<li><p>Occtax : CrÃ©ation dâ€™un trigger gÃ©nÃ©rique de calcul de lâ€™altitude
qui nâ€™est exÃ©cutÃ© que si lâ€™altitude nâ€™est pas postÃ©e (#848)</p></li>
<li><p>Ajout dâ€™une table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister
les applications mobiles, lâ€™URL de leur APK et dâ€™une API pour
interroger le contenu de cette table. Les fichiers des applications
et leurs fichiers de configurations peuvent Ãªtre chargÃ©s dans le
dossier <code class="docutils literal notranslate"><span class="pre">backend/static/mobile</span></code> (#852)</p></li>
<li><p>Ajout dâ€™un offset et dâ€™une limite sur la route de la couleur des
taxons (utilisÃ©e uniquement par Occtax-mobile actuellement)</p></li>
<li><p>Support des fonds de carte au format WMS
(<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>),
(#890 par &#64;jbdesbas)</p></li>
<li><p>Ajout dâ€™un champs texte <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code></p></li>
<li><p>AmÃ©lioration des perfomances du module de validation, en revoyant la
vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les
requÃªtes et en gÃ©nÃ©rant le GeoJSON au niveau de la BDD (#923)</p></li>
<li><p>Ajout dâ€™une fonction SQL dâ€™insertion de donnÃ©es dans la synthese
(et une fonction python associÃ©e)</p></li>
<li><p>ComplÃ©ments de la documentation (Permissions des utilisateurs,
Occhabâ€¦)</p></li>
<li><p>Ajout de scripts de migration des donnÃ©es de GINCO1 vers GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco</span></code>)</p></li>
<li><p>Trigger Occtax vers SynthÃ¨se : AmÃ©lioration du formatage des heures
avec <code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code> dans la fonction
<code class="docutils literal notranslate"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</p></li>
<li><p>Barre de navigation : Clarification de lâ€™icÃ´ne dâ€™ouverture du
menu, ajout dâ€™un paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de
changer le nom du fichier du logo de lâ€™application (#897
par &#64;jbrieuclp)</p></li>
<li><p>MÃ©dias : AmÃ©lioration des fonctions backend</p></li>
<li><p>Mise Ã  jour de jQuery en version 3.5.0</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code>
et du trigger sur la SynthÃ¨se qui la remplissait pour utiliser la
vue matÃ©rialisÃ©e <code class="docutils literal notranslate"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant
les noms de recherche de tous les taxons de Taxref, entiÃ¨rement
revue dans TaxHub 1.7.0</p></li>
<li><p>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe
de jointure des tables</p></li>
<li><p>Ajout de fonctions SQL dâ€™insertion de donnÃ©es dans la SynthÃ¨se
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row()</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python
associÃ©e
(<code class="docutils literal notranslate"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>)
pour lâ€™API permettant de poster dans la SynthÃ¨se (#736). UtilisÃ©e
par le module Monitoring.</p></li>
<li><p>Ajout du plugin Leaflet.Deflate (#934 par &#64;jpm-cbna)</p></li>
<li><p>Connexion au CAS INPN : Association des JDD aux modules Occtax et
Occhab (paramÃ©trable) quand on importe les JDD de lâ€™utilisateur qui
se connecte (dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.cor_module_dataset</span></code>)</p></li>
<li><p>Mise Ã  jour des librairies Python Utils-Flask-SQLAlchemy (en version
0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant
de mettre en place les exports au format GeoPackage et corrigeant
les exports de SHP contenant des gÃ©omÃ©tries multiples</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour des URL de la documentation utilisateur des modules,
renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Validation : Correction de lâ€™ouverture de la fiche dâ€™information
dâ€™une observation (#858)</p></li>
<li><p>Modification de lâ€™attribution de la hauteur du composant
<code class="docutils literal notranslate"><span class="pre">map-container</span></code> pour permettre dâ€™adapter la hauteur de la carte si
la hauteur dâ€™un conteneur parent est modifiÃ©. Et que
<code class="docutils literal notranslate"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</p></li>
<li><p>Mise Ã  jour de la librairie python Markupsafe en version 1.1,
corrigeant un problÃ¨me de setuptools (#881)</p></li>
<li><p>Page Maintenance : Correction de lâ€™affichage de lâ€™image
(par &#64;jpm-cbna)</p></li>
<li><p>Correction du multiselect du composant <code class="docutils literal notranslate"><span class="pre">pnx-nomenclatures</span></code> (#885
par &#64;jpm-cbna)</p></li>
<li><p>Correction de lâ€™<code class="docutils literal notranslate"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> (#901
par &#64;jbrieuclp)</p></li>
<li><p>Utilisation de NVM quand on installe les dÃ©pendances javascript
(#926 par &#64;jpm-cbna)</p></li>
<li><p>Formulaire JDD : Correction de lâ€™affichage de la liste des modules
(#861)</p></li>
<li><p>Correction de lâ€™utilisation des paramÃ¨tres du proxy (#944)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Si vous mettez Ã  jour GeoNature.</p>
<ul>
<li><p>Vous devez dâ€™abord mettre Ã  jour TaxHub en version 1.7.0</p></li>
<li><p>Si vous mettez Ã  jour TaxHub, vous pouvez mettre Ã  jour Taxref en
version 13. Il est aussi possible de le faire en diffÃ©rÃ©, plus tard</p></li>
<li><p>Vous pouvez mettre Ã  jour UsersHub en version 2.1.2</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</p></li>
<li><p>Si vous avez mis Ã  jour Taxref en version 13, rÃ©percutez les
Ã©volutions au niveau des nomenclatures avec le script SQL
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>.
Sinon vous devrez lâ€™exÃ©cuter plus tard, aprÃ¨s avoir mis Ã  jour
Taxref en version 13. AprÃ¨s avoir mis Ã  jour Taxref en version 13,
pensez Ã  mettre Ã  jour le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code>.</p></li>
<li><p>ExÃ©cuter le script SQL de mise Ã  jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</p></li>
<li><p>Installer les dÃ©pendances de la librairie Python WeasyPrint :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libcairo2
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpango-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpangocairo-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libgdk-pixbuf2.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libffi-dev
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>shared-mime-info
</pre></div>
</div>
</li>
<li><p>Corriger lâ€™utilisation des paramÃ¨tres du proxy (#944) dans le
fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh</span></code> en remplaÃ§ant les 2 lignes :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_http</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_https</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Vous pouvez supprimer les associations des observations de la
synthÃ¨se aux zonages limitrophes, si vous nâ€™avez pas
dâ€™observations sans gÃ©omÃ©trie (#719) :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">cor_area_synthese</span><span class="w"> </span><span class="n">cas</span>
<span class="k">USING</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">synthese</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">ref_geo</span><span class="p">.</span><span class="n">l_areas</span><span class="w"> </span><span class="n">a</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_area</span>
<span class="k">AND</span><span class="w"> </span><span class="k">public</span><span class="p">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="id30">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id30" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de charger les commandes dâ€™un module dans les commandes
de GeoNature</p></li>
<li><p>Ajout de commentaires dans le fichier dâ€™exemple de configuration
<code class="docutils literal notranslate"><span class="pre">config/default_config.toml.example</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™une incohÃ©rence dans le dÃ©compte des JDD sur la page
dâ€™accueil en leur appliquant le CRUVED (#752)</p></li>
<li><p>MontÃ©e de version de la librairie <code class="docutils literal notranslate"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour
compatibilitÃ© avec la version 1.0.0 du module dâ€™export</p></li>
</ul>
</section>
<section id="id31">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id31" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Installation globale : CompatibilitÃ© Debian 10 (PostgreSQL 11,
PostGIS 2.5)</p></li>
<li><p>Installation globale : Passage Ã  Taxhub 1.6.4 et UsersHub 2.1.1</p></li>
<li><p>Utilisation gÃ©nÃ©ralisÃ©e des nouvelles librairies externalisÃ©es de
sÃ©rialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</p></li>
<li><p>PossibilitÃ© de rÃ©gler le timeout de Gunicorn pour Ã©viter le plantage
lors de requÃªtes longues</p></li>
<li><p>Ne pas zoomer sur les observations au premier chargement de la carte
(#838)</p></li>
<li><p>Leaflet-draw : Ajout de la possibilitÃ© de zoomer sur le point
(par &#64;joelclems)</p></li>
<li><p>Ajout du nom vernaculaire dans les fiches dâ€™information des relevÃ©s
dâ€™Occtax (par &#64;FloVollmer / #826)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™installation de Node.js et npm par lâ€™utilisation
gÃ©nÃ©ralisÃ©e de nvm (#832 et #837)</p></li>
<li><p>Fixation de la version de Node.js en 10.15.3 (dans le fichier
<code class="docutils literal notranslate"><span class="pre">fronted/.nvmrc</span></code>)</p></li>
<li><p>Ajout dâ€™une rÃ©fÃ©rence de lâ€™objet Leaflet <code class="docutils literal notranslate"><span class="pre">L</span></code> afin quâ€™il soit
utilisÃ© dans les modules et changement du typage de lâ€™Ã©venement
Leaflet <code class="docutils literal notranslate"><span class="pre">MouseEvent</span></code> en <code class="docutils literal notranslate"><span class="pre">L.LeafletMouseEvent</span></code></p></li>
<li><p>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</p></li>
<li><p>Corrections de typos dans la documentation dâ€™administration
(#840 - par &#64;sogalgeeko)</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version depuis la 2.2.x, mais
en suivant les notes des versions intermÃ©diaires (NB : il nâ€™est pas
nÃ©cessaire dâ€™exÃ©cuter le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> des versions
prÃ©cÃ©dentes)</p></li>
<li><p>Installez <code class="docutils literal notranslate"><span class="pre">pip3</span></code> et <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install python3-pip
sudo pip3 install virtualenv==20.0.1
</pre></div>
</div>
</li>
<li><p>Rajoutez la ligne <code class="docutils literal notranslate"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>
puis rechargez supervisor (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code>). Il sâ€™agit
du temps maximal (en seconde) autorisÃ© pour chaque requÃªte. A
augmenter, si vous avez dÃ©jÃ  rencontrÃ© des problÃ¨mes de timeout.</p></li>
<li><p>Depuis le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal notranslate"><span class="pre">nvm</span> <span class="pre">install</span></code></p></li>
</ul>
</section>
<section id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de NoÃ«l (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement du module Occhab (Occurrences dâ€™habitats) basÃ© sur
une version minimale du standard SINP du mÃªme nom et sâ€™appuyant sur
le rÃ©fÃ©rentiel Habref du SINP (#735)</p>
<ul>
<li><p>Consultation (carte-liste) des stations et affichage de leurs
habitats</p></li>
<li><p>Recherche (et export) des stations par jeu de donnÃ©es, habitats
ou dates</p></li>
<li><p>Saisie dâ€™une station et de ses habitats</p></li>
<li><p>PossibilitÃ© de saisir plusieurs habitats par station</p></li>
<li><p>Saisie des habitats basÃ©e sur une liste prÃ©-dÃ©finie Ã  partir
dâ€™Habref. PossibilitÃ© dâ€™intÃ©grer toutes les typologies
dâ€™habitat ou de faire des listes rÃ©duites dâ€™habitats</p></li>
<li><p>PossibilitÃ© de charger un fichier GeoJson, KML ou GPX sur la
carte et dâ€™utiliser un de ses objets comme gÃ©omÃ©trie de station</p></li>
<li><p>Mise en place dâ€™une API Occhab (Get, Post, Delete, Export
stations et habitats et rÃ©cupÃ©rer les valeurs par dÃ©faut des
nomenclatures)</p></li>
<li><p>Calcul automatique des altitudes (min/max) et de la surface
dâ€™une station</p></li>
<li><p>Gestion des droits (en fonction du CRUVED de lâ€™utilisateur
connectÃ©)</p></li>
<li><p>DÃ©finition des valeurs par dÃ©faut dans la BDD (paramÃ©trable par
organisme)</p></li>
<li><p>PossibilitÃ© de masquer des champs du formulaire</p></li>
</ul>
</li>
<li><p>CrÃ©ation dâ€™un sous-module autonome ou intÃ©grÃ© pour gÃ©rer lâ€™API
dâ€™Habref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :</p>
<ul>
<li><p>Rechercher un habitat dans Habref (avec usage du trigramme pour
la pertinence du rÃ©sultat)</p></li>
<li><p>Obtenir les infos dâ€™un habitat et de ses correspondances Ã 
partir de son cd_hab</p></li>
<li><p>Obtenir les habitats dâ€™une liste (avec ou sans leur code en
plus de leur nom et filtrable par typologie)</p></li>
<li><p>Obtenir la liste des typologies (filtrable par liste
dâ€™habitats)</p></li>
</ul>
</li>
<li><p>Mise Ã  jour du module des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version
1.3.2 incluant notamment :</p>
<ul>
<li><p>Ajout de nomenclatures SINP concernant les habitats</p></li>
<li><p>Ajout dâ€™une contrainte dâ€™unicitÃ© sur la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal notranslate"><span class="pre">t_nomenclatures</span></code></p></li>
</ul>
</li>
<li><p>Association des JDD Ã  des modules pour filtrer les JDD utilisÃ©s dans
Occtax ou dans Occhab notamment (#399)</p></li>
<li><p>Mise Ã  jour de Angular 4 Ã  Angular 7 (performances, â€¦.) par
&#64;jbrieuclp</p></li>
<li><p>Ajout dâ€™une documentation utilisateur pour le module SynthÃ¨se :
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>
(par &#64;amandine-sahl)</p></li>
<li><p>OCCTAX : AmÃ©lioration importante des performances de la liste des
relevÃ©s (par &#64;jbrieuclp) (#690, #740)</p></li>
<li><p>AmÃ©liorations des performances des exports de Occtax et de SynthÃ¨se
et ajout dâ€™index dans Occtax (par &#64;gildeluermoz) (#560)</p></li>
<li><p>Partage de scripts de sauvegarde de lâ€™application et de la BDD dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</p></li>
<li><p>Externalisation des librairies dâ€™outils Flask et SQLAlchemy
(<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir
les factoriser et les utiliser dans dâ€™autres applications. Cela
amÃ©liore aussi les performances des jointures.</p></li>
<li><p>SYNTHESE : Ajout dâ€™un export de la liste des espÃ¨ces (#805)</p></li>
<li><p>SYNTHESE : Baser la portÃ©e de tous les exports (y compris Statuts)
sur lâ€™action E (#804)</p></li>
<li><p>METADONNEES : Affichage des ID des JDD et CA</p></li>
<li><p>OCCTAX : Conserver le fichier GPX ou GeoJSON chargÃ© sur la carte
quand on enchaine des relevÃ©s et ajouter de la transparence sur les
gÃ©omÃ©tries utilisÃ©s dans les relevÃ©s prÃ©cÃ©dents (#813)</p></li>
<li><p>OCCTAX : Clarification de lâ€™ergonomie pour ajouter un dÃ©nombrement
sur un taxon (#780)</p></li>
<li><p>Ajout des dates de creation et de modification dans les tables
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> et
triggers pour les calculer automatiquement</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">geom_local</span></code>, <code class="docutils literal notranslate"><span class="pre">altitude_min</span></code> et <code class="docutils literal notranslate"><span class="pre">altitude_max</span></code> dans
la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer
automatiquement (#812)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">id_module</span></code>,
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal notranslate"><span class="pre">id_nomenclature_grp_typ</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</p></li>
<li><p>Le composant gÃ©nÃ©rique FileLayer expose un <code class="docutils literal notranslate"><span class="pre">output</span></code> pour rÃ©cuperer
la gÃ©omÃ©trie sÃ©lectionnÃ©e (un observable de MapService Ã©tait utilisÃ©
auparavant)</p></li>
<li><p>Support des markers sur le composant <code class="docutils literal notranslate"><span class="pre">leaflet-draw</span></code></p></li>
<li><p>PossibilitÃ© de ne pas activer le composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> au lancement
lorsque celui-ci est utilisÃ© (input <code class="docutils literal notranslate"><span class="pre">defaultEnable</span></code>)</p></li>
<li><p>Ajout dâ€™inputs <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">medias</span></code> et <code class="docutils literal notranslate"><span class="pre">datalist</span></code> au
composant DynamicForm permettant de gÃ©nÃ©rer des formulaires
dynamiques.</p></li>
<li><p>AmÃ©liorations diverses du composant DynamicForm (par &#64;joelclems)</p></li>
<li><p>Ajout dâ€™un paramÃ¨tre dans le cas oÃ¹ le serveur se trouve derriÃ¨re
un proxy (<code class="docutils literal notranslate"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal notranslate"><span class="pre">proxy_https</span></code> dans
<code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>)</p></li>
<li><p>Ajout dâ€™une route permettant de rÃ©cupÃ©rer la liste des rÃ´les dâ€™une
liste Ã  partir de son code (par &#64;joelclems)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>MENU Side nav : Correction pour ne pas afficher les modules pour
lesquels le paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">active_frontend</span></code> est False (#822)</p></li>
<li><p>OCCTAX : Gestion de lâ€™Ã©dition des occurrences oÃ¹ le JDD a Ã©tÃ©
dÃ©sactivÃ©, en ne permettant pas de modifier le JDD (#694)</p></li>
<li><p>OCCTAX : Correction dâ€™une faiblesse lors de la rÃ©cupÃ©ration des
informations taxonomiques dâ€™un relevÃ© (utilisation dâ€™une jointure
plutÃ´t que lâ€™API TaxHub) (#751)</p></li>
<li><p>OCCTAX : Correction des longues listes de taxons dans les tooltip
des relevÃ©s en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</p></li>
<li><p>OCCTAX : Masquer le bouton <code class="docutils literal notranslate"><span class="pre">TÃ©lÃ©charger</span></code> si lâ€™utilisateur nâ€™a pas
de droits dâ€™export dans le module (E = 0)</p></li>
<li><p>OCCTAX : Correction de lâ€™affichage des relevÃ©s dans la liste
(#777)</p></li>
<li><p>OCCTAX : Correction des exports quand on filtre sur un obervateur en
texte</p></li>
<li><p>SYNTHESE : Filtre sur <code class="docutils literal notranslate"><span class="pre">date_max</span></code> en prenant <code class="docutils literal notranslate"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code>
pour prendre en compte les observations avec un horaire (#778)</p></li>
<li><p>SYNTHESE : Correction des boutons radios pour les filtres
taxonomiques avancÃ©s basÃ©s sur les attributs TaxHub (#763)</p></li>
<li><p>SYNTHESE : Correction de la recherche par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> dans le composant
<code class="docutils literal notranslate"><span class="pre">SearchTaxon</span></code> (#824)</p></li>
<li><p>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</p></li>
<li><p>INSCRIPTION : Correction si aucun champ additionnel nâ€™a Ã©tÃ© ajoutÃ©
au formulaire (par &#64;jbrieuclp) (#746)</p></li>
<li><p>INSCRIPTION : Correction de lâ€™usage des paramÃ¨tres <code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code>
et <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</p></li>
<li><p>Simplification de lâ€™Ã©criture des logs dans le script
<code class="docutils literal notranslate"><span class="pre">install_db.sh</span></code></p></li>
<li><p>Correction de lâ€™installation des requirements.txt lors de
lâ€™installation dâ€™un module (#764 par &#64;joelclems)</p></li>
<li><p>COMMONS : Modification des champs de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> de type
CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal notranslate"><span class="pre">module_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">module_target</span></code>, <code class="docutils literal notranslate"><span class="pre">module_external_url</span></code>) (#799)</p></li>
<li><p>COMMONS : Ajout de contraintes dâ€™unicitÃ© pour les champs
<code class="docutils literal notranslate"><span class="pre">module_path</span></code> et <code class="docutils literal notranslate"><span class="pre">module_code</span></code> de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code></p></li>
<li><p>pnx-geojson : AmÃ©lioration du zoom, gestion des styles</p></li>
<li><p>Migration des donnÃ©es GeoNature V1 vers V2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>NB: La version 2.3.0 nâ€™est pas compatible avec le module Dashboard. Si
vous avez le module Dashboard installÃ©, ne passez pas Ã  cette nouvelle
version. CompatibilitÃ© dans la 2.3.1.</p>
<ul>
<li><p>Lancer le script de migration qui va installer et remplir le nouveau
schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_habitats</span></code> avec Habref et mettre Ã  jour le schÃ©ma
<code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/install/migration
chmod<span class="w"> </span>+x<span class="w"> </span><span class="m">2</span>.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
</li>
</ul>
<p>VÃ©rifier que la migration sâ€™est bien dÃ©roulÃ©e dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul>
<li><p>Lancer le script SQL de mise Ã  jour de la BDD de GeoNature
<a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></p></li>
<li><p>Vous pouvez installer le nouveau module Occhab (Occurrences
dâ€™habitats) si vous le souhaitez :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/backend
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
geonature<span class="w"> </span>install_gn_module<span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/contrib/gn_module_occhab<span class="w"> </span>/occhab
deactivate
</pre></div>
</div>
</li>
<li><p>Lors de la migration (<code class="docutils literal notranslate"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les
JDD actifs sont associÃ©s par dÃ©faut au module Occtax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>).
A chacun dâ€™adapter si besoin, en en retirant certains. Pour
utiliser le module Occhab, vous devez y associer au moins un JDD.</p></li>
</ul>
</section>
<section id="id32">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id32" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>La route de changement de mot de passe Ã©tait dÃ©sactivÃ©e par le
mauvais paramÃ¨tre (<code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de
<code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</p></li>
<li><p>DÃ©sactivation du mode Â«Â enchainement des relevÃ©sÂ Â» en mode Ã©dition
(#669). Correction effacement du mÃªme relevÃ© (#744)</p></li>
<li><p>Correction dâ€™affichage du module mÃ©tadonnÃ©es lorsque les AF nâ€™ont
pas de JDD pour des raisons de droit (#743)</p></li>
<li><p>Diverses corrections de doublons dâ€™import et de logs de dÃ©bugs
(#742)</p></li>
<li><p>MontÃ©e de version du sous-module dâ€™authentification: 1.4.2</p></li>
</ul>
</section>
<section id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™interfaces et de paramÃ¨tres de crÃ©ation de compte, de
rÃ©cupÃ©ration de son mot de passe et dâ€™administration de son profil,
basÃ© sur lâ€™API UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia)
#615</p></li>
<li><p>Ajout dâ€™une fonctionnalitÃ© de crÃ©ation automatique dâ€™un CA et
dâ€™un JDD personnel lors de la validation dâ€™un compte crÃ©Ã©
automatiquement (paramÃ©trable)</p></li>
<li><p>AmÃ©lioration du composant de crÃ©ation dynamique de formulaire
(support de text-area, checkbox simple et multiple et exemple
dâ€™utilisation Ã  partir de la conf GeoNature)</p></li>
<li><p>Le composant â€™observateurâ€™ permet de rechercher sur le nom ou le
prÃ©nom (utilisation des RegEx) #567</p></li>
<li><p>Mise Ã  jour de Flask en version 1.1.1</p></li>
<li><p>Nouvelle version du sous-module dâ€™authentification (1.4.1),
compatible avec UsersHub 2.1.0</p></li>
<li><p>Mise Ã  jour du sous-module de nomenclatures (version 1.3.0)</p></li>
<li><p>Mise Ã  jour et clarification du MCD
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par
&#64;jpm-cbna</p></li>
<li><p>Ajout dâ€™une tutoriel vidÃ©o dâ€™installation dans la documentation
(<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Correction dâ€™un bug sur les export CSV en utilisant la librairie
Python standard <code class="docutils literal notranslate"><span class="pre">csv</span></code> (#733)</p></li>
<li><p>SYNTHESE API : Passage de la route principale de rÃ©cupÃ©ration des
donnÃ©es en POST plutÃ´t quâ€™en GET (#704)</p></li>
<li><p>SYNTHESE BDD : Suppression automatique des aires intersectÃ©es
(<code class="docutils literal notranslate"><span class="pre">synthese.cor_area_synthese</span></code>) lorsquâ€™une observation est supprimÃ©e
(DELETE CASCADE)</p></li>
<li><p>SYNTHESE : Prise en compte du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code>
(#707)</p></li>
<li><p>OCCTAX : Correction dâ€™une autocomplÃ©tion automatique erronÃ©e de la
date max en mode Ã©dition (#706)</p></li>
<li><p>VALIDATION : AmÃ©liorations des performances, par &#64;jbrieuclp (#710)</p></li>
<li><p>Prise en compte des sous-taxons pour le calcul des rÃ¨gles de
sensibilitÃ©</p></li>
<li><p>Correction des contraintes CHECK sur les tables liÃ©es Ã  la
sensibilitÃ©</p></li>
<li><p>ComplÃ©ment et correction des scripts de migration
<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
<li><p>Correction et clarification de la documentation dâ€™administration
des listes de taxons et de sauvegarde et restauration de la BDD
(par &#64;lpofredc)</p></li>
<li><p>Correction de la rotation des logs</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer le script de migration suivant:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous souhaitez activer les fonctionnalitÃ©s de crÃ©ation de compte,
veuillez lire <strong>attentivement</strong> cette documentation :
<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></p></li>
<li><p>Si vous activez la crÃ©ation de compte, UsersHub 2.1.0 doit Ãªtre
installÃ©. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de
version</a>.</p></li>
</ul>
</section>
<section id="id33">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id33" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>SYNTHESE : Correction dâ€™une URL en dur pour la recherche de rangs
taxonomiques</p></li>
<li><p>OCCTAX : Affichage uniquement des JDD actifs</p></li>
<li><p>VALIDATION : Abaissement de la limite dâ€™affichage de donnÃ©es sur la
carte par dÃ©faut + message indicatif</p></li>
<li><p>Migration : Suppression dâ€™un lien symbolique qui crÃ©ait des liens
en cascade</p></li>
<li><p>AmÃ©lioration de la documentation (&#64;dthonon)</p></li>
<li><p>AmÃ©lioration de la rapiditÃ© dâ€™installation du MNT grÃ¢ce Ã  la
suppression dâ€™un paramÃ¨tre inutile</p></li>
<li><p>BACKOFFICE : Correction dâ€™une URL incorrecte et customisation</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0,
passez directement Ã  cette version en suivant les notes de version de la
2.1.1.</p>
</section>
<section id="id34">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id34" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SYNTHESE: Factorisation du formulaire de recherche (utilisÃ© dans le
module synthese et validation)</p></li>
<li><p>SYNTHESE: Simplification et correction du module de recherche
avancÃ©e dâ€™un taxon en le limitant Ã  lâ€™ordre (performances)</p></li>
<li><p>SYNTHESE: Ajout dâ€™un composant de recherche taxonomique avancÃ© basÃ©
sur les rangs taxonomiques (modules synthese et validation), basÃ©
sur la nouvelle fonction <code class="docutils literal notranslate"><span class="pre">taxonomie.find_all_taxons_children</span></code>
ajoutÃ©e Ã  TaxHub</p></li>
<li><p>CrÃ©ation dâ€™un backoffice dâ€™admnistration dans le coeur de
GeoNature. BasÃ© sur Flask-admin, les modules peuvent alimenter
dynamiquement le backoffice avec leur configuration</p></li>
<li><p>Mise en place dâ€™une documentation dÃ©veloppeur automatique de lâ€™API
Ã  partir des docstring et des composants frontend, gÃ©nÃ©rÃ©e par
Travis et dÃ©sormais accessible Ã  lâ€™adresse
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</p></li>
<li><p>AmÃ©lioration de la documentation (triggers, installation, module
validation)</p></li>
<li><p>Suppression du module dâ€™exemple, remplacÃ© par un template de module
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</p></li>
<li><p>Ajout dâ€™un champ <code class="docutils literal notranslate"><span class="pre">validable</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code>
controlant les donnÃ©es prÃ©sentes dans le module VALIDATION
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</p></li>
<li><p>VALIDATION: Lister toutes les donnÃ©es de la synthÃ¨se ayant un
<code class="docutils literal notranslate"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui
ont un enregistrement dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code></p></li>
<li><p>VALIDATION: On ne liste plus les <code class="docutils literal notranslate"><span class="pre">id_nomenclatures</span></code> des types de
validation Ã  utiliser, dans la configuration du module. Mais on
utilise toutes les nomenclatures activÃ©es du type de nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_VALID</span></code>.
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</p></li>
<li><p>Ajout de tests sur les ajouts de JDD et CA</p></li>
<li><p>Ajout dâ€™une fonctionnalitÃ© dâ€™envoie dâ€™email via Flask-Mail dans
le coeur de GeoNature</p></li>
<li><p>AmÃ©lioration des performances: ajout dâ€™index sur Occtax et
MetadonnÃ©es</p></li>
<li><p>Script dâ€™import des mÃ©tadonnÃ©es Ã  partir du webservice MTD de
lâ€™INPN (&#64;DonovanMaillard)</p></li>
<li><p>ComplÃ©ment, correction et compatibilitÃ© 2.1.0 des scripts de
migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Nombreuses corrections du module de validation (non utilisation des
id_nomenclature, simplification des vues et de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code>)</p></li>
<li><p>Ordonnancement de listes dÃ©roulantes (#685)</p></li>
<li><p>OCCTAX : correction de lâ€™Ã©dition dâ€™un relevÃ© Ã  la gÃ©omÃ©trie de
type Polyline (#684)</p></li>
<li><p>OCCTAX : correction lâ€™Ã©dition et du contrÃ´le conditionnel des
champs de Â«Â preuvesÂ Â» (preuve dâ€™existence numÃ©rique / non
numÃ©rique) (#679)</p></li>
<li><p>OCCTAX : correction du parametre <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en
compte (#670)</p></li>
<li><p>OCCTAX: correction de la date_max non remplie lorsque
<code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></p></li>
<li><p>OCCTAX: correction dâ€™un bug lors de lâ€™enchainement de relevÃ©
lorsque lâ€™heure est remplie</p></li>
<li><p>SYNTHESE: correction des doublons lorsquâ€™il y a plusieurs
observateurs</p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> sur les champs de recherche de
type texte (recherche sur Preuve numÃ©rique) (#530)</p></li>
<li><p>DÃ©sactivation du mode Â«Â enchainer les relevÃ©sÂ Â» en mode Ã©dition
(#699)</p></li>
<li><p>Correction de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> Ã  la
place de <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de
suivi Ã  des modules</p></li>
<li><p>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</p></li>
<li><p>Le trigger remplissant <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> en intersectant
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les
zonages ayant le champs <code class="docutils literal notranslate"><span class="pre">enabled=true</span></code></p></li>
<li><p>Correction <code class="docutils literal notranslate"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</p></li>
<li><p>MAJ de sÃ©curitÃ© de Bootstrap (en version 4.3.1)</p></li>
<li><p>Lâ€™ancien module export du coeur est enlevÃ© en vue de la sortie du
nouveau module export</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer TaxHub en version 1.6.3
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</p></li>
<li><p>Passer le script de migration <code class="docutils literal notranslate"><span class="pre">data/2.1.0to2.1.1.sql</span></code></p></li>
<li><p>Si vous aviez modifier les <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> dans la surcouche de la
configuration du module validation, supprimer les car on se base
maintenant sur les <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code></p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</section>
<section id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>IntÃ©gration du module Validation dans GeoNature (dÃ©veloppÃ© par
&#64;JulienCorny, financÃ© par &#64;sig-pnrnm)</p></li>
<li><p>Ajout de tables, rÃ¨gles et fonctions permettant de calculer la
sensibilitÃ© des occurrences de taxon de la synthÃ¨se (#284)</p></li>
<li><p>Occtax - PossibilitÃ© dâ€™enchainer les saisies de relevÃ©s et de
garder les informations du relevÃ© (#633)</p></li>
<li><p>Occtax - AmÃ©lioration de lâ€™ergonomie de lâ€™interface MapList pour
clarifier la recherche et lâ€™ajout dâ€™un relevÃ© + ajout compteur
(#467)</p></li>
<li><p>RÃ©vision de lâ€™interface du module MÃ©tadonnÃ©es, listant les cadres
dâ€™acquisition et leurs jeux de donnÃ©es (par &#64;jbrieuclp)</p></li>
<li><p>Ajout dâ€™un mÃ©canisme du calcul des taxons observÃ©s par zonage
gÃ©ographique (#617)</p></li>
<li><p>Les mailles INPN (1, 5, 10km) sont intÃ©grÃ©es Ã  lâ€™installation (avec
un paramÃ¨tre)</p></li>
<li><p>Statistiques de la page dâ€™accueil - Ajout dâ€™un paramÃ¨tre
permettant de les dÃ©sactiver (#599)</p></li>
<li><p>Occtax - Date par dÃ©faut paramÃ©trable (#351)</p></li>
<li><p>Support des gÃ©ometries multiples (MultiPoint, MultiPolygone,
MultiLigne) dans la synthÃ¨se et Occtax (#609)</p></li>
<li><p>Synthese - Affichage des zonages intersectÃ©s dans un onglet sÃ©parÃ©
(#579)</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>RÃ©vision complÃ¨te des scripts de migration de GeoNature v1 Ã  v2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code>)</p></li>
<li><p>Masquer lâ€™export du module SynthÃ¨se si son CRUVED est dÃ©fini Ã  0
(#608)</p></li>
<li><p>Correction de la vÃ©rification du CRUVED du module METADONNEES
(#601)</p></li>
<li><p>Correction de la vÃ©rification du CRUVED lorsque get_role = False</p></li>
<li><p>Correction de la traduction sur la page de connexion
(par &#64;jbrieuclp)</p></li>
<li><p>Occtax - Retour du composant GPS permettant de charger un marker Ã 
partir de coordonnÃ©es X et Y (#624)</p></li>
<li><p>Correction lors dâ€™import de fichier GPX ayant une altitude (#631)</p></li>
<li><p>Occtax - Correction du filtre Observateur texte libre (#598)</p></li>
<li><p>MÃ©tadonnÃ©es - Inversion des domaines terrestre/marin
(par &#64;xavyeah39)</p></li>
<li><p>MÃ©tadonnÃ©es - Correction de lâ€™Ã©dition des cadres dâ€™acquisition
(#654, par &#64;DonovanMaillard)</p></li>
<li><p>Mise Ã  jour de sÃ©curitÃ© de Jinja2 et SQLAlchemy</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Lancer le script de migration de la base de donnÃ©es :</p>
<p>Cette nouvelle version de GeoNature intÃ¨gre les mailles INPN (1, 5,
10km) dans le rÃ©ferentiel gÃ©ographique. Si vous ne souhaitez pas les
installer, lancer le script ci dessous en passant le paramÃ¨tre
<code class="docutils literal notranslate"><span class="pre">no-grid</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p>Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande dâ€™installation du module puis sortir du
virtualenv</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id35">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id35" title="Link to this heading">ïƒ</a></h2>
<p><strong>ğŸš€ NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement : ajout dâ€™une fonction de gÃ©nÃ©ration dynamique de
requÃªte SQL (avec vÃ©rification et cast des types)</p></li>
<li><p>Synthese : Ajout dâ€™un message indiquant que le module affiche les
derniÃ¨res observations par dÃ©faut</p></li>
</ul>
<p><strong>ğŸ› Corrections</strong></p>
<ul class="simple">
<li><p>Synthese : correction du filtre CRUVED pour les portÃ©es 1 et 2 sur
la route <code class="docutils literal notranslate"><span class="pre">synthese/for_web</span></code> (#584)</p></li>
<li><p>Synthese : correction du bug lorsque la gÃ©omÃ©trie est null (#580)</p></li>
<li><p>Synthese : Correction de la redirection vers le module de saisie
(#586)</p></li>
<li><p>Synthese : Correction de la valeur par dÃ©faut de la nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal notranslate"><span class="pre">PrÃ©sent</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">NSP</span></code>)</p></li>
<li><p>Configuration carto : correction du bug dâ€™arrondissement des
coordonnÃ©es gÃ©ographiques (#582)</p></li>
<li><p>Correction du trigger de calcul de la geom locale</p></li>
<li><p>RecrÃ©ation de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait Ã©tÃ©
supprimÃ©e lors de la migration RC3 vers RC4</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_releve_list</span></code></p></li>
<li><p>Correction ajout rang et cd_nom sur lâ€™autocomplete de la synthese,
absent dans le script de migration</p></li>
<li><p>DEPOBIO : Correction de la dÃ©connexion au CAS INPN</p></li>
<li><p>Occtax et Metadata: correction lors de la mise Ã  jour dâ€™un Ã©lement
(Merge mal gÃ©rÃ© par SQLAlchemy lorsquâ€™on nâ€™a pas une valeur NULL)
(#588)</p></li>
<li><p>Composant Â«Â jeu de donnÃ©esÂ Â» : retour Ã  lâ€™affichage du nom long
(#583)</p></li>
<li><p>AmÃ©lioration du style du composant multiselect</p></li>
<li><p>Metadata : formulaire cadre dâ€™acquisition - listage uniquement des
cadres dâ€™acquisition parent pour ne pas avoir de cadres
dâ€™acquisition imbriquÃ©s</p></li>
<li><p>Ajouts de tests automatisÃ©s complÃ©mentaires</p></li>
</ul>
<p><strong>âš ï¸ Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cuter le script de migration SQL du sous-module Nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</p></li>
<li><p>ExÃ©cuter le script de migration SQL de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Link to this heading">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã 
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standardisÃ©e, plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<p>Pour plus de dÃ©tails sur les Ã©volutions apportÃ©es dans la version 2,
consultez les dÃ©tails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>PossibilitÃ© de charger un fichier (GPX, GeoJson ou KML) sur la carte
pour la saisie dans le module Occtax (#256)</p></li>
<li><p>Ajout dâ€™un moteur de recherche de lieu (basÃ© sur lâ€™API
OpenStreetMap Nominatim) sur les modules cartographiques (#476)</p></li>
<li><p>IntÃ©gration du plugin leaflet markerCluster permettant dâ€™afficher
dâ€™avantage dâ€™observations sur les cartes et de gÃ©rer leurs
superposition (#559)</p></li>
<li><p>SynthÃ¨se : possibilitÃ© de grouper plusieurs types de zonages dans le
composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Design de la page de login</p></li>
<li><p>IntÃ©gration dâ€™un bloc stat sur la page dâ€™accueil</p></li>
<li><p>Ajout dâ€™un export des mÃ©tadonnÃ©es dans la synthÃ¨se</p></li>
<li><p>Centralisation de la configuration cartographique dans la
configuration globale de GeoNature (<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>)</p></li>
<li><p>Cartographie : zoom sur lâ€™emprise des rÃ©sultats aprÃ¨s une recherche</p></li>
<li><p>Migration de la gestion des mÃ©tadonnÃ©es dans un module Ã  part :
â€™METADATAâ€™ (#550)</p></li>
<li><p>Export vue synthÃ¨se customisable (voir doc)</p></li>
<li><p>Lien vers doc par module (customisables dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>)
(#556)</p></li>
<li><p>Ajout du code du dÃ©partement dans les filtres par commune (#555)</p></li>
<li><p>Ajout du rang taxonomique et du cd_nom aprÃ¨s les noms de taxons
dans la recherche taxonomique (#549)</p></li>
<li><p>Mise Ã  jour des communes fournies lors de lâ€™installation (IGN admin
express 2019) (#537)</p></li>
<li><p>SynthÃ¨se : Ajout du filtre par organisme (#531), affichage des
acteurs dans les fiches dÃ©tail et les exports</p></li>
<li><p>Synthese: possibilitÃ© de filtrer dans les listes dÃ©roulantes des
jeux de donnÃ©es et cadres dâ€™acquisition</p></li>
<li><p>Filtre de la recherche taxonomique par rÃ¨gne et groupe INPN retirÃ©
des formulaires de recherche (#531)</p></li>
<li><p>Suppression du champ validation dans le schÃ©ma de BDD Occtax car
cette information est stockÃ©e dans la table verticale
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans
les fiches Occtax et SynthÃ¨se</p></li>
<li><p>Ajout dâ€™une vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la
rÃ©cupÃ©ration du dernier statut de validation dâ€™une observation</p></li>
<li><p>Suppression de toutes les rÃ©fÃ©rences Ã  <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code> en vue
de le supprimer de TaxHub</p></li>
<li><p>SÃ©paration des commentaires sur lâ€™observation et sur le contexte
(relevÃ©) dans la SynthÃ¨se et simplification des triggers de Occtax
vers SynthÃ¨se (#478)</p></li>
<li><p>Nouveau logo GeoNature (#346)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>AmÃ©liorations importantes des performances de la synthÃ¨se (#560)</p></li>
<li><p>SynthÃ¨se : correction liÃ©e aux filtres multiples et aux filtres
gÃ©ographiques de type cercle</p></li>
<li><p>Ajout dâ€™une contrainte <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre
<code class="docutils literal notranslate"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#554)</p></li>
<li><p>Occtax : possibilitÃ© de saisir un dÃ©nombrement Ã©gal Ã  0 (cas des
occurrences dâ€™absence)</p></li>
<li><p>Occtax : retour Ã  lâ€™emprise cartographique prÃ©cÃ©dente lorsquâ€™on
enchaine les relevÃ©s (#570)</p></li>
<li><p>Occtax : correction de lâ€™automplissage du champ <code class="docutils literal notranslate"><span class="pre">hour_max</span></code> lors de
lâ€™Ã©dition dâ€™un relevÃ©</p></li>
<li><p>Divers complÃ©ments de la documentation (merci &#64;jbdesbas,
&#64;xavyeah39 et &#64;DonovanMaillard)</p></li>
<li><p>Ajout de contraintes dâ€™unicitÃ© sur les UUID_SINP pour empÃªcher les
doublons (#536)</p></li>
<li><p>Corrections et complÃ©ments des tests automatiques</p></li>
<li><p>AmÃ©lioration de lâ€™installation des modules GeoNature</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne sâ€™agit pas de mettre Ã  jour GeoNature mais dâ€™en installer une
nouvelle version. En effet, il sâ€™agit dâ€™une refonte complÃ¨te.</p>
<ul class="simple">
<li><p>Sauvegarder toutes ses donnÃ©es car lâ€™opÃ©ration est complexe et
non-automatisÃ©e</p></li>
<li><p>Passer Ã  la derniÃ¨re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Passer aux derniÃ¨res versions de UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complÃ¨te</p></li>
<li><p>Adaptez les scripts prÃ©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
exÃ©cutez-les pas Ã  pas. Attention ces scripts ont Ã©tÃ© faits pour la
version 2.0.0-rc.1 et sont donc Ã  ajuster, tester, complÃ©ter et
adapter Ã  votre contexte</p></li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la
migration.</p>
<ul class="simple">
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les
notes des versions intermÃ©diaires.</p></li>
<li><p>Les personnes ayant configurÃ© leur fichier <code class="docutils literal notranslate"><span class="pre">map.config.ts</span></code> devront
le rÃ©percuter dans <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, suite Ã  la
centralisation de la configuration cartographique (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section <code class="docutils literal notranslate"><span class="pre">[MAPCONFIG]</span></code>).</p></li>
<li><p>La configuration des exports du module synthÃ¨se a Ã©tÃ© modifiÃ©e (voir
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>). Supprimer la
variable<code class="docutils literal notranslate"><span class="pre">[SYNTHESE.EXPORT_COLUMNS]</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Voir lâ€™exemple dans le fichier (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section) pour configurer les exports.</p></li>
<li><p>Supprimer la variable <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a Ã©tÃ©
ajoutÃ©e dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>.</p></li>
<li><p>Pour simplifier son Ã©dition, le template personalisable de la page
dâ€™accueil
(<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>)
a Ã©tÃ© modifiÃ© (la carte des 100 derniÃ¨re observations nâ€™y figure
plus). Veuillez supprimer tout ce qui se situe Ã  partir de la ligne
21 (<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</p></li>
<li><p>ExÃ©cuter le script de migration SQL:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</p></li>
<li><p>Le backoffice de gestion des mÃ©tadonnÃ©es est dorÃ©navant un module
GeoNature Ã  part. Le script migration prÃ©cÃ©demment lancÃ© prÃ©voit de
mettre un CRUVED au groupe_admin et groupe_en_poste pour le
nouveau module METADATA. Les groupes nouvellement crÃ©Ã©s par les
administrateurs et nâ€™ayant de CRUVED pour lâ€™objet METADATA (du
module Admin), se retrouvent avec le CRUVED hÃ©ritÃ© de GeoNature.
Lâ€™administrateur devra changer lui-mÃªme le CRUVED de ces groupes
pour le nouveau module METADATA via le backoffice des permissions.</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
</ul>
</section>
<section id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Mise en place de logs rotatifs pour Ã©viter de surcharger le serveur</p></li>
<li><p>Centralisation des logs applicatifs dans le dossier
<code class="docutils literal notranslate"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se - Correction et amÃ©lioration de la gestion des dates
(#540)</p></li>
<li><p>AmÃ©lioration des tests automatisÃ©s</p></li>
<li><p>Correction et complÃ©ment ds scripts dâ€™installation des modules
GeoNature</p></li>
<li><p>Remplacement de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> par
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code></p></li>
<li><p>ComplÃ©ment des documentations de customisation, dâ€™administration et
de dÃ©veloppement</p></li>
<li><p>Ajout dâ€™une documentation de migration de donnÃ©es Serena vers
GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>)
par &#64;xavyeah39</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement Ã  cette version, mais en suivant les
notes des versions intermÃ©diaires</p></li>
<li><p>ExÃ©cutez la mise Ã  jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p></li>
<li><p>Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de
GeoNature dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus
associer les sites de suivi de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> Ã  des applications,
utilisÃ© par les modules de suivi (Flore, habitat, chiro). Le
mÃ©canisme est remplacÃ© par une association des sites de suivi aux
modules. La crÃ©ation de la nouvelle table est automatisÃ©e
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la
migration des Ã©ventuelles donnÃ©es existantes de
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> vers
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code>, Ã  faire manuellement.</p></li>
<li><p>Afin que les logs de lâ€™application soient tous Ã©crits au mÃªme
endroit, modifier le fichier <code class="docutils literal notranslate"><span class="pre">geonature-service.conf</span></code>
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la
ligne <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code>
(en remplaÃ§ant &lt;MON_USER&gt; par votre utilisateur linux).</p></li>
<li><p>Vous pouvez Ã©galement mettre en place un systÃ¨me de logs rotatifs
(systÃ¨me permettant dâ€™archiver les fichiers de logs afin quâ€™ils ne
surchargent pas le serveur - conseillÃ© si votre serveur a une
capacitÃ© disque limitÃ©e). CrÃ©er le fichier suivant
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes
suivantes dans le fichier nouvellement crÃ©Ã© (en remplaÃ§ant
&lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/&lt;MON_USER&gt;/geonature/var/log/*.log {
daily
rotate 8
size 100M
create
compress
}
</pre></div>
</div>
<p>ExÃ©cutez ensuite la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Link to this heading">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour des paquets du frontend (#538)</p></li>
<li><p>Correction dâ€™un conflit entre Marker et Leaflet-draw</p></li>
<li><p>Utilisation du paramÃ¨tre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> au niveau de lâ€™application</p></li>
<li><p>Corrections mineures diverses</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Sortie de versions correctives de UsersHub (2.0.2 -
<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) et TaxHub (1.6.1 -
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) Ã  appliquer aussi</p></li>
<li><p>Vous pouvez vous rÃ©fÃ©rer Ã  la documentation globale de mise Ã  jour
de GeoNature RC3 vers RC4 par &#64;DonovanMaillard
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</p></li>
</ul>
</section>
<section id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>IntÃ©gration de la gestion des permissions (CRUVED) dans la BDD de
GeoNature, gÃ©rÃ© via une interface dâ€™administration dÃ©diÃ© (#517)</p></li>
<li><p>Mise en place dâ€™un systÃ¨me de permissions plus fin par module et
par objet (#517)</p></li>
<li><p>Mise en place dâ€™un mÃ©canimse gÃ©nÃ©rique pour la gestion des
permissions via des filtres : filtre de type portÃ©e (SCOPE),
taxonomique, gÃ©ographique etcâ€¦ (#517)</p></li>
<li><p>CompatibilitÃ© avec UsersHub version 2</p></li>
<li><p>Lâ€™administration des permissions ne propose que les rÃ´les qui sont
actif et qui ont un profil dans GeoNature</p></li>
<li><p>Ajout du composant Leaflet.FileLayer dans le module SynthÃ¨se pour
pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme
gÃ©omÃ©trie de recherche (#256)</p></li>
<li><p>Ajout et utilisation de lâ€™extension PostgreSQL <code class="docutils literal notranslate"><span class="pre">pg_tgrm</span></code> permettant
dâ€™amÃ©liorer lâ€™API dâ€™autocomplÃ©tion de taxon dans la synthÃ¨se, en
utilisant lâ€™algorithme des trigrammes
(<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>),
fonctionnel aussi dans les autres modules si vous mettez Ã  jour
TaxHub en version 1.6.0.</p></li>
<li><p>Nouvel exemple dâ€™import de donnÃ©es historiques vers GeoNature V2 :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a>
(par &#64;DonovanMaillard)</p></li>
<li><p>ComplÃ©ment de la documentation HTTPS et ajout dâ€™une documentation
Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de lâ€™id_digitiser lors de la mise Ã  jour (#481)</p></li>
<li><p>Corrections multiples de la prise en compte du CRUVED (#496)</p></li>
<li><p>Deconnexion apres inactivitÃ© de lâ€™utilisateur (#490)</p></li>
<li><p>Suppression des heures au niveau des dates de lâ€™export occtax
(#485)</p></li>
<li><p>Correction du message dâ€™erreur quand on nâ€™a pas de JDD (#479)</p></li>
<li><p>Correction du champs commentaire dans les exports dâ€™Occtax sÃ©parÃ©
entre relevÃ© et occurrence (#478)</p></li>
<li><p>Correction des paramÃ¨tres de la fonction
<code class="docutils literal notranslate"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</p></li>
<li><p>Correction de lâ€™administration des mÃ©tadonnÃ©es (#466 #420)</p></li>
<li><p>MÃ©tadonnÃ©es (JDD et CA) : ne pas afficher les utilisateurs qui sont
des groupes dans les acteurs</p></li>
<li><p>Ajout dâ€™un champs dans la SynthÃ¨se permettant de stocker de quel
module provient une occurrence et fonctions SQL associÃ©es (#412)</p></li>
<li><p>AmÃ©lioration du style des champs obligatoires</p></li>
<li><p>AmÃ©liorations mineures de lâ€™ergonomie dâ€™Occtax</p></li>
<li><p>Correction du spinner qui tournait en boucle lors de lâ€™export CSV
de la SynthÃ¨se (#451)</p></li>
<li><p>Correction des tests automatisÃ©s</p></li>
<li><p>AmÃ©lioration des performances des intersections avec les zonages de
<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code></p></li>
<li><p>ComplÃ©ment de la documentation de dÃ©veloppement</p></li>
<li><p>Simplification de la configuration des gn_modules</p></li>
<li><p>Occtax : ordonnancement des observation par date (#467)</p></li>
<li><p>Occtax : Remplissage automatique de lâ€™heure_max Ã  partir de
lâ€™heure_min (#522)</p></li>
<li><p>Suppression des warnings lors du build du frontend</p></li>
<li><p>Correction de lâ€™installation des modules GeoNature</p></li>
<li><p>Ajout dâ€™un message quand on nâ€™a pas accÃ¨s Ã  une donnÃ©e dâ€™un
module</p></li>
<li><p>Affichage du nom du module dans le Header (#398)</p></li>
<li><p>Correction des outils cartographiques dans Occtax</p></li>
<li><p>Correction complÃ©mentaire des styles des lignes sans remplissage
(#458)</p></li>
<li><p>MaplistService : correction du zoom sur les polygones et polylignes</p></li>
<li><p>Composant Areas et Municipalities : remise Ã  zÃ©ro de la liste
dÃ©roulante quand on efface la recherche ou remet Ã  jour les filtres</p></li>
<li><p>Composant Taxonomy : la recherche autocompletÃ©e est lancÃ©e mÃªme si
on tape plus de 20 caractÃ¨res. Le nombre de rÃ©sultat renvoyÃ© est
dÃ©sormais paramÃ©trable (#518)</p></li>
<li><p>Limitation du nombre de connexions Ã  la BDD en partageant
lâ€™instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> avec les sous-modules</p></li>
<li><p>Installation : utilisation dâ€™un rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">tmp</span></code> local et non plus
au niveau systÃ¨me pour limiter les problÃ¨mes de droits (#503)</p></li>
<li><p>Evolution du template dâ€™exemple de module GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>)
pour utiliser lâ€™instance DB et utiliser les nouveaux dÃ©corateurs de
permissions (CRUVED)</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle
version, il est nÃ©cessaire dâ€™avoir installÃ© UsersHub version 2.x au
prÃ©alable. Suivez donc sa documentation
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) avant de procÃ©der Ã 
la montÃ©e de version de GeoNature.</p></li>
<li><p>ExÃ©cuter la commande suivante pour ajouter lâ€™extension <code class="docutils literal notranslate"><span class="pre">pg_trgm</span></code>,
en remplaÃ§ant la variable <code class="docutils literal notranslate"><span class="pre">$db_name</span></code> par le nom de votre BDD :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></p></li>
<li><p>Mettez Ã  jour TaxHub en version 1.6.0 pour bÃ©nÃ©ficier de
lâ€™amÃ©lioration de la recherche taxonomique dans tous les modules</p></li>
<li><p>ExÃ©cutez la mise Ã  jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</p></li>
<li><p>Suivez ensuite la procÃ©dure classique de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Note dÃ©veloppeurs</strong></p>
<ul class="simple">
<li><p>Vous pouvez faire Ã©voluer les modules GeoNature en utilisant
lâ€™instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts
dâ€™installation (#498)</p></li>
<li><p>Il nâ€™est plus nÃ©cÃ©ssaire de dÃ©finir un <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans la
configuration des modules GeoNature.</p></li>
<li><p>La gestion des permissions a Ã©tÃ© revue et est dÃ©sormais internalisÃ©e
dans GeoNature (voir
<a class="reference external" href="http://docs.geonature.fr/development.html#developpement-backend">http://docs.geonature.fr/development.html#developpement-backend</a>),
il est donc necessaire dâ€™utiliser les nouveaux dÃ©corateurs dÃ©crit
dans la doc pour rÃ©cupÃ©rer le CRUVED.</p></li>
</ul>
</section>
<section id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Link to this heading">ïƒ</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">Ã¬nstall_all.sh</span></code> au niveau de la gÃ©nÃ©ration de
la configuration Apache de TaxHub et UsersHub (#493)</p></li>
<li><p>Suppression du Servername dans la configuration Apache de TaxHub du
script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>ComplÃ©ment de la documentation de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous migrez depuis une version 2.0.0-rc.2, installez directement
cette version corrective plutÃ´t que la 2.0.0-rc.3, mais en suivant
les notes de versions de la 2.0.0-rc.3</p></li>
<li><p>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal notranslate"><span class="pre">/</span></code>, consultez sa
documentation
<a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur
Debian 8, problÃ¨me de version de PostGIS qui ne sâ€™installe pas
correctement</p></li>
</ul>
</section>
<section id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p>PossibilitÃ© dâ€™utiliser le MNT en raster ou en vecteur dans la BDD
(+ doc MNT) #439 (merci &#64;mathieubossaert)</p></li>
<li><p>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</p></li>
<li><p>INSTALL_ALL - AmÃ©lioration de la conf Apache de TaxHub pour gÃ©rer
son URL sans <code class="docutils literal notranslate"><span class="pre">/</span></code> Ã  la fin</p></li>
<li><p>Dessin cartographique dâ€™une autre couleur (rouge) que les
observations (bleu)</p></li>
<li><p>Occtax : retour au zoom prÃ©cÃ©dent lors de lâ€™enchainement de relevÃ©
(#436)</p></li>
<li><p>Occtax : observateur rempli par dÃ©faut avec lâ€™utilisateur connectÃ©
(#438)</p></li>
<li><p>Prise en compte des gÃ©omÃ©tries nulles dans la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Gestion plus complÃ¨te des donnÃ©es exemple intÃ©grÃ©es ou non lors de
lâ€™installation (#446)</p></li>
<li><p>ComplÃ©ment des diffÃ©rentes documentations</p></li>
<li><p>ComplÃ©ment FAQ (#441)</p></li>
<li><p>Documentation de la customisation (merci &#64;DonovanMaillard)</p></li>
<li><p>AmÃ©lioration de lâ€™architecture du gn_module dâ€™exemple</p></li>
<li><p>Clarification de la configuration des gn_modules</p></li>
<li><p>Lire le fichier <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> pour lâ€™afficher dans lâ€™interface (#421)</p></li>
<li><p>Utilisation de la vue <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et non plus
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> par dÃ©faut pour les exports Occtax (#462)</p></li>
<li><p>ComplÃ©ment et correction des vues <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> (#462)</p></li>
<li><p>Mise Ã  jour de Marshmallow (2.5.0 =&gt; 2.5.1)</p></li>
<li><p>AmÃ©liorations des routes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de la configuration
des modules de suivi pour pouvoir utiliser le nom dâ€™une application
plutÃ´t que son identifiant</p></li>
<li><p>Export SynthÃ¨se - Remplacement de la barre de tÃ©lÃ©chargement par un
spinner (#451)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Doc Import niveau 2 : Corrections et complÃ©ments</p></li>
<li><p>Correction du trigger Occtax &gt; SynthÃ¨se qui met Ã  jour le champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</p></li>
<li><p>Correction et amÃ©lioration de la fonction <code class="docutils literal notranslate"><span class="pre">install_gn_module</span></code></p></li>
<li><p>Correction coquille dans le modÃ¨le <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Installation uniquement sur un environnement 64 bits
(documentation + vÃ©rification) #442 (merci &#64;jbrieuclp
et &#64;sig-pnrnm)</p></li>
<li><p>Correction et dÃ©coupage des scripts de mise Ã  jour de la BDD depuis
la version Beta5</p></li>
<li><p>Correction de lâ€™Ã©dition des date_debut et date_fin de Occtax
(#457)</p></li>
<li><p>Correction des exports depuis la SynthÃ¨se et intÃ©gration de la
gÃ©omÃ©trie des observations (#461 et #456)</p></li>
<li><p>Ne pas remplir <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si
<code class="docutils literal notranslate"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</p></li>
<li><p>Edition dâ€™un relevÃ© Occtax - Ne pas recalculer lâ€™altitude
existante (#424)</p></li>
<li><p>Correction de lâ€™activation du formulaire Occtax aprÃ¨s localisation
du relevÃ© (#469 et #471)</p></li>
<li><p>Carte - Enlever le remplissage des lignes (#458)</p></li>
<li><p>AmÃ©lioration du script de mise Ã  jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#465)</p></li>
<li><p>Suppression dâ€™un doublon dans le modÃ¨le de <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>
(merci &#64;lpofredc)</p></li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li><p>Mise Ã  jour de TaxHub (Doc utilisateur, configuration Apache, script
dâ€™import des mÃ©dias depuis API INPN Taxref et remise Ã  zÃ©ro des
sÃ©quences)</p></li>
<li><p>Script de migration des donnÃ©es SICEN (ObsOcc) vers GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></p></li>
<li><p>Script dâ€™import continu depuis une BDD externe vivante (avec
exemple SICEN) :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></p></li>
<li><p>Module Suivi Flore Territoire fonctionnel et installable
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Chiro fonctionnel et installable
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que
son Frontend gÃ©nÃ©rique pour les protocoles de suivi
(<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</p></li>
<li><p>Ebauche dâ€™un module pour les protocoles CMR
(Capture-Marquage-Recapture) :
<a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></p></li>
<li><p>MCD du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>MCD du module Flore Prioritaire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</p></li>
<li><p>Consolidation du backend et premiers dÃ©veloppements du frontend de
GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</p></li>
<li><p>CrÃ©ation dâ€™un script expÃ©rimental dâ€™installation de
GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son
schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procÃ©dure standard de mise Ã  jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>ExÃ©cutez lâ€™update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</p></li>
<li><p>Il est aussi conseillÃ© de mettre Ã  jour TaxHub en 1.5.1
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa
configuration pour quâ€™il fonctionne sans <code class="docutils literal notranslate"><span class="pre">/</span></code> Ã  la fin de son URL</p></li>
<li><p>Attention, si vous installez cette version avec le script global
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code>, il crÃ©Ã© un problÃ¨me dans la configuration Apache
de UserHub (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et
supprime tous les <code class="docutils literal notranslate"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation
de UsersHub
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>)
puis relancer Apache
(<code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>).
Il est conseillÃ© dâ€™installer plutÃ´t la version corrective.</p></li>
</ul>
</section>
<section id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</p></li>
<li><p>AmÃ©lioration du composant Download</p></li>
<li><p>AmÃ©lioration du ShapeService</p></li>
<li><p>ComplÃ©ments de la documentation</p></li>
<li><p>IntÃ©gration de la documentation DÃ©veloppement backend dans la
documentation</p></li>
<li><p>Nettoyage du code</p></li>
<li><p>Mise Ã  jour de la doc de lâ€™API :
<a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></p></li>
<li><p>Configuration de la carte (<code class="docutils literal notranslate"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM
par dÃ©faut car OpenTopoMap ne sâ€™affiche pas Ã  petite Ã©chelle</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code></p></li>
<li><p>Ne pas afficher le debug dans le recherche de la synthÃ¨se</p></li>
<li><p>Correction du bug de dÃ©connexion entre TaxHub et GeoNature (#423)</p></li>
<li><p>Correction de la fiche info dâ€™Occtax</p></li>
<li><p>Champs Multiselect : Ne pas afficher les valeurs selectionnÃ©es dans
la liste quand on modifie un objet</p></li>
<li><p>Trigger Occtax vers SynthÃ¨se : Correction des problÃ¨mes dâ€™heure de
relevÃ©s mal copiÃ©s dans la SynthÃ¨se</p></li>
<li><p>Correction des altitudes (non abouti) (#424)</p></li>
<li><p>DonnÃ©es exemple : Suppression de lâ€™<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code> dans la synthÃ¨se</p></li>
<li><p>Suppression dâ€™un <code class="docutils literal notranslate"><span class="pre">id_municipality</span></code> en dur dans une route</p></li>
<li><p>Suppression de la librairie Certifi non utilisÃ©e</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procÃ©dure standard de mise Ã  jour de GeoNature</p></li>
<li><p>ExÃ©cuter lâ€™update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</p></li>
</ul>
</section>
<section id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Link to this heading">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã 
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standarde, plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<p>PrÃ©sentation et suivi des dÃ©veloppements :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li><p>Message dâ€™introduction customisable</p></li>
<li><p>Carte des 100 derniÃ¨res observations</p></li>
<li><p>CSS gÃ©nÃ©ral de lâ€™application surcouchable</p></li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des
donnÃ©es Faune, Flore et Fonge de type Contact selon le standard
Occurrences de taxon du SINP
(<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li><p>DÃ©veloppement des formulaires de saisie, page de recherche, fiche
dÃ©tail, API, CRUVED et export</p></li>
<li><p>PossibilitÃ© de masquer ou afficher les diffÃ©rents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>DÃ©veloppement du formulaire de maniÃ¨re gÃ©nÃ©rique pour pouvoir
rÃ©utiliser ses diffÃ©rents Ã©lÃ©ments dans dâ€™autres modules sous forme
de composants Angular</p></li>
<li><p>Configuration possible du module (Niveau de zoom, champs affichÃ©es,
exportâ€¦)</p></li>
<li><p>Ajout des nomenclatures dans les filtres dâ€™Occtax Ã  partir du
composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de crÃ©er dynamiquement un
formulaire en dÃ©clarant ses champs et leur type (#318)</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon en ne recherchant
que sur les dÃ©buts de mot et en affichant en premier les noms de
rÃ©fÃ©rence (<code class="docutils literal notranslate"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</p></li>
<li><p>Multilingue fourni avec franÃ§ais et anglais (extensible Ã  dâ€™autres
langues)</p></li>
<li><p>Mise en place dâ€™un export CSV, SHP, GeoJSON paramÃ©trable dans
Occtax. #363 et #366</p></li>
<li><p>Ajout dâ€™un message dâ€™erreur si lâ€™utilisateur nâ€™a pas de jeu de
donnÃ©es ou si il y a eu un problÃ¨me lors de la rÃ©cupÃ©ration des JDD
depuis MTD</p></li>
<li><p>Prise en compte du CRUVED au niveau des routes et du front pour
adapter les contenus et fonctionnalitÃ©s aux droits de lâ€™utilisateur</p></li>
<li><p>Mise en place des triggers alimentant la synthÃ¨se Ã  partir des
donnÃ©es saisies et modifiÃ©es dans Occtax</p></li>
</ul>
<p><strong>SynthÃ¨se</strong></p>
<p>Module permettant de rechercher parmi les donnÃ©es des diffÃ©rentes
sources prÃ©sentes ou intÃ©grÃ©es dans la base de donnÃ©es de GeoNature</p>
<ul class="simple">
<li><p>Mise en place du backend, de lâ€™API et du frontend #345</p></li>
<li><p>Interface de consultation, de recherche et dâ€™export dans la
SynthÃ¨se</p></li>
<li><p>SynthÃ¨se : Calcul automatique (trigger) des zonages de chaque
observation (communes, zonages rÃ©glementaires et naturels)</p></li>
<li><p>Recherche sur les zonages gÃ©nÃ©rique et paramÃ©trable</p></li>
<li><p>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge,
milieu, attribut taxonomique, nomenclature, date, pÃ©riode, commune,
zonage, cadre dâ€™acquisition, jeu de donnÃ©es, observateur, polygone,
rectange ou cercle dessinÃ©</p></li>
<li><p>Retour Ã  la fiche source possible si lâ€™observation a Ã©tÃ© saisie
dans un module de GeoNature</p></li>
<li><p>Affichage de la fiche dÃ©tail de chaque observation</p></li>
<li><p>Attributs TaxHub dynamiques et paramÃ©trables</p></li>
<li><p>Configuration possible du module (colonnes, limites de recherche et
dâ€™export, zoom, exportâ€¦)</p></li>
<li><p>Export basÃ© sur une vue (observations et statuts)</p></li>
<li><p>Prise en compte du CRUVED pour dÃ©finir les donnÃ©es Ã  afficher et Ã 
exporter #412</p></li>
<li><p>Recherche de taxons : Liste basÃ©e sur une table alimentÃ©e
automatiquement par les taxons prÃ©sents au moins une fois dans la
SynthÃ¨se</p></li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports basÃ©s sur des vues</p>
<ul class="simple">
<li><p>Mise en place temporaire dâ€™un export unique, basÃ© sur une vue
sâ€™appuyant sur les donnÃ©es de Occtax, par jeu de donnÃ©es</p></li>
<li><p>A remplacer par le module gÃ©nÃ©rique
<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de
dÃ©veloppement) permettant de gÃ©nÃ©rer des exports Ã  volontÃ© en crÃ©ant
des vues et en les affectant Ã  des utilisateurs ou des groupes.
Chaque export sera accompagnÃ© de son API standardisÃ©e et documentÃ©e</p></li>
</ul>
<p><strong>Admin</strong></p>
<p>Module dâ€™administration des tables centrales de GeoNature</p>
<ul class="simple">
<li><p>Mise en place dâ€™un module (incomplet) permettant de gÃ©rer les
mÃ©tadonnÃ©es et les nomenclatures</p></li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li><p>Mise en place dâ€™un systÃ¨me baptisÃ© CRUVED permettant de dÃ©finir
globalement ou par module 6 actions sont possibles (Create / Read /
Update / Validate / Export / Delete) sur 3 portÃ©es possibles (Mes
donnÃ©es / Les donnÃ©es de mon organisme / Toutes les donnÃ©es)</p></li>
<li><p>Ces Ã©volutions ont Ã©tÃ© intÃ©grÃ©es au niveau du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>
de la base de donnÃ©es de UsersHub, de son module
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des
routes de lâ€™API GeoNature et des interfaces</p></li>
</ul>
<p><strong>Bases de donnÃ©es</strong></p>
<ul class="simple">
<li><p>DÃ©veloppement dâ€™un module et dâ€™une API gÃ©nÃ©rique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
dâ€™avoir un mÃ©canisme gÃ©nÃ©rique de centralisation des listes de
valeurs (nomenclatures) pour ne pas crÃ©er des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature sâ€™adaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>Mise en place de tables de stockage verticales (historique, mÃ©dias
et validation) #339</p></li>
<li><p>Mise en place dâ€™un rÃ©fÃ©rentiel gÃ©ographique avec un schÃ©ma dÃ©diÃ©
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec dâ€™autres applications comprenant une
table des communes, une table gÃ©nÃ©rique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer dâ€™une
gestion des droits avec 6 niveaux Ã  un mÃ©canisme plus gÃ©nÃ©rique,
souple et complet. Il permet dâ€™attribuer des actions possibles Ã  un
rÃ´le (utilisateur ou groupe), sur une portÃ©e; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 portÃ©es
de ces actions sont possibles : Mes donnÃ©es / Les donnÃ©es de mon
organisme / Toutes les donnÃ©es.</p></li>
<li><p>Droits CRUVED : La dÃ©finition du CRUVED dâ€™un rÃ´le (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
mÃªme si ils sont infÃ©rieurs. Si une action du CRUVED nâ€™est pas
dÃ©finie au niveau du module, on prend celle de lâ€™application
parente. #292</p></li>
<li><p>Si un rÃ´le a un R du CRUVED Ã  0 pour un module, alors celui-ci ne
lui est pas listÃ© dans le Menu et il ne lui est pas accessible si il
en connait lâ€™URL. #360</p></li>
<li><p>DÃ©veloppement des mÃ©tadonnÃ©es dans la BDD (schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard MÃ©tadonnÃ©es du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de gÃ©rer des jeux de donnÃ©es, des cadres
dâ€™acquisition, des acteurs (propriÃ©taire, financeur,
producteurâ€¦) et des protocoles. Chaque relevÃ© est associÃ© Ã  un
jeu de donnÃ©es.</p></li>
<li><p>DÃ©veloppement dâ€™un mÃ©canisme de calcul automatique de la
sensibilitÃ© dâ€™une espÃ¨ce directement dans la BDD (sur la base des
rÃ¨gles nationales et rÃ©gionales du SINP + locales Ã©ventuellement)</p></li>
<li><p>IntÃ©gration du calcul automatique de lâ€™identifiant permanent SINP
(#209)</p></li>
<li><p>CrÃ©ation du schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gÃ©rer la partie gÃ©nÃ©rique
des modules de suivi (sites et visites centralisÃ©s) et les routes
associÃ©es</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de maniÃ¨re gÃ©nÃ©rique des informations qui peuvent Ãªtre
communes aux autres modules : lâ€™historique des actions sur chaque
objet de la BDD, la validation dâ€™une donnÃ©e et les mÃ©dias associÃ©s
Ã  une donnÃ©e. AccompagnÃ© de fonctions gÃ©nÃ©riques dâ€™historisation et
de validation des donnÃ©es mises en place sur le module Occtax. #339</p></li>
<li><p>Ajout dâ€™une vue matÃ©rialisÃ©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et dâ€™une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes dâ€™un taxon (Ã©tendue des observations, date min et max,
altitude min et max, nombre dâ€™observations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>).
DÃ©sactivÃ©e pour le moment.</p></li>
<li><p>Ajout dâ€™un trigger gÃ©nÃ©rique pour calculer la gÃ©omÃ©trie dans la
projection locale Ã  partir de la gÃ©omÃ©trie 4326 (#370)</p></li>
<li><p>Ajout dâ€™un trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Gestion des conflits de nomenclatures en nâ€™utilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> lors de la crÃ©ation de leur
contenu (code_nomenclature) (#384)</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_imports</span></code> intÃ©grant des fonctions SQL
permettant dâ€™importer un CSV dans la BDD et de mapper des champs de
tables importÃ©es avec ceux dâ€™une table de GeoNature pour gÃ©nÃ©rer le
script <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></p></li>
<li><p>DÃ©but de script de migration GeoNature V1 vers GeoNature V2</p></li>
<li><p>Nombreuses fonctions intÃ©grÃ©es dans les schÃ©mas de la BDD</p></li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li><p>Scripts dâ€™installation autonome ou globale de GeoNature sur Debian
(8 et 9) et Ubuntu (16 et 18)</p></li>
<li><p>Scripts de dÃ©ploiement spÃ©cifiques de DEPOBIO (MTES-MNHN)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>RÃ©daction dâ€™une documentation concernant lâ€™installation (autonome
ou globale), lâ€™utilisation, lâ€™administration et le dÃ©veloppement :
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
<p><strong>DÃ©veloppement</strong></p>
<ul class="simple">
<li><p>DÃ©coupage de lâ€™application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de lâ€™interface et des listes de valeurs avec
franÃ§ais et anglais intÃ©grÃ©s mais extensible Ã  dâ€™autres langues
(#173)</p></li>
<li><p>DÃ©veloppement de composants Angular gÃ©nÃ©riques pour pouvoir les
utiliser dans plusieurs modules sans avoir Ã  les redÃ©velopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities,
Observers, DynamicForm, MapListâ€¦)</p></li>
<li><p>ImplÃ©mentation de la gestion des droits au niveau de lâ€™API (pour
limiter les donnÃ©es affichÃ©es Ã  un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par dÃ©faut, lâ€™authentification et les utilisateurs sont gÃ©rÃ©s
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature directement au CAS de lâ€™INPN, sans UsersHub (cas de
lâ€™instance nationale INPN de GeoNature).</p></li>
<li><p>Connexion possible au webservice METADONNEES de lâ€™INPN pour y
rÃ©cupÃ©rer les jeux de donnÃ©es en fonction de lâ€™utilisateur
connectÃ©, avec mise Ã  jour des JDD Ã  chaque appel de la route</p></li>
<li><p>Mise en place dâ€™un mÃ©canisme standardisÃ© de dÃ©veloppement de
modules dans GeoNature (#306)</p></li>
<li><p>Ajout de tests unitaires au niveau du backend et du frontend</p></li>
<li><p>Ajout dâ€™un mÃ©canisme de log par email (paramÃ¨tres MAILERROR)</p></li>
<li><p>DÃ©but de crÃ©ation du module de gestion des mÃ©dias (backend
uniquement)</p></li>
<li><p>Mise en place dâ€™une configuration globale et dâ€™une configuration
par module</p></li>
<li><p>Fonction dâ€™installation dâ€™un module et de gÃ©nÃ©ration des fichiers
de configuration</p></li>
<li><p>Gestion de lâ€™installation dâ€™un module qui nâ€™a pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place dâ€™une route gÃ©nÃ©rique permettant de requÃªter dans une
vue non mappÃ©e</p></li>
<li><p>Mise en place dâ€™un script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li><p>Module Export en cours de dÃ©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export
sâ€™appuie sur une vue. Il sera possible aux administrateurs dâ€™une
GeoNature dâ€™ajouter autant de vues que nÃ©cessaires dans son
GeoNature.</p></li>
<li><p>Module de validation des donnÃ©es en cours de dÃ©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</p></li>
<li><p>Module Suivi Flore territoire en cours de dÃ©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Habitat en cours de dÃ©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</p></li>
<li><p>gn_module_suivi_chiro refondu pour devenir un module de GeoNature
V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</p></li>
<li><p>Projet suivi utilisÃ© comme Frontend gÃ©nÃ©rique et autonome pour le
Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</p></li>
<li><p>GeoNature-citizen en cours de dÃ©veloppement
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</p></li>
<li><p>GeoNature-mobile en cours de refonte pour compatibilitÃ© avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</p></li>
<li><p>GeoNature-atlas en cours dâ€™ajustements pour compatibilitÃ© avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/issues/162">https://github.com/PnX-SI/GeoNature-atlas/issues/162</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne sâ€™agit pas de mettre Ã  jour GeoNature mais dâ€™en installer une
nouvelle version. En effet, il sâ€™agit dâ€™une refonte complÃ¨te.</p>
<ul class="simple">
<li><p>Passer Ã  la derniÃ¨re version 1 de GeoNature (1.9.1)</p></li>
<li><p>Idem pour UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complÃ¨te</p></li>
<li><p>Adaptez les scripts prÃ©sents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
Ã©xÃ©cutez-les</p></li>
</ul>
<p><em>TODO : MAJ depuis V1 Ã  tester et complÃ©ter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p>Supprimer le schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code> puis le recrÃ©er dans sa version
RC1 (#430)</p></li>
<li><p>ExÃ©cuter lâ€™update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du
sous-module Nomenclature
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p></li>
<li><p>Suivre la procÃ©dure habituelle de mise Ã  jour</p></li>
<li><p>ExÃ©cuter les commandes suivantes :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd geonature/backend
source venv/bin/activate
geonature generate_frontend_modules_route
geonature frontend_build
</pre></div>
</div>
</li>
</ul>
</section>
<section id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Ajout dâ€™un message dâ€™erreur si lâ€™utilisateur nâ€™a pas de JDD ou
si il y a eu un problÃ¨me lors de la rÃ©cupÃ©ration des JDD de MTD</p></li>
<li><p>Ajout dâ€™une vue matÃ©rialisÃ©e (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et dâ€™une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes dâ€™un taxon (Ã©tendue des observations, date min et max,
altitude min et max, nombre dâ€™observations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</p></li>
<li><p>Lâ€™export OccTax est dÃ©sormais basÃ© sur une vue quâ€™il est possible
dâ€™adapter</p></li>
<li><p>Ajouts de nouveaux tests automatisÃ©s du code et mise en place de
Travis pour les lancer automatiquement Ã  chaque commit
(<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</p></li>
<li><p>Ajout de donnÃ©es test</p></li>
<li><p>Mise Ã  jour des scripts de dÃ©ploiement spÃ©cifiques de DEPOBIO (MTES)</p></li>
<li><p>DÃ©placement de la table centrale de gestion des paramÃ¨tres
<code class="docutils literal notranslate"><span class="pre">t_parameters</span></code> dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> (#376)</p></li>
<li><p>Ajout dâ€™un trigger gÃ©nÃ©rique pour calculer la gÃ©omÃ©trie dans la
projection locale Ã  partir de la gÃ©omÃ©trie 4326 (#370)</p></li>
<li><p>Regroupement des fichiers liÃ©s Ã  lâ€™installation et la mise Ã  jour
dans un rÃ©pertoire dÃ©diÃ© (<code class="docutils literal notranslate"><span class="pre">install</span></code>) (#383)</p></li>
<li><p>Mise en place de scripts de migration global de la BDD
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du schÃ©ma
<code class="docutils literal notranslate"><span class="pre">pr_occtax</span></code>
(<code class="docutils literal notranslate"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>),
dâ€™un script gÃ©nÃ©rique de migration de lâ€™application
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) et dâ€™une doc de mise Ã  jour
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-Ã -jour-de-lapplication</a>)</p></li>
<li><p>RÃ©intÃ©gration des fichiers de configuration, de logs et des modules
externes dans les rÃ©pertoires de lâ€™application (#375)</p></li>
<li><p>Ajout de routes Ã  <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code></p></li>
<li><p>Ajout dâ€™un trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>AmÃ©liorations et documentation des commandes dâ€™installation dâ€™un
module</p></li>
<li><p>Ajout des unitÃ©s gÃ©ographiques dans le schÃ©ma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code></p></li>
<li><p>Ajout dâ€™un bouton <code class="docutils literal notranslate"><span class="pre">Annuler</span></code> dans le formulaire Occtax</p></li>
<li><p>Gestion des conflits de nomenclatures en nâ€™utilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> (#384)</p></li>
<li><p>Migration du SQL de <code class="docutils literal notranslate"><span class="pre">ref_nomenclautres</span></code> dans le dÃ©pÃ´t du sous-module
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</p></li>
<li><p>DÃ©but de mise en place dâ€™un backoffice (mÃ©tadonnÃ©es et
nomenclatures)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>OccTax : Correction du double post</p></li>
<li><p>OccTax : Correction des droits dans les JDD</p></li>
<li><p>OccTax : Correction de lâ€™affichage des observers_txt dans la fiche
dâ€™un relevÃ©</p></li>
<li><p>Correction de la gestion gÃ©nÃ©rique des mÃ©dias</p></li>
<li><p>Suppression du lien entre <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> (#374)</p></li>
<li><p>ComplÃ©ments et relecture de la documentation</p></li>
<li><p>Correction</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez Ã  jour votre GeoNature depuis une Beta4 :</p>
<ul>
<li><p>TÃ©lÃ©chargez la beta5 et renommer les rÃ©pertoires :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/myuser
wget<span class="w"> </span>https://github.com/PnX-SI/GeoNature/archive/geonature2beta.zip
unzip<span class="w"> </span>geonature2beta.zip
mv<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/<span class="w"> </span>/home/&lt;mon_user&gt;/geonature_old/
mv<span class="w"> </span>GeoNature-geonature2beta<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/
</pre></div>
</div>
</li>
<li><p>ExÃ©cutez le script de migration <code class="docutils literal notranslate"><span class="pre">install/migration/beta4tobeta5.sh</span></code>
depuis la racine de votre GeoNature :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>geonature
./install/migration/beta4tobeta5.sh
</pre></div>
</div>
</li>
</ul>
<p>Celui-ci va rÃ©cupÃ©rer vos fichiers de configuration, dÃ©placer les
modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li><p>Si vous avez dÃ©veloppÃ© des modules externes, voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un
lien symbolique depuis le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> et en
rÃ©intÃ©grant la configuration du module dans son rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
</ul>
</section>
<section id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>SynthÃ¨se : dÃ©but de mise en place du backend, de lâ€™API et du
frontend #345</p></li>
<li><p>ComplÃ©ment de la nomenclature des MÃ©thodes de dÃ©termination et
suppression du champs Complement_Determination.
Merci &#64;DonovanMaillard. #341</p></li>
<li><p>Nouveaux composants Angular (SelectSearch, Municipalities,
Observers)</p></li>
<li><p>AmÃ©lioration de composants Angular (Date du jour par dÃ©faut, Option
de tri des nomenclatures, DynamicForm</p></li>
<li><p>Connexion Ã  MTD INPN : Mise Ã  jour des JDD Ã  chaque appel de la
route</p></li>
<li><p>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</p></li>
<li><p>Droits CRUVED : La dÃ©finition du CRUVED dâ€™un rÃ´le (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
mÃªme si ils sont infÃ©rieurs. Si une action du CRUVED nâ€™est pas
dÃ©finie au niveau du module, on prend celle de lâ€™application
parente. #292</p></li>
<li><p>Si un rÃ´le a un R du CRUVED Ã  0 pour un module, alors celui-ci ne
lui est pas listÃ© dans le Menu et il ne lui ai pas accessible si il
en connait lâ€™URL. #360</p></li>
<li><p>Mise en place dâ€™un schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de maniÃ¨re gÃ©nÃ©rique des informations qui peuvent Ãªtre
communes aux autres modules : lâ€™historique des actions sur chaque
objet de la BDD, la validation dâ€™une donnÃ©e et les mÃ©dias associÃ©s
Ã  une donnÃ©e. AccompagnÃ© de fonctions gÃ©nÃ©riques dâ€™historisation et
de validation des donnÃ©es mises en place sur le module Occtax. #339</p></li>
<li><p>AmÃ©lioration de lâ€™ergonomie du MapList de OccTax. #361</p></li>
<li><p>Mise en place dâ€™un export CSV, SHP, GeoJSON paramÃ©trable dans
OccTax. #363 et #366</p></li>
<li><p>AmÃ©lioration du module gÃ©nÃ©rique <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de ses
sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>
et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></p></li>
<li><p>AmÃ©lioration et complÃ©ments des scripts dâ€™installation</p></li>
<li><p>Mise en place dâ€™un script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>ComplÃ©ment des diffÃ©rentes documentations</p></li>
<li><p>Ajout dâ€™une documentation dâ€™administration dâ€™OccTax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</p></li>
</ul>
</section>
<section id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Travail sur le module gÃ©nÃ©rique de Suivi intÃ©grÃ© Ã  GeoNature
(<code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</p></li>
<li><p>Gestion de lâ€™installation dâ€™un module qui nâ€™a pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place de tests automatiques au niveau du Frontend</p></li>
<li><p>MÃ©nage et rÃ©organisation du code du Frontend</p></li>
<li><p>Factorisation et harmonisation des composants gÃ©nÃ©riques Angular</p></li>
<li><p>Suppression des blocs non fonctionnels sur la Home</p></li>
<li><p>Mise Ã  jour de la doc et du MCD</p></li>
<li><p>PossibilitÃ© de masquer ou afficher les diffÃ©rents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>Ajout des nomenclatures dans les filtres dâ€™OccTax Ã  partir du
nouveau composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de crÃ©er dynamiquement un
formulaire en dÃ©clarant les champs (#318)</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon en ne recherchant
que sur les dÃ©buts de mot et en affichant en premier les noms de
rÃ©fÃ©rence (ordrer_by cd_nom=cd_ref DESC) - #334</p></li>
<li><p>Mise en place dâ€™une route gÃ©nÃ©rique permettant de requÃªter dans une
vue non mappÃ©e</p></li>
<li><p>Suppression des options vides dans les listes dÃ©roulantes des
nomenclatures</p></li>
<li><p>Ajout de quelques paramÃ¨tres (niveau de zoom mini dans chaque
module, ID de la liste des taxons saisissables dans Occtaxâ€¦)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la pagination du composant MapList</p></li>
<li><p>Correction des droits attribuÃ©s automatiquement quand on se connecte
avec le CAS</p></li>
<li><p>Correction de lâ€™installation optionnelle de UsersHub dans le script
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li><p>DÃ©but de refonte du module Suivi chiro
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connectÃ© au
module gÃ©nÃ©rique de suivi de GeoNature, dont le front sera externe Ã 
GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</p></li>
<li><p>Maquettage et avancÃ©e sur le module Validation
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</p></li>
<li><p>DÃ©finition du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>Piste de dÃ©finition du module InteropÃ©rabilitÃ©
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</p></li>
</ul>
</section>
<section id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Link to this heading">ïƒ</a></h2>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>ComplÃ©ments de la documentation (schÃ©ma architecture,
administration, installation, dÃ©veloppement, FAQâ€¦)</p></li>
<li><p>AmÃ©lioration de lâ€™ergonomie du module OccTax (composant MapList,
filtres, colonnes et formulaires) et du module Exports</p></li>
<li><p>AmÃ©lioration du composant de recherche dâ€™un taxon (#324)</p></li>
<li><p>AmÃ©lioration et optimisation de la sÃ©rialisation des donnÃ©es</p></li>
<li><p>Ajout de tests unitaires au niveau du backend</p></li>
<li><p>Ajout dâ€™un mÃ©canisme de log par email (paramÃ¨tres MAILERROR)</p></li>
<li><p>Migration du module occtax dans le rÃ©pertoire <code class="docutils literal notranslate"><span class="pre">/contrib</span></code> pour
homogÃ©nÃ©iser les modules</p></li>
<li><p>CrÃ©ation du schÃ©ma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gÃ©rer la partie gÃ©nÃ©rique
des modules de suivi (sites et visites centralisÃ©s)</p></li>
<li><p>DÃ©but de crÃ©ation du module gÃ©nÃ©rique des protocoles de suivi</p></li>
<li><p>DÃ©but de crÃ©ation du module de gestion des mÃ©dias</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Corrections de lâ€™installation globale et autonome</p></li>
<li><p>Renommage Contact en OccTax (en cours)</p></li>
<li><p>Nettoyage du schÃ©ma des mÃ©tadonnÃ©es (<code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>)</p></li>
</ul>
</section>
<section id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Link to this heading">ïƒ</a></h2>
<p>La version 2 de GeoNature est une refonte complÃ¨te de lâ€™application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers Ã 
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de lâ€™architecture du code pour rendre GeoNature plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte de la base de donnÃ©es pour la rendre plus standarde, plus
gÃ©nÃ©rique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser lâ€™application</p></li>
</ul>
<p>PrÃ©sentation et suivi du projet :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>NouveautÃ©s</strong></p>
<ul class="simple">
<li><p>Refonte de la base de donnÃ©es du module Contact, renommÃ© en OccTax,
sâ€™appuyant sur le standard Occurrence de taxons du SINP (#183)</p></li>
<li><p>DÃ©veloppement du module OccTax regroupant les contacts Faune, Flore,
Fonge et MortalitÃ© (avec formulaire de consultation et de saisie des
donnÃ©es)</p></li>
<li><p>DÃ©veloppement dâ€™un module et dâ€™une API gÃ©nÃ©rique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
dâ€™avoir un mÃ©canisme gÃ©nÃ©rique de centralisation des listes de
valeurs (nomenclatures) pour ne pas crÃ©er des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature sâ€™adaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>DÃ©coupage de lâ€™application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de lâ€™interface et des listes de valeurs avec
franÃ§ais et anglais intÃ©grÃ©s mais extensible Ã  dâ€™autres langues
(#173)</p></li>
<li><p>DÃ©veloppement de composants gÃ©nÃ©riques pour pouvoir les utiliser
dans plusieurs modules sans avoir Ã  les redÃ©velopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURESâ€¦)</p></li>
<li><p>Mise en place dâ€™un rÃ©fÃ©rentiel gÃ©ographique avec un schÃ©ma dÃ©diÃ©
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec dâ€™autres applications comprenant une
table des communes, une table gÃ©nÃ©rique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schÃ©ma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer dâ€™une
gestion des droits avec 6 niveaux Ã  un mÃ©canisme plus gÃ©nÃ©rique,
souple et complet. Il permet dâ€™attribuer des actions possibles Ã  un
rÃ´le (utilisateur ou groupe), sur une portÃ©e; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 portÃ©es
de ces actions sont possibles : Mes donnÃ©es / Les donnÃ©es de mon
organisme / Toutes les donnÃ©es.</p></li>
<li><p>ImplÃ©mentation de la gestion des droits au niveau de lâ€™API (pour
limiter les donnÃ©es affichÃ©es Ã  un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par dÃ©faut, lâ€™authentification et les utilisateurs sont gÃ©rÃ©s
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature au CAS de lâ€™INPN, sans utiliser GeoNature (utilisÃ© pour
lâ€™instance nationale INPN de GeoNature). GeoNature peut aussi se
connecter au webservice METADONNEES de lâ€™INPN pour y rÃ©cupÃ©rer les
jeux de donnÃ©es en fonction de lâ€™utilisateur connectÃ©.</p></li>
<li><p>Mise en place dâ€™un module dâ€™export. Chaque export sâ€™appuie sur
une vue. Il sera possible Ã  chaque administrateur dâ€™ajouter autant
de vues que nÃ©cessaires dans son GeoNature. Pour le moment, un
export au format SINP Occurrence de taxons a Ã©tÃ© intÃ©grÃ© par dÃ©faut.</p></li>
<li><p>DÃ©veloppement des mÃ©tadonnÃ©es dans la BDD (schema <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard MÃ©tadonnÃ©es du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de gÃ©rer des jeux de donnÃ©es, des cadres
dâ€™acquisition, des acteurs (propriÃ©taire, financeur,
producteurâ€¦) et des protocoles. Chaque relevÃ© est associÃ© Ã  un
jeu de donnÃ©es.</p></li>
<li><p>DÃ©veloppement dâ€™un mÃ©canisme de calcul automatique de la
sensibilitÃ© dâ€™une espÃ¨ce directement dans la BDD (sur la base des
rÃ¨gles nationales et rÃ©gionales du SINP + locales Ã©ventuellement)</p></li>
<li><p>IntÃ©gration du calcul automatique de lâ€™identifiant permanent SINP
(#209)</p></li>
<li><p>Mise en place dâ€™un mÃ©canisme standardisÃ© de dÃ©veloppement de
modules dans GeoNature (#306)</p></li>
<li><p>Scripts dâ€™installation autonome ou globale de GeoNature sur Debian
8 et 9</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Installation globale de GeoNature (avec TaxHub et UsersHub) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></p></li>
<li><p>Installation autonome de GeoNature /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></p></li>
<li><p>Manuel utilisateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></p></li>
<li><p>Manuel administrateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></p></li>
<li><p>DÃ©veloppement (API, modules et composants) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></p></li>
</ul>
<p>Documentation complÃ¨te disponible sur
<a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li><p>Finalisation MCD du module SynthÃ¨se</p></li>
<li><p>Triggers dâ€™alimentation automatique de la SynthÃ¨se depuis le module
OccTax</p></li>
<li><p>DÃ©veloppement de lâ€™interface du module SynthÃ¨se</p></li>
<li><p>AmÃ©lioration et gÃ©nÃ©ricitÃ© du module OccTax (mÃ©dias, import GPX,
champs masquables et pseudo-champs)</p></li>
<li><p>GÃ©nÃ©ricitÃ© du module dâ€™export</p></li>
<li><p>DÃ©veloppement du module de validation (#181)</p></li>
<li><p>DÃ©veloppement dâ€™un module de suivi des habitats avec une gestion
gÃ©nÃ©rique des sites et visites de suivi</p></li>
<li><p>DÃ©veloppement dâ€™un module de collecte citoyenne (#242)</p></li>
</ul>
</section>
<section id="versions-1-2014-2018">
<h2>Versions 1 (2014-2018)<a class="headerlink" href="#versions-1-2014-2018" title="Link to this heading">ïƒ</a></h2>
<p>Pour consulter les notes des versions 1 de GeoNature, elles sont disponibles dans la branche dÃ©diÃ©e : https://github.com/PnX-SI/GeoNature/blob/v1/docs/changelog.rst</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="authors.html" class="btn btn-neutral float-left" title="AUTEURS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> PrÃ©cÃ©dent</a>
        <a href="api-references.html" class="btn btn-neutral float-right" title="API REFERENCES" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2018-2023, PnE, PnC.</p>
  </div>

  CompilÃ© avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thÃ¨me</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>