

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CHANGELOG &mdash; GeoNature 2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="AUTEURS" href="authors.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> GeoNature
          

          
            
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation-all.html">INSTALLATION GLOBALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-standalone.html">INSTALLATION AUTONOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-mtes.html">SPECIFICITES DEPOBIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-1.html">IMPORT NIVEAU 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-2.html">IMPORT NIVEAU 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions-compatibility.html">COMPATIBILITE</a></li>
<li class="toctree-l1"><a class="reference internal" href="conf-apache.html">CONFIGURATION APACHE</a></li>
<li class="toctree-l1"><a class="reference internal" href="https.html">HTTPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CHANGELOG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.3.2 (2020-02-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.3.1 (2020-02-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de No√´l (2019-12-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2.2.1 (2019-10-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.1.2 (2019-07-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.1.1 (2019-07-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.0.1 (2019-03-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">1.9.1 (2018-05-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">1.9.0 (2017-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">1.8.4 (2017-04-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">1.8.3 (2017-02-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">1.8.2 (2017-01-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">1.8.1 (2017-01-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">1.8.0 (2016-12-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">1.7.4 (2016-07-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">1.7.3 (2016-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id16">1.7.2 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">1.7.1 (2016-04-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id18">1.7.0 (2016-04-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">1.6.0 (2016-01-14)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">1.5.0 (2015-11-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id21">1.4.0 (2015-10-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id22">1.3.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id23">1.2.0 (2015-02-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id24">1.1.0 (2014-12-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id25">1.0.0 (2014-12-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id26">0.1.0 (2014-12-01)</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>CHANGELOG</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/CHANGELOG.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de m√©tadonn√©es (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>M√©tadonn√©es : Ajout d‚Äôune fiche pour chaque jeu de donn√©es et cadres d‚Äôacquisition, incluant une carte de l‚Äô√©tendue des observations et un graphique de r√©partition des taxons par Groupe INPN (#846 par &#64;FloVollmer)</li>
<li>M√©tadonn√©es : Possibilit√© d‚Äôexporter les fiches des JDD et des CA en PDF, g√©n√©r√©s par le serveur avec WeasyPrint. Logo et ent√™tes modifiables dans le dossier <code class="docutils literal"><span class="pre">backend/static/images/</span></code> (#882 par &#64;FloVollmer)</li>
<li>M√©tadonn√©es : Impl√©mentation du CRUVED sur la liste des CA et JDD (#911)</li>
<li>M√©tadonn√©es : Affichage de tous les CA des JDD pour lequels l‚Äôutilisateur connect√© a des droits (#908)</li>
<li>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration (optionnelle) vers Taxref version 13</li>
<li>Installation globale migr√©e de Taxref vesion 11 √† 13</li>
<li>Synth√®se et zonages : Ne pas inclure l‚Äôassociation aux zonages limitrophes d‚Äôune observation quand sa g√©om√©trie est √©gale √† un zonage (maille, commune‚Ä¶) (#716 par &#64;jbdesbas)</li>
<li>Synth√®se : Ajout de la possibilit√© d‚Äôactiver la recherche par observateur √† travers une liste, avec ajout des param√®tres <code class="docutils literal"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal"><span class="pre">False</span></code> par d√©faut) et <code class="docutils literal"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</li>
<li>Synth√®se : Am√©lioration de la recherche des observateurs. Non prise en compte de l‚Äôordre des noms saisis (#834 par &#64;jbrieuclp)</li>
<li>Synth√®se : Ajout de filtres avanc√©s (<code class="docutils literal"><span class="pre">Saisie</span> <span class="pre">par</span></code> bas√© sur <code class="docutils literal"><span class="pre">id_digitiser</span></code>, <code class="docutils literal"><span class="pre">Commentaire</span></code> du relev√© et de l‚Äôoccurrence, <code class="docutils literal"><span class="pre">D√©terminateur</span></code>) (#834 par &#64;jbrieuclp)</li>
<li>Occtax : Cr√©ation d‚Äôun trigger g√©n√©rique de calcul de l‚Äôaltitude qui n‚Äôest ex√©cut√© que si l‚Äôaltitude n‚Äôest pas post√©e (#848)</li>
<li>Ajout d‚Äôune table <code class="docutils literal"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister les applications mobiles, l‚ÄôURL de leur APK et d‚Äôune API pour interroger le contenu de cette table. Les fichiers des applications et leurs fichiers de configurations peuvent √™tre charg√©s dans le dossier <code class="docutils literal"><span class="pre">backend/static/mobile</span></code> (#852)</li>
<li>Ajout d‚Äôun offset et d‚Äôune limite sur la route de la couleur des taxons (utilis√©e uniquement par Occtax-mobile actuellement)</li>
<li>Support des fonds de carte au format WMS (<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>), (#890 par &#64;jbdesbas)</li>
<li>Ajout d‚Äôun champs texte <code class="docutils literal"><span class="pre">reference_biblio</span></code> dans la table <code class="docutils literal"><span class="pre">gn_synthese</span></code></li>
<li>Am√©lioration des perfomances du module de validation, en revoyant la vue <code class="docutils literal"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les requ√™tes et en g√©n√©rant le GeoJSON au niveau de la BDD (#923)</li>
<li>Ajout d‚Äôune fonction SQL d‚Äôinsertion de donn√©es dans la synthese (et une fonction python associ√©e)</li>
<li>Compl√©ments de la documentation (Permissions des utilisateurs, Occhab‚Ä¶)</li>
<li>Ajout de scripts de migration des donn√©es de GINCO1 vers GeoNature (<code class="docutils literal"><span class="pre">data/scripts/import_ginco</span></code>)</li>
<li>Trigger Occtax vers Synth√®se : Am√©lioration du formatage des heures avec <code class="docutils literal"><span class="pre">date_trunc()</span></code> dans la fonction <code class="docutils literal"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</li>
<li>Barre de navigation : Clarification de l‚Äôic√¥ne d‚Äôouverture du menu, ajout d‚Äôun param√®tre <code class="docutils literal"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de changer le nom du fichier du logo de l‚Äôapplication (#897 par &#64;jbrieuclp)</li>
<li>M√©dias : Am√©lioration des fonctions backend</li>
<li>Mise √† jour de jQuery en version 3.5.0</li>
<li>Suppression de la table <code class="docutils literal"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code> et du trigger sur la Synth√®se qui la remplissait pour utiliser la vue mat√©rialis√©e <code class="docutils literal"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant les noms de recherche de tous les taxons de Taxref, enti√®rement revue dans TaxHub 1.7.0</li>
<li>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe de jointure des tables</li>
<li>Ajout de fonctions SQL d‚Äôinsertion de donn√©es dans la Synth√®se (<code class="docutils literal"><span class="pre">gn_synthese.import_json_row()</span></code> et <code class="docutils literal"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python associ√©e (<code class="docutils literal"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>) pour l‚ÄôAPI permettant de poster dans la Synth√®se (#736). Utilis√©e par le module Monitoring.</li>
<li>Ajout du plugin Leaflet.Deflate (#934  par &#64;jpm-cbna)</li>
<li>Connexion au CAS INPN : Association des JDD aux modules Occtax et Occhab (param√©trable) quand on importe les JDD de l‚Äôutilisateur qui se connecte (dans la table <code class="docutils literal"><span class="pre">gn_commons.cor_module_dataset</span></code>)</li>
<li>Mise √† jour des librairies Python Utils-Flask-SQLAlchemy (en version 0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant de mettre en place les exports au format GeoPackage et corrigeant les exports de SHP contenant des g√©om√©tries multiples</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Mise √† jour des URL de la documentation utilisateur des modules, renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></li>
<li>Validation : Correction de l‚Äôouverture de la fiche d‚Äôinformation d‚Äôune observation (#858)</li>
<li>Modification de l‚Äôattribution de la hauteur du composant <code class="docutils literal"><span class="pre">map-container</span></code> pour permettre d‚Äôadapter la hauteur de la carte si la hauteur d‚Äôun conteneur parent est modifi√©. Et que <code class="docutils literal"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</li>
<li>Mise √† jour de la librairie python Markupsafe en version 1.1, corrigeant un probl√®me de setuptools (#881)</li>
<li>Page Maintenance : Correction de l‚Äôaffichage de l‚Äôimage (par &#64;jpm-cbna)</li>
<li>Correction du multiselect du composant <code class="docutils literal"><span class="pre">pnx-nomenclatures</span></code> (#885 par &#64;jpm-cbna)</li>
<li>Correction de l‚Äô<code class="docutils literal"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal"><span class="pre">marker</span></code> (#901 par &#64;jbrieuclp)</li>
<li>Utilisation de NVM quand on installe les d√©pendances javascript (#926 par &#64;jpm-cbna)</li>
<li>Formulaire JDD : Correction de l‚Äôaffichage de la liste des modules (#861)</li>
<li>Correction de l‚Äôutilisation des param√®tres du proxy (#944)</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Si vous mettez √† jour GeoNature.</p>
<ul class="simple">
<li>Vous devez d‚Äôabord mettre √† jour TaxHub en version 1.7.0</li>
<li>Si vous mettez √† jour TaxHub, vous pouvez mettre √† jour Taxref en version 13. Il est aussi possible de le faire en diff√©r√©, plus tard</li>
<li>Vous pouvez mettre √† jour UsersHub en version 2.1.2</li>
<li>Ex√©cuter le script SQL de mise √† jour des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</li>
<li>Si vous avez mis √† jour Taxref en version, r√©percutez les √©volutions au niveau des nomenclatures avec le script SQL <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>. Sinon vous devrez l‚Äôex√©cuter plus tard, apr√®s avoir mis √† jour Taxref en version 13.</li>
<li>Ex√©cuter le script SQL de mise √† jour de la BDD de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</li>
<li>Installer les d√©pendances de la librairie Python WeasyPrint :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libcairo2</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpango</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libpangocairo</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libgdk</span><span class="o">-</span><span class="n">pixbuf2</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">libffi</span><span class="o">-</span><span class="n">dev</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">shared</span><span class="o">-</span><span class="n">mime</span><span class="o">-</span><span class="n">info</span>
</pre></div>
</div>
<ul class="simple">
<li>Corriger l‚Äôutilisation des param√®tres du proxy (#944) dans le fichier <code class="docutils literal"><span class="pre">backend/gunicorn_start.sh</span></code> en rempla√ßant les 2 lignes :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_http&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_http&#39;&quot;</span>
<span class="p">[[</span> <span class="o">-</span><span class="n">z</span> <span class="s2">&quot;$proxy_https&quot;</span> <span class="p">]]</span> <span class="o">||</span> <span class="n">export</span> <span class="n">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;$proxy_https&#39;&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>Vous pouvez supprimer les associations des observations de la synth√®se aux zonages limitrophes, si vous n‚Äôavez pas d‚Äôobservations sans g√©om√©trie (#719) :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">cor_area_synthese</span> <span class="n">cas</span>
<span class="n">USING</span> <span class="n">gn_synthese</span><span class="o">.</span><span class="n">synthese</span> <span class="n">s</span><span class="p">,</span> <span class="n">ref_geo</span><span class="o">.</span><span class="n">l_areas</span> <span class="n">a</span>
<span class="n">WHERE</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_synthese</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">id_synthese</span> <span class="n">AND</span> <span class="n">a</span><span class="o">.</span><span class="n">id_area</span> <span class="o">=</span> <span class="n">cas</span><span class="o">.</span><span class="n">id_area</span>
<span class="n">AND</span> <span class="n">public</span><span class="o">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
</ul>
</div>
<div class="section" id="id1">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id1" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>Possibilit√© de charger les commandes d‚Äôun module dans les commandes de GeoNature</li>
<li>Ajout de commentaires dans le fichier d‚Äôexemple de configuration <code class="docutils literal"><span class="pre">config/default_config.toml.example</span></code></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Correction d‚Äôune incoh√©rence dans le d√©compte des JDD sur la page d‚Äôaccueil en leur appliquant le CRUVED (#752)</li>
<li>Mont√©e de version de la librairie <code class="docutils literal"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour compatibilit√© avec la version 1.0.0 du module d‚Äôexport</li>
</ul>
</div>
<div class="section" id="id2">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id2" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>Installation globale : Compatibilit√© Debian 10 (PostgreSQL 11, PostGIS 2.5)</li>
<li>Installation globale : Passage √† Taxhub 1.6.4 et UsersHub 2.1.1</li>
<li>Utilisation g√©n√©ralis√©e des nouvelles librairies externalis√©es de s√©rialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</li>
<li>Possibilit√© de r√©gler le timeout de Gunicorn pour √©viter le plantage lors de requ√™tes longues</li>
<li>Ne pas zoomer sur les observations au premier chargement de la carte (#838)</li>
<li>Leaflet-draw : Ajout de la possibilit√© de zoomer sur le point (par &#64;joelclems)</li>
<li>Ajout du nom vernaculaire dans les fiches d‚Äôinformation des relev√©s d‚ÄôOcctax (par &#64;FloVollmer / #826)</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Correction de l‚Äôinstallation de Node.js et npm par l‚Äôutilisation g√©n√©ralis√©e de nvm (#832 et #837)</li>
<li>Fixation de la version de Node.js en 10.15.3 (dans le fichier <code class="docutils literal"><span class="pre">fronted/.nvmrc</span></code>)</li>
<li>Ajout d‚Äôune r√©f√©rence de l‚Äôobjet Leaflet <code class="docutils literal"><span class="pre">L</span></code> afin qu‚Äôil soit utilis√© dans les modules et changement du typage de l‚Äô√©venement Leaflet <code class="docutils literal"><span class="pre">MouseEvent</span></code> en <code class="docutils literal"><span class="pre">L.LeafletMouseEvent</span></code></li>
<li>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</li>
<li>Corrections de typos dans la documentation d‚Äôadministration (#840 - par &#64;sogalgeeko)</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li>Vous pouvez passer directement √† cette version depuis la 2.2.x, mais en suivant les notes des versions interm√©diaires (NB : il n‚Äôest pas n√©cessaire d‚Äôex√©cuter le script <code class="docutils literal"><span class="pre">migrate.sh</span></code> des versions pr√©c√©dentes)</li>
<li>Installez <code class="docutils literal"><span class="pre">pip3</span></code> et <code class="docutils literal"><span class="pre">virtualenv</span></code></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
<span class="n">sudo</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span><span class="o">==</span><span class="mf">20.0</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li>Rajoutez la ligne <code class="docutils literal"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal"><span class="pre">config/settings.ini</span></code>. Il s‚Äôagit du temps maximal (en seconde) autoris√© pour chaque requ√™te. A augmenter, si vous avez d√©j√† rencontr√© des probl√®mes de timeout.</li>
<li>Depuis le r√©pertoire <code class="docutils literal"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal"><span class="pre">nvm</span> <span class="pre">install</span></code></li>
</ul>
</div>
<div class="section" id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de No√´l (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>D√©veloppement du module Occhab (Occurrences d‚Äôhabitats) bas√© sur une version minimale du standard SINP du m√™me nom et s‚Äôappuyant sur le r√©f√©rentiel Habref du SINP (#735)<ul>
<li>Consultation (carte-liste) des stations et affichage de leurs habitats</li>
<li>Recherche (et export) des stations par jeu de donn√©es, habitats ou dates</li>
<li>Saisie d‚Äôune station et de ses habitats</li>
<li>Possibilit√© de saisir plusieurs habitats par station</li>
<li>Saisie des habitats bas√©e sur une liste pr√©-d√©finie √† partir d‚ÄôHabref. Possibilit√© d‚Äôint√©grer toutes les typologies d‚Äôhabitat ou de faire des listes r√©duites d‚Äôhabitats</li>
<li>Possibilit√© de charger un fichier GeoJson, KML ou GPX sur la carte et d‚Äôutiliser un de ses objets comme g√©om√©trie de station</li>
<li>Mise en place d‚Äôune API Occhab (Get, Post, Delete, Export stations et habitats et r√©cup√©rer les valeurs par d√©faut des nomenclatures)</li>
<li>Calcul automatique des altitudes (min/max) et de la surface d‚Äôune station</li>
<li>Gestion des droits (en fonction du CRUVED de l‚Äôutilisateur connect√©)</li>
<li>D√©finition des valeurs par d√©faut dans la BDD (param√©trable par organisme)</li>
<li>Possibilit√© de masquer des champs du formulaire</li>
</ul>
</li>
<li>Cr√©ation d‚Äôun sous-module autonome ou int√©gr√© pour g√©rer l‚ÄôAPI d‚ÄôHabref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :<ul>
<li>Rechercher un habitat dans Habref (avec usage du trigramme pour la pertinence du r√©sultat)</li>
<li>Obtenir les infos d‚Äôun habitat et de ses correspondances √† partir de son cd_hab</li>
<li>Obtenir les habitats d‚Äôune liste (avec ou sans leur code en plus de leur nom et filtrable par typologie)</li>
<li>Obtenir la liste des typologies (filtrable par liste d‚Äôhabitats)</li>
</ul>
</li>
<li>Mise √† jour du module des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version 1.3.2 incluant notamment :<ul>
<li>Ajout de nomenclatures SINP concernant les habitats</li>
<li>Ajout d‚Äôune contrainte d‚Äôunicit√© sur la combinaison des champs <code class="docutils literal"><span class="pre">id_type</span></code> et <code class="docutils literal"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal"><span class="pre">t_nomenclatures</span></code></li>
</ul>
</li>
<li>Association des JDD √† des modules pour filtrer les JDD utilis√©s dans Occtax ou dans Occhab notamment (#399)</li>
<li>Mise √† jour de Angular 4 √† Angular 7 (performances, ‚Ä¶.) par &#64;jbrieuclp</li>
<li>Ajout d‚Äôune documentation utilisateur pour le module Synth√®se : <a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a> (par &#64;amandine-sahl)</li>
<li>OCCTAX : Am√©lioration importante des performances de la liste des relev√©s (par &#64;jbrieuclp) (#690, #740)</li>
<li>Am√©liorations des performances des exports de Occtax et de Synth√®se et ajout d‚Äôindex dans Occtax (par &#64;gildeluermoz) (#560)</li>
<li>Partage de scripts de sauvegarde de l‚Äôapplication et de la BDD dans <code class="docutils literal"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</li>
<li>Externalisation des librairies d‚Äôoutils Flask et SQLAlchemy (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et <a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir les factoriser et les utiliser dans d‚Äôautres applications. Cela am√©liore aussi les performances des jointures.</li>
<li>SYNTHESE : Ajout d‚Äôun export de la liste des esp√®ces (#805)</li>
<li>SYNTHESE : Baser la port√©e de tous les exports (y compris Statuts) sur l‚Äôaction E (#804)</li>
<li>METADONNEES : Affichage des ID des JDD et CA</li>
<li>OCCTAX : Conserver le fichier GPX ou GeoJSON charg√© sur la carte quand on enchaine des relev√©s et ajouter de la transparence sur les g√©om√©tries utilis√©s dans les relev√©s pr√©c√©dents (#813)</li>
<li>OCCTAX : Clarification de l‚Äôergonomie pour ajouter un d√©nombrement sur un taxon (#780)</li>
<li>Ajout des dates de creation et de modification dans les tables <code class="docutils literal"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal"><span class="pre">gn_monitoring.t_base_visits</span></code> et triggers pour les calculer automatiquement</li>
<li>Ajout des champs <code class="docutils literal"><span class="pre">geom_local</span></code>, <code class="docutils literal"><span class="pre">altitude_min</span></code> et <code class="docutils literal"><span class="pre">altitude_max</span></code> dans la table <code class="docutils literal"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer automatiquement (#812)</li>
<li>Ajout des champs <code class="docutils literal"><span class="pre">id_dataset</span></code>, <code class="docutils literal"><span class="pre">id_module</span></code>, <code class="docutils literal"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal"><span class="pre">id_nomenclature_grp_typ</span></code> dans la table <code class="docutils literal"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</li>
<li>Le composant g√©n√©rique FileLayer expose un <code class="docutils literal"><span class="pre">output</span></code> pour r√©cuperer la g√©om√©trie s√©lectionn√©e (un observable de MapService √©tait utilis√© auparavant)</li>
<li>Support des markers sur le composant <code class="docutils literal"><span class="pre">leaflet-draw</span></code></li>
<li>Possibilit√© de ne pas activer le composant <code class="docutils literal"><span class="pre">marker</span></code> au lancement lorsque celui-ci est utilis√© (input <code class="docutils literal"><span class="pre">defaultEnable</span></code>)</li>
<li>Ajout d‚Äôinputs <code class="docutils literal"><span class="pre">time</span></code> et <code class="docutils literal"><span class="pre">number</span></code> au composant DynamicForm permettant de g√©n√©rer des formulaires dynamiques.</li>
<li>Am√©liorations diverses du composant DynamicForm (par &#64;joelclems)</li>
<li>Ajout d‚Äôun param√®tre dans le cas o√π le serveur se trouve derri√®re un proxy (<code class="docutils literal"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal"><span class="pre">proxy_https</span></code> dans <code class="docutils literal"><span class="pre">config/settings.ini</span></code>)</li>
<li>Ajout d‚Äôune route permettant de r√©cup√©rer la liste des r√¥les d‚Äôune liste √† partir de son code (par &#64;joelclems)</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>MENU Side nav : Correction pour ne pas afficher les modules pour lesquels le param√®tre <code class="docutils literal"><span class="pre">active_frontend</span></code> est False (#822)</li>
<li>OCCTAX : Gestion de l‚Äô√©dition des occurrences o√π le JDD a √©t√© d√©sactiv√©, en ne permettant pas de modifier le JDD (#694)</li>
<li>OCCTAX : Correction d‚Äôune faiblesse lors de la r√©cup√©ration des informations taxonomiques d‚Äôun relev√© (utilisation d‚Äôune jointure plut√¥t que l‚ÄôAPI TaxHub) (#751)</li>
<li>OCCTAX : Correction des longues listes de taxons dans les tooltip des relev√©s en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</li>
<li>OCCTAX : Masquer le bouton <code class="docutils literal"><span class="pre">T√©l√©charger</span></code> si l‚Äôutilisateur n‚Äôa pas de droits d‚Äôexport dans le module (E = 0)</li>
<li>OCCTAX : Correction de l‚Äôaffichage des relev√©s dans la liste (#777)</li>
<li>OCCTAX : Correction des exports quand on filtre sur un obervateur en texte</li>
<li>SYNTHESE : Filtre sur <code class="docutils literal"><span class="pre">date_max</span></code> en prenant <code class="docutils literal"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code> pour prendre en compte les observations avec un horaire (#778)</li>
<li>SYNTHESE : Correction des boutons radios pour les filtres taxonomiques avanc√©s bas√©s sur les attributs TaxHub (#763)</li>
<li>SYNTHESE : Correction de la recherche par <code class="docutils literal"><span class="pre">cd_nom</span></code> dans le composant <code class="docutils literal"><span class="pre">SearchTaxon</span></code> (#824)</li>
<li>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</li>
<li>INSCRIPTION : Correction si aucun champ additionnel n‚Äôa √©t√© ajout√© au formulaire (par &#64;jbrieuclp) (#746)</li>
<li>INSCRIPTION : Correction de l‚Äôusage des param√®tres <code class="docutils literal"><span class="pre">ENABLE_SIGN_UP</span></code> et <code class="docutils literal"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</li>
<li>Simplification de l‚Äô√©criture des logs dans le script <code class="docutils literal"><span class="pre">install_db.sh</span></code></li>
<li>Correction de l‚Äôinstallation des requirements.txt lors de l‚Äôinstallation d‚Äôun module (#764 par &#64;joelclems)</li>
<li>COMMONS : Modification des champs de <code class="docutils literal"><span class="pre">t_modules</span></code> de type CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal"><span class="pre">module_path</span></code>, <code class="docutils literal"><span class="pre">module_target</span></code>, <code class="docutils literal"><span class="pre">module_external_url</span></code>) (#799)</li>
<li>COMMONS : Ajout de contraintes d‚Äôunicit√© pour les champs <code class="docutils literal"><span class="pre">module_path</span></code> et <code class="docutils literal"><span class="pre">module_code</span></code> de <code class="docutils literal"><span class="pre">t_modules</span></code></li>
<li>pnx-geojson : Am√©lioration du zoom, gestion des styles</li>
<li>Migration des donn√©es GeoNature V1 vers V2 (<code class="docutils literal"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>NB: La version 2.3.0 n‚Äôest pas compatible avec le module Dashboard. Si vous avez le module dashboard install√©, ne passez pas √† cette nouvelle version. Compatibilit√© dans la 2.3.1.</p>
<ul class="simple">
<li>Lancer le script de migration qui va installer et remplir le nouveau sch√©ma <code class="docutils literal"><span class="pre">ref_habitats</span></code> avec Habref et mettre √† jour le sch√©ma <code class="docutils literal"><span class="pre">ref_nomenclatures</span></code> :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/install/migration
chmod +x 2.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
<p>V√©rifier que la migration s‚Äôest bien d√©roul√©e dans le fichier <code class="docutils literal"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul class="simple">
<li>Lancer le script SQL de mise √† jour de la BDD de GeoNature <a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></li>
<li>Vous pouvez installer le nouveau module Occhab (Occurrences d‚Äôhabitats) si vous le souhaitez :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_occhab /occhab
</pre></div>
</div>
<ul class="simple">
<li>Lors de la migration (<code class="docutils literal"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les JDD actifs sont associ√©s par d√©faut au module Occtax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>). A chacun d‚Äôadapter si besoin, en en retirant certains. Pour utiliser le module Occhab, vous devez y associer au moins un JDD.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id3" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>La route de changement de mot de passe √©tait d√©sactiv√©e par le mauvais param√®tre (<code class="docutils literal"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de <code class="docutils literal"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</li>
<li>D√©sactivation du mode ‚Äúenchainement des relev√©s‚Äù en mode √©dition (#669). Correction effacement du m√™me relev√© (#744)</li>
<li>Correction d‚Äôaffichage du module m√©tadonn√©es lorsque les AF n‚Äôont pas de JDD pour des raisons de droit (#743)</li>
<li>Diverses corrections de doublons d‚Äôimport et de logs de d√©bugs (#742)</li>
<li>Mont√©e de version du sous-module d‚Äôauthentification: 1.4.2</li>
</ul>
</div>
<div class="section" id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>Ajout d‚Äôinterfaces et de param√®tres de cr√©ation de compte, de r√©cup√©ration de son mot de passe et d‚Äôadministration de son profil, bas√© sur l‚ÄôAPI UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia) #615</li>
<li>Ajout d‚Äôune fonctionnalit√© de cr√©ation automatique d‚Äôun CA et d‚Äôun JDD personnel lors de la validation d‚Äôun compte cr√©√© automatiquement (param√©trable)</li>
<li>Am√©lioration du composant de cr√©ation dynamique de formulaire (support de text-area, checkbox simple et multiple et exemple d‚Äôutilisation √† partir de la conf GeoNature)</li>
<li>Le composant ‚Äòobservateur‚Äô permet de rechercher sur le nom ou le pr√©nom (utilisation des RegEx) #567</li>
<li>Mise √† jour de Flask en version 1.1.1</li>
<li>Nouvelle version du sous-module d‚Äôauthentification (1.4.1), compatible avec UsersHub 2.1.0</li>
<li>Mise √† jour du sous-module de nomenclatures (version 1.3.0)</li>
<li>Mise √† jour et clarification du MCD (<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par &#64;jpm-cbna</li>
<li>Ajout d‚Äôune tutoriel vid√©o d‚Äôinstallation dans la documentation (<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Correction d‚Äôun bug sur les export CSV en utilisant la librairie Python standard <code class="docutils literal"><span class="pre">csv</span></code> (#733)</li>
<li>SYNTHESE API : Passage de la route principale de r√©cup√©ration des donn√©es en POST plut√¥t qu‚Äôen GET (#704)</li>
<li>SYNTHESE BDD : Suppression automatique des aires intersect√©es (<code class="docutils literal"><span class="pre">synthese.cor_area_synthese</span></code>) lorsqu‚Äôune observation est supprim√©e (DELETE CASCADE)</li>
<li>SYNTHESE : Prise en compte du param√®tre <code class="docutils literal"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code> (#707)</li>
<li>OCCTAX : Correction d‚Äôune autocompl√©tion automatique erron√©e de la date max en mode √©dition (#706)</li>
<li>VALIDATION : Am√©liorations des performances, par &#64;jbrieuclp (#710)</li>
<li>Prise en compte des sous-taxons pour le calcul des r√®gles de sensibilit√©</li>
<li>Correction des contraintes CHECK sur les tables li√©es √† la sensibilit√©</li>
<li>Compl√©ment et correction des scripts de migration <code class="docutils literal"><span class="pre">data/migrations/v1tov2</span></code></li>
<li>Correction et clarification de la documentation d‚Äôadministration des listes de taxons et de sauvegarde et restauration de la BDD (par &#64;lpofredc)</li>
<li>Correction de la rotation des logs</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li>Passer le script de migration suivant: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></li>
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
<li>Si vous souhaitez activer les fonctionnalit√©s de cr√©ation de compte, veuillez lire <strong>attentivement</strong> cette documentation : <a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></li>
<li>Si vous activez la cr√©ation de compte, UsersHub 2.1.0 doit √™tre install√©. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de version</a>.</li>
</ul>
</div>
<div class="section" id="id4">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id4" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>SYNTHESE : Correction d‚Äôune URL en dur pour la recherche de rangs taxonomiques</li>
<li>OCCTAX : Affichage uniquement des JDD actifs</li>
<li>VALIDATION : Abaissement de la limite d‚Äôaffichage de donn√©es sur la carte par d√©faut + message indicatif</li>
<li>Migration : Suppression d‚Äôun lien symbolique qui cr√©ait des liens en cascade</li>
<li>Am√©lioration de la documentation (&#64;dthonon)</li>
<li>Am√©lioration de la rapidit√© d‚Äôinstallation du MNT gr√¢ce √† la suppression d‚Äôun param√®tre inutile</li>
<li>BACKOFFICE : Correction d‚Äôune URL incorrecte et customisation</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0, passez directement √† cette version en suivant les notes de version de la 2.1.1.</p>
</div>
<div class="section" id="id5">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id5" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>SYNTHESE: Factorisation du formulaire de recherche (utilis√© dans le module synthese et validation)</li>
<li>SYNTHESE: Simplification et correction du module de recherche avanc√©e d‚Äôun taxon en le limitant √† l‚Äôordre (performances)</li>
<li>SYNTHESE: Ajout d‚Äôun composant de recherche taxonomique avanc√© bas√© sur les rangs taxonomiques (modules synthese et validation), bas√© sur la nouvelle fonction <code class="docutils literal"><span class="pre">taxonomie.find_all_taxons_children</span></code> ajout√©e √† TaxHub</li>
<li>Cr√©ation d‚Äôun backoffice d‚Äôadmnistration dans le coeur de GeoNature. Bas√© sur Flask-admin, les modules peuvent alimenter dynamiquement le backoffice avec leur configuration</li>
<li>Mise en place d‚Äôune documentation d√©veloppeur automatique de l‚ÄôAPI √† partir des docstring et des composants frontend, g√©n√©r√©e par Travis et d√©sormais accessible √† l‚Äôadresse <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</li>
<li>Am√©lioration de la documentation (triggers, installation, module validation)</li>
<li>Suppression du module d‚Äôexemple, remplac√© par un template de module (<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</li>
<li>Ajout d‚Äôun champ <code class="docutils literal"><span class="pre">validable</span></code> sur la table <code class="docutils literal"><span class="pre">gn_meta.t_datasets</span></code> controlant les donn√©es pr√©sentes dans le module VALIDATION (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</li>
<li>VALIDATION: Lister toutes les donn√©es de la synth√®se ayant un <code class="docutils literal"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui ont un enregistrement dans <code class="docutils literal"><span class="pre">gn_commons.t_validations</span></code></li>
<li>VALIDATION: On ne liste plus les <code class="docutils literal"><span class="pre">id_nomenclatures</span></code> des types de validation √† utiliser, dans la configuration du module. Mais on utilise toutes les nomenclatures activ√©es du type de nomenclature <code class="docutils literal"><span class="pre">STATUT_VALID</span></code>. (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</li>
<li>Ajout de tests sur les ajouts de JDD et CA</li>
<li>Ajout d‚Äôune fonctionnalit√© d‚Äôenvoie d‚Äôemail via Flask-Mail dans le coeur de GeoNature</li>
<li>Am√©lioration des performances: ajout d‚Äôindex sur Occtax et Metadonn√©es</li>
<li>Script d‚Äôimport des m√©tadonn√©es √† partir du webservice MTD de l‚ÄôINPN (&#64;DonovanMaillard)</li>
<li>Compl√©ment, correction et compatibilit√© 2.1.0 des scripts de migration <code class="docutils literal"><span class="pre">data/migrations/v1tov2</span></code></li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Nombreuses corrections du module de validation (non utilisation des id_nomenclature, simplification des vues et de la table <code class="docutils literal"><span class="pre">gn_commons.t_validations</span></code>)</li>
<li>Ordonnancement de listes d√©roulantes (#685)</li>
<li>OCCTAX : correction de l‚Äô√©dition d‚Äôun relev√© √† la g√©om√©trie de type Polyline (#684)</li>
<li>OCCTAX : correction l‚Äô√©dition et du contr√¥le conditionnel des champs de ‚Äúpreuves‚Äù (preuve d‚Äôexistence num√©rique / non num√©rique) (#679)</li>
<li>OCCTAX : correction du parametre <code class="docutils literal"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en compte (#670)</li>
<li>OCCTAX: correction de la date_max non remplie lorsque <code class="docutils literal"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></li>
<li>OCCTAX: correction d‚Äôun bug lors de l‚Äôenchainement de relev√© lorsque l‚Äôheure est remplie</li>
<li>SYNTHESE: correction des doublons lorsqu‚Äôil y a plusieurs observateurs</li>
<li>Correction du composant <code class="docutils literal"><span class="pre">dynamicForm</span></code> sur les champs de recherche de type texte (recherche sur Preuve num√©rique) (#530)</li>
<li>D√©sactivation du mode ‚Äúenchainer les relev√©s‚Äù en mode √©dition (#699)</li>
<li>Correction de <code class="docutils literal"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal"><span class="pre">gn_commons.t_modules</span></code> √† la place de <code class="docutils literal"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de suivi √† des modules</li>
<li>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</li>
<li>Le trigger remplissant <code class="docutils literal"><span class="pre">cor_area_synthese</span></code> en intersectant <code class="docutils literal"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les zonages ayant le champs <code class="docutils literal"><span class="pre">enabled=true</span></code></li>
<li>Correction <code class="docutils literal"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</li>
<li>MAJ de s√©curit√© de Bootstrap (en version 4.3.1)</li>
<li>L‚Äôancien module export du coeur est enlev√© en vue de la sortie du nouveau module export</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li>Passer TaxHub en version 1.6.3 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</li>
<li>Passer le script de migration <code class="docutils literal"><span class="pre">data/2.1.0to2.1.1.sql</span></code></li>
<li>Si vous aviez modifier les <code class="docutils literal"><span class="pre">id_nomenclature</span></code> dans la surcouche de la configuration du module validation, supprimer les car on se base maintenant sur les <code class="docutils literal"><span class="pre">cd_nomenclature</span></code></li>
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
<li>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></li>
</ul>
</div>
<div class="section" id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>Int√©gration du module Validation dans GeoNature (d√©velopp√© par &#64;JulienCorny, financ√© par &#64;sig-pnrnm)</li>
<li>Ajout de tables, r√®gles et fonctions permettant de calculer la sensibilit√© des occurrences de taxon de la synth√®se (#284)</li>
<li>Occtax - Possibilit√© d‚Äôenchainer les saisies de relev√©s et de garder les informations du relev√© (#633)</li>
<li>Occtax - Am√©lioration de l‚Äôergonomie de l‚Äôinterface MapList pour clarifier la recherche et l‚Äôajout d‚Äôun relev√© + ajout compteur (#467)</li>
<li>R√©vision de l‚Äôinterface du module M√©tadonn√©es, listant les cadres d‚Äôacquisition et leurs jeux de donn√©es (par &#64;jbrieuclp)</li>
<li>Ajout d‚Äôun m√©canisme du calcul des taxons observ√©s par zonage g√©ographique (#617)</li>
<li>Les mailles INPN (1, 5, 10km) sont int√©gr√©es √† l‚Äôinstallation (avec un param√®tre)</li>
<li>Statistiques de la page d‚Äôaccueil - Ajout d‚Äôun param√®tre permettant de les d√©sactiver (#599)</li>
<li>Occtax - Date par d√©faut param√©trable (#351)</li>
<li>Support des g√©ometries multiples (MultiPoint, MultiPolygone, MultiLigne) dans la synth√®se et Occtax (#609)</li>
<li>Synthese - Affichage des zonages intersect√©s dans un onglet s√©par√© (#579)</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>R√©vision compl√®te des scripts de migration de GeoNature v1 √† v2 (<code class="docutils literal"><span class="pre">data/migrations/v1tov2</span></code>)</li>
<li>Masquer l‚Äôexport du module Synth√®se si son CRUVED est d√©fini √† 0 (#608)</li>
<li>Correction de la v√©rification du CRUVED du module METADONNEES (#601)</li>
<li>Correction de la v√©rification du CRUVED lorsque get_role = False</li>
<li>Correction de la traduction sur la page de connexion (par &#64;jbrieuclp)</li>
<li>Occtax - Retour du composant GPS permettant de charger un marker √† partir de coordonn√©es X et Y (#624)</li>
<li>Correction lors d‚Äôimport de fichier GPX ayant une altitude (#631)</li>
<li>Occtax - Correction du filtre Observateur texte libre (#598)</li>
<li>M√©tadonn√©es - Inversion des domaines terrestre/marin (par &#64;xavyeah39)</li>
<li>M√©tadonn√©es - Correction de l‚Äô√©dition des cadres d‚Äôacquisition (#654, par &#64;DonovanMaillard)</li>
<li>Mise √† jour de s√©curit√© de Jinja2 et SQLAlchemy</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul>
<li><p class="first">Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</p>
</li>
<li><p class="first">Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</p>
</li>
<li><p class="first">Lancer le script de migration de la base de donn√©es :</p>
<p>Cette nouvelle version de GeoNature int√®gre les mailles INPN (1, 5, 10km) dans le r√©ferentiel g√©ographique. Si vous ne souhaitez pas les installer, lancer le script ci dessous en passant le param√®tre <code class="docutils literal"><span class="pre">no-grid</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p class="first">Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande d‚Äôinstallation du module puis sortir du virtualenv</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id6">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id6" title="Permalink to this headline">¬∂</a></h2>
<p><strong>üöÄ Nouveaut√©s</strong></p>
<ul class="simple">
<li>D√©veloppement : ajout d‚Äôune fonction de g√©n√©ration dynamique de requ√™te SQL (avec v√©rification et cast des types)</li>
<li>Synthese : Ajout d‚Äôun message indiquant que le module affiche les derni√®res observations par d√©faut</li>
</ul>
<p><strong>üêõ Corrections</strong></p>
<ul class="simple">
<li>Synthese : correction du filtre CRUVED pour les port√©es 1 et 2 sur la route <code class="docutils literal"><span class="pre">synthese/for_web</span></code> (#584)</li>
<li>Synthese : correction du bug lorsque la g√©om√©trie est null (#580)</li>
<li>Synthese : Correction de la redirection vers le module de saisie (#586)</li>
<li>Synthese : Correction de la valeur par d√©faut de la nomenclature <code class="docutils literal"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal"><span class="pre">Pr√©sent</span></code> au lieu de <code class="docutils literal"><span class="pre">NSP</span></code>)</li>
<li>Configuration carto : correction du bug d‚Äôarrondissement des coordonn√©es g√©ographiques (#582)</li>
<li>Correction du trigger de calcul de la geom locale</li>
<li>Recr√©ation de la vue <code class="docutils literal"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait √©t√© supprim√©e lors de la migration RC3 vers RC4</li>
<li>Correction de la vue <code class="docutils literal"><span class="pre">pr_occtax.v_releve_list</span></code></li>
<li>Correction ajout rang et cd_nom sur l‚Äôautocomplete de la synthese, absent dans le script de migration</li>
<li>DEPOBIO : Correction de la d√©connexion au CAS INPN</li>
<li>Occtax et Metadata: correction lors de la mise √† jour d‚Äôun √©lement (Merge mal g√©r√© par SQLAlchemy lorsqu‚Äôon n‚Äôa pas une valeur NULL) (#588)</li>
<li>Composant ‚Äújeu de donn√©es‚Äù : retour √† l‚Äôaffichage du nom long (#583)</li>
<li>Am√©lioration du style du composant multiselect</li>
<li>Metadata : formulaire cadre d‚Äôacquisition - listage uniquement des cadres d‚Äôacquisition parent pour ne pas avoir de cadres d‚Äôacquisition imbriqu√©s</li>
<li>Ajouts de tests automatis√©s compl√©mentaires</li>
</ul>
<p><strong>‚ö†Ô∏è Notes de version</strong></p>
<ul class="simple">
<li>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</li>
<li>Ex√©cuter le script de migration SQL du sous-module Nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</li>
<li>Ex√©cuter le script de migration SQL de GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</li>
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
</ul>
</div>
<div class="section" id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Permalink to this headline">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</li>
<li>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</li>
<li>Refonte de la base de donn√©es pour la rendre plus standardis√©e, plus g√©n√©rique et modulaire</li>
<li>Refonte ergonomique pour moderniser l‚Äôapplication</li>
</ul>
<img alt="http://geonature.fr/img/gn-login.jpg" src="http://geonature.fr/img/gn-login.jpg" />
<p>Pour plus de d√©tails sur les √©volutions apport√©es dans la version 2, consultez les d√©tails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Possibilit√© de charger un fichier (GPX, GeoJson ou KML) sur la carte pour la saisie dans le module Occtax (#256)</li>
<li>Ajout d‚Äôun moteur de recherche de lieu (bas√© sur l‚ÄôAPI OpenStreetMap Nominatim) sur les modules cartographiques (#476)</li>
<li>Int√©gration du plugin leaflet markerCluster permettant d‚Äôafficher d‚Äôavantage d‚Äôobservations sur les cartes et de g√©rer leurs superposition (#559)</li>
<li>Synth√®se : possibilit√© de grouper plusieurs types de zonages dans le composant <code class="docutils literal"><span class="pre">pnx-areas</span></code></li>
<li>Design de la page de login</li>
<li>Int√©gration d‚Äôun bloc stat sur la page d‚Äôaccueil</li>
<li>Ajout d‚Äôun export des m√©tadonn√©es dans la synth√®se</li>
<li>Centralisation de la configuration cartographique dans la configuration globale de GeoNature (<code class="docutils literal"><span class="pre">geonature_config.toml</span></code>)</li>
<li>Cartographie : zoom sur l‚Äôemprise des r√©sultats apr√®s une recherche</li>
<li>Migration de la gestion des m√©tadonn√©es dans un module √† part : ‚ÄòMETADATA‚Äô (#550)</li>
<li>Export vue synth√®se customisable (voir doc)</li>
<li>Lien vers doc par module (customisables dans <code class="docutils literal"><span class="pre">gn_commons.t_modules</span></code>) (#556)</li>
<li>Ajout du code du d√©partement dans les filtres par commune (#555)</li>
<li>Ajout du rang taxonomique et du cd_nom apr√®s les noms de taxons dans la recherche taxonomique (#549)</li>
<li>Mise √† jour des communes fournies lors de l‚Äôinstallation (IGN admin express 2019) (#537)</li>
<li>Synth√®se : Ajout du filtre par organisme (#531), affichage des acteurs dans les fiches d√©tail et les exports</li>
<li>Synthese: possibilit√© de filtrer dans les listes d√©roulantes des jeux de donn√©es et cadres d‚Äôacquisition</li>
<li>Filtre de la recherche taxonomique par r√®gne et groupe INPN retir√© des formulaires de recherche (#531)</li>
<li>Suppression du champ validation dans le sch√©ma de BDD Occtax car cette information est stock√©e dans la table verticale <code class="docutils literal"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans les fiches Occtax et Synth√®se</li>
<li>Ajout d‚Äôune vue <code class="docutils literal"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la r√©cup√©ration du dernier statut de validation d‚Äôune observation</li>
<li>Suppression de toutes les r√©f√©rences √† <code class="docutils literal"><span class="pre">taxonomie.bib_noms</span></code> en vue de le supprimer de TaxHub</li>
<li>S√©paration des commentaires sur l‚Äôobservation et sur le contexte (relev√©) dans la Synth√®se et simplification des triggers de Occtax vers Synth√®se (#478)</li>
<li>Nouveau logo GeoNature (#346)</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Am√©liorations importantes des performances de la synth√®se (#560)</li>
<li>Synth√®se : correction li√©e aux filtres multiples et aux filtres g√©ographiques de type cercle</li>
<li>Ajout d‚Äôune contrainte <code class="docutils literal"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre <code class="docutils literal"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal"><span class="pre">ref_geo.l_areas</span></code> (#554)</li>
<li>Occtax : possibilit√© de saisir un d√©nombrement √©gal √† 0 (cas des occurrences d‚Äôabsence)</li>
<li>Occtax : retour √† l‚Äôemprise cartographique pr√©c√©dente lorsqu‚Äôon enchaine les relev√©s (#570)</li>
<li>Occtax : correction de l‚Äôautomplissage du champ <code class="docutils literal"><span class="pre">hour_max</span></code> lors de l‚Äô√©dition d‚Äôun relev√©</li>
<li>Divers compl√©ments de la documentation (merci &#64;jbdesbas, &#64;xavyeah39 et &#64;DonovanMaillard)</li>
<li>Ajout de contraintes d‚Äôunicit√© sur les UUID_SINP pour emp√™cher les doublons (#536)</li>
<li>Corrections et compl√©ments des tests automatiques</li>
<li>Am√©lioration de l‚Äôinstallation des modules GeoNature</li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li>Sauvegarder toutes ses donn√©es car l‚Äôop√©ration est complexe et non-automatis√©e</li>
<li>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</li>
<li>Passer aux derni√®res versions de UsersHub et TaxHub</li>
<li>Installer GeoNature standalone ou refaire une installation compl√®te</li>
<li>Adaptez les scripts pr√©sents dans <code class="docutils literal"><span class="pre">/data/migrations/v1tov2</span></code> et ex√©cutez-les pas √† pas. Attention ces scripts ont √©t√© faits pour la version 2.0.0-rc.1 et sont donc √† ajuster, tester, compl√©ter et adapter √† votre contexte</li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la migration.</p>
<ul class="simple">
<li>Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires.</li>
<li>Les personnes ayant configur√© leur fichier <code class="docutils literal"><span class="pre">map.config.ts</span></code> devront le r√©percuter dans <code class="docutils literal"><span class="pre">geonature_config.toml</span></code>, suite √† la centralisation de la configuration cartographique (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section <code class="docutils literal"><span class="pre">[MAPCONFIG]</span></code>).</li>
<li>La configuration des exports du module synth√®se a √©t√© modifi√©e (voir <a class="reference external" href="https://geonature.readthedocs.io/fr/latest/admin-manual.html#module-synthese">https://geonature.readthedocs.io/fr/latest/admin-manual.html#module-synthese</a>). Supprimer la variable``[SYNTHESE.EXPORT_COLUMNS]`` dans le fichier <code class="docutils literal"><span class="pre">geonature_config.toml</span></code>. Voir l‚Äôexemple dans le fichier (voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a> section) pour configurer les exports.</li>
<li>Supprimer la variable <code class="docutils literal"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a √©t√© ajout√©e dans le fichier <code class="docutils literal"><span class="pre">geonature_config.toml</span></code>.</li>
<li>Pour simplifier son √©dition, le template personalisable de la page d‚Äôaccueil (<code class="docutils literal"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>) a √©t√© modifi√© (la carte des 100 derni√®re observations n‚Äôy figure plus). Veuillez supprimer tout ce qui se situe √† partir de la ligne 21 (<code class="docutils literal"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</li>
<li>Ex√©cuter le script de migration SQL: <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</li>
<li>Le backoffice de gestion des m√©tadonn√©es est dor√©navant un module GeoNature √† part. Le script migration pr√©c√©demment lanc√© pr√©voit de mettre un CRUVED au groupe_admin et groupe_en_poste pour le nouveau module METADATA. Les groupes nouvellement cr√©√©s par les administrateurs et n‚Äôayant de CRUVED pour l‚Äôobjet METADATA (du module Admin), se retrouvent avec le CRUVED h√©rit√© de GeoNature. L‚Äôadministrateur devra changer lui-m√™me le CRUVED de ces groupes pour le nouveau module METADATA via le backoffice des permissions.</li>
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>).</li>
</ul>
</div>
<div class="section" id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Mise en place de logs rotatifs pour √©viter de surcharger le serveur</li>
<li>Centralisation des logs applicatifs dans le dossier <code class="docutils literal"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Synth√®se - Correction et am√©lioration de la gestion des dates (#540)</li>
<li>Am√©lioration des tests automatis√©s</li>
<li>Correction et compl√©ment ds scripts d‚Äôinstallation des modules GeoNature</li>
<li>Remplacement de <code class="docutils literal"><span class="pre">gn_monitoring.cor_site_application</span></code> par <code class="docutils literal"><span class="pre">gn_monitoring.cor_site_module</span></code></li>
<li>Compl√©ment des documentations de customisation, d‚Äôadministration et de d√©veloppement</li>
<li>Ajout d‚Äôune documentation de migration de donn√©es Serena vers GeoNature (<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>) par &#64;xavyeah39</li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p class="first">Vous pouvez passer directement √† cette version, mais en suivant les notes des versions interm√©diaires</p>
</li>
<li><p class="first">Ex√©cutez la mise √† jour de la BDD GeoNature (<code class="docutils literal"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p>
</li>
<li><p class="first">Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de GeoNature dans <code class="docutils literal"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus associer les sites de suivi de <code class="docutils literal"><span class="pre">gn_monitoring</span></code> √† des applications, utilis√© par les modules de suivi (Flore, habitat, chiro). Le m√©canisme est remplac√© par une association des sites de suivi aux modules. La cr√©ation de la nouvelle table est automatis√©e (<code class="docutils literal"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la migration des √©ventuelles donn√©es existantes de <code class="docutils literal"><span class="pre">gn_monitoring.cor_site_application</span></code> vers <code class="docutils literal"><span class="pre">gn_monitoring.cor_site_module</span></code>, √† faire manuellement.</p>
</li>
<li><p class="first">Afin que les logs de l‚Äôapplication soient tous √©crits au m√™me endroit, modifier le fichier <code class="docutils literal"><span class="pre">geonature-service.conf</span></code> (<code class="docutils literal"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la ligne <code class="docutils literal"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par <code class="docutils literal"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code> (en rempla√ßant &lt;MON_USER&gt; par votre utilisateur linux).</p>
</li>
<li><p class="first">Vous pouvez √©galement mettre en place un syst√®me de logs rotatifs (syst√®me permettant d‚Äôarchiver les fichiers de logs afin qu‚Äôils ne surchargent pas le serveur - conseill√© si votre serveur a une capacit√© disque limit√©e). Cr√©er le fichier suivant <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes suivantes dans le fichier nouvellement cr√©√© (en rempla√ßant &lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">MON_USER</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/*.</span><span class="n">log</span> <span class="p">{</span>
<span class="n">daily</span>
<span class="n">rotate</span> <span class="mi">8</span>
<span class="n">size</span> <span class="mi">100</span><span class="n">M</span>
<span class="n">create</span>
<span class="n">compress</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ex√©cutez ensuite la commande <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p class="first">Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</p>
</li>
</ul>
</div>
<div class="section" id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Mise √† jour des paquets du frontend (#538)</li>
<li>Correction d‚Äôun conflit entre Marker et Leaflet-draw</li>
<li>Utilisation du param√®tre <code class="docutils literal"><span class="pre">ID_APP</span></code> au niveau de l‚Äôapplication</li>
<li>Corrections mineures diverses</li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>Sortie de versions correctives de UsersHub (2.0.2 - <a class="reference external" href="https://github.com/PnEcrins/UsersHub/releases">https://github.com/PnEcrins/UsersHub/releases</a>) et TaxHub (1.6.1 - <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) √† appliquer aussi</li>
<li>Vous pouvez vous r√©f√©rer √† la documentation globale de mise √† jour de GeoNature RC3 vers RC4 par &#64;DonovanMaillard (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</li>
</ul>
</div>
<div class="section" id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Int√©gration de la gestion des permissions (CRUVED) dans la BDD de GeoNature, g√©r√© via une interface d‚Äôadministration d√©di√© (#517)</li>
<li>Mise en place d‚Äôun syst√®me de permissions plus fin par module et par objet (#517)</li>
<li>Mise en place d‚Äôun m√©canimse g√©n√©rique pour la gestion des permissions via des filtres : filtre de type port√©e (SCOPE), taxonomique, g√©ographique etc‚Ä¶ (#517)</li>
<li>Compatibilit√© avec UsersHub version 2</li>
<li>L‚Äôadministration des permissions ne propose que les r√¥les qui sont actif et qui ont un profil dans GeoNature</li>
<li>Ajout du composant Leaflet.FileLayer dans le module Synth√®se pour pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme g√©om√©trie de recherche (#256)</li>
<li>Ajout et utilisation de l‚Äôextension PostgreSQL <code class="docutils literal"><span class="pre">pg_tgrm</span></code> permettant d‚Äôam√©liorer l‚ÄôAPI d‚Äôautocompl√©tion de taxon dans la synth√®se, en utilisant l‚Äôalgorithme des trigrammes (<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>), fonctionnel aussi dans les autres modules si vous mettez √† jour TaxHub en version 1.6.0.</li>
<li>Nouvel exemple d‚Äôimport de donn√©es historiques vers GeoNature V2 : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a> (par &#64;DonovanMaillard)</li>
<li>Compl√©ment de la documentation HTTPS et ajout d‚Äôune documentation Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Correction de l‚Äôid_digitiser lors de la mise √† jour (#481)</li>
<li>Corrections multiples de la prise en compte du CRUVED (#496)</li>
<li>Deconnexion apres inactivit√© de l‚Äôutilisateur (#490)</li>
<li>Suppression des heures au niveau des dates de l‚Äôexport occtax (#485)</li>
<li>Correction du message d‚Äôerreur quand on n‚Äôa pas de JDD (#479)</li>
<li>Correction du champs commentaire dans les exports d‚ÄôOcctax s√©par√© entre relev√© et occurrence (#478)</li>
<li>Correction des param√®tres de la fonction <code class="docutils literal"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</li>
<li>Correction de l‚Äôadministration des m√©tadonn√©es (#466 #420)</li>
<li>M√©tadonn√©es (JDD et CA) : ne pas afficher les utilisateurs qui sont des groupes dans les acteurs</li>
<li>Ajout d‚Äôun champs dans la Synth√®se permettant de stocker de quel module provient une occurrence et fonctions SQL associ√©es (#412)</li>
<li>Am√©lioration du style des champs obligatoires</li>
<li>Am√©liorations mineures de l‚Äôergonomie d‚ÄôOcctax</li>
<li>Correction du spinner qui tournait en boucle lors de l‚Äôexport CSV de la Synth√®se (#451)</li>
<li>Correction des tests automatis√©s</li>
<li>Am√©lioration des performances des intersections avec les zonages de <code class="docutils literal"><span class="pre">ref_geo.l_areas</span></code></li>
<li>Compl√©ment de la documentation de d√©veloppement</li>
<li>Simplification de la configuration des gn_modules</li>
<li>Occtax : ordonnancement des observation par date (#467)</li>
<li>Occtax : Remplissage automatique de l‚Äôheure_max √† partir de l‚Äôheure_min (#522)</li>
<li>Suppression des warnings lors du build du frontend</li>
<li>Correction de l‚Äôinstallation des modules GeoNature</li>
<li>Ajout d‚Äôun message quand on n‚Äôa pas acc√®s √† une donn√©e d‚Äôun module</li>
<li>Affichage du nom du module dans le Header (#398)</li>
<li>Correction des outils cartographiques dans Occtax</li>
<li>Correction compl√©mentaire des styles des lignes sans remplissage (#458)</li>
<li>MaplistService : correction du zoom sur les polygones et polylignes</li>
<li>Composant Areas et Municipalities : remise √† z√©ro de la liste d√©roulante quand on efface la recherche ou remet √† jour les filtres</li>
<li>Composant Taxonomy : la recherche autocomplet√©e est lanc√©e m√™me si on tape plus de 20 caract√®res. Le nombre de r√©sultat renvoy√© est d√©sormais param√©trable (#518)</li>
<li>Limitation du nombre de connexions √† la BDD en partageant l‚Äôinstance <code class="docutils literal"><span class="pre">DB</span></code> avec les sous-modules</li>
<li>Installation : utilisation d‚Äôun r√©pertoire <code class="docutils literal"><span class="pre">tmp</span></code> local et non plus au niveau syst√®me pour limiter les probl√®mes de droits (#503)</li>
<li>Evolution du template d‚Äôexemple de module GeoNature (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>) pour utiliser l‚Äôinstance DB et utiliser les nouveaux d√©corateurs de permissions (CRUVED)</li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle version, il est n√©cessaire d‚Äôavoir install√© UsersHub version 2.x au pr√©alable. Suivez donc sa documentation (<a class="reference external" href="https://github.com/PnEcrins/UsersHub/releases">https://github.com/PnEcrins/UsersHub/releases</a>) avant de proc√©der √† la mont√©e de version de GeoNature.</li>
<li>Ex√©cuter la commande suivante pour ajouter l‚Äôextension <code class="docutils literal"><span class="pre">pg_trgm</span></code>, en rempla√ßant la variable <code class="docutils literal"><span class="pre">$db_name</span></code> par le nom de votre BDD : <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></li>
<li>Mettez √† jour TaxHub en version 1.6.0 pour b√©n√©ficier de l‚Äôam√©lioration de la recherche taxonomique dans tous les modules</li>
<li>Ex√©cutez la mise √† jour de la BDD GeoNature (<code class="docutils literal"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</li>
<li>Suivez ensuite la proc√©dure classique de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
</ul>
<p><strong>Note d√©veloppeurs</strong></p>
<ul class="simple">
<li>Vous pouvez faire √©voluer les modules GeoNature en utilisant l‚Äôinstance <code class="docutils literal"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts d‚Äôinstallation (#498)</li>
<li>Il n‚Äôest plus n√©c√©ssaire de d√©finir un <code class="docutils literal"><span class="pre">id_application</span></code> dans la configuration des modules GeoNature.</li>
<li>La gestion des permissions a √©t√© revue et est d√©sormais internalis√©e dans GeoNature (voir <a class="reference external" href="https://geonature.readthedocs.io/fr/develop/development.html#developpement-backend">https://geonature.readthedocs.io/fr/develop/development.html#developpement-backend</a>), il est donc necessaire d‚Äôutiliser les nouveaux d√©corateurs d√©crit dans la doc pour r√©cup√©rer le CRUVED.</li>
</ul>
</div>
<div class="section" id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Correction du script <code class="docutils literal"><span class="pre">√¨nstall_all.sh</span></code> au niveau de la g√©n√©ration de la configuration Apache de TaxHub et UsersHub (#493)</li>
<li>Suppression du Servername dans la configuration Apache de TaxHub du script <code class="docutils literal"><span class="pre">install_all.sh</span></code></li>
<li>Compl√©ment de la documentation de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li>Si vous migrez depuis une version 2.0.0-rc.2, installez directement cette version corrective plut√¥t que la 2.0.0-rc.3, mais en suivant les notes de versions de la 2.0.0-rc.3</li>
<li>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal"><span class="pre">/</span></code>, consultez sa documentation <a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></li>
<li>Le script <code class="docutils literal"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur Debian 8, probl√®me de version de PostGIS qui ne s‚Äôinstalle pas correctement</li>
</ul>
</div>
<div class="section" id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li>Possibilit√© d‚Äôutiliser le MNT en raster ou en vecteur dans la BDD (+ doc MNT) #439 (merci &#64;mathieubossaert)</li>
<li>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</li>
<li>INSTALL_ALL - Am√©lioration de la conf Apache de TaxHub pour g√©rer son URL sans <code class="docutils literal"><span class="pre">/</span></code> √† la fin</li>
<li>Dessin cartographique d‚Äôune autre couleur (rouge) que les observations (bleu)</li>
<li>Occtax : retour au zoom pr√©c√©dent lors de l‚Äôenchainement de relev√© (#436)</li>
<li>Occtax : observateur rempli par d√©faut avec l‚Äôutilisateur connect√© (#438)</li>
<li>Prise en compte des g√©om√©tries nulles dans la fonction <code class="docutils literal"><span class="pre">serializegeofn</span></code></li>
<li>Gestion plus compl√®te des donn√©es exemple int√©gr√©es ou non lors de l‚Äôinstallation (#446)</li>
<li>Compl√©ment des diff√©rentes documentations</li>
<li>Compl√©ment FAQ (#441)</li>
<li>Documentation de la customisation (merci &#64;DonovanMaillard)</li>
<li>Am√©lioration de l‚Äôarchitecture du gn_module d‚Äôexemple</li>
<li>Clarification de la configuration des gn_modules</li>
<li>Lire le fichier <code class="docutils literal"><span class="pre">VERSION</span></code> pour l‚Äôafficher dans l‚Äôinterface (#421)</li>
<li>Utilisation de la vue <code class="docutils literal"><span class="pre">export_occtax_sinp</span></code> et non plus <code class="docutils literal"><span class="pre">export_occtax_dlb</span></code> par d√©faut pour les exports Occtax (#462)</li>
<li>Compl√©ment et correction des vues <code class="docutils literal"><span class="pre">export_occtax_sinp</span></code> et <code class="docutils literal"><span class="pre">export_occtax_dlb</span></code> (#462)</li>
<li>Mise √† jour de Marshmallow (2.5.0 =&gt; 2.5.1)</li>
<li>Am√©liorations des routes de <code class="docutils literal"><span class="pre">gn_monitoring</span></code> et de la configuration des modules de suivi pour pouvoir utiliser le nom d‚Äôune application plut√¥t que son identifiant</li>
<li>Export Synth√®se - Remplacement de la barre de t√©l√©chargement par un spinner (#451)</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Doc Import niveau 2 : Corrections et compl√©ments</li>
<li>Correction du trigger Occtax &gt; Synth√®se qui met √† jour le champs <code class="docutils literal"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</li>
<li>Correction et am√©lioration de la fonction <code class="docutils literal"><span class="pre">install_gn_module</span></code></li>
<li>Correction coquille dans le mod√®le <code class="docutils literal"><span class="pre">gn_monitoring</span></code> et la fonction <code class="docutils literal"><span class="pre">serializegeofn</span></code></li>
<li>Installation uniquement sur un environnement 64 bits (documentation + v√©rification) #442 (merci &#64;jbrieuclp et &#64;sig-pnrnm)</li>
<li>Correction et d√©coupage des scripts de mise √† jour de la BDD depuis la version Beta5</li>
<li>Correction de l‚Äô√©dition des date_debut et date_fin de Occtax (#457)</li>
<li>Correction des exports depuis la Synth√®se et int√©gration de la g√©om√©trie des observations (#461 et #456)</li>
<li>Ne pas remplir <code class="docutils literal"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si <code class="docutils literal"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</li>
<li>Edition d‚Äôun relev√© Occtax - Ne pas recalculer l‚Äôaltitude existante (#424)</li>
<li>Correction de l‚Äôactivation du formulaire Occtax apr√®s localisation du relev√© (#469 et #471)</li>
<li>Carte - Enlever le remplissage des lignes (#458)</li>
<li>Am√©lioration du script de mise √† jour de GeoNature (<code class="docutils literal"><span class="pre">install/migration/migration.sh</span></code>) (#465)</li>
<li>Suppression d‚Äôun doublon dans le mod√®le de <code class="docutils literal"><span class="pre">gn_commons.t_modules</span></code> (merci &#64;lpofredc)</li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li>Mise √† jour de TaxHub (Doc utilisateur, configuration Apache, script d‚Äôimport des m√©dias depuis API INPN Taxref et remise √† z√©ro des s√©quences)</li>
<li>Script de migration des donn√©es SICEN (ObsOcc) vers GeoNature : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></li>
<li>Script d‚Äôimport continu depuis une BDD externe vivante (avec exemple SICEN) : <a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></li>
<li>Module Suivi Flore Territoire fonctionnel et installable (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</li>
<li>Module Suivi Chiro fonctionnel et installable (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que son Frontend g√©n√©rique pour les protocoles de suivi (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</li>
<li>Ebauche d‚Äôun module pour les protocoles CMR (Capture-Marquage-Recapture) : <a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></li>
<li>MCD du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</li>
<li>MCD du module Flore Prioritaire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</li>
<li>Consolidation du backend et premiers d√©veloppements du frontend de GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</li>
<li>Cr√©ation d‚Äôun script exp√©rimental d‚Äôinstallation de GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son sch√©ma <code class="docutils literal"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles (<a class="reference external" href="https://github.com/PnEcrins/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnEcrins/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li>Suivez la proc√©dure standard de mise √† jour de GeoNature (<a class="reference external" href="https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application">https://geonature.readthedocs.io/fr/latest/installation-standalone.html#mise-a-jour-de-l-application</a>)</li>
<li>Ex√©cutez l‚Äôupdate de la BDD GeoNature (<code class="docutils literal"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</li>
<li>Il est aussi conseill√© de mettre √† jour TaxHub en 1.5.1 (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa configuration pour qu‚Äôil fonctionne sans <code class="docutils literal"><span class="pre">/</span></code> √† la fin de son URL</li>
<li>Attention, si vous installez cette version avec le script global <code class="docutils literal"><span class="pre">install_all.sh</span></code>, il cr√©√© un probl√®me dans la configuration Apache de UserHub (<code class="docutils literal"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et supprime tous les <code class="docutils literal"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation de UsersHub (<a class="reference external" href="https://github.com/PnEcrins/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnEcrins/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>) puis relancer Apache (<code class="docutils literal"><span class="pre">https://github.com/PnEcrins/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>). Il est conseill√© d‚Äôinstaller plut√¥t la version corrective.</li>
</ul>
</div>
<div class="section" id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Script <code class="docutils literal"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</li>
<li>Am√©lioration du composant Download</li>
<li>Am√©lioration du ShapeService</li>
<li>Compl√©ments de la documentation</li>
<li>Int√©gration de la documentation D√©veloppement backend dans la documentation</li>
<li>Nettoyage du code</li>
<li>Mise √† jour de la doc de l‚ÄôAPI : <a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></li>
<li>Configuration de la carte (<code class="docutils literal"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM par d√©faut car OpenTopoMap ne s‚Äôaffiche pas √† petite √©chelle</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Correction du script <code class="docutils literal"><span class="pre">install/migration/migration.sh</span></code></li>
<li>Ne pas afficher le debug dans le recherche de la synth√®se</li>
<li>Correction du bug de d√©connexion entre TaxHub et GeoNature (#423)</li>
<li>Correction de la fiche info d‚ÄôOcctax</li>
<li>Champs Multiselect : Ne pas afficher les valeurs selectionn√©es dans la liste quand on modifie un objet</li>
<li>Trigger Occtax vers Synth√®se : Correction des probl√®mes d‚Äôheure de relev√©s mal copi√©s dans la Synth√®se</li>
<li>Correction des altitudes (non abouti) (#424)</li>
<li>Donn√©es exemple : Suppression de l‚Äô<code class="docutils literal"><span class="pre">observers_txt</span></code> dans la synth√®se</li>
<li>Suppression d‚Äôun <code class="docutils literal"><span class="pre">id_municipality</span></code> en dur dans une route</li>
<li>Suppression de la librairie Certifi non utilis√©e</li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li>Suivez la proc√©dure standard de mise √† jour de GeoNature</li>
<li>Ex√©cuter l‚Äôupdate de la BDD GeoNature (<code class="docutils literal"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</li>
</ul>
</div>
<div class="section" id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Permalink to this headline">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</li>
<li>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</li>
<li>Refonte de la base de donn√©es pour la rendre plus standarde, plus g√©n√©rique et modulaire</li>
<li>Refonte ergonomique pour moderniser l‚Äôapplication</li>
</ul>
<p>Pr√©sentation et suivi des d√©veloppements : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li>Message d‚Äôintroduction customisable</li>
<li>Carte des 100 derni√®res observations</li>
<li>CSS g√©n√©ral de l‚Äôapplication surcouchable</li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des donn√©es Faune, Flore et Fonge de type Contact selon le standard Occurrences de taxon du SINP (<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li>D√©veloppement des formulaires de saisie, page de recherche, fiche d√©tail, API, CRUVED et export</li>
<li>Possibilit√© de masquer ou afficher les diff√©rents champs dans le formulaire Occtax (#344)</li>
<li>D√©veloppement du formulaire de mani√®re g√©n√©rique pour pouvoir r√©utiliser ses diff√©rents √©l√©ments dans d‚Äôautres modules sous forme de composants Angular</li>
<li>Configuration possible du module (Niveau de zoom, champs affich√©es, export‚Ä¶)</li>
<li>Ajout des nomenclatures dans les filtres d‚ÄôOcctax √† partir du composant <code class="docutils literal"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un formulaire en d√©clarant ses champs et leur type (#318)</li>
<li>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant que sur les d√©buts de mot et en affichant en premier les noms de r√©f√©rence (<code class="docutils literal"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</li>
<li>Multilingue fourni avec fran√ßais et anglais (extensible √† d‚Äôautres langues)</li>
<li>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans Occtax. #363 et #366</li>
<li>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de jeu de donn√©es ou si il y a eu un probl√®me lors de la r√©cup√©ration des JDD depuis MTD</li>
<li>Prise en compte du CRUVED au niveau des routes et du front pour adapter les contenus et fonctionnalit√©s aux droits de l‚Äôutilisateur</li>
<li>Mise en place des triggers alimentant la synth√®se √† partir des donn√©es saisies et modifi√©es dans Occtax</li>
</ul>
<p><strong>Synth√®se</strong></p>
<p>Module permettant de rechercher parmi les donn√©es des diff√©rentes sources pr√©sentes ou int√©gr√©es dans la base de donn√©es de GeoNature</p>
<ul class="simple">
<li>Mise en place du backend, de l‚ÄôAPI et du frontend #345</li>
<li>Interface de consultation, de recherche et d‚Äôexport dans la Synth√®se</li>
<li>Synth√®se : Calcul automatique (trigger) des zonages de chaque observation (communes, zonages r√©glementaires et naturels)</li>
<li>Recherche sur les zonages g√©n√©rique et param√©trable</li>
<li>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge, milieu, attribut taxonomique, nomenclature, date, p√©riode, commune, zonage, cadre d‚Äôacquisition, jeu de donn√©es, observateur, polygone, rectange ou cercle dessin√©</li>
<li>Retour √† la fiche source possible si l‚Äôobservation a √©t√© saisie dans un module de GeoNature</li>
<li>Affichage de la fiche d√©tail de chaque observation</li>
<li>Attributs TaxHub dynamiques et param√©trables</li>
<li>Configuration possible du module (colonnes, limites de recherche et d‚Äôexport, zoom, export‚Ä¶)</li>
<li>Export bas√© sur une vue (observations et statuts)</li>
<li>Prise en compte du CRUVED pour d√©finir les donn√©es √† afficher et √† exporter #412</li>
<li>Recherche de taxons : Liste bas√©e sur une table aliment√©e automatiquement par les taxons pr√©sents au moins une fois dans la Synth√®se</li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports bas√©s sur des vues</p>
<ul class="simple">
<li>Mise en place temporaire d‚Äôun export unique, bas√© sur une vue s‚Äôappuyant sur les donn√©es de Occtax, par jeu de donn√©es</li>
<li>A remplacer par le module g√©n√©rique <a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de d√©veloppement) permettant de g√©n√©rer des exports √† volont√© en cr√©ant des vues et en les affectant √† des utilisateurs ou des groupes. Chaque export sera accompagn√© de son API standardis√©e et document√©e</li>
</ul>
<p><strong>Admin</strong></p>
<p>Module d‚Äôadministration des tables centrales de GeoNature</p>
<ul class="simple">
<li>Mise en place d‚Äôun module (incomplet) permettant de g√©rer les m√©tadonn√©es et les nomenclatures</li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li>Mise en place d‚Äôun syst√®me baptis√© CRUVED permettant de d√©finir globalement ou par module 6 actions sont possibles (Create / Read / Update / Validate / Export / Delete) sur 3 port√©es possibles (Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es)</li>
<li>Ces √©volutions ont √©t√© int√©gr√©es au niveau du sch√©ma <code class="docutils literal"><span class="pre">utilisateurs</span></code> de la base de donn√©es de UsersHub, de son module (<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des routes de l‚ÄôAPI GeoNature et des interfaces</li>
</ul>
<p><strong>Bases de donn√©es</strong></p>
<ul class="simple">
<li>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et groupe 2 INPN des taxons.</li>
<li>Mise en place de tables de stockage verticales (historique, m√©dias et validation) #339</li>
<li>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√© (<code class="docutils literal"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une table des communes, une table g√©n√©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</li>
<li>Evolution du sch√©ma <code class="docutils literal"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique, souple et complet. Il permet d‚Äôattribuer des actions possibles √† un r√¥le (utilisateur ou groupe), sur une port√©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es.</li>
<li>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas d√©finie au niveau du module, on prend celle de l‚Äôapplication parente. #292</li>
<li>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne lui est pas list√© dans le Menu et il ne lui est pas accessible si il en connait l‚ÄôURL. #360</li>
<li>D√©veloppement des m√©tadonn√©es dans la BDD (sch√©ma <code class="docutils literal"><span class="pre">gn_meta</span></code>) sur la base du standard M√©tadonn√©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de g√©rer des jeux de donn√©es, des cadres d‚Äôacquisition, des acteurs (propri√©taire, financeur, producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un jeu de donn√©es.</li>
<li>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</li>
<li>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP (#209)</li>
<li>Cr√©ation du sch√©ma <code class="docutils literal"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique des modules de suivi (sites et visites centralis√©s) et les routes associ√©es</li>
<li>Mise en place d‚Äôun sch√©ma <code class="docutils literal"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre communes aux autres modules : l‚Äôhistorique des actions sur chaque objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s √† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et de validation des donn√©es mises en place sur le module Occtax. #339</li>
<li>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et d‚Äôune fonction (<code class="docutils literal"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes d‚Äôun taxon (√©tendue des observations, date min et max, altitude min et max, nombre d‚Äôobservations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>). D√©sactiv√©e pour le moment.</li>
<li>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la projection locale √† partir de la g√©om√©trie 4326 (#370)</li>
<li>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</li>
<li>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur <code class="docutils literal"><span class="pre">id_type</span></code> ni leur <code class="docutils literal"><span class="pre">id_nomenclature</span></code> lors de la cr√©ation de leur contenu (code_nomenclature) (#384)</li>
<li>Mise en place d‚Äôun sch√©ma <code class="docutils literal"><span class="pre">gn_imports</span></code> int√©grant des fonctions SQL permettant d‚Äôimporter un CSV dans la BDD et de mapper des champs de tables import√©es avec ceux d‚Äôune table de GeoNature pour g√©n√©rer le script <code class="docutils literal"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></li>
<li>D√©but de script de migration GeoNature V1 vers GeoNature V2</li>
<li>Nombreuses fonctions int√©gr√©es dans les sch√©mas de la BDD</li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian (8 et 9) et Ubuntu (16 et 18)</li>
<li>Scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES-MNHN)</li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li>R√©daction d‚Äôune documentation concernant l‚Äôinstallation (autonome ou globale), l‚Äôutilisation, l‚Äôadministration et le d√©veloppement : <a class="reference external" href="https://geonature.readthedocs.io">https://geonature.readthedocs.io</a></li>
</ul>
<p><strong>D√©veloppement</strong></p>
<ul class="simple">
<li>D√©coupage de l‚Äôapplication en backend / API / Frontend</li>
<li>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues (#173)</li>
<li>D√©veloppement de composants Angular g√©n√©riques pour pouvoir les utiliser dans plusieurs modules sans avoir √† les red√©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities, Observers, DynamicForm, MapList‚Ä¶)</li>
<li>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour limiter les donn√©es affich√©es √† un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</li>
<li>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature directement au CAS de l‚ÄôINPN, sans UsersHub (cas de l‚Äôinstance nationale INPN de GeoNature).</li>
<li>Connexion possible au webservice METADONNEES de l‚ÄôINPN pour y r√©cup√©rer les jeux de donn√©es en fonction de l‚Äôutilisateur connect√©, avec mise √† jour des JDD √† chaque appel de la route</li>
<li>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de modules dans GeoNature (#306)</li>
<li>Ajout de tests unitaires au niveau du backend et du frontend</li>
<li>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</li>
<li>D√©but de cr√©ation du module de gestion des m√©dias (backend uniquement)</li>
<li>Mise en place d‚Äôune configuration globale et d‚Äôune configuration par module</li>
<li>Fonction d‚Äôinstallation d‚Äôun module et de g√©n√©ration des fichiers de configuration</li>
<li>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend dans GeoNature</li>
<li>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une vue non mapp√©e</li>
<li>Mise en place d‚Äôun script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li>Module Export en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export s‚Äôappuie sur une vue. Il sera possible aux administrateurs d‚Äôune GeoNature d‚Äôajouter autant de vues que n√©cessaires dans son GeoNature.</li>
<li>Module de validation des donn√©es en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</li>
<li>Module Suivi Flore territoire en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</li>
<li>Module Suivi Habitat en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</li>
<li>gn_module_suivi_chiro refondu pour devenir un module de GeoNature V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</li>
<li>Projet suivi utilis√© comme Frontend g√©n√©rique et autonome pour le Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</li>
<li>GeoNature-citizen en cours de d√©veloppement (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</li>
<li>GeoNature-mobile en cours de refonte pour compatibilit√© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</li>
<li>GeoNature-atlas en cours d‚Äôajustements pour compatibilit√© avec GeoNature V2 (<a class="reference external" href="https://github.com/PnEcrins/GeoNature-atlas/issues/162">https://github.com/PnEcrins/GeoNature-atlas/issues/162</a>)</li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s‚Äôagit pas de mettre √† jour GeoNature mais d‚Äôen installer une nouvelle version. En effet, il s‚Äôagit d‚Äôune refonte compl√®te.</p>
<ul class="simple">
<li>Passer √† la derni√®re version 1 de GeoNature (1.9.1)</li>
<li>Idem pour UsersHub et TaxHub</li>
<li>Installer GeoNature standalone ou refaire une installation compl√®te</li>
<li>Adaptez les scripts pr√©sents dans <code class="docutils literal"><span class="pre">/data/migrations/v1tov2</span></code> et √©x√©cutez-les</li>
</ul>
<p><em>TODO : MAJ depuis V1 √†  tester et compl√©ter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p class="first">Supprimer le sch√©ma <code class="docutils literal"><span class="pre">gn_synthese</span></code> puis le recr√©er dans sa version RC1 (#430)</p>
</li>
<li><p class="first">Ex√©cuter l‚Äôupdate de la BDD GeoNature (<code class="docutils literal"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du sous-module Nomenclature (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p>
</li>
<li><p class="first">Suivre la proc√©dure habituelle de mise √† jour</p>
</li>
<li><p class="first">Ex√©cuter les commandes suivantes :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">geonature</span><span class="o">/</span><span class="n">backend</span>
<span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">geonature</span> <span class="n">generate_frontend_modules_route</span>
<span class="n">geonature</span> <span class="n">frontend_build</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Ajout d‚Äôun message d‚Äôerreur si l‚Äôutilisateur n‚Äôa pas de JDD ou si il y a eu un probl√®me lors de la r√©cup√©ration des JDD de MTD</li>
<li>Ajout d‚Äôune vue mat√©rialis√©e (<code class="docutils literal"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>) et d‚Äôune fonction (<code class="docutils literal"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>) permettant de renvoyer des informations sur les observations existantes d‚Äôun taxon (√©tendue des observations, date min et max, altitude min et max, nombre d‚Äôobservations) pour orienter la validation et la saisie (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</li>
<li>L‚Äôexport OccTax est d√©sormais bas√© sur une vue qu‚Äôil est possible d‚Äôadapter</li>
<li>Ajouts de nouveaux tests automatis√©s du code et mise en place de Travis pour les lancer automatiquement √† chaque commit (<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</li>
<li>Ajout de donn√©es test</li>
<li>Mise √† jour des scripts de d√©ploiement sp√©cifiques de DEPOBIO (MTES)</li>
<li>D√©placement de la table centrale de gestion des param√®tres <code class="docutils literal"><span class="pre">t_parameters</span></code> dans le sch√©ma <code class="docutils literal"><span class="pre">gn_commons</span></code> (#376)</li>
<li>Ajout d‚Äôun trigger g√©n√©rique pour calculer la g√©om√©trie dans la projection locale √† partir de la g√©om√©trie 4326 (#370)</li>
<li>Regroupement des fichiers li√©s √† l‚Äôinstallation et la mise √† jour dans un r√©pertoire d√©di√© (<code class="docutils literal"><span class="pre">install</span></code>) (#383)</li>
<li>Mise en place de scripts de migration global de la BDD (<code class="docutils literal"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du sch√©ma <code class="docutils literal"><span class="pre">pr_occtax</span></code> (<code class="docutils literal"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>), d‚Äôun script g√©n√©rique de migration de l‚Äôapplication (<code class="docutils literal"><span class="pre">install/migration/migration.sh</span></code>) et d‚Äôune doc de mise √† jour (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication</a>)</li>
<li>R√©int√©gration des fichiers de configuration, de logs et des modules externes dans les r√©pertoires de l‚Äôapplication (#375)</li>
<li>Ajout de routes √† <code class="docutils literal"><span class="pre">gn_monitoring</span></code></li>
<li>Ajout d‚Äôun trigger pour calculer automatiquement les zonages des sites de suivi (<code class="docutils literal"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</li>
<li>Am√©liorations et documentation des commandes d‚Äôinstallation d‚Äôun module</li>
<li>Ajout des unit√©s g√©ographiques dans le sch√©ma <code class="docutils literal"><span class="pre">ref_geo</span></code></li>
<li>Ajout d‚Äôun bouton <code class="docutils literal"><span class="pre">Annuler</span></code> dans le formulaire Occtax</li>
<li>Gestion des conflits de nomenclatures en n‚Äôutilisant plus leur <code class="docutils literal"><span class="pre">id_type</span></code> ni leur <code class="docutils literal"><span class="pre">id_nomenclature</span></code> (#384)</li>
<li>Migration du SQL de <code class="docutils literal"><span class="pre">ref_nomenclautres</span></code> dans le d√©p√¥t du sous-module (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</li>
<li>D√©but de mise en place d‚Äôun backoffice (m√©tadonn√©es et nomenclatures)</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>OccTax : Correction du double post</li>
<li>OccTax : Correction des droits dans les JDD</li>
<li>OccTax : Correction de l‚Äôaffichage des observers_txt dans la fiche d‚Äôun relev√©</li>
<li>Correction de la gestion g√©n√©rique des m√©dias</li>
<li>Suppression du lien entre <code class="docutils literal"><span class="pre">ref_geo</span></code> et <code class="docutils literal"><span class="pre">ref_nomenclatures</span></code> (#374)</li>
<li>Compl√©ments et relecture de la documentation</li>
<li>Correction</li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez √† jour votre GeoNature depuis une Beta4 :</p>
<ul class="simple">
<li>T√©l√©chargez la beta5 et renommer les r√©pertoires :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">PnX</span><span class="o">-</span><span class="n">SI</span><span class="o">/</span><span class="n">GeoNature</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">unzip</span> <span class="n">geonature2beta</span><span class="o">.</span><span class="n">zip</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature_old</span><span class="o">/</span>
<span class="n">mv</span> <span class="n">GeoNature</span><span class="o">-</span><span class="n">geonature2beta</span> <span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">mon_user</span><span class="o">&gt;/</span><span class="n">geonature</span><span class="o">/</span>
</pre></div>
</div>
<ul class="simple">
<li>Ex√©cutez le script de migration <code class="docutils literal"><span class="pre">install/migration/beta4tobeta5.sh</span></code> depuis la racine de votre GeoNature :</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">cd</span> <span class="n">geonature</span>
<span class="o">./</span><span class="n">install</span><span class="o">/</span><span class="n">migration</span><span class="o">/</span><span class="n">beta4tobeta5</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Celui-ci va r√©cup√©rer vos fichiers de configuration, d√©placer les modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li>Si vous avez d√©velopp√© des modules externes, voir <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un lien symbolique depuis le r√©pertoire <code class="docutils literal"><span class="pre">external_modules</span></code> et en r√©int√©grant la configuration du module dans son r√©pertoire <code class="docutils literal"><span class="pre">config</span></code></li>
</ul>
</div>
<div class="section" id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Synth√®se : d√©but de mise en place du backend, de l‚ÄôAPI et du frontend #345</li>
<li>Compl√©ment de la nomenclature des M√©thodes de d√©termination et suppression du champs Complement_Determination. Merci &#64;DonovanMaillard. #341</li>
<li>Nouveaux composants Angular (SelectSearch, Municipalities, Observers)</li>
<li>Am√©lioration de composants Angular (Date du jour par d√©faut, Option de tri des nomenclatures, DynamicForm</li>
<li>Connexion √† MTD INPN : Mise √† jour des JDD √† chaque appel de la route</li>
<li>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</li>
<li>Droits CRUVED : La d√©finition du CRUVED d‚Äôun r√¥le (utilisateur ou groupe) sur un module de GeoNature surcouche ses droits GeoNature m√™me si ils sont inf√©rieurs. Si une action du CRUVED n‚Äôest pas d√©finie au niveau du module, on prend celle de l‚Äôapplication parente. #292</li>
<li>Si un r√¥le a un R du CRUVED √† 0 pour un module, alors celui-ci ne lui est pas list√© dans le Menu et il ne lui ai pas accessible si il en connait l‚ÄôURL. #360</li>
<li>Mise en place d‚Äôun sch√©ma <code class="docutils literal"><span class="pre">gn_commons</span></code> dans la BDD qui permet de stocker de mani√®re g√©n√©rique des informations qui peuvent √™tre communes aux autres modules : l‚Äôhistorique des actions sur chaque objet de la BDD, la validation d‚Äôune donn√©e et les m√©dias associ√©s √† une donn√©e. Accompagn√© de fonctions g√©n√©riques d‚Äôhistorisation et de validation des donn√©es mises en place sur le module Occtax. #339</li>
<li>Am√©lioration de l‚Äôergonomie du MapList de OccTax. #361</li>
<li>Mise en place d‚Äôun export CSV, SHP, GeoJSON param√©trable dans OccTax. #363 et #366</li>
<li>Am√©lioration du module g√©n√©rique <code class="docutils literal"><span class="pre">gn_monitoring</span></code> et de ses sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a> et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></li>
<li>Am√©lioration et compl√©ments des scripts d‚Äôinstallation</li>
<li>Mise en place d‚Äôun script pour la customisation de la plateforme nationale (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li>Compl√©ment des diff√©rentes documentations</li>
<li>Ajout d‚Äôune documentation d‚Äôadministration d‚ÄôOccTax (<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</li>
</ul>
</div>
<div class="section" id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Travail sur le module g√©n√©rique de Suivi int√©gr√© √† GeoNature (<code class="docutils literal"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</li>
<li>Gestion de l‚Äôinstallation d‚Äôun module qui n‚Äôa pas de Frontend dans GeoNature</li>
<li>Mise en place de tests automatiques au niveau du Frontend</li>
<li>M√©nage et r√©organisation du code du Frontend</li>
<li>Factorisation et harmonisation des composants g√©n√©riques Angular</li>
<li>Suppression des blocs non fonctionnels sur la Home</li>
<li>Mise √† jour de la doc et du MCD</li>
<li>Possibilit√© de masquer ou afficher les diff√©rents champs dans le formulaire Occtax (#344)</li>
<li>Ajout des nomenclatures dans les filtres d‚ÄôOccTax √† partir du nouveau composant <code class="docutils literal"><span class="pre">dynamicForm</span></code> qui permet de cr√©er dynamiquement un formulaire en d√©clarant les champs (#318)</li>
<li>Am√©lioration du composant de recherche d‚Äôun taxon en ne recherchant que sur les d√©buts de mot et en affichant en premier les noms de r√©f√©rence (ordrer_by cd_nom=cd_ref DESC) - #334</li>
<li>Mise en place d‚Äôune route g√©n√©rique permettant de requ√™ter dans une vue non mapp√©e</li>
<li>Suppression des options vides dans les listes d√©roulantes des nomenclatures</li>
<li>Ajout de quelques param√®tres (niveau de zoom mini dans chaque module, ID de la liste des taxons saisissables dans Occtax‚Ä¶)</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Correction de la pagination du composant MapList</li>
<li>Correction des droits attribu√©s automatiquement quand on se connecte avec le CAS</li>
<li>Correction de l‚Äôinstallation optionnelle de UsersHub dans le script <code class="docutils literal"><span class="pre">install_all.sh</span></code></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li>D√©but de refonte du module Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connect√© au module g√©n√©rique de suivi de GeoNature, dont le front sera externe √† GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</li>
<li>Maquettage et avanc√©e sur le module Validation (<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</li>
<li>D√©finition du module Suivi Habitat Territoire (<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</li>
<li>Piste de d√©finition du module Interop√©rabilit√© (<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</li>
</ul>
</div>
<div class="section" id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Compl√©ments de la documentation (sch√©ma architecture, administration, installation, d√©veloppement, FAQ‚Ä¶)</li>
<li>Am√©lioration de l‚Äôergonomie du module OccTax (composant MapList, filtres, colonnes et formulaires) et du module Exports</li>
<li>Am√©lioration du composant de recherche d‚Äôun taxon (#324)</li>
<li>Am√©lioration et optimisation de la s√©rialisation des donn√©es</li>
<li>Ajout de tests unitaires au niveau du backend</li>
<li>Ajout d‚Äôun m√©canisme de log par email (param√®tres MAILERROR)</li>
<li>Migration du module occtax dans le r√©pertoire <code class="docutils literal"><span class="pre">/contrib</span></code> pour homog√©n√©iser les modules</li>
<li>Cr√©ation du sch√©ma <code class="docutils literal"><span class="pre">gn_monitoring</span></code> pour g√©rer la partie g√©n√©rique des modules de suivi (sites et visites centralis√©s)</li>
<li>D√©but de cr√©ation du module g√©n√©rique des protocoles de suivi</li>
<li>D√©but de cr√©ation du module de gestion des m√©dias</li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Corrections de l‚Äôinstallation globale et autonome</li>
<li>Renommage Contact en OccTax (en cours)</li>
<li>Nettoyage du sch√©ma des m√©tadonn√©es (<code class="docutils literal"><span class="pre">gn_meta</span></code>)</li>
</ul>
</div>
<div class="section" id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Permalink to this headline">¬∂</a></h2>
<p>La version 2 de GeoNature est une refonte compl√®te de l‚Äôapplication.</p>
<ul class="simple">
<li>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers √† Python3/Flask/Angular4/Leaflet</li>
<li>Refonte de l‚Äôarchitecture du code pour rendre GeoNature plus g√©n√©rique et modulaire</li>
<li>Refonte de la base de donn√©es pour la rendre plus standarde, plus g√©n√©rique et modulaire</li>
<li>Refonte ergonomique pour moderniser l‚Äôapplication</li>
</ul>
<p>Pr√©sentation et suivi du projet : <a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Refonte de la base de donn√©es du module Contact, renomm√© en OccTax, s‚Äôappuyant sur le standard Occurrence de taxons du SINP (#183)</li>
<li>D√©veloppement du module OccTax regroupant les contacts Faune, Flore, Fonge et Mortalit√© (avec formulaire de consultation et de saisie des donn√©es)</li>
<li>D√©veloppement d‚Äôun module et d‚Äôune API g√©n√©rique et autonome pour la gestion des nomenclatures (<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet d‚Äôavoir un m√©canisme g√©n√©rique de centralisation des listes de valeurs (nomenclatures) pour ne pas cr√©er des tables pour chaque liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les valeurs de chaque nomenclature s‚Äôadaptent en fonction des regnes et groupe 2 INPN des taxons.</li>
<li>D√©coupage de l‚Äôapplication en backend / API / Frontend</li>
<li>Multilingue au niveau de l‚Äôinterface et des listes de valeurs avec fran√ßais et anglais int√©gr√©s mais extensible √† d‚Äôautres langues (#173)</li>
<li>D√©veloppement de composants g√©n√©riques pour pouvoir les utiliser dans plusieurs modules sans avoir √† les red√©velopper ni les dupliquer (composant CARTE, composant RECHERCHE TAXON, composant OBSERVATEURS, composant NOMENCLATURES‚Ä¶)</li>
<li>Mise en place d‚Äôun r√©f√©rentiel g√©ographique avec un sch√©ma d√©di√© (<code class="docutils literal"><span class="pre">ref_geo</span></code>), partageable avec d‚Äôautres applications comprenant une table des communes, une table g√©n√©rique des zonages, une table pour le MNT et des fonctions pour intersecter point/ligne/polygones avec les zonages et le MNT (#228)</li>
<li>Evolution du sch√©ma <code class="docutils literal"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d‚Äôune gestion des droits avec 6 niveaux √† un m√©canisme plus g√©n√©rique, souple et complet. Il permet d‚Äôattribuer des actions possibles √† un r√¥le (utilisateur ou groupe), sur une port√©e; dans une application ou un module. 6 actions sont possibles dans GeoNature : Create / Read / Update / Validate / Export / Delete (aka CRUVED). 3 port√©es de ces actions sont possibles : Mes donn√©es / Les donn√©es de mon organisme / Toutes les donn√©es.</li>
<li>Impl√©mentation de la gestion des droits au niveau de l‚ÄôAPI (pour limiter les donn√©es affich√©es √† un utilisateur en fonction de ses droits) et au niveau du Frontend (pour afficher ou non certains boutons aux utilisateurs en fonction de leurs droits).</li>
<li>Par d√©faut, l‚Äôauthentification et les utilisateurs sont g√©r√©s localement dans UsersHub, mais il est aussi possible de connecter GeoNature au CAS de l‚ÄôINPN, sans utiliser GeoNature (utilis√© pour l‚Äôinstance nationale INPN de GeoNature). GeoNature peut aussi se connecter au webservice METADONNEES de l‚ÄôINPN pour y r√©cup√©rer les jeux de donn√©es en fonction de l‚Äôutilisateur connect√©.</li>
<li>Mise en place d‚Äôun module d‚Äôexport. Chaque export s‚Äôappuie sur une vue. Il sera possible √† chaque administrateur d‚Äôajouter autant de vues que n√©cessaires dans son GeoNature. Pour le moment, un export au format SINP Occurrence de taxons a √©t√© int√©gr√© par d√©faut.</li>
<li>D√©veloppement des m√©tadonn√©es dans la BDD (schema <code class="docutils literal"><span class="pre">gn_meta</span></code>) sur la base du standard M√©tadonn√©es du SINP (<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>). Elles permettent de g√©rer des jeux de donn√©es, des cadres d‚Äôacquisition, des acteurs (propri√©taire, financeur, producteur‚Ä¶) et des protocoles. Chaque relev√© est associ√© √† un jeu de donn√©es.</li>
<li>D√©veloppement d‚Äôun m√©canisme de calcul automatique de la sensibilit√© d‚Äôune esp√®ce directement dans la BDD (sur la base des r√®gles nationales et r√©gionales du SINP + locales √©ventuellement)</li>
<li>Int√©gration du calcul automatique de l‚Äôidentifiant permanent SINP (#209)</li>
<li>Mise en place d‚Äôun m√©canisme standardis√© de d√©veloppement de modules dans GeoNature (#306)</li>
<li>Scripts d‚Äôinstallation autonome ou globale de GeoNature sur Debian 8 et 9</li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li>Installation globale de GeoNature (avec TaxHub et UsersHub) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></li>
<li>Installation autonome de GeoNature / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></li>
<li>Manuel utilisateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></li>
<li>Manuel administrateur / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></li>
<li>D√©veloppement (API, modules et composants) / <a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></li>
</ul>
<p>Documentation compl√®te disponible sur <a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li>Finalisation MCD du module Synth√®se</li>
<li>Triggers d‚Äôalimentation automatique de la Synth√®se depuis le module OccTax</li>
<li>D√©veloppement de l‚Äôinterface du module Synth√®se</li>
<li>Am√©lioration et g√©n√©ricit√© du module OccTax (m√©dias, import GPX, champs masquables et pseudo-champs)</li>
<li>G√©n√©ricit√© du module d‚Äôexport</li>
<li>D√©veloppement du module de validation (#181)</li>
<li>D√©veloppement d‚Äôun module de suivi des habitats avec une gestion g√©n√©rique des sites et visites de suivi</li>
<li>D√©veloppement d‚Äôun module de collecte citoyenne (#242)</li>
</ul>
</div>
<div class="section" id="id7">
<h2>1.9.1 (2018-05-17)<a class="headerlink" href="#id7" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Installation - Suppression des couches SIG (communes, znieff‚Ä¶) pour les t√©l√©charger sur <a class="reference external" href="http://geonature.fr/data/inpn/layers/">http://geonature.fr/data/inpn/layers/</a> et ainsi all√©ger le d√©p√¥t de 158 Mo.</li>
<li>Compl√©ments mineurs de la documentation</li>
<li>Migration du script <code class="docutils literal"><span class="pre">install_all</span></code> en Debian 9. La doc et le script Debian 8 restent disponibles dans le r√©pertoire <code class="docutils literal"><span class="pre">docs/install_all</span></code></li>
<li>Corrections mineures de triggers</li>
<li>Compatibilit√© avec TaxHub 1.3.2, UsersHub 1.3.1, GeoNature-atlas 1.3.2</li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.9.1, en prenant en compte les notes des diff√©rentes versions interm√©diaires, notamment les scripts de mise √† jour de la BDD ainsi que les √©ventuels nouveaux param√®tres √† ajouter.</li>
<li>Ex√©cuter le script de mise √† jour de la BDD <code class="docutils literal"><span class="pre">data/update_1.9.0to1.9.1.sql</span></code></li>
</ul>
</div>
<div class="section" id="id8">
<h2>1.9.0 (2017-07-06)<a class="headerlink" href="#id8" title="Permalink to this headline">¬∂</a></h2>
<p><strong>ATTENTION : Les √©volutions de cette version concernent aussi la webapi. Si vous utilisez les applications GeoNature-mobile, vous devez attendre la sortie d‚Äôune version de GeoNature-mobile-webapi (https://github.com/PnEcrins/GeoNature-mobile-webapi) compatible avec cette version 1.9.0 de GeoNature.</strong> Coming soon !</p>
<p>A noter aussi que cette version de GeoNature est compatible avec GeoNature-atlas 1.2.4 et +.</p>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Ajout de la cr√©ation des index spatiaux √† la cr√©ation initiale de la base.</li>
<li>Cr√©ation ou mise √† jour des g√©om√©tries compatible PostGIS 2.</li>
<li>Ajout du champ diffusable (oui/non) dans le formulaire web de saisie, uniquement pour ContactFaune et Mortalit√© (TODO : faire la m√™me chose pour les autres protocoles).</li>
<li>Multi-projection : Les versions ant√©rieures de GeoNature n‚Äô√©taient compatibles qu‚Äôavec la projection Lambert 93 (srid: 2154). Cette version permet de choisir sa projection locale. Elle ajoute un param√®tre <code class="docutils literal"><span class="pre">srid_local</span></code> dans le <code class="docutils literal"><span class="pre">config/settings.ini</span></code> et renomme tous les champs <code class="docutils literal"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal"><span class="pre">the_geom_local</span></code> des tables ‚Äúm√©tier‚Äù.
Ce param√®tre est notamment utilis√© lors de la cr√©ation de la base pour affecter le srid de la projection locale √† tous les champs <code class="docutils literal"><span class="pre">the_geom_local</span></code> pr√©sents dans les tables de la base. Ce param√®tre est √©galement utilis√© pour mettre en coh√©rence le syst√®me de projection local utilis√© dans toutes les couches SIG pr√©sentes dans la base et les g√©om√©tries stock√©es dans les champs <code class="docutils literal"><span class="pre">the_geom_local</span></code> des tables ‚Äúm√©tier‚Äù. Le param√©trage du service WMS dans <code class="docutils literal"><span class="pre">wms/wms.map</span></code> est √©galement pris en charge par le script d‚Äôinstallation de l‚Äôapplication.</li>
<li>Correction de l‚Äôinstallation de npm</li>
<li>Script <code class="docutils literal"><span class="pre">install_all.sh</span></code> mis √† jour avec les nouvelles versions de GeoNature-atlas, de TaxHub et de UsersHub.</li>
</ul>
<p>IMPORTANT : toutes les couches SIG ins√©r√©es dans le sch√©ma <code class="docutils literal"><span class="pre">layers</span></code> doivent √™tre dans la projection fournie pour le param√®tre <code class="docutils literal"><span class="pre">srid_local</span></code>. L‚Äôapplication est livr√©e avec un ensemble de couches en Lambert 93 concernant la m√©tropole. Une installation avec une autre projection, hors m√©tropole, doit donc se faire sans l‚Äôinsertion des couches SIG. Vous devrez manuellement fournir le contenu des tables du sch√©ma <code class="docutils literal"><span class="pre">layers</span></code> dans la projection choisie.</p>
<p><strong>Notes de versions</strong></p>
<ul class="simple">
<li>Vous pouvez ajouter les param√®tres <code class="docutils literal"><span class="pre">srid_local</span></code>, <code class="docutils literal"><span class="pre">install_sig_layers</span></code> et <code class="docutils literal"><span class="pre">add_sample_data</span></code> au fichier <code class="docutils literal"><span class="pre">config/settings.ini</span></code> en vous inspirant du fichier <code class="docutils literal"><span class="pre">config/settings.ini.sample</span></code>. Toutefois ces param√®tres ne sont utilis√©s que pour une nouvelle installation et notamment pour l‚Äôinstallation de la base.</li>
<li>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.9.0, en prenant en compte les notes des diff√©rentes versions interm√©diaires, notamment les scripts de mise √† jour de la BDD ainsi que les √©ventuels nouveaux param√®tres √† ajouter.</li>
<li>Si vous migrez depuis la version 1.8.3, ex√©cutez le fichier SQL <code class="docutils literal"><span class="pre">data/update_1.8.3to1.9.0.sql</span></code>. Comme GeoNature ne fonctionne jusque l√† que pour des structures de m√©tropole, il est bas√© sur le fait que le champ <code class="docutils literal"><span class="pre">the_geom_local</span></code> reste en Lambert 93 (2154). Assurez-vous que le param√®tre <code class="docutils literal"><span class="pre">$srid_local</span></code> dans <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code> est √©gal √† <code class="docutils literal"><span class="pre">2154</span></code>.
ATTENTION : ce script SQL renomme tous les champs <code class="docutils literal"><span class="pre">the_geom_2154</span></code> en <code class="docutils literal"><span class="pre">the_geom_local</span></code> de la BDD de GeoNature. Ceci affecte de nombreuses tables, de nombreux triggers et de nombreuses vues de la base. Le script n‚Äôint√®gre que les vues fournies par d√©faut. Si vous avez cr√©√© des vues sp√©cifiques, notamment pour le module d‚Äôexport, ou si vous avez modifi√© des vues fournies, vous devez adapter/compl√©ter le script. Vous pouvez vous inspirer de son contenu.</li>
<li>RAPPEL : Ceci affecte √©galement la webapi des applications mobiles. Vous devez donc mettre √† jour votre webapi si vous utilisez la saisie sur les applications mobiles. Une release de la webapi devrait sortir bient√¥t.</li>
</ul>
</div>
<div class="section" id="id9">
<h2>1.8.4 (2017-04-10)<a class="headerlink" href="#id9" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Correction du script d‚Äôinstallation globale (<code class="docutils literal"><span class="pre">install_all</span></code>) si l‚Äôutilisateur de BDD par d√©faut a √©t√© renomm√© (<code class="docutils literal"><span class="pre">data/grant.sql</span></code>)</li>
<li>Correction de la cr√©ation des vues qui remontent la liste des taxons dans les 3 contacts</li>
</ul>
</div>
<div class="section" id="id10">
<h2>1.8.3 (2017-02-23)<a class="headerlink" href="#id10" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Multi-organisme : l‚Äôorganisme associ√© √† la donn√©e est d√©sormais celui de l‚Äôutilisateur connect√© dans l‚Äôapplication (lors de la cr√©ation d‚Äôune observation uniquement).</li>
<li>Taxonomie : cr√©ation d‚Äôune liste <code class="docutils literal"><span class="pre">Saisie</span> <span class="pre">possible</span></code>, rempla√ßant l‚Äôattribut <code class="docutils literal"><span class="pre">Saisie</span></code>. Cela permet de choisir les synonymes que l‚Äôon peut saisir ou non dans GeoNature en se basant sur les <code class="docutils literal"><span class="pre">cd_nom</span></code> (<code class="docutils literal"><span class="pre">bib_listes</span></code> et <code class="docutils literal"><span class="pre">cor_nom_liste</span></code>) et non plus sur les <code class="docutils literal"><span class="pre">cd_ref</span></code> (<code class="docutils literal"><span class="pre">bib_attributs</span></code> et <code class="docutils literal"><span class="pre">cor_taxon_attribut</span></code>). Voir le script de migration SQL <code class="docutils literal"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code> pour bien basculer les informations de l‚Äôattribut dans la nouvelle liste.</li>
<li>Correction de la vue <code class="docutils literal"><span class="pre">synthese.v_tree_taxons_synthese</span></code> potentiellement bloquante √† l‚Äôouverture de la synth√®se.</li>
<li>Suppression de la table <code class="docutils literal"><span class="pre">utilisateurs.bib_observateurs</span></code> inutile.</li>
<li>Cr√©ation des index spatiaux manquants (performances)</li>
<li>Clarification et corrections mineures du script <code class="docutils literal"><span class="pre">install_all</span></code></li>
<li>Ajout du MCD de la 1.8 (par &#64;xavier-pnm)</li>
<li>Am√©liorations du nom des fichiers export√©s depuis la Synth√®se (par &#64;sylvain-m)</li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez supprimer les lignes concernant le param√®tre <code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_organisme</span> <span class="pre">=</span> <span class="pre">...</span></code> dans <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code>, l‚Äôorganisme n‚Äô√©tant plus un param√®tre fixe mais d√©sormais celui de l‚Äôutilisateur connect√©.</p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.3, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.2, √©x√©cutez le fichier SQL <code class="docutils literal"><span class="pre">data/update_1.8.2to1.8.3.sql</span></code>.</p>
</div>
<div class="section" id="id11">
<h2>1.8.2 (2017-01-11)<a class="headerlink" href="#id11" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Modularit√© des scripts SQL de cr√©ation de la base en les dissociant par protocole et en regroupant les triggers dans les sch√©mas de chaque protocole (pr√©paration GeoNature V2)</li>
<li>Correction d‚Äôune requ√™te dans flore station (ind√©pendance vis √† vis de flore patrimoniale)</li>
<li>Correction du trigger <code class="docutils literal"><span class="pre">synthese_update_fiche_cflore</span></code> (&#64;ClaireLagaye)</li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.2, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.1, √©x√©cutez le fichier <code class="docutils literal"><span class="pre">data/update_1.8.1to1.8.2.sql</span></code>. Consultez les derni√®res lignes de ce fichier : vous devez √©valuer si la requ√™te d‚Äôinsertion dans la table <code class="docutils literal"><span class="pre">taxonomie.cor_taxon_attribut</span></code> doit √™tre faite ou non (vous pourriez avoir d√©j√† constat√© et corrig√© cette erreur lors d‚Äôune pr√©c√©dente migration). Cela corrige l‚Äôabsence de taxons prot√©g√©s dans votre synthese en r√©cup√©rant les informations de protection pr√©sentes dans le champ <code class="docutils literal"><span class="pre">filtre3</span></code> de la table <code class="docutils literal"><span class="pre">save.bib_taxons</span></code></p>
</div>
<div class="section" id="id12">
<h2>1.8.1 (2017-01-05)<a class="headerlink" href="#id12" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Ajout des sauvegardes et de l‚Äôinstallation globale avec un exemple d√©taill√© dans la documentation : <a class="reference external" href="http://geonature.readthedocs.io">http://geonature.readthedocs.io</a></li>
<li>Optimisation et correction de la vue qui retourne l‚Äôarbre des rangs taxonomiques (synthese.v_tree_taxons_synthese)</li>
<li>Mise en coh√©rence des donn√©es exemple de GeoNature-atlas avec les crit√®res des vues mat√©rialis√©es de GeoNature-atlas</li>
<li>Mise √† jour de 2 triggers du Contact Flore (&#64;ClaireLagaye)</li>
</ul>
<p><strong>Notes de versions</strong></p>
<p>Vous pouvez passer directement d‚Äôune 1.7.X √† la 1.8.1, en prenant en compte les notes des diff√©rentes versions interm√©diaires.</p>
<p>Si vous migrez depuis la version 1.8.0, √©x√©cutez le fichier <code class="docutils literal"><span class="pre">data/update_1.8to1.8.1.sql</span></code></p>
</div>
<div class="section" id="id13">
<h2>1.8.0 (2016-12-14)<a class="headerlink" href="#id13" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Passage √† TAXREF version 9</li>
<li>Acc√®s √† la synth√®se en consultation uniquement pour des utilisateurs enregistr√©s avec des droits 1</li>
<li>Ajout d‚Äôun champ <code class="docutils literal"><span class="pre">diffusion</span></code> (oui/non) dans la table <code class="docutils literal"><span class="pre">synthese.syntheseff</span></code>, utilisable dans GeoNature-atlas. Pas d‚Äôinterface de gestion de ce champ pour le moment. CF #132</li>
<li>Cr√©ation d‚Äôun script d‚Äôinstallation simplifi√© pour un pack UsersHub, TaxHub, GeoNature et GeoNature-atlas : <a class="reference external" href="https://github.com/PnEcrins/GeoNature/tree/master/docs/install_all">https://github.com/PnEcrins/GeoNature/tree/master/docs/install_all</a></li>
<li>Factorisation des SQL de cr√©ation des sch√©mas <code class="docutils literal"><span class="pre">taxonomie</span></code> et <code class="docutils literal"><span class="pre">utilisateurs</span></code> en les r√©cup√©rant dans les d√©pots TaxHub et UsersHub</li>
<li>Compatibilit√© avec l‚Äôapplication <a class="reference external" href="https://github.com/PnX-SI/TaxHub">TaxHub</a> qui permet de g√©rer la taxonomie √† partir de TAXREF. Cela induit d‚Äôimportants changements dans le sch√©ma <code class="docutils literal"><span class="pre">taxonomie</span></code>, notamment le renommage de <code class="docutils literal"><span class="pre">taxonomie.bib_taxons</span></code> en <code class="docutils literal"><span class="pre">taxonomie.bib_noms</span></code>, la suppression de <code class="docutils literal"><span class="pre">taxonomie.bib_filtres</span></code> et l‚Äôutilisation de <code class="docutils literal"><span class="pre">taxonomie.bib_attributs</span></code> (voir <a class="reference external" href="https://github.com/PnX-SI/TaxHub/issues/71">https://github.com/PnX-SI/TaxHub/issues/71</a> pour plus d‚Äôinformations). Voir aussi le fichier de migration <code class="docutils literal"><span class="pre">data/update_1.7to1.8.sql</span></code> qui permet d‚Äôautomatiser ces √©volutions de la BDD</li>
<li>Compatibilit√© avec l‚Äôapplication <a class="reference external" href="https://github.com/PnEcrins/GeoNature-atlas">GeoNature-atlas</a> qui permet de diffuser les donn√©es de la synth√®se faune et flore dans un atlas en ligne (exemple : <a class="reference external" href="http://biodiversite.ecrins-parcnational.fr">http://biodiversite.ecrins-parcnational.fr</a>)</li>
<li>Cr√©ation d‚Äôun site internet de pr√©sentation de GeoNature : <a class="reference external" href="http://geonature.fr">http://geonature.fr</a></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li>Am√©lioration des triggers concernant la suppression de fiches orphelines</li>
<li>Affichage par d√©faut du nom latin dans Contact flore et Contact invert√©br√©s</li>
<li>Correction des exports lors de la pr√©sence de points-virgules dans les commentaires. Fix #143</li>
<li>Suppression du besoin d‚Äôun super utilisateur lors de l‚Äôinstallation de la BDD. Fix #141</li>
<li>Correction de l‚ÄôID des protocoles mortalit√© et invertebres dans la configuration par d√©faut</li>
<li>Suppression d‚Äôun doublon dans le fichier de configuration symfony de l‚Äôapplication</li>
<li>Correction des coordonn√©es lors de l‚Äôexport de donn√©es Flore Station</li>
<li>Autres corrections mineures</li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>Ex√©cuter le script SQL de migration r√©alisant les modifications de la BDD de la version 1.7.X √† 1.8.0 <code class="docutils literal"><span class="pre">data/update_1.7to1.8.sql</span></code></li>
<li>Mettre √† jour taxref en V9 en vous inspirant du script <code class="docutils literal"><span class="pre">data/taxonomie/inpn/update_taxref_v8tov9</span></code></li>
</ul>
<p><strong>TaxHub</strong></p>
<p>L‚Äôapplication TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>) est d√©sormais fonctionnelle, document√© et installable.</p>
<p>Elle vous aidera √† g√©rer vos taxons et l‚Äôensemble du sch√©ma <code class="docutils literal"><span class="pre">taxonomie</span></code>, pr√©sent dans la BDD de GeoNature.</p>
<p>TaxHub √©voluera pour int√©grer progressivement de nouvelles fonctionnalit√©s.</p>
<p>Il est conseill√© de ne pas installer la base de donn√©es de TaxHub ind√©pendamment et de connecter l‚Äôapplication directement sur le la base de donn√©es de GeoNature.</p>
<p><strong>GeoNature-atlas</strong></p>
<p>GeoNature-atlas est √©galement bas√© sur le sch√©ma <code class="docutils literal"><span class="pre">taxonomie</span></code> de TaxHub. Ainsi TaxHub permet la saisie des informations relatives aux taxons (descriptions, milieux, photos, liens, PDF‚Ä¶). GeoNature-atlas dispose de sa propre base de donn√©es mais pour fonctionner en connexion avec le contenu de la base GeoNature il faut √† minima disposer d‚Äôune version 1.8 de GeoNature.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body">Une r√©gression dans le contenu de Taxref V9 conduit √† la suppression de l‚Äôinformation concernant le niveau de protection des esp√®ces (r√©gional, national, international,‚Ä¶).
Cette information √©tait utilis√©e par GeoNature, notamment pour d√©finir les textes √† retenir pour la colonne <code class="docutils literal"><span class="pre">concerne_mon_territoire</span></code> de la table <code class="docutils literal"><span class="pre">taxonomie.taxref_protection_articles</span></code>.
Vous devez d√©sormais remplir cette colonne manuellement.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id14">
<h2>1.7.4 (2016-07-06)<a class="headerlink" href="#id14" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li>Correction du script d‚Äôinstallation des tables li√©es au Contact flore (5a1fb07)</li>
<li>Mise en coh√©rence avec GeoNature-mobile utilisant les classes ‚Äògasteropodes‚Äô et ‚Äòbivalves‚Äô et non la classe g√©n√©rique ‚Äòmollusques‚Äô.</li>
</ul>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Corrections de mise en forme de la documentation</li>
<li>Ajout de la liste rouge France de TaxRef lors d‚Äôune nouvelle installation (f4be2b6). A ne pas prendre en compte dans le cas d‚Äôune mise √† jour.</li>
<li>Ajout du MCD de la BDD - <a class="reference external" href="https://github.com/PnEcrins/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png">https://github.com/PnEcrins/GeoNature/blob/master/docs/2016-04-29-mcd_geonaturedb.png</a></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.4 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</li>
<li>Remplacer <code class="docutils literal"><span class="pre">id_classe_mollusques</span></code> par <code class="docutils literal"><span class="pre">id_classe_gasteropodes</span></code> dans <code class="docutils literal"><span class="pre">web/js/config.js</span></code> et renseigner la valeur en coh√©rence avec l‚Äô<code class="docutils literal"><span class="pre">id_liste</span></code> retenu dans la table <code class="docutils literal"><span class="pre">taxonomie.bib_listes</span></code> pour les gast√©ropodes. Attention, vous devez avoir √©tabli une correspondance entre les taxons gast√©ropodes et bivalves et leur liste dans la table <code class="docutils literal"><span class="pre">taxonomie.cor_taxon_liste</span></code>.</li>
</ul>
</div>
<div class="section" id="id15">
<h2>1.7.3 (2016-05-19)<a class="headerlink" href="#id15" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections de bugs</strong></p>
<ul class="simple">
<li>Correction de coordonn√©es vides dans l‚Äôexport de Flore station. cf <a class="reference external" href="https://github.com/PnEcrins/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096">https://github.com/PnEcrins/GeoNature/commit/0793a3d3d2b3719ed515058d1a0ba9baf7cb2096</a></li>
<li>Correction des triggers en base concernant un bug de saisie pour les taxons dont le taxon de r√©f√©rence n‚Äôest pas pr√©sent dans <code class="docutils literal"><span class="pre">taxonomie.bib_taxons</span></code>.</li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la proc√©dure classique de mise √† jour. <a class="reference external" href="http://geonature.readthedocs.org/fr/latest/update.html">http://geonature.readthedocs.org/fr/latest/update.html</a></p>
<ul class="simple">
<li>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.3 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</li>
<li>Pour passer de la 1.7.2 √† la 1.7.3 vous devez ex√©cuter le script <code class="docutils literal"><span class="pre">https://github.com/PnEcrins/GeoNature/blob/master/data/update_1.7.2to1.7.3.sql</span></code>.</li>
</ul>
</div>
<div class="section" id="id16">
<h2>1.7.2 (2016-04-27)<a class="headerlink" href="#id16" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li>Correction d‚Äôun bug dans l‚Äôexport XLS depuis Flore Station.</li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>Vous pouvez passer directement de la version 1.6.0 √† la 1.7.2 mais en vous r√©f√©rant aux notes de version de la 1.7.0.</li>
</ul>
</div>
<div class="section" id="id17">
<h2>1.7.1 (2016-04-27)<a class="headerlink" href="#id17" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li>Ajout des listes flore manquantes dans le script de mise √† jour <code class="docutils literal"><span class="pre">data/update_1.6to1.7.sql</span></code>.</li>
</ul>
</div>
<div class="section" id="id18">
<h2>1.7.0 (2016-04-24)<a class="headerlink" href="#id18" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Nouveaut√©s</strong></p>
<ul class="simple">
<li>Ajout du contact flore</li>
<li>Correction et compl√©ments dans les statistiques et mise en param√®tre de leur affichage ou non, ainsi que de la date de d√©but √† prendre en compte pour leur affichage.</li>
<li>Ajout d‚Äôun module d‚Äôexport des donn√©es permettant d‚Äôoffrir, en interne ou √† des partenaires, un lien de t√©l√©chargement des donn√©es bas√© sur une ou des vues de la base de donn√©es (un fichier par vue). Voir <a class="reference external" href="http://geonature.readthedocs.org/fr/latest/export.html">http://geonature.readthedocs.org/fr/latest/export.html</a></li>
<li>Modification des identifiants des listes pour compatibilit√© avec les applications GeoNature-Mobile.</li>
<li>Compl√©ment dans la base de donn√©es pour compatibilit√© avec les applications GeoNature-Mobile.</li>
<li>Correction d‚Äôune erreur sur l‚Äôimportation de shape pour la recherche g√©ographique</li>
<li>WMS : correction de la liste des sites N2000, correction de l‚Äôaffichage de l‚Äôaire optimale d‚Äôadh√©sion des parcs nationaux et retrait des sites inscrits et class√©s</li>
<li>Correction d‚Äôun bug permettant la saisie d‚Äôune date d‚Äôobservation post√©rieure √† aujourd‚Äôhui dans Flore station</li>
<li>Mention de la version de taxref sur la page d‚Äôaccueil</li>
</ul>
<p><strong>Note de version</strong></p>
<p>Rappel : commencez par suivre la proc√©dure classique de mise √† jour. <a class="reference external" href="http://geonature.readthedocs.org/fr/latest/update.html">http://geonature.readthedocs.org/fr/latest/update.html</a></p>
<p><strong>1.</strong> Modification des identifiants des listes de taxons pour compatibilit√© avec les applications GeoNature-Mobile.</p>
<p>Dans GeoNature-Mobile, les taxons sont filtrables par classe sur la base d‚Äôun <code class="docutils literal"><span class="pre">id_classe</span></code>. Ces id sont inscrits en dur dans le code des applications mobiles.</p>
<p>Dans la base GeoNature les classes taxonomiques sont configurables grace au vues <code class="docutils literal"><span class="pre">v_nomade_classes</span></code> qui utilisent les listes (<code class="docutils literal"><span class="pre">taxonomie.bib_listes</span></code>).</p>
<p>Les <code class="docutils literal"><span class="pre">id_liste</span></code> ont donc √©t√© mis √† jour pour √™tre compatibles avec les <code class="docutils literal"><span class="pre">id_classe</span></code> des applications mobiles.</p>
<p>Voir le script SQL d‚Äôupdate <code class="docutils literal"><span class="pre">data/update_1.6to1.7.sql</span></code> et LIRE ATTENTIVEMENT LES COMMENTAIRES.</p>
<ul class="simple">
<li>En lien avec les modifications ci-dessus, mettre √† jour les variables des classes taxonomiques correspondant aux modification des <code class="docutils literal"><span class="pre">id_liste</span></code> dans <code class="docutils literal"><span class="pre">web/js/config.js</span></code></li>
<li>Ajouter dans le fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code> les variables <code class="docutils literal"><span class="pre">$struc_abregee</span></code>, <code class="docutils literal"><span class="pre">$struc_long</span></code>, <code class="docutils literal"><span class="pre">$taxref_version</span></code>, <code class="docutils literal"><span class="pre">$show_statistiques</span></code> et <code class="docutils literal"><span class="pre">$init_date_statistiques</span></code> (voir le fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</li>
</ul>
<p><strong>2.</strong> Pour ajouter le Contact flore</p>
<ul class="simple">
<li>Ex√©cuter le script sql <code class="docutils literal"><span class="pre">data/2154/contactflore.sql</span></code></li>
<li>Ajouter les variables <code class="docutils literal"><span class="pre">$id_lot_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal"><span class="pre">$id_protocole_cflore</span>&#160; <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal"><span class="pre">$id_source_cflore</span> <span class="pre">=</span> <span class="pre">7</span></code> et <code class="docutils literal"><span class="pre">$appname_cflore</span> <span class="pre">=</span> <span class="pre">'Contact</span> <span class="pre">flore</span> <span class="pre">-</span> <span class="pre">GeoNature';</span></code> dans <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code> (voir le fichier d‚Äôexemple <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>)</li>
<li>Ajouter les variables  <code class="docutils literal"><span class="pre">id_lot_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal"><span class="pre">id_protocole_contact_flore</span> <span class="pre">=</span> <span class="pre">7</span></code>, <code class="docutils literal"><span class="pre">id_source_contactflore</span> <span class="pre">=</span> <span class="pre">7</span></code> dans <code class="docutils literal"><span class="pre">web/js/config.js</span></code> (voir le fichier d‚Äôexemple <code class="docutils literal"><span class="pre">web/js/config.js.sample</span></code>)</li>
<li>l‚Äôenregistrement correspondant au contact flore dans la table <code class="docutils literal"><span class="pre">synthese.bib_sources</span></code> doit √™tre actif (derni√®re colonne) pour que le contact flore soit accessible depuis la page d‚Äôaccueil.</li>
</ul>
<p><strong>3.</strong> Afin de mettre √† jour la configuration WMS, vous devez ex√©cuter le fichier <code class="docutils literal"><span class="pre">wms/update1.6to1.7.sh</span></code>.</p>
<p>Au pr√©alable, assurez vous que les informations renseign√©es dans le fichier <code class="docutils literal"><span class="pre">config/settings.ini</span></code> sont √† jour. L‚Äôancien fichier sera sauvegard√© sous <code class="docutils literal"><span class="pre">wms/wms_1.6.map</span></code>. Vous pourrez faire le choix de conserver ou de supprimer ce fichier de sauvegarde qui ne sera pas utilis√© par l‚Äôapplication.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">wms</span><span class="o">/</span><span class="n">update1</span><span class="o">.</span><span class="mi">6</span><span class="n">to1</span><span class="o">.</span><span class="mf">7.</span><span class="n">sh</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4.</strong> Mise en place du module d‚Äôexport</p>
<ul>
<li><p class="first">Cr√©er les vues retournant les donn√©es attendues.</p>
</li>
<li><p class="first">Configurer le module dans le fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code> √† partir de l‚Äôexemple du fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php.sample</span></code>); section <code class="docutils literal"><span class="pre">configuration</span> <span class="pre">du</span> <span class="pre">module</span> <span class="pre">d'export</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Vous pouvez param√©trer plusieurs modules avec un nom pour chacun grace au param√®tre <code class="docutils literal"><span class="pre">exportname</span></code></li>
<li>Pour chacun des modules seuls les utilisateurs de geonature dont le <code class="docutils literal"><span class="pre">id_role</span></code> figure dans le tableau <code class="docutils literal"><span class="pre">authorized_roles_ids</span></code> peuvent exporter les donn√©es mises √† disposition par le module d‚Äôexport.</li>
<li>Chaque module peut comporter autant que vues que n√©cessaire (un bouton par vue g√©n√©rera un fichier zip par vue). Renseigner le tableau <code class="docutils literal"><span class="pre">views</span></code> pour chacun des modules.</li>
<li>Voir la documentation ici : <a class="reference external" href="http://geonature.readthedocs.org/fr/latest/export.html">http://geonature.readthedocs.org/fr/latest/export.html</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Attribution des droits n√©cessaires pour le r√©pertoire permettant l‚Äôenregistrement temporaire des fichiers g√©n√©r√©s par le module d‚Äôexport.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">775</span> <span class="n">web</span><span class="o">/</span><span class="n">uploads</span><span class="o">/</span><span class="n">exports</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">R√©tablir les droits d‚Äô√©criture et vider le cache</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">cache</span><span class="o">/</span>
<span class="n">chmod</span> <span class="o">-</span><span class="n">R</span> <span class="mi">777</span> <span class="n">log</span><span class="o">/</span>
<span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id19">
<h2>1.6.0 (2016-01-14)<a class="headerlink" href="#id19" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p class="first">Pour les changements dans la base de donn√©es vous pouvez ex√©cuter le fichier <code class="docutils literal"><span class="pre">data/update_1.5to1.6.sql</span></code></p>
</li>
<li><p class="first">Mise √† jour de la configuration Apache. Modifier le fichier <code class="docutils literal"><span class="pre">apache/wms.conf</span></code> en vous basant sur l‚Äôexemple <a class="reference external" href="https://github.com/PnEcrins/GeoNature/blob/master/apache/wms.conf.sample#L16-L17">https://github.com/PnEcrins/GeoNature/blob/master/apache/wms.conf.sample#L16-L17</a></p>
</li>
<li><p class="first">Ajouter le param√®tre <code class="docutils literal"><span class="pre">$id_application</span></code> dans <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> (voir la valeur utilis√©e pour GeoNature dans les tables <code class="docutils literal"><span class="pre">utilisateurs.t_applications</span></code> et <code class="docutils literal"><span class="pre">utilisateurs.cor_role_droit_application</span></code>)</p>
</li>
<li><p class="first">Ajouter le param√®tre <code class="docutils literal"><span class="pre">import_shp_projection</span></code> dans <code class="docutils literal"><span class="pre">web/js/configmap.map</span></code> - voir l‚Äôexemple dans le fichier <code class="docutils literal"><span class="pre">https://github.com/PnEcrins/GeoNature/blob/master/web/js/configmap.js.sample#L35</span></code></p>
</li>
<li><p class="first">Supprimer toute r√©f√©rence √† gps_user_projection dans <code class="docutils literal"><span class="pre">web/js/configmap.map</span></code></p>
</li>
<li><p class="first">Ajouter un tableau JSON des projections disponibles pour l‚Äôoutil de pointage GPS : <code class="docutils literal"><span class="pre">gps_user_projections</span></code> dans <code class="docutils literal"><span class="pre">web/js/configmap.map</span></code>. Respecter la structure d√©finie dans <code class="docutils literal"><span class="pre">https://github.com/PnEcrins/GeoNature/blob/master/web/js/configmap.js.sample#L7-L14</span></code>. Attention de bien respecter la structure du tableau JSON et notamment sa syntaxe (accolades, virgules, nom des objects, etc‚Ä¶)</p>
</li>
<li><p class="first">Ajouter les <code class="docutils literal"><span class="pre">id_liste</span></code> pour les classes faune filtrables dans les formulaires de saisie dans le fichier <code class="docutils literal"><span class="pre">web/js/config.map</span></code>. Ceci concerne les variables <code class="docutils literal"><span class="pre">id_classe_oiseaux</span></code>, <code class="docutils literal"><span class="pre">id_classe_mammiferes</span></code>, <code class="docutils literal"><span class="pre">id_classe_amphibiens</span></code>, <code class="docutils literal"><span class="pre">id_classe_reptiles</span></code>, <code class="docutils literal"><span class="pre">id_classe_poissons</span></code> et <code class="docutils literal"><span class="pre">id_classe_ecrevisses</span></code>, <code class="docutils literal"><span class="pre">id_classe_insectes</span></code>, <code class="docutils literal"><span class="pre">id_classe_arachnides</span></code>, <code class="docutils literal"><span class="pre">id_classe_myriapodes</span></code> et  <code class="docutils literal"><span class="pre">id_classe_mollusques</span></code>. Voir l‚Äôexemple dans le fichier <code class="docutils literal"><span class="pre">https://github.com/PnEcrins/GeoNature/blob/master/web/js/config.js.sample#L32-44</span></code></p>
</li>
<li><p class="first">Taxref a √©t√© mis √† jour de la version 7 √† 8. GeoNature 1.6.0 peut fonctionner avec la version 7. Cependant il est conseill√© de passer en taxref V8 en mettant √† jour la table <code class="docutils literal"><span class="pre">synthese.taxref</span></code> avec la version 8. Cette mise √† jour pouvant avoir un impact fort sur vos donn√©es, son automatisation n‚Äôa pas √©t√© pr√©vue. Le script SQL de migration de vos donn√©es de taxref V7 vers taxref V8 n‚Äôest donc pas fourni. Pour une installation nouvelle de la base de donn√©es, GeoNature 1.6.0 est fourni avec taxref V8.</p>
</li>
<li><p class="first">Le routing a √©t√© mis √† jour, vous devez vider le cache de Symfony pour qu‚Äôil soit pris en compte. Pour cela, placez vous dans le r√©pertoire racine de l‚Äôapplication et effectuez la commande suivante :</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">symfony</span> <span class="n">cc</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Les recherches dans la synth√®se sont d√©sormais faites sur le <code class="docutils literal"><span class="pre">cd_ref</span></code> et non plus sur le <code class="docutils literal"><span class="pre">cd_nom</span></code> pour retourner tous les synonymes du taxon recherch√© - Fix #92</li>
<li>Passage de taxref V7 √† Taxref V8 - Fix #34</li>
<li>Int√©gration de la premi√®re version de l‚ÄôAPI permettant d‚Äôint√©grer des donn√©es dans la synth√®se depuis une source externe - <a class="reference external" href="https://github.com/PnEcrins/GeoNature/blob/master/docs/geonature_webapi_doc.rst">https://github.com/PnEcrins/GeoNature/blob/master/docs/geonature_webapi_doc.rst</a></li>
<li>Mise en param√®tre du <code class="docutils literal"><span class="pre">id_application</span></code> dans <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php.php</span></code> - Fix #105</li>
<li>Recharger la synthese apr√®s suppression d‚Äôun enregistrement - Fix #94</li>
<li>L‚Äôutilisateur peut lui-m√™me d√©finir le syst√®me de coordonn√©es dans l‚Äôoutil de pointage GPS - Fix #107</li>
<li>Mise en param√®tre de la projection de la shape import√©e comme zone de recherche dans la synth√®se</li>
<li>Les exports XLS et SHP comportent le <code class="docutils literal"><span class="pre">cd_nom</span></code> ET le <code class="docutils literal"><span class="pre">cd_ref</span></code> de tous les synonymes du nom recherch√© ainsi que le nom_latin (bib_taxons) ET le nom_valide (taxref) - Fix #92</li>
<li>SAISIE invert√©br√©s - Ajout d‚Äôun filtre Mollusques - Fix #117</li>
<li>Am√©lioration du vocabulaire utilis√© sur la page d‚Äôaccueil - #118</li>
<li>Affichage d‚Äôun message pendant le chargement des exports</li>
<li>Mise en place de statistiques automatiques sur la page d‚Äôaccueil, bas√©es sur les listes de taxons. A compl√©ter.</li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li>Int√©gration de la librairie <code class="docutils literal"><span class="pre">OpenLayers.js</span></code> en local dans le code car les liens distants ne fonctionnaient plus - Fix #97</li>
<li>Correction d‚Äôune erreur lors de l‚Äôenregistrement de la saisie invert√©br√©s - Fix #104</li>
<li>Correction d‚Äôune erreur de redirection si on choisit ‚ÄúQuitter‚Äù apr√®s la saisie de l‚Äôenregistrement (contact faune, mortalit√© et invert√©br√©s) - Fix #102</li>
<li>Correction du trigger <code class="docutils literal"><span class="pre">contactfaune.synthese_update_cor_role_fiche_cf()</span></code> - Fix #95</li>
<li>Correction d‚Äôun bug dans les listes d√©roulantes des taxons filtr√©e par classe qui n‚Äôaffichaient rien - Fix #109</li>
<li>Correction d‚Äôun bug sur le contenu des exports shape avec le crit√®re de protection activ√© - Fix #114</li>
<li>Correction et adaptation faune-flore des exports shape</li>
<li>SYNTHESE - Correction de la liste des taxons sans nom fran√ßais - Fix #116</li>
<li>Corrections CSS sur la page d‚Äôaccueil - Fix #115</li>
<li>Correction sur la largeur de la liste des r√©sultats de la synth√®se - Fix #110</li>
<li>Correction des doublons dans la recherche multi-taxons - Fix #101</li>
<li>Autres corrections mineures</li>
</ul>
</div>
<div class="section" id="id20">
<h2>1.5.0 (2015-11-26)<a class="headerlink" href="#id20" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Note de version</strong></p>
<ul>
<li><p class="first">Pour les changements dans la base de donn√©es vous pouvez ex√©cuter le fichier <code class="docutils literal"><span class="pre">data/update_1.4to1.5.sql</span></code></p>
</li>
<li><p class="first">Le bandeau de la page d‚Äôaccueil <code class="docutils literal"><span class="pre">web/images/bandeau_faune.jpg</span></code> a √©t√© renomm√© en <code class="docutils literal"><span class="pre">bandeau_geonature.jpg</span></code>. Renommez le votre si vous aviez personnalis√© ce bandeau.</p>
</li>
<li><p class="first">Si vous souhaitez d√©sactiver certains programmes dans le ‚ÄúComment ?‚Äù de la synth√®se vous devez utiliser le champs <code class="docutils literal"><span class="pre">actif</span></code> de la table <code class="docutils literal"><span class="pre">meta.bib_programmes</span></code>.</p>
</li>
<li><p class="first">Compl√©ter si n√©cessaire les champs <code class="docutils literal"><span class="pre">url</span></code>, <code class="docutils literal"><span class="pre">target</span></code>, <code class="docutils literal"><span class="pre">picto</span></code>, <code class="docutils literal"><span class="pre">groupe</span></code> et <code class="docutils literal"><span class="pre">actif</span></code> dans la table <code class="docutils literal"><span class="pre">synthese.bib_sources</span></code>.</p>
</li>
<li><p class="first">Nouvelle r√©partition des param√®tres de configuration javascript en 2 fichiers (<code class="docutils literal"><span class="pre">config.js</span></code> et <code class="docutils literal"><span class="pre">configmap.js</span></code>). Vous devez reprendre vos param√®tres de configuration du fichier <code class="docutils literal"><span class="pre">web/js/config.js</span></code> et les ventiler dans ces deux fichiers.</p>
</li>
<li><p class="first">Ajouter le param√®tre <code class="docutils literal"><span class="pre">id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal"><span class="pre">web/js/config.js</span></code>;</p>
</li>
<li><p class="first">Retirer le param√®tre <code class="docutils literal"><span class="pre">fuseauUTM;</span></code> du fichier <code class="docutils literal"><span class="pre">web/js/config.js</span></code>;</p>
</li>
<li><p class="first">Bien d√©finir le syst√®me de coordonn√©es √† utiliser pour les pointages par coordonn√©es fournies en renseignant le param√®tre <code class="docutils literal"><span class="pre">gps_user_projection</span></code> dans le fichier <code class="docutils literal"><span class="pre">web/js/configmap.js</span></code>;</p>
</li>
<li><p class="first">Ajouter le param√®tre <code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$id_source_mortalite</span> <span class="pre">=</span> <span class="pre">2;</span></code> au fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p>
</li>
<li><p class="first">Ajouter le param√®tre <code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">$srid_ol_map</span> <span class="pre">=</span> <span class="pre">3857;</span></code> au fichier <code class="docutils literal"><span class="pre">lib/sfGeonatureConfig.php</span></code>;</p>
</li>
<li><p class="first">L‚Äôaltitude est calcul√©e automatiquement √† partir du service ‚ÄúAlticodage‚Äù de l‚ÄôAPI GeoPortail de l‚ÄôIGN et non pluas √† partir de la couche <code class="docutils literal"><span class="pre">layers.l_isolines20</span></code>. Ajoutez ce service dans votre contrat API Geoportail. Il n‚Äôest donc plus n√©cessaire de remplir la couche <code class="docutils literal"><span class="pre">layers.l_isolines20</span></code>. Cette couche peut toutefois encore √™tre utile si l‚Äôutilisateur supprime l‚Äôaltitude calcul√©e par l‚ÄôAPI Geoportail dans les formulaires de saisie.</p>
</li>
<li><p class="first">Le loup et le lynx sont retir√©s par d√©faut de la saisie (saisie recommand√©e dans le protocole national du r√©seau grands pr√©dateurs)</p>
</li>
<li><p class="first">Le cerf, chamois et le bouquetin doivent √™tre saisis selon 6 crit√®res de sexe et age et non 5 comme les autres taxons. Comportement peut-√™tre chang√© en modifiant la vue <code class="docutils literal"><span class="pre">contactfaune.v_nomade_taxons_faune</span></code>.</p>
</li>
<li><p class="first">Mortailit√© est d√©sormais une source √† part enti√®re alors qu‚Äôelles √©taient m√©lang√©es avec la source ContactFaune pr√©c√©demment. Si vous avez d√©j√† des donn√©es de mortalit√© enregistr√©es, vous devez adapter la requ√™te SQL ci-dessous avec votre <code class="docutils literal"><span class="pre">id_source</span></code> pour Mortalit√© et l‚Äôex√©cuter :</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">synthese</span><span class="o">.</span><span class="n">syntheseff</span> <span class="n">SET</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">WHERE</span> <span class="n">id_source</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">AND</span> <span class="n">id_critere_synthese</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Optimisation des vues aux chargement des listes de taxons. Fixes #64</li>
<li>G√©n√©ricit√© des champs dans <code class="docutils literal"><span class="pre">meta.bib_programmes</span></code> (champs <code class="docutils literal"><span class="pre">sitpn</span></code> renomm√© en <code class="docutils literal"><span class="pre">public</span></code>). Fixes #68</li>
<li>Ajout d‚Äôun champ <code class="docutils literal"><span class="pre">actif</span></code> √† la table <code class="docutils literal"><span class="pre">meta.bib_programmes</span></code> permettant de masquer certains programmes dans le ‚ÄúComment ?‚Äù de la synth√®se. Fixes #66</li>
<li>Ajout d‚Äôun champ <code class="docutils literal"><span class="pre">url</span></code>, <code class="docutils literal"><span class="pre">target</span></code>, <code class="docutils literal"><span class="pre">picto</span></code>, <code class="docutils literal"><span class="pre">groupe</span></code> et <code class="docutils literal"><span class="pre">actif</span></code> dans la table <code class="docutils literal"><span class="pre">synthese.bib_sources</span></code> pour g√©n√©rer la page d‚Äôaccueil dynamiquement et de mani√®re g√©n√©rique. Fixes #69</li>
<li>Construire dynamiquement la liste des liens vers la saisie des diff√©rents protocoles √† partir de la table <code class="docutils literal"><span class="pre">synthese.bib_sources</span></code>. Fixes #69</li>
<li>Tous les styles des √©l√©ments de la page d‚Äôaccueil ont √©t√© pass√©s en CSS. Fixes #57</li>
<li>Am√©lioration de l‚Äôinterface pendant le chargement des diff√©rentes applications (synth√®se, flore station, formualires de saisie‚Ä¶). Fixes #65</li>
<li>Recentrage sur la position de l‚Äôutilisation en utilisant le protocole de g√©olocalisation int√©gr√© au navigateur de l‚Äôutilisateur. Fixes #65</li>
<li>Un message automatique conseille les utilisateurs d‚ÄôInternet Explorer de plut√¥t utiliser Firefox ou Chrome. Fixes #65</li>
<li>Tri par d√©faut par date d√©croissante des 50 derni√®res observations affich√©es √† l‚Äôouverture de la Synth√®se. Fixes #51</li>
<li>Vocabulaire. ‚ÄúDessiner un point‚Äù remplac√© par ‚ÄúLocaliser l‚Äôobservation‚Äù. Fixes #66</li>
<li>Mise √† jour des copyrights dans les pieds de page de toutes les applications.</li>
<li>Refonte du CSS du formulaire de login avec bootstrap et une image de fond diff√©rente.</li>
<li>Refonte Bootstrap de la page d‚Äôaccueil.</li>
<li>Homog√©n√©isation du pied de page.</li>
<li>FloreStation et Bryophytes - Homog√©n√©iser interaction carte liste - ajout d‚Äôun popup au survol. Fixes #74</li>
<li>Suppression d‚Äôimages non utilis√©es dans le r√©pertoire <code class="docutils literal"><span class="pre">web/images</span></code>.</li>
<li>Mise en coh√©rence des vues taxonomiques faune. Fixes #81</li>
<li>Calcul de l‚Äôaltitude √† partir du service ‚ÄúAlticodage‚Äù de l‚ÄôAPI GeoPortail de l‚ÄôIGN.</li>
<li>Factorisation et g√©n√©ralisation du module permettant un positionnement des pointages par saisie de coordonn√©es selon projection et bbox fournies en param√®tres de config.</li>
<li>Cr√©ation d‚Äôune configuration javascript carto d√©di√©e (<code class="docutils literal"><span class="pre">configmap.js</span></code>).</li>
</ul>
<p><strong>Corrections de bug</strong></p>
<ul class="simple">
<li>Correction des probl√®mes de saisie de la version 1.4.0 li√©s √† la migration de la taxonomie.</li>
<li>Correction de bugs dans Flore Station et Bryophytes (Zoom, recherche</li>
</ul>
</div>
<div class="section" id="id21">
<h2>1.4.0 (2015-10-16)<a class="headerlink" href="#id21" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li>La gestion de la taxonomie a √©t√© mis en conformit√© avec le sch√©ma <code class="docutils literal"><span class="pre">taxonomie</span></code> de la base de donn√©es de TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub">https://github.com/PnX-SI/TaxHub</a>). Ainsi le sch√©ma <code class="docutils literal"><span class="pre">taxonomie</span></code> int√©gr√© √† GeoNature 1.3.0 doit √™tre globalement revu. L‚Äôensemble des modifications peuvent √™tre r√©alis√©es en √©xecutant la partie correspondante dans le fichier <code class="docutils literal"><span class="pre">data/update_1.3to1.4.sql</span></code> (<a class="reference external" href="https://github.com/PnEcrins/GeoNature/blob/master/data/update_1.3to1.4.sql">https://github.com/PnEcrins/GeoNature/blob/master/data/update_1.3to1.4.sql</a>).</li>
<li>De nouveaux param√®tres ont potentiellement √©t√© ajout√©s √† l‚Äôapplication. Apr√®s avoir r√©cup√©r√© le fichier de configuration de votre version 1.3.0, v√©rifiez les changements √©ventuels des diff√©rents fichiers de configuration.</li>
<li>Modification du nom de l‚Äôhost host h√©bergeant la base de donn√©es. databases ‚Äì&gt; geonatdbhost. A changer ou ajouter dans le <code class="docutils literal"><span class="pre">/etc/hosts</span></code> si vous avez d√©j√† install√© GeoNature.</li>
<li>Suivez la proc√©dure de mise √† jour : <a class="reference external" href="http://geonature.readthedocs.org/fr/latest/update.html">http://geonature.readthedocs.org/fr/latest/update.html</a></li>
</ul>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>A l‚Äôinstallation initiale, chargement en base des zones √† statuts juridiques pour toute la France m√©tropolitaine √† partir des sources de l‚ÄôINPN</li>
<li>A l‚Äôinstallation initiale, chargement en base de toutes les communes de France</li>
<li>Mise en place de la compatibilit√© de la base avec le schema de TaxHub</li>
</ul>
</div>
<div class="section" id="id22">
<h2>1.3.0 (2015-02-11)<a class="headerlink" href="#id22" title="Permalink to this headline">¬∂</a></h2>
<p>Pr√©-Version de GeoNature - Faune ET Flore. Le fonctionnement de l‚Äôensemble n‚Äôa pas √©t√© totalement test√©, des bugs sont identifi√©s, d‚Äôautres subsistent certainement.</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Grosse √©volution de la base de donn√©es</li>
<li>Ajout de deux applications de saisie flore (flore station et bryophytes)</li>
<li>Int√©gration de la flore en sythese</li>
<li>Ajouter un id_lot, id_organisme, id_protocole dans toutes les tables pour que ces id soit ajout√©s vers la synthese en trigger depuis les tables et pas avec des valeurs en dur dans les triggers. Ceci permet d‚Äôutiliser les param√®tres de conf de GeoNature</li>
<li>Ajout d‚Äôune fonction √† la base pour correction du dysfonctionnement du wms avec mapserver</li>
<li>Suppression du champ id_taxon en synthese et lien direct de la synthese avecle taxref. ceci permet d‚Äôajouter des donn√©es en synthese directement dans la base sans ajouter tous les taxons manquants dans la table bib_taxons</li>
<li>Suppression de la notion de coeur dans les crit√®re de recherche en synthese</li>
<li>Ajout d‚Äôun filtre faune flore fonge dans la synthese</li>
<li>Ajout de l‚Äôembranchement et du regne dans les exports</li>
<li>Permettre √† des partenaires de saisir mais d‚Äôexporter uniquement leurs donn√©es perso</li>
<li>Ajout du d√©terminateur dans les formulaires invert√©br√©s et contactfaune + en synthese</li>
<li>Ajout du r√©f√©rentiel g√©ographique de toutes les communes de France m√©tropolitaine</li>
<li>Ajout des zones √† statuts juridiques de la r√©gion sud-est (national √† venir)</li>
<li>Bugs fix</li>
</ul>
<p><strong>BUG √† identifier</strong></p>
<p>Installation :</p>
<ul class="simple">
<li>corriger l‚Äôinsertion de donn√©es flore station qui ne fonctionne pas</li>
</ul>
<p>Bryophythes :</p>
<ul class="simple">
<li>Corriger la recherche avanc√©e par date sans ann√©es</li>
</ul>
<p>Synth√®se :</p>
<ul class="simple">
<li>la construction de l‚Äôarbre pour choisir plusieurs taxons ne tient pas compte des filtres</li>
<li>le fonctionnement des unit√©s geographiques n‚Äôa pas √©t√© test√© (initialement con√ßu uniquement pour la faune)</li>
</ul>
</div>
<div class="section" id="id23">
<h2>1.2.0 (2015-02-11)<a class="headerlink" href="#id23" title="Permalink to this headline">¬∂</a></h2>
<p>Version stabilis√©e de GeoNature - Faune uniquement (Synth√®se Faune + Saisie ContactFauneVertebre, ContactFauneInvertebre et Mortalit√©).</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Modification du nom de l‚Äôapplication de FF-synthese en GeoNature</li>
<li>Changement du nom des utilisateurs PostgreSQL</li>
<li>Changement du nom de la base de donn√©es</li>
<li>Mise √† jour de la documentation (<a class="reference external" href="http://geonature.readthedocs.org/">http://geonature.readthedocs.org/</a>)</li>
<li>Automatisation de l‚Äôinstallation de la BDD</li>
<li>Renommer les tables pour plus de g√©n√©ricit√©</li>
<li>Supprimer les tables inutiles ou trop sp√©cifiques</li>
<li>Gestion des utilisateurs externalis√©e et centralis√©e avec UsersHub (<a class="reference external" href="https://github.com/PnEcrins/UsersHub">https://github.com/PnEcrins/UsersHub</a>)</li>
<li>Correction de bugs</li>
<li>Pr√©paration de l‚Äôint√©gration de la Flore pour passer de GeoNature Faune √† GeoNature Faune-Flore</li>
</ul>
</div>
<div class="section" id="id24">
<h2>1.1.0 (2014-12-11)<a class="headerlink" href="#id24" title="Permalink to this headline">¬∂</a></h2>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Modification du sch√©ma de la base pour √™tre compatible taxref v7</li>
<li>Import automatis√© de taxref v7</li>
<li>Suppression des tables de hi√©rarchie taxonomique (famille, ordre, ‚Ä¶) afin de simplifier l‚Äôutilisation de la taxonomie.</li>
<li>Cr√©ation de la notion de groupe (para-taxonomique) √† la place de l‚Äôutilisation des classes.</li>
<li>Ajout de donn√©es pour pouvoir tester de fa√ßon compl√®te l‚Äôapplication (invert√©br√©s, vert√©br√©s)</li>
<li>Ajout de donn√©es exemples</li>
<li>Bugs fix</li>
</ul>
</div>
<div class="section" id="id25">
<h2>1.0.0 (2014-12-10)<a class="headerlink" href="#id25" title="Permalink to this headline">¬∂</a></h2>
<p>Version fonctionnelle des applications : visualisation de la synth√®se faune, saisie d‚Äôune donn√©e de contact (vert√©br√©s, invert√©br√©s, mortalit√©)</p>
<p><strong>Changements</strong></p>
<ul class="simple">
<li>Documentation de l‚Äôinstallation d‚Äôun serveur Debian wheezy pas √† pas</li>
<li>Documentation de la mise en place de la base de donn√©es</li>
<li>Documentation de la mise en place de l‚Äôapplication et de son param√©trage</li>
<li>Script d‚Äôinsertion d‚Äôun jeu de donn√©es test</li>
<li>Passage √† PostGIS v2</li>
<li>Mise en param√®tre de la notion de lot, protocole et source</li>
</ul>
<p><strong>Prochaines √©volutions</strong></p>
<ul class="simple">
<li>Script d‚Äôimport de taxref v7</li>
<li>Utilisation pr√©f√©rentielle de la taxonomie de taxref plut√¥t que les tables de hi√©rarchie taxonomique</li>
</ul>
</div>
<div class="section" id="id26">
<h2>0.1.0 (2014-12-01)<a class="headerlink" href="#id26" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li>Cr√©ation du projet et de la documentation</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="authors.html" class="btn btn-neutral float-left" title="AUTEURS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, PnE, PnC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>