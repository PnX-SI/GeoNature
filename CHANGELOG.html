<!doctype html>
<html class="no-js" lang="fr" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Recherche" href="search.html" /><link rel="next" title="API REFERENCES" href="api-references.html" /><link rel="prev" title="Auteurs" href="authors.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>CHANGELOG - Documentation GeoNature 2.15.4</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Documentation GeoNature 2.15.4</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/LogoGeonature.jpg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Documentation GeoNature 2.15.4</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">Manuel utilisateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">Manuel administrateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Développement</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Auteurs</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">CHANGELOG</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api-references.html">API REFERENCES</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API REFERENCES</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="autoapi/geonature/index.html">geonature</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of geonature</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/app/index.html">geonature.app</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/geonature/core/index.html">geonature.core</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of geonature.core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/admin/index.html">geonature.core.admin</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of geonature.core.admin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/admin/admin/index.html">geonature.core.admin.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/admin/utils/index.html">geonature.core.admin.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/command/index.html">geonature.core.command</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of geonature.core.command</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/__main__/index.html">geonature.core.command.__main__</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/create_gn_module/index.html">geonature.core.command.create_gn_module</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/command/main/index.html">geonature.core.command.main</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/core/errors/index.html">geonature.core.errors</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/index.html">geonature.core.gn_commons</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/admin/index.html">geonature.core.gn_commons.admin</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/medias/index.html">geonature.core.gn_commons.medias</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.medias</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/medias/routes/index.html">geonature.core.gn_commons.medias.routes</a></li>
</ul>
</li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/index.html">geonature.core.gn_commons.models</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/additional_fields/index.html">geonature.core.gn_commons.models.additional_fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/models/base/index.html">geonature.core.gn_commons.models.base</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/repositories/index.html">geonature.core.gn_commons.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/routes/index.html">geonature.core.gn_commons.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/schemas/index.html">geonature.core.gn_commons.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_commons/tasks/index.html">geonature.core.gn_commons.tasks</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_commons/validation/index.html">geonature.core.gn_commons.validation</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.validation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_commons/validation/routes/index.html">geonature.core.gn_commons.validation.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_meta/index.html">geonature.core.gn_meta</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/index.html">geonature.core.gn_meta.models</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/aframework/index.html">geonature.core.gn_meta.models.aframework</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/commons/index.html">geonature.core.gn_meta.models.commons</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_meta/models/datasets/index.html">geonature.core.gn_meta.models.datasets</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/repositories/index.html">geonature.core.gn_meta.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/routes/index.html">geonature.core.gn_meta.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_meta/schemas/index.html">geonature.core.gn_meta.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/index.html">geonature.core.gn_monitoring</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of geonature.core.gn_monitoring</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/models/index.html">geonature.core.gn_monitoring.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_monitoring/routes/index.html">geonature.core.gn_monitoring.routes</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/index.html">geonature.core.gn_permissions</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of geonature.core.gn_permissions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/admin/index.html">geonature.core.gn_permissions.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/commands/index.html">geonature.core.gn_permissions.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/decorators/index.html">geonature.core.gn_permissions.decorators</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/models/index.html">geonature.core.gn_permissions.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/routes/index.html">geonature.core.gn_permissions.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/schemas/index.html">geonature.core.gn_permissions.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_permissions/tools/index.html">geonature.core.gn_permissions.tools</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/index.html">geonature.core.gn_profiles</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of geonature.core.gn_profiles</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/models/index.html">geonature.core.gn_profiles.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/routes/index.html">geonature.core.gn_profiles.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_profiles/tasks/index.html">geonature.core.gn_profiles.tasks</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/index.html">geonature.core.gn_synthese</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/index.html">geonature.core.gn_synthese.imports</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/actions/index.html">geonature.core.gn_synthese.imports.actions</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/geo/index.html">geonature.core.gn_synthese.imports.geo</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/imports/plot/index.html">geonature.core.gn_synthese.imports.plot</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/models/index.html">geonature.core.gn_synthese.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/module/index.html">geonature.core.gn_synthese.module</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/routes/index.html">geonature.core.gn_synthese.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/schemas/index.html">geonature.core.gn_synthese.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/synthese_config/index.html">geonature.core.gn_synthese.synthese_config</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/index.html">geonature.core.gn_synthese.utils</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/blurring/index.html">geonature.core.gn_synthese.utils.blurring</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/orm/index.html">geonature.core.gn_synthese.utils.orm</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/process/index.html">geonature.core.gn_synthese.utils.process</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/gn_synthese/utils/query_select_sqla/index.html">geonature.core.gn_synthese.utils.query_select_sqla</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/index.html">geonature.core.imports</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of geonature.core.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/actions/index.html">geonature.core.imports.actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/admin/index.html">geonature.core.imports.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/blueprint/index.html">geonature.core.imports.blueprint</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/index.html">geonature.core.imports.checks</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/index.html">geonature.core.imports.checks.dataframe</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.dataframe</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/cast/index.html">geonature.core.imports.checks.dataframe.cast</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/core/index.html">geonature.core.imports.checks.dataframe.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/dates/index.html">geonature.core.imports.checks.dataframe.dates</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/geometry/index.html">geonature.core.imports.checks.dataframe.geometry</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/dataframe/utils/index.html">geonature.core.imports.checks.dataframe.utils</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/checks/errors/index.html">geonature.core.imports.checks.errors</a></li>
<li class="toctree-l6 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/index.html">geonature.core.imports.checks.sql</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.sql</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/core/index.html">geonature.core.imports.checks.sql.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/extra/index.html">geonature.core.imports.checks.sql.extra</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/geo/index.html">geonature.core.imports.checks.sql.geo</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/nomenclature/index.html">geonature.core.imports.checks.sql.nomenclature</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/parent/index.html">geonature.core.imports.checks.sql.parent</a></li>
<li class="toctree-l7"><a class="reference internal" href="autoapi/geonature/core/imports/checks/sql/utils/index.html">geonature.core.imports.checks.sql.utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/commands/index.html">geonature.core.imports.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/config_schema/index.html">geonature.core.imports.config_schema</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/logs/index.html">geonature.core.imports.logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/models/index.html">geonature.core.imports.models</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="autoapi/geonature/core/imports/routes/index.html">geonature.core.imports.routes</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of geonature.core.imports.routes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/fields/index.html">geonature.core.imports.routes.fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/imports/index.html">geonature.core.imports.routes.imports</a></li>
<li class="toctree-l6"><a class="reference internal" href="autoapi/geonature/core/imports/routes/mappings/index.html">geonature.core.imports.routes.mappings</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/schemas/index.html">geonature.core.imports.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/tasks/index.html">geonature.core.imports.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/templates/index.html">geonature.core.imports.templates</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/imports/utils/index.html">geonature.core.imports.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/notifications/index.html">geonature.core.notifications</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of geonature.core.notifications</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/admin/index.html">geonature.core.notifications.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/models/index.html">geonature.core.notifications.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/routes/index.html">geonature.core.notifications.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/tasks/index.html">geonature.core.notifications.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/notifications/utils/index.html">geonature.core.notifications.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/sensitivity/index.html">geonature.core.sensitivity</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of geonature.core.sensitivity</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/models/index.html">geonature.core.sensitivity.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/routes/index.html">geonature.core.sensitivity.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/sensitivity/utils/index.html">geonature.core.sensitivity.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/taxonomie/index.html">geonature.core.taxonomie</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of geonature.core.taxonomie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/taxonomie/admin/index.html">geonature.core.taxonomie.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/taxonomie/schemas/index.html">geonature.core.taxonomie.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="autoapi/geonature/core/users/index.html">geonature.core.users</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of geonature.core.users</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/models/index.html">geonature.core.users.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/register_post_actions/index.html">geonature.core.users.register_post_actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="autoapi/geonature/core/users/routes/index.html">geonature.core.users.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/middlewares/index.html">geonature.middlewares</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/geonature/tasks/index.html">geonature.tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/geonature/utils/index.html">geonature.utils</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of geonature.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/celery/index.html">geonature.utils.celery</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/command/index.html">geonature.utils.command</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/config/index.html">geonature.utils.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/config_schema/index.html">geonature.utils.config_schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/env/index.html">geonature.utils.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/errors/index.html">geonature.utils.errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/filemanager/index.html">geonature.utils.filemanager</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/logs/index.html">geonature.utils.logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/metaclass_utils/index.html">geonature.utils.metaclass_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/module/index.html">geonature.utils.module</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/schema/index.html">geonature.utils.schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/sentry/index.html">geonature.utils.sentry</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsgeometrytools/index.html">geonature.utils.utilsgeometrytools</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsmails/index.html">geonature.utils.utilsmails</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilsrequests/index.html">geonature.utils.utilsrequests</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/geonature/utils/utilstoml/index.html">geonature.utils.utilstoml</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/CHANGELOG.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="changelog">
<h1>CHANGELOG<a class="headerlink" href="#changelog" title="Lien vers cette rubrique">¶</a></h1>
<section id="id1">
<h2>2.15.4 (2025-02-25)<a class="headerlink" href="#id1" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Import] Accélération du temps de suppression d’un import avec l’ajout d’un index sur les colonnes <code class="docutils literal notranslate"><span class="pre">id_import</span></code> des tables <code class="docutils literal notranslate"><span class="pre">pr_occhab.t_stations</span></code>, <code class="docutils literal notranslate"><span class="pre">pr_occhab.t_habitats</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (#3390 par &#64;jacquesfize et &#64;dba-sig-sfepm).</p></li>
<li><p>[Synthese] La mise à jour de la date de validation dans la synthèse est effective (#3371, #1040 par &#64;jacquesfize)</p></li>
<li><p>[Import] Le paramètre <code class="docutils literal notranslate"><span class="pre">CHECK_PRIVATE_JDD_BLURING</span></code> est maintenant désactivé par défaut (#3391 par &#64;camillemonchicourt)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Synthese] Correction de la prise en compte de <code class="docutils literal notranslate"><span class="pre">size_hierarchy</span></code> dans le mode maille de la Synthèse lorsque le floutage est activé (#3380 par &#64;Pierre-Narcisi)</p></li>
<li><p>[Benchmark] Correction des <em>fixtures</em> de benchmark des routes de la Synthèse avec floutage (#3381 par &#64;jacquesfize)</p></li>
<li><p>[Synthese] Correction de l’affichage des statuts dans la fiche d’observation et dans la fiche de taxon (#3384 par &#64;jacquesfize et #3394 par &#64;edelclaux)</p></li>
<li><p>[Import] Correction du nom de fichier dans le template du rapport d’import (<code class="docutils literal notranslate"><span class="pre">images/logo_structure.jpg</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">images/logo_structure.png</span></code>) (#3389 par &#64;jacquesfize)</p></li>
</ul>
</section>
<section id="id2">
<h2>2.15.3 (2025-02-14)<a class="headerlink" href="#id2" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthese] Affichage des <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code>, <code class="docutils literal notranslate"><span class="pre">cd_ref</span></code> et du <code class="docutils literal notranslate"><span class="pre">nom_cite</span></code> dans les fiches d’observation et les fiches taxon (#3334 par &#64;edelclaux).</p></li>
<li><p>[Documentation] La compilation de documentation est effectuée à chaque merge dans la branche principale (<code class="docutils literal notranslate"><span class="pre">master</span></code>) (#3338 par &#64;jacquesfize)</p></li>
<li><p>[Import] Ajout d’une barre de progression dans l’import Occhab (#2928 par &#64;Pierre-Narcisi)</p></li>
<li><p>[TaxHub] Mise à jour de TaxHub en version 2.1.2</p></li>
<li><p>[Authentification] Mise à jour UsersHub-autentification-module en version 3.0.2</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[TaxHub] Correction de la synchonisation avec Occtax-mobile (https://github.com/PnX-SI/TaxHub/pull/599 par &#64;amandine-sahl)</p></li>
<li><p>[TaxHub] Ajout d’un bouton TaxHub dans le menu latéral (#3368 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction du nombre d’entités valides des données importées (#3336, #3355 par &#64;jacquesfize)</p></li>
<li><p>[Import] Suppression des paramètres de configuration inutiles dans la nouvelle version (#3341 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction la barre de progression pour l’import dans la synthèse (#2928 par &#64;Pierre-Narcisi)</p></li>
<li><p>[Authentification] Correction des valeurs dans <code class="docutils literal notranslate"><span class="pre">defaut_config.toml.sample</span></code> (#3339 par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction du lien de l’accès public (#3353 par &#64;VincentCauchois)</p></li>
<li><p>[Synthèse] Correction de l’ordre d’affichage des observations sensibles (#3354 par &#64;VincentCauchois et &#64;Christophe-Ramet; #3249).</p></li>
<li><p>[Synthèse] Correction de la recherche dans la Synthese avec un ou plusieurs filtres parmi « Listes rouges » (#3351 par &#64;VincentCauchois et &#64;Christophe-Ramet).</p></li>
<li><p>[Synthèse] Correction de la recherche avec filtre par géométrie avec des SRID différents (#3324 par &#64;jbrieuclp et &#64;jacquesfize)</p></li>
<li><p>[Métadonnées] Correction du rafraichissement du formulaire de recherche (#3365 par &#64;jacquesfize)</p></li>
<li><p>[Documentation] Réintégration de la documentation sur l’authentification avec un fournisseur d’identité externe (#3338 par &#64;jacquesfize)</p></li>
<li><p>[Développement] Correction des modèles SQLAlchemy pour pouvoir utiliser le mode debug (#3346 par &#64;jacquesfize)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous les aviez défini, enlevez les paramètres <code class="docutils literal notranslate"><span class="pre">INSTANCE_BOUNDING_BOX</span></code>, <code class="docutils literal notranslate"><span class="pre">ENABLE_BOUNDING_BOX_CHECK</span></code>, <code class="docutils literal notranslate"><span class="pre">ALLOW_FIELD_MAPPING</span></code>, <code class="docutils literal notranslate"><span class="pre">DEFAULT_FIELD_MAPPING_ID</span></code>, <code class="docutils literal notranslate"><span class="pre">DISPLAY_CHECK_BOX_MAPPED_FIELD</span></code> de votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Ces derniers ne sont plus pris en compte depuis la version 2.15.x.</p>
</section>
<section id="id3">
<h2>2.15.2 (2025-01-16)<a class="headerlink" href="#id3" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Accueil] Optimisation du calcul des statistiques (#3309, par &#64;dba-sig-sfepm et &#64;jacquesfize)</p></li>
<li><p>[Profils de taxon] Amélioration, homogénéisation et mise en cohérence des paramètres d’activation ou non des profils de taxons (#3311, par &#64;edelclaux)</p></li>
<li><p>[TaxHub] Mise à jour de TaxHub en version 2.1.1 (#3321, par &#64;amandine-sahl et &#64;jacquesfize)</p></li>
<li><p>[Documentation] Compléments de la documentation du module Validation et de la sensibilité (#3317, par &#64;camillemonchicourt)</p></li>
<li><p>[Développement] Redémarrage automatique du backend quand un fichier de configuration <code class="docutils literal notranslate"><span class="pre">.toml</span></code> est modifié (#3316, par &#64;jacquesfize)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Accueil] Correction de la prise en compte de la portée des permissions dans le calcul des statistiques (#3166, par &#64;jacquesfize et &#64;edelclaux)</p></li>
<li><p>[Sensibilité] Correction du comptage du nombre de règles supprimées dans la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">remove-referential</span></code> (#3323, par &#64;jacquesfize)</p></li>
<li><p>[Synthèse] Correction de la disparition du filtre par <code class="docutils literal notranslate"><span class="pre">id_import</span></code> après l’affichage d’une fiche observation (par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction des redirections du module Admin lors de l’authentification (#3322, par &#64;jacquesfize)</p></li>
<li><p>[Métadonnées] Correction d’une régression de performances de la récupération des JDD, introduite dans la 2.15.1 (#3320, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Authentification] La configuration des providers n’est plus accessible depuis la route <code class="docutils literal notranslate"><span class="pre">gn_commons/config</span></code> (#3330 par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction d’erreurs dans l’interface de correspondance des champs (#3329, par &#64;Pierre-Narcisi)</p></li>
</ul>
</section>
<section id="id4">
<h2>2.15.1 (2025-01-10)<a class="headerlink" href="#id4" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Métadonnées] Amélioration de la recherche libre des métadonnées en cherchant chaque mot indépendamment (#3295, par &#64;jbrieuclp)</p></li>
<li><p>[FicheTaxon] Amélioration de l’affichage de la photo du taxon sur les fiches taxon (#3287, par &#64;edelclaux)</p></li>
<li><p>[Documentation] Conversion du changelog en format markdown (#3297, par &#64;jacquesfize)</p></li>
<li><p>[Documentation] Complément et mise en forme de la documentation et publication sur Readthedocs (#3306, par &#64;jacquesfize)</p></li>
<li><p>[Développement] Ajout d’un fichier <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> pour faciliter l’usage des commandes de développement (#3300, par &#64;jacquesfize &amp; &#64;edelclaux)</p></li>
<li><p>[Installation] Ajout des nouvelles mailles INPN lors de l’installation de GeoNature (#3293, par &#64;jacquesfize)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Discussions] Correction de la pagination quand on filtre les discussions de la page d’accueil sur « Mes discussions » (#3288, par &#64;edelclaux)</p></li>
<li><p>[Discussions] Correction des performances de la requête de récupération des discussions (#3307, par &#64;jacquesfize)</p></li>
<li><p>[Métadonnées] Correction du nombre de taxons sur les fiches des cadres d’acquisition (#3228, par &#64;jacquesfize)</p></li>
<li><p>[Authentification] Correction des redirections lors de l’authentification (#3305, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la sélection automatique du JDD lors de l’import depuis la fiche d’un JDD (#3293, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la mise à jour des mappings publics (#3293, par &#64;jacquesfize)</p></li>
<li><p>[Import] Correction de la sauvegarde des checkbox dans le mapping des champs (#3293, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Import] Correction de la sélection des champs <code class="docutils literal notranslate"><span class="pre">auto_generate</span></code> (#3293, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Import] Correction du template des notifications d’un import terminé (#3310 par &#64;jacquesfize)</p></li>
</ul>
</section>
<section id="pavo-cristatus-2025-12-11">
<h2>2.15.0 - Pavo cristatus 🦚 (2025-12-11)<a class="headerlink" href="#pavo-cristatus-2025-12-11" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>⏩ En bref</strong></p>
<ul class="simple">
<li><p>Nouvelle version de TaxHub (2.0.0) intégrée à GeoNature</p></li>
<li><p>Fiche de taxon enrichie intégrant l’actuel profil mais aussi une synthèse géographique, les informations taxonomiques ainsi qu’une liste des statuts de protection</p></li>
<li><p>Module Import intégré à GeoNature</p></li>
<li><p>Import de données vers le module Occhab</p></li>
<li><p>Dernières discussions listées sur la page d’accueil</p></li>
</ul>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[TaxHub] Intégration de TaxHub (<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/2.0.0">2.0.0 Release Note</a>) à GeoNature (#3280)</p>
<ul>
<li><p>La gestion des taxons est maintenant intégrée dans le module Admin de GeoNature.</p></li>
</ul>
</li>
<li><p>[Import] Refonte et intégration du module Import dans GeoNature (#3269)</p>
<ul>
<li><p>Ajout d’une nouvelle destination d’import de données : Occhab</p></li>
<li><p>Ajout de la possibilité d’étendre les destinations disponibles pour l’import de données vers d’autres modules. <a class="reference external" href="https://docs.geonature.fr/development.html#integrer-limport-de-donnees-dans-votre-module">Documentation de développement</a> dédiée à ce sujet</p></li>
<li><p>Ajout d’un bouton pour importer des données directement depuis le module de destination (Synthèse et Occhab actuellement)</p></li>
<li><p>Evolution des permissions : la création d’un import dépend de l’action C sur le module Import et de l’action C dans le module de destination (Synthèse et/ou Occhab)</p></li>
<li><p>Plusieurs améliorations : de nouveaux contrôles des données, un rapport d’import revu et intégration de nouveaux tests frontends</p></li>
<li><p>Intégration et complément de la documentation utilisateur et administrateur du module dans la documentation de GeoNature</p></li>
</ul>
</li>
<li><p>[Authentification] Possibilité de se connecter à GeoNature avec d’autres fournisseurs d’identité (#3111)</p>
<ul>
<li><p>Plusieurs protocoles de connexion intégrés activables et paramétrables : OAuth, CAS INPN, UserHub</p></li>
<li><p>Possibilité de se connecter sur d’autres instances GeoNature</p></li>
</ul>
</li>
<li><p>[Synthèse] Enrichissement de la fiche taxon (#2981, #3131, #3187, #3175)</p>
<ul>
<li><p>Affichage de la synthèse géographique d’un taxon</p></li>
<li><p>Affichage du statut de protection du taxon</p></li>
<li><p>Affichage des informations taxonomiques présentes dans Taxref</p></li>
<li><p>Ajout d’un lien vers la fiche du taxon depuis la liste des observations de la Synthèse (#2718)</p></li>
</ul>
</li>
<li><p>[Synthèse] Possibilité de partager une URL de redirection vers un onglet (détails, taxonomie, discussion, validation, etc.) de la fiche d’une observation (#3169)</p></li>
<li><p>[Accueil] Ajout d’un bloc <code class="docutils literal notranslate"><span class="pre">Discussions</span></code> sur la page d’accueil, désactivable avec le paramètre <code class="docutils literal notranslate"><span class="pre">DISPLAY_LATEST_DISCUSSIONS</span></code> (#3138)</p>
<ul>
<li><p>Filtrable sur les discussions dans lesquelles l’utilisateur authentifié a participé, ou associé à une des observations dont il est : soit l’observateur ou l’opérateur de la saisie (#3194)</p></li>
</ul>
</li>
<li><p>[Occhab] Remplacement du champ <code class="docutils literal notranslate"><span class="pre">is_habitat_complex</span></code> par le nouveau champ <code class="docutils literal notranslate"><span class="pre">id_nomenclature_type_habitat</span></code> et intégration de la nomenclature SINP associée (voir MosaiqueValue dans la version 2 du standard Occurrences d’habitats du SINP) (#3125)</p></li>
<li><p>[Occhab] Affichage de l’UUID de la station dans sa fiche détail (#3247)</p></li>
<li><p>[Occhab] Amélioration de l’export des données en revoyant la vue <code class="docutils literal notranslate"><span class="pre">pr_occhab.v_export_sinp</span></code> (#3122)</p></li>
<li><p>[Métadonnées] Possibilité de supprimer un cadre d’acquisition vide (#1673)</p></li>
<li><p>[Occtax] Ajout du nom de lieu dans le détail d’un relevé (#3145)</p></li>
<li><p>[RefGeo] De nouvelles mailles INPN sur la France métropolitaine (2km, 20km, 50km) sont disponibles (https://github.com/PnX-SI/RefGeo/releases/tag/1.5.4)</p></li>
<li><p>[Monitoring] Ajout de la gestion de la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_observations</span></code> directement dans GeoNature (#2824)</p></li>
<li><p>La synchronisation avec le service MTD de l’INPN n’est plus intégrée dans le code de GeoNature, elle a été déplacée dans un module externe (https://github.com/PnX-SI/mtd_sync)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’URL des modules externes dans le menu latéral (#3093)</p></li>
<li><p>Correction des erreurs d’exécution de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> (#3216)</p></li>
<li><p>Correction du placement des tooltips pour le composant <code class="docutils literal notranslate"><span class="pre">ng-select</span></code> (#3142)</p></li>
<li><p>Correction de l’interrogation des profils dans Occtax (#3156)</p></li>
<li><p>Correction de l’affichage du lieu dans les fiches des relevés Occtax (#3145)</p></li>
<li><p>Correction de l’export Occhab avec des champs additionnels vides (#2837)</p></li>
<li><p>Correction d’un soucis de duplication des géométries quand on modifie un polygone (#3195)</p></li>
<li><p>Correction de la recherche avancée par zonage dans le module Métadonnées (#3250)</p></li>
<li><p>Correction d’un scroll non souhaité dans l’interface du module Synthèse (#3233)</p></li>
<li><p>Correction de l’affichage des acteurs dans les fiches des observations de la Synthèse (#3086)</p></li>
<li><p>Correction du chargement des champs additionnels de type Nomenclature (#3082)</p></li>
<li><p>Correction des filtres taxonomiques avancés dans le mdoule Synthèse (#3087)</p></li>
<li><p>Correction de l’affichage des boutons radio quand ceux-ci sont obligatoires (#3210)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> (#3208)</p></li>
<li><p>Correction de la redirection vers la page d’authentification quand on accède au module Admin sans être authentifié (#3171)</p></li>
<li><p>Correction du scroll du menu latéral dans le module Admin (#3145)</p></li>
<li><p>Correction de l’aperçu des médias de type PDF (#3260)</p></li>
<li><p>Corrections diverses de la documentation</p></li>
<li><p>Ajout d’un action Github permettant de lancer les tests depuis des modules externes (#3232)</p></li>
<li><p>Lancement de <code class="docutils literal notranslate"><span class="pre">pytest</span></code> sans <em>benchmark</em> ne nécessite plus l’ajout de <code class="docutils literal notranslate"><span class="pre">--benchmark-skip</span></code> (#3183)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous utilisez GeoNature-citizen, attendez qu’une version de celui-ci compatible avec TaxHub 2.x soit disponible.</p></li>
<li><p>Si vous mettez à jour GeoNature :</p></li>
</ul>
<p><strong>Avant la mise à jour de GeoNature :</strong></p>
<ul class="simple">
<li><p>Ajouter l’extension <code class="docutils literal notranslate"><span class="pre">ltree</span></code> à votre base de données : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">&lt;nom_basededonnee_de_votregeonature&gt;</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">ltree;&quot;</span></code></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez-le à jour en version 1.0.0 minimum</p></li>
<li><p>Si vous utilisez le module Monitoring, les champs <code class="docutils literal notranslate"><span class="pre">id_digitizer</span></code> des tables <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code>, <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> est désormais obligatoire. Assurez-vous qu’ils soient peuplés avant de lancer la mise à jour de GeoNature (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_monitoring.t_base_visits</span> <span class="pre">tbv</span> <span class="pre">WHERE</span> <span class="pre">id_digitiser</span> <span class="pre">IS</span> <span class="pre">NULL;</span> <span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_monitoring.t_base_sites</span> <span class="pre">tbs</span> <span class="pre">WHERE</span> <span class="pre">id_digitiser</span> <span class="pre">IS</span> <span class="pre">NULL;</span></code>).</p></li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Après la mise à jour de GeoNature :</strong></p>
<ul>
<li><p>L’application TaxHub a été integrée dans le module « Admin » de GeoNature (#3280) :</p>
<ul>
<li><p>Les permissions basées sur les profils 1-6 ont été rapatriées et adaptées au modèle de permissions de GeoNature.
TaxHub est désormais un « module » GeoNature et dispose des objets de permissions <code class="docutils literal notranslate"><span class="pre">TAXONS</span></code>, <code class="docutils literal notranslate"><span class="pre">THEMES</span></code>, <code class="docutils literal notranslate"><span class="pre">LISTES</span></code> et <code class="docutils literal notranslate"><span class="pre">ATTRIBUTS</span></code>. Les utilisateurs ayant anciennement des droits 6 dans TaxHub ont toutes les permissions sur les objets pré-cités. Les personnes ayant des droits inférieurs à 6 et ayant un compte sur TaxHub ont maintenant des permissions sur l’objet <code class="docutils literal notranslate"><span class="pre">TAXON</span></code> (voir et éditer des taxons = ajouter des médias et des attributs)</p></li>
<li><p>L’API de TaxHub est désormais disponible à l’URL <code class="docutils literal notranslate"><span class="pre">&lt;URL_GEONATURE&gt;/api/taxhub/api/</span></code> (le suffixe <code class="docutils literal notranslate"><span class="pre">/api</span></code> est une rétrocompatibilité et sera enlevé de manière transparente dans les prochaines versions)</p></li>
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">API_TAXHUB</span></code> de GeoNature est désormais obsolète (déduit de <code class="docutils literal notranslate"><span class="pre">API_ENDPOINT</span></code>) et peut être retiré du fichier de configuration de GeoNature</p></li>
<li><p>Si vous utilisez Occtax-mobile, veillez à modifier son paramètre <code class="docutils literal notranslate"><span class="pre">taxhub_url</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">/geonature/backend/media/mobile/occtax/settings.json</span></code>, pour mettre la valeur <code class="docutils literal notranslate"><span class="pre">&lt;URL_GEONATURE&gt;/api/taxhub</span></code>. Idem dans le paramètre <code class="docutils literal notranslate"><span class="pre">TAXHUB_URL</span></code> de GeoNature-atlas si vous utilisez celui-ci.</p></li>
<li><p>Les médias ont été déplacés automatiquement du dossier <code class="docutils literal notranslate"><span class="pre">/static/medias/</span></code> de TaxHub vers le dossier <code class="docutils literal notranslate"><span class="pre">/backend/media/taxhub/</span></code> de GeoNature. En conséquence, les URL des médias des taxons ont changé. Vous devez donc le répercuter les paramètres de vos éventuelles applications qui les utilisent (<code class="docutils literal notranslate"><span class="pre">REMOTE_MEDIAS_URL</span></code> et <code class="docutils literal notranslate"><span class="pre">REMOTE_MEDIAS_PATH</span></code> de la configuration de GeoNature-atlas par exemple).</p></li>
<li><p>L’intégration de TaxHub dans GeoNature entraine la suppression de son service systemd dédié et la configuration Apache spécifique de TaxHub. Les logs de TaxHub sont également désormais centralisés dans le fichier de log de GeoNature.</p></li>
<li><p>L’application TaxHub indépendante n’est plus utilisée, effectuez donc les actions suivantes :</p>
<ul class="simple">
<li><p>Supprimez la branche alembic taxhub : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">downgrade</span> <span class="pre">taxhub-standalone&#64;base</span></code></p></li>
<li><p>Supprimez le dossier spécifique de l’ancien TaxHub (à priori dans <code class="docutils literal notranslate"><span class="pre">/home/monuser/taxhub/</span></code>)</p></li>
</ul>
</li>
<li><p>Les commandes de TaxHub sont maintenant accessibles depuis la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>, par exemple :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>taxref<span class="w"> </span>migrate-to-v17<span class="w"> </span><span class="c1"># flask taxref migrate-to-v17</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Le module Import a été intégré dans le coeur de GeoNature (#3269)</p>
<ul class="simple">
<li><p>Si vous aviez installé le module externe Import, l’ancienne version a été désinstallée lors de la mise à jour de GeoNature.</p></li>
<li><p>Si vous n’aviez pas installé le module externe Import, il sera disponible après la mise à jour de GeoNature. Vous pouvez configurer les permissions de vos utilisateurs si vous souhaitez qu’ils accédent au module Import.</p></li>
<li><p>La gestion des permissions du module Import et des JDD qui lui sont associés a évolué. La migration de ces données est gérée automatiquement lors de la mise à jour de GeoNature pour garantir un fonctionnement identique du module Import.</p></li>
<li><p>Reporter l’éventuelle configuration de votre module Import dans le fichier de configuration de GeoNature (dans le bloc <code class="docutils literal notranslate"><span class="pre">[IMPORT]</span></code> du fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, voir le fichier d’exemple <code class="docutils literal notranslate"><span class="pre">default_config.toml.example</span></code>)</p></li>
</ul>
</li>
<li><p>Si vous souhaitez intégrer les nouvelles mailles INPN, vous pouvez éxécuter ces commandes :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_2</span><span class="nd">@head</span>  <span class="c1"># Insertion des mailles 2x2km métropole, fournies par l’INPN</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_20</span><span class="nd">@head</span>  <span class="c1"># Insertion des mailles 20x20km métropole, fournies par l’INPN</span>
<span class="n">geonature</span> <span class="n">db</span> <span class="n">upgrade</span> <span class="n">ref_geo_inpn_grids_50</span><span class="nd">@head</span> <span class="c1"># Insertion des mailles 50x50km métropole, fournies par l’INPN</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;amandine-sahl, &#64;Pierre-Narcisi, &#64;jacquesfize, &#64;TheoLechemia, &#64;bouttier, &#64;andriacap, &#64;edelclaux, &#64;JulienCorny, &#64;VincentCauchois, &#64;CynthiaBorotPNV, &#64;JeromeMaruejouls, &#64;jbrieuclp, &#64;blaisegeo, &#64;lpofredc, &#64;amillemonchicourt, &#64;ch-cbna</p>
</section>
<section id="id5">
<h2>2.14.2 (2024-05-28)<a class="headerlink" href="#id5" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Mise à jour de dépendances critiques (#3054)</p></li>
<li><p>Mise à jour de NodeJS en version 20 (#2997)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’erreurs dans les fichiers de traductions du frontend (#3026)</p></li>
<li><p>Correction de la fermeture des sessions SQLAlchemy lancées par Celery (#3050, #3062 )</p></li>
<li><p>[CAS-INPN] Fix du système d’authentification au CAS de l’INPN (#2866)</p></li>
<li><p>[Monitoring] Correction de la requête SQLAlchemy de récupération des aires de sites (#2984)</p></li>
<li><p>[Occtax] Correction de la transformation de la valeur par défaut dans les champs additionnels d’Occtax (#2978, #3011, #3017)</p></li>
<li><p>[RefGeo] Correction du filtre <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la route <code class="docutils literal notranslate"><span class="pre">/geo/areas</span></code> (#3057, PnX-SI/RefGeo#26)</p></li>
</ul>
</section>
<section id="id6">
<h2>2.14.1 (2024-04-29)<a class="headerlink" href="#id6" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthèse] Possibilité d’ajouter des colonnes supplémentaires à la liste de résultats via le paramètre <code class="docutils literal notranslate"><span class="pre">ADDITIONAL_COLUMNS_FRONTEND</span></code>. Ces champs sont masqués par défaut et controlables depuis l’interface (#2946)</p></li>
<li><p>[Synthèse] Possiblité d’ajouter des exports personnalisés basés sur des vues SQL via le paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVATIONS_CUSTOM_VIEWS</span></code> (#2955)</p></li>
<li><p>[DynamicForm] Possibilité de définir une valeur par défaut sur le composant <code class="docutils literal notranslate"><span class="pre">bool_checkbox</span></code> (#2819)</p></li>
<li><p>[Documentation] Simplification, automatisation et documentation du changement de l’URL de l’API de GeoNature au niveau du frontend (#2936)</p></li>
<li><p>[Configuration] Enrichissement des URI autorisés de connexion à la BDD PostgreSQL (#2947)</p></li>
<li><p>[TaxHub] Mise à jour de TaxHub en version 1.14.0, incluant par défaut Taxref v17, BDC statuts v17 et référentiel de sensibilité v17</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Occtax] Correction de l’inversion des valeurs par défaut de 2 nomenclatures (#2822)</p></li>
<li><p>[Synthèse] Correction du lien de renvoi vers le module de saisie d’une observation (#2907)</p></li>
<li><p>[Validation] Correction de l’enregistrement d’une validation quand l’utilisateur a des permissions avec une portée limitée (#2958)</p></li>
<li><p>[Occhab] Prise en compte des permissions utilisateurs dans l’affichage des boutons d’actions (info, édition, suppression) dans la liste de stations du module Occhab (#2942)</p></li>
<li><p>[MTD] Amélioration des performances de la synchronisation avec le service MTD (#2922)</p></li>
<li><p>Correction du double chargement des fond de carte (#2902)</p></li>
<li><p>[Synthèse] Amélioration des performances de la liste des zonages dans les filtres de la synthèse (#2977 &amp; https://github.com/PnX-SI/RefGeo/pull/22)</p></li>
<li><p>Correction de la redirection du bouton « Accueil » quand GeoNature est déployé sur une URL avec un suffixe (#2934)</p></li>
<li><p>Correction de la connexion avec le CAS de l’INPN (#2866)</p></li>
<li><p>Correction d’une mauvaise synchronisation du cookie et du JWT via une MAJ de pypnusershub (PnX-SI/UsersHub-authentification-module#94)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Suppression de l’utilisation du composant <code class="docutils literal notranslate"><span class="pre">ngx-mat-select-search</span></code> (#2826 &amp; #2827)</p></li>
<li><p>[Occtax] Il n’est plus obligatoire de poster le champs <code class="docutils literal notranslate"><span class="pre">additionnal_fields</span></code> au niveau de l’API des relevés, taxons et dénombrements (#2937)</p></li>
<li><p>Suppression des branches et ajout d’adresses relatives dans <code class="docutils literal notranslate"><span class="pre">.gitmodules</span></code> (#2959)</p></li>
<li><p>Lint et doc HTML/CSS (#2890 &amp; #2960)</p></li>
<li><p>Correction de l’héritage des composants <code class="docutils literal notranslate"><span class="pre">GenericFormComponent</span></code> (#2961)</p></li>
<li><p>Utilisation de <code class="docutils literal notranslate"><span class="pre">pytest-benchmark</span></code> pour l’évaluation automatique de performances des routes (#2896)</p></li>
<li><p>Utilisation de <code class="docutils literal notranslate"><span class="pre">marshmallow</span></code> pour la validation des données renvoyées par la route <code class="docutils literal notranslate"><span class="pre">get_observations_for_web</span></code> et ajout du contrôle de la présence des champs obligatoires (#2950)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Les paramètres de la synthèse permettant de spécifier le nom de certaines colonnes de la vue d’export sont dépréciés (<code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_DIGITISER_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_GEOJSON_4326_COL</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPORT_GEOJSON_LOCAL_COL</span></code>).</p></li>
<li><p>Si vous aviez surcouché la vue par défaut <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>, il est recommandé de ne plus le faire et de plutôt utiliser le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVATIONS_CUSTOM_VIEWS</span></code> permettant de se créer ses propres vues d’export personnalisées. Voir « Export des observations » dans la documentation du module Synthèse (https://docs.geonature.fr/admin-manual.html#module-synthese)</p></li>
<li><p>Vous pouvez mettre à jour TaxHub en version 1.14.0 (ou plus si compatible) et mettre à jour Taxref en version 17, ainsi que la BDC statuts et le référentiel de sensibilité</p></li>
<li><p>Vous pouvez mettre à jour UsersHub en version 2.4.2 (ou plus si compatible)</p></li>
</ul>
</section>
<section id="talpa-europaea-2024-02-28">
<h2>2.14.0 - Talpa europaea 👓 (2024-02-28)<a class="headerlink" href="#talpa-europaea-2024-02-28" title="Lien vers cette rubrique">¶</a></h2>
<p>Cette nouvelle version de GeoNature propose de nouvelles fonctionnalités comme le floutage de données sensibles dans le module Synthèse ainsi qu’un système de validation automatique des données basé sur les profils de taxons.<br />
Elle intégre aussi plusieurs mises à jour des versions des librairies python utilisées comme Flask (3.0) et SQLAlchemy (1.4).</p>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Le support de Debian 10 a été arrêté, votre serveur doit être en Debian 11 ou 12</p></li>
<li><p>Mettre à jour TaxHub en version 1.13.3 (ou plus) et optionnellement UsersHub (2.4.0 ou plus)</p></li>
<li><p>Si vous les utilisez, mettez à jour les modules Import (version 2.3.0), Export (version 1.7.0), Monitoring (version 0.7.2) et Dashboard (version 1.5.0), avec la nouvelle procédure consistant uniquement à télécharger, dézipper et renommer les dossiers des modules</p></li>
<li><p>Si vous utilisez d’autres modules externes, vérifiez qu’ils disposent d’une version compatible avec GeoNature 2.14 (SQLAlchemy 1.4, Python 3.9 minimum, supression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code>)</p></li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez les fonds IGN, mettez à jour les URL des flux dans votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> (#2789)</p></li>
</ul>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthèse] Floutage des données sensibles (#2558)</p>
<ul>
<li><p>Il est désormais possible de définir un filtre « Flouter les données sensibles » sur les actions <em>Lire</em> et <em>Exporter</em> du module Synthèse</p></li>
<li><p>Pour les utilisateurs qui ont ce filtre de permission appliqué, les données sensibles seront floutées lors de leur affichage ou de leur export dans le module Synthèse, en fonction des mailles ou zonages définis dans les règles de sensibilité du SINP</p></li>
<li><p>En mode Mailles, les données sensibles dont la géométrie floutée est plus grande que la maille affichée sont exclues</p></li>
<li><p>Dans l’onglet « Zonage » des fiches des observations de la Synthèse, on affiche uniquement les zonages plus grands que la géométrie floutée des données sensibles</p></li>
<li><p>Si un utilisateur dispose de permissions filtrées sur les données sensibles, alors les filtres par zonage s’appuie sur une intersection spatiale avec les géométries floutées pour ne pas renvoyer d’informations plus précises sur les données floutées</p></li>
<li><p>La documentation sur le sensibilité des données a été complétée : https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite)</p></li>
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">BLUR_SENSITIVE_OBSERVATIONS</span></code> permet de basculer sur l’exclusion des données sensibles plutôt que leur floutage, comme implémenté dans la version 2.13</p></li>
</ul>
</li>
<li><p>[Validation] Fonction de validation automatique basée sur les profils de taxons (non activée par défaut et surcouchable avec une fonction spécifique) (#2600)</p></li>
<li><p>[Synthèse] Ajout des groupes 3 INPN dans les filtres et les exports de la Synthèse (#2621, #2637)</p></li>
<li><p>[Occtax] Ajout de la possibilité d’associer des nomenclatures à des groupes 3 INPN (#2684)</p></li>
<li><p>[Authentification] Possibilité d’ajouter des liens externes (#2917)</p></li>
<li><p>[Carte] Mise à jour des exemples d’URL de fonds de carte IGN (#2789)</p></li>
<li><p>[RefGeo] Répercussion du remplacement du champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> par <code class="docutils literal notranslate"><span class="pre">geom_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#2809)</p></li>
<li><p>[Documentation] Ajout de diagrammes d’architecture dans la documentation (#2760)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’affichage du nom du module quand on revient à la page d’accueil (#2795)</p></li>
<li><p>[Synthèse] Correction de l’affichage du nom du taxon observé quand les profils de taxons sont désactivés (#2820)</p></li>
<li><p>[Carte] Conservation de la géométrie existante lorsqu’on annule la modification d’une géométrie (#2778)</p></li>
<li><p>[Métadonnées] Correction de l’affichage du type de financement sur les fiches détail des CA et JDD (#2840)</p></li>
<li><p>[Occhab] Correction des permissions avec portée limitée (#2909)</p></li>
<li><p>[Occtax] Correction de la suppression d’un champ additionnel (#2923)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Mise à jour vers SQLAlchemy 1.4 (#1812)</p></li>
<li><p>Mise à jour vers Flask 3 (#2751)</p></li>
<li><p>Mise à jour de Black en version 24 (#2879)</p></li>
<li><p>Suppression des modules dépréciés : <code class="docutils literal notranslate"><span class="pre">utilsgeometry.py</span></code>, <code class="docutils literal notranslate"><span class="pre">utilssqlalchemy.py</span></code>, <code class="docutils literal notranslate"><span class="pre">config_manager.py</span></code> (#2751)</p></li>
<li><p>Intégration de la documentation automatique des composants Frontend (avec <code class="docutils literal notranslate"><span class="pre">compodoc</span></code>) et des fonctions et classes du backend (avec <code class="docutils literal notranslate"><span class="pre">sphinx-autoapi</span></code>) (#2765)</p></li>
<li><p>Abandon du système d’authentification par cookie, sauf pour le module Admin. Le token d’authentification (JWT) est maintenant passé dans chaque appel à l’API dans le header HTTP « Authorization Bearer ». Il est aussi fourni par la route de login du sous-module d’authentification et stocké dans le localStorage (#2586, #2161, #490, #2574)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">app.config.ts</span></code> (#2747)</p></li>
<li><p>Passage du paramètre <code class="docutils literal notranslate"><span class="pre">--line-length</span></code> de Black de 99 à 100 caractères (#2847)</p></li>
<li><p>Modification de <code class="docutils literal notranslate"><span class="pre">TModules</span></code> pour éviter de lever l’erreur de polymorphisme de SQLAlchemy (#2792)</p></li>
<li><p>Fin du support de Debian 10 et de Python 3.7 (#1787)</p></li>
<li><p>Changement de l’ensemble des requêtes SQLAlchemy au style 2.0 (#2751)</p></li>
<li><p>Augmentation du nombre de tests unitaires dans : <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">occtax</span></code>, <code class="docutils literal notranslate"><span class="pre">occhab</span></code>, <code class="docutils literal notranslate"><span class="pre">synthese</span></code> (#2751)</p></li>
<li><p>Modification des <code class="docutils literal notranslate"><span class="pre">fixtures</span></code> : <code class="docutils literal notranslate"><span class="pre">datasets</span></code>, <code class="docutils literal notranslate"><span class="pre">stations</span></code> + <code class="docutils literal notranslate"><span class="pre">user</span></code>(#2751). Possibilité de créer des utilisateurs de tests avec des permissions plus fines (#2915)</p></li>
</ul>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;amandine-sahl, &#64;Pierre-Narcisi, &#64;jacquesfize, &#64;TheoLechemia, &#64;bouttier, &#64;mvergez, &#64;andriacap, &#64;edelclaux, &#64;VincentCauchois, &#64;MoulinZ, &#64;pierre56, &#64;camillemonchicourt</p>
</section>
<section id="id7">
<h2>2.13.4 (2023-12-15)<a class="headerlink" href="#id7" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthèse] Ajout des colonnes <code class="docutils literal notranslate"><span class="pre">group[1,2,3]_inpn</span></code> à la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_web_app</span></code> (#2798, par &#64;andriacap)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Métadonnées] Masquage des références bibliograhpiques dans le formulaire des cadres d’acquisition en attendant la finalisation du développement du backend (#2562, par &#64;DonovanMaillard)</p></li>
<li><p>[Occtax] Correction du problème de chargement de la liste de JDD lors de la création d’un relevé (#2815, par &#64;andriacap)</p></li>
<li><p>[Synthèse et validation] Ajout de la méthode de détermination dans la fiche détail d’une observation (#2785, par &#64;DonovanMaillard)</p></li>
<li><p>[Frontend] Correction de la prise en compte des filtres dans le composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2777, par &#64;joelclems)</p></li>
<li><p>[Synthèse] Optimisation du chargement de l’affichage des observations groupées par maille (#2766, par &#64;mvergez)</p></li>
<li><p>[Accueil] Optimisation du chargement des statistiques générales (#2771, par &#64;mvergez)</p></li>
<li><p>[Synthèse] Correction et enrichissement de la configuration des colonnes affichées dans la liste des observations (#2749, par &#64;mvergez)</p></li>
<li><p>[Synthèse] Correction de la recherche par attribut TaxHub de type « multiselect » (#2767, par &#64;mvergez)</p></li>
<li><p>[Occtax] Tri alphabétique de la liste des « Mes lieux » (#2805, par &#64;DonovanMaillard)</p></li>
<li><p>[Documentation] Corrections et compléments de la documentation d’administrateur (#2812, par &#64;marie-laure-cen)</p></li>
</ul>
</section>
<section id="id8">
<h2>2.13.3 (2023-10-17)<a class="headerlink" href="#id8" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Métadonnées] Correction de l’affichage des descriptions dans les fiches des cadres d’acquisition (#2716, par &#64;mvergez)</p></li>
<li><p>[Admin] Correction de la modification des permissions sensibles (#2697, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synthèse] Correction de la documentation du paramètre <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code> (#1892, par &#64;camillemonchicourt)</p></li>
<li><p>[Médias] Conservation de la rotation des images des vignettes (#2742, par &#64;MathRdt)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Utilisation du fichier <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> pour les tests automatiques des contributions dans la branche <code class="docutils literal notranslate"><span class="pre">master</span></code> (#2739, par &#64;Pierre-Narcisi)</p></li>
<li><p>Déplacement des dépendances de développement des types Leaflet vers les dépendances de production (#2744, par &#64;TheoLechemia)</p></li>
<li><p>Prise en compte du paramètre <code class="docutils literal notranslate"><span class="pre">creatableInModule</span></code> du composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> dans les dynamic forms (#2736, par &#64;amandine-sahl)</p></li>
</ul>
</section>
<section id="id9">
<h2>2.13.2 (2023-09-28)<a class="headerlink" href="#id9" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthèse] Ajout d’un filtre par module de provenance (#2670, par &#64;andriacap)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction des déconnexions non effectives dans les versions 2.13.0 et 2.13.1 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction des permissions vérifiées pour pouvoir supprimer un signalement en prenant en compte le C du module Validation, et non pas le R qui n’existe pas sur ce module (#2710, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de l’API des applications mobiles quand le chemin de l’APK est absolu (#2708, par &#64;joelclems)</p></li>
<li><p>Correction des permissions des listes de JDD dans les modules de saisie (Occtax, Occhab, Import) en prenant en compte la portée du C du module, et pas seulement du R du module Métadonnées (#2712, par &#64;Pierre-Narcisi)</p></li>
<li><p>Utilisation de l’heure locale du serveur pour lancer les taches Celery (#2725, par &#64;bouttier)</p></li>
<li><p>Fermeture des connexions à la BDD à la fin des taches Celery (#2724, par &#64;bouttier)</p></li>
<li><p>Correction de l’affichage du bouton permettant d’importer directement depuis la fiche d’un JDD, nécessitant la version 2.2.3 du module Import (#2713, par &#64;bouttier)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Ajout du thème Bootstrap au composant <code class="docutils literal notranslate"><span class="pre">datalist</span></code> (#2727, par &#64;TheoLechemia)</p></li>
<li><p>Docker : utilisation de python 3.11 (#2728, par &#64;bouttier)</p></li>
<li><p>Déplacement du <code class="docutils literal notranslate"><span class="pre">DispatcherMiddleware</span></code> après les fichiers statiques customisés (#2720, par &#64;bouttier)</p></li>
<li><p>Suppression du script <code class="docutils literal notranslate"><span class="pre">03b_populate_db_for_test.sh</span></code> (#2726, par &#64;bouttier)</p></li>
</ul>
<p><strong>📝 Documentation</strong></p>
<ul class="simple">
<li><p>Mise à jour de la documentation suite aux évolutions des permissions dans la 2.13.0 (par &#64;camillemonchicourt)</p></li>
</ul>
</section>
<section id="id10">
<h2>2.13.1 (2023-09-15)<a class="headerlink" href="#id10" title="Lien vers cette rubrique">¶</a></h2>
<p>L’installation de GeoNature (ainsi que ses 4 modules externes principaux, TaxHub et UsersHub) avec Docker est désormais complet et fonctionnel. Voir la documentation sur https://docs.geonature.fr/installation.html#docker.<br />
C’est la manière la plus simple de déployer GeoNature avec ses 4 modules externes principaux (Import, Export, Dashboard, Monitoring) mais aussi de les mettre à jour, avec seulement quelques lignes de commandes, à partir des images construites automatiquement et du fichier <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> global, fourni dans le dépôt <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services">GeoNature-Docker-services</a>.</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Amélioration de l’affichage des taxons en passant à la ligne quand ils sont trop longs (#2690, par &#64;JulienCorny)</p></li>
<li><p>Amélioration du <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> de GeoNature (#2623, par &#64;joelclems et &#64;bouttier)</p></li>
<li><p>Ne pas renvoyer les modules désactivés dans la route <code class="docutils literal notranslate"><span class="pre">/modules</span></code> (#2693, par &#64;bouttier)</p></li>
<li><p>Mise à jour de TaxHub en version 1.12.1 (#2623, par &#64;joelclems)</p></li>
<li><p>Mise à jour de Utils-Flask-SQLAlchemy en version 0.3.6 et UsersHub-authentification-module en version 1.6.10 (#2704, par &#64;TheoLechemia)</p></li>
<li><p>Mise à jour de différentes dépendances Python (#2704, par &#64;TheoLechemia)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction des déconnexions non effectives sur la 2.13.0 (#2682, par &#64;TheoLechemia)</p></li>
<li><p>Correction de la configuration NGINX des préfixes quand GeoNature est déployé avec Docker (#2698, par &#64;bouttier)</p></li>
<li><p>Correction des permissions vérifiées pour pouvoir supprimer un signalement en prenant en compte le R du module Validation, et non pas le V du module Synthèse (#2705, par &#64;Pierre-Narcisi)</p></li>
<li><p>Correction de l’épinglage des observations qui était encore partagé entre utilisateurs, et non pas individuels (#2702, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synthèse] Correction de la recherche de taxons avec des accents (#2676, par &#64;Pierre-Narcisi)</p></li>
<li><p>[Synthèse] Correction des couleurs des mailles quand on clique sur différentes mailles successivement en mode maille (#2677, par &#64;Pierre-Narcisi)</p></li>
</ul>
<p><strong>📝 Documentation</strong></p>
<ul class="simple">
<li><p>Documentation de la nouvelle interface d’administration des permissions (#2605, par &#64;camillemonchicourt), disponible sur https://docs.geonature.fr/user-manual.html#admin</p></li>
<li><p>Mise à jour de la documentation d’installation Docker suite à la sortie d’un Docker Compose complet et fonctionnel sur <a class="reference external" href="https://github.com/PnX-SI/GeoNature-Docker-services/">GeoNature-Docker-services</a> (#2703)</p></li>
<li><p>Correction de petites fautes d’orthographe (#2674, par &#64;omahs)</p></li>
<li><p>Correction du template d’issue (#2700, par &#64;mvergez)</p></li>
</ul>
</section>
<section id="carpodacus-erythrinus-2023-08-23">
<h2>2.13.0 - <a class="reference external" href="https://www.ecrins-parcnational.fr/breve/roselin-gondouins">Carpodacus erythrinus</a> 🐤 (2023-08-23)<a class="headerlink" href="#carpodacus-erythrinus-2023-08-23" title="Lien vers cette rubrique">¶</a></h2>
<ul class="simple">
<li><p>Révision globale des permissions pour pouvoir leur associer d’autres types de filtres (sensibilité notamment), les simplifier et clarifier en supprimant l’héritage et en définissant les permissions disponibles pour chaque module.</p></li>
<li><p>Possibilité de filtrer les données dans la Synthèse selon leur sensibilité, mais sans floutage pour le moment (à venir), en affichant ou non les données sensibles selon les permissions de l’utilisateur.</p></li>
<li><p>Vérifiez que vos modules soient compatibles avec le nouveau mécanisme de déclaration des permissions disponibles. C’est le cas pour les modules Import, Export, Dashboard, Monitorings et Zones humides.</p></li>
<li><p>Cette nouvelle version est compatible avec Debian 12. Le support de Debian 10 sera arrêté prochainement.</p></li>
</ul>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Refonte complète des permissions (#2487)</p>
<ul>
<li><p>Suppression de l’héritage des permissions du module « GeoNature » vers les autres modules, et de l’objet « All » vers les éventuels autres objets des modules. Chaque permission dans un module doit désormais être définie explicitement. Cela entraine de devoir définir plus de permissions (à l’installation d’un nouveau module notamment) mais aussi de les rendre plus lisibles, additives et explicites (#2474)</p></li>
<li><p>Evolution du modèle de données des permissions pour élargir les possibilités de filtrage des permissions au-delà de l’appartenance (anciennement nommée portée ou scope) (#2472)</p></li>
<li><p>Suppression des permissions ayant une appartenance de niveau 0 (Aucune donnée). En effet, en supprimant l’héritage des permissions et en les définissant par module de manière explicite, si un groupe ou utilisateur n’a aucune permission sur un module, alors il n’y accède pas et ne le voit pas dans le menu latéral. Si il a n’importe quelle permission sur un module, alors il y accède.</p></li>
<li><p>Suppression du filtre d’appartenance de niveau 3 (Toutes les données). En effet, celui-ci est désormais redondant avec l’ajout d’une permission sans filtre.</p></li>
<li><p>Définition des permissions disponibles dans chaque module dans la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_permissions.t_permissions_available</span></code>, pour ne proposer que des permissions qui ont un usage quand on ajoute ou modifie les permissions d’un utilisateur (#2489)</p></li>
<li><p>Refonte de l’interface d’administration des permissions (Flask-admin) ne proposant que les permissions disponibles, affichant les permissions explicites d’un utilisateur et calculant celles effectives provenant d’un groupe auquel il appartient (#2605)</p></li>
<li><p>Optimisation et agrégation des permissions</p></li>
<li><p>[Synthèse] Ajout d’un filtre sur la sensibilité des données, permettant de les afficher et de les exporter ou non à un groupe ou utilisateurs (pas de floutage pour le moment) (#2504 / #2584)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">permissions</span> <span class="pre">supergrant</span></code> permettant d’ajouter toutes les permissions disponibles à un utilisateur ou groupe super-administrateur (#2557)</p></li>
<li><p>Ajout de la vérification des permissions manquantes sur différentes routes (#2542 / #1863)</p></li>
</ul>
</li>
<li><p>Ajout de notifications quand un commentaire est ajouté sur une observation (#2460)</p></li>
<li><p>Amélioration des performances de la recherche de taxons dans Occtax et dans la Synthèse (#2592 / https://github.com/PnX-SI/TaxHub/issues/384)</p></li>
<li><p>Support de Debian 12 (avec Python 3.11, PostgreSQL 15 et PostGIS 3.3) (#1787)</p></li>
<li><p>[Admin] Fixer la barre de navigation du menu latéral et possibilité de la rabbatre (#2556)</p></li>
<li><p>[Synthèse] Ajout d’un filtre par source (#2513)</p></li>
<li><p>[Synthèse] Ajout d’un filtre par <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> (#2516)</p></li>
<li><p>[Synthèse] Recherche des observateurs multiples et insensible aux accents (#2568)</p></li>
<li><p>[Occtax] Ajout du paramètre <code class="docutils literal notranslate"><span class="pre">EXPANDED_TAXON_ADVANCED_DETAILS</span></code> permettant d’ouvrir par défaut les champs avancés du formulaire de renseignement du taxon (#2446)</p></li>
<li><p>Conservation du fond de carte utilisé quand on navigue dans les modules (#2619)</p></li>
<li><p>Suppression des médias orphelins basculée dans une tache Celery Beat lancée automatiquement toutes les nuits (<code class="docutils literal notranslate"><span class="pre">clean_attachments</span></code>), et non plus à l’ajout ou suppression d’un autre média (#2436)</p></li>
<li><p>Ajout d’une documentation utilisateur sur le module Métadonnées - https://docs.geonature.fr/user-manual.html#metadonnees (#2662)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Occtax] Correction du déplacement du marqueur de localisation poncutelle d’un relevé (#2554 et #2552)</p></li>
<li><p>[Occtax] Correction du centrage sur la carte quand on modifie un relevé</p></li>
<li><p>[Occtax] Correction de l’affichage de la géométrie du précédent relevé quand on enchaine des relevés de type polygone puis point (#2657)</p></li>
<li><p>Correction de la sélection automatique des valeurs par défaut numériques dans les champs de type « Liste déroulante (Select) » des formulaires dynamiques (#2540)</p></li>
<li><p>Correction de la gestion des entiers pour les champs additionnels de type « checkbox » (#2518)</p></li>
<li><p>Correction de l’envoi à plusieurs destinataires des emails de demande de création de compte (#2389)</p></li>
<li><p>Récupération du contenu du champs « Organisme » dans le formulaire de demande de création de compte (#1760)</p></li>
<li><p>Amélioration des messages lors de la demande de création de compte (#2575)</p></li>
<li><p>Correction du graphique dans l’export PDF des cadres d’acquisition (#2618)</p></li>
<li><p>[Synthèse] Correction de l’affichage des géométries de type multipoint (#2536)</p></li>
<li><p>[Synthèse] Correction des filtres par défaut (#2634)</p></li>
<li><p>[Synthèse] Correction des filtres géographiques multiples (#2639)</p></li>
<li><p>[Métadonnées] Correction de l’affichage du formulaire de filtres avancés (#2649)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Découpage du script <code class="docutils literal notranslate"><span class="pre">install/03_create_db.sh</span></code> en 2 (avec la création du fichier <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db.sh</span></code>) notamment pour améliorer la dockerisation de GeoNature (#2544)</p></li>
<li><p>Ajout d’un script <code class="docutils literal notranslate"><span class="pre">install/03b_populate_db_for_test.sh</span></code> pouvant être utilisé par la CI de test des modules GeoNature (#2544)</p></li>
<li><p>Ajout d’un script <code class="docutils literal notranslate"><span class="pre">install/assets/docker_startup.sh</span></code> pour lancer les migrations Alembic depuis le docker de GeoNature (#2544)</p></li>
<li><p>Création d’un fichier <code class="docutils literal notranslate"><span class="pre">install/assets/db/add_pg_extensions.sql</span></code> regroupant la création des extensions PostgreSQL (#2544)</p></li>
<li><p>Amélioration de <code class="docutils literal notranslate"><span class="pre">APPLICATION_ROOT</span></code> pour qu’il fonctionne en mode développement (#2546)</p></li>
<li><p>Amélioration des modèles de la Synthèse pour prendre en compte les valeurs par défaut des nomenclatures (#2524)</p></li>
<li><p>Meilleure portabilité des scripts dans les différents systèmes Unix (#2435)</p></li>
<li><p>Mise à jour des dépendances Python (#2596)</p></li>
<li><p>Documentation de développement des permissions (#2585)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Mettre à jour TaxHub en version 1.12.0 (ou plus) et optionnellement UsersHub</p></li>
<li><p>Si vous les utilisez, mettez à jour les modules Import, Export, Monitoring et Dashboard dans leurs versions compatibles avec GeoNature 2.13, avec la nouvelle procédure consistant uniquement à télécharger, dézipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Si vous utilisez d’autres modules externes, vérifiez qu’ils disposent d’une version compatible avec GeoNature 2.13, ou faites-les évoluer pour qu’ils déclarent leurs permissions disponibles (exemple : #2543)</p></li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Les permissions existantes sur vos différents groupes et utilisateurs sont récupérées et remises à plat automatiquement sans système d’héritage. Vérifiez cependant les permissions après la mise à jour de vos groupes et utilisateurs.</p></li>
<li><p>Désormais, quand vous installerez un nouveau module (ou sous-module), pour le voir affiché dans le menu et y avoir accès, il faudra lui appliquer des permissions aux groupes ou utilisateurs qui doivent y accéder.</p></li>
</ul>
<p>✅ Exemple de procédure de mise à jour depuis une version 2.12 : https://geonature.fr/documents/procedures/2023-10-GN-212to213.txt</p>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;TheoLechemia / &#64;VincentCauchois / &#64;Pierre-Narcisi / &#64;joelclems / &#64;andriacap / &#64;mvergez / &#64;JulienCorny / &#64;MathRdt / &#64;DonovanMaillard / &#64;camillemonchicourt</p>
</section>
<section id="id11">
<h2>2.12.3 (2023-05-09)<a class="headerlink" href="#id11" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[Synthèse] Correction du filtre des observations épinglées pour ne remonter que celles de l’utilisateur connecté (#2507 par &#64;mvergez)</p></li>
<li><p>[Synthèse] Correction de la recherche géographique avec chargement d’un fichier local (#2522 par &#64;bouttier et &#64;mvergez)</p></li>
<li><p>[Admin] Correction d’une régression des performances d’édition des permissions (#2523 par &#64;bouttier)</p></li>
<li><p>Compléments de la documentation (page maintenance, migration avec git, configuratrion dynamique, #2526, #2501, #2503 par &#64;camillemonchicourt)</p></li>
<li><p>[Métadonnées] Correction des droits de modification des cadres d’acquisition</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> (#2525 par &#64;bouttier)</p></li>
<li><p>Correction du downgrade d’une migration Alembic d’Occtax (#2500 par &#64;JulienCorny)</p></li>
<li><p>Correction et ation de la page de maintenance (#2535)</p></li>
<li><p>Correction de la synchronisation des JDD et de l’association aux modules (#2532 par &#64;VincentCauchois)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.cruved_scope_for_user_in_module</span></code> est remplacée par <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools.get_scopes_by_action</span></code></p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous utilisez la page de maintenance, celle-ci a été revue, <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">référez vous à la documentation</a> afin de la mettre à jour.</p>
<p>Si vous utilisiez des champs additionnels avec des checkbox, lors de leur changement de type (recommandé dans les notes de version de la 2.12.0) il est important que les valeurs du champ <code class="docutils literal notranslate"><span class="pre">field_values</span></code> continue à avoir des « string » dans la clé values : [{« label »: « Un », « value »: « 1 »}] sans quoi il y aura des problème à l’édition. Pour les nouveaux champs additionnels, il est cependant bien possible de mettre des entiers dans la clé <code class="docutils literal notranslate"><span class="pre">value</span></code> [{« label »: « Un », « value »: 1}]</p>
</section>
<section id="id12">
<h2>2.12.2 (2023-04-18)<a class="headerlink" href="#id12" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Synthèse : ajout d’un filtre sur les observations avec ou sans commentaire (#2469, par &#64;mvergez)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Synthèse - mode maille : récupération des observations hors référentiel de mailles pour affichage dans la liste, garantissant ainsi un nombre d’observations indentique entre le mode point et le mode maille (#2495, par &#64;TheoLechemia)</p></li>
<li><p>Synthèse : correction des filtres médias / épinglage / signalement / commentaires pour fonctionner également de manière négative (#2469)</p></li>
<li><p>Backoffice des permissions :</p>
<ul>
<li><p>Correction du module lors du contrôle d’accès (#2483, par &#64;VincentCauchois)</p></li>
<li><p>Correction de la gestion du CRUVED des rôles sans permissions (#2496)</p></li>
</ul>
</li>
<li><p>Commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> :</p>
<ul>
<li><p>Correction de la détection du module_code (#2482)</p></li>
<li><p>Reload de la config après l’exécution de <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> (#2493)</p></li>
</ul>
</li>
<li><p>Occhab : tri des stations par date (#2477)</p></li>
<li><p>Validation : correction des filtres avancés (#2470, par &#64;joelclems)</p></li>
<li><p>Admin : contrôle du R pour l’accès en lecture (#2491)</p></li>
<li><p>Admin : rajout de l’objet NOTIFICATIONS afin de pouvoir en définir ses permissions (#2490)</p></li>
<li><p>Login : désactivation du spinner après une tentative de login échouée</p></li>
</ul>
</section>
<section id="id13">
<h2>2.12.1 (2023-04-11)<a class="headerlink" href="#id13" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Mise à jour de quelques dépendances python (#2438, par &#64;MathRdt)</p></li>
<li><p>Mise à jour de Utils-Flask-SQLAlchemy en version 0.3.3</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction et ations des performances des recherches par statut de protection, notamment quand elles sont associées à une recherche géographique (#2450, par &#64;amandine-sahl)</p></li>
<li><p>Correction d’une régression des performances lors de la récupération des JDD (#2462, par &#64;mvergez)</p></li>
<li><p>Correction de jointures manquantes pour le calcul des permissions lors de la récupération des JDD (#2463, par &#64;mvergez)</p></li>
<li><p>Correction des champs additionnels de type liste (#2447, par &#64;TheoLechemia)</p></li>
<li><p>Correction d’une incompatibilité Python 3.7 (#2464, par &#64;TheoLechemia)</p></li>
<li><p>Suppression en cascade des permissions et associations aux sites lors de la suppresion d’un module (#2466, par &#64;jbrieuclp &amp; &#64;VincentCauchois)</p></li>
<li><p>Mise à jour des habitats dans la Synthèse quand ils sont modifiés dans un relevé Occtax (#2468, par &#64;JulienCorny)</p></li>
</ul>
</section>
<section id="cyathea-borbonica-2023-03-27">
<h2>2.12.0 - Cyathea borbonica 🌴 (2023-03-27)<a class="headerlink" href="#cyathea-borbonica-2023-03-27" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>⏩ En bref</strong></p>
<ul class="simple">
<li><p>Affichage agrégé des observations dans la Synthèse (performances et lisibilité) (#1847 et #1878)</p></li>
<li><p>Filtres par défaut dans la Synthèse (#2261)</p></li>
<li><p>Optimisation des performances des exports de la Synthèse (#1434)</p></li>
<li><p>Optimisation du chargement des jeux de données dans le module Métadonnées pour en er les performances (#2004)</p></li>
<li><p>Intégration par défaut de Taxref v16, BDC statuts v16 et référentiel de sensibilité v16</p></li>
<li><p>Possibilité de gérer les tables des applications mobiles et des modules depuis le module « Admin »</p></li>
<li><p>Configuration dynamique sans rebuild (#2205)</p></li>
<li><p>Centralisation de la configuration des modules dans GeoNature (#2423)</p></li>
<li><p>Historisation des suppressions dans la Synthèse, nécessaire pour GN2PG notamment (#789)</p></li>
<li><p>Réorganisation des dossiers pour simplifier la customisation et les mises à jour (#2306)</p></li>
<li><p>Stabilisation de la dockerisation (#2206)</p></li>
<li><p>Refactorisation d’Occhab, module de référence et documentation développeurs associée</p></li>
<li><p>Refactorisation des permissions (simplification, optimisation, centralisation, performances, tests)</p></li>
<li><p>Mise à jour d’Angular en version 15 (#2154)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Si vous utilisez des modules spécifiques (hors Import, Export, Dashboard, Monitoring), vérifiez qu’ils disposent d’une version compatible avec GeoNature 2.12 (compatibilité Angular 15, révision des permissions, configuration dynamique)</p></li>
<li><p>Si vous les utilisez, mettre à jour les modules Import en version 2.1.0 (ou plus), Export en version 1.4.0, Dashboard en version 1.3.0 (ou plus) et Monitoring en version 0.5.0 (ou plus) avec la nouvelle procédure consistant uniquement à télécharger, dézipper et renommer les dossiers des modules et de leur configuration</p></li>
<li><p>Mettez à jour TaxHub en version 1.11 (ou plus)</p></li>
<li><p>La vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code> définissant la structure et le contenu des exports de la Synthèse a été modifiée pour être optimisée. Si vous l’aviez customisée, reportée vos modifications manuellement après la mise à jour de GeoNature</p></li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> se charge de déplacer automatiquement les différents fichiers suite à la réorganisation des dossiers (customisation, médias, mobile, configuration centralisée des modules)</p></li>
<li><p>Les médias (incluant les fichiers d’Occtax-mobile) sont déplacés dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/media/</span></code></p></li>
<li><p>Il n’est plus nécessaire de rebuilder le frontend ni de recharger GeoNature manuellement à chaque modification de la configuration de GeoNature ou de ses modules</p></li>
<li><p>Les taches automatisées sont désormais gérées par Celery Beat et installées avec GeoNature. Si vous aviez mis en place des crons pour mettre à jour les profils de taxons (ou les données du module Dashboard, ou les exports planifiés du module Export), supprimez les (dans <code class="docutils literal notranslate"><span class="pre">/etc/cron.d/geonature</span></code> ou <code class="docutils literal notranslate"><span class="pre">crontab</span> <span class="pre">-e</span></code>) car ils ne sont plus utiles</p></li>
<li><p>Il est fortement conseillé d’utiliser la configuration Apache générée par défaut dans <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> et de l’inclure dans votre vhost (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature.conf</span></code> et/ou <code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/geonature-le-ssl.conf</span></code>), en suivant la <a class="reference external" href="https://docs.geonature.fr/installation.html#configuration-apache">documentation dédiée</a></p></li>
<li><p>Si vous aviez customisé la page d’accueil de GeoNature en modifiant les composants <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/footer/footer.component.html</span></code> ceux-ci ont été supprimés au profit de paramètres de configuration. Il vous faut donc déplacer votre customisation dans les paramètres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code> de la nouvelle section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> de la configuration de GeoNature.
Vous pouvez renseigner du code HTML sur plusieurs lignes en le plaçant entre triple quote (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;&quot;&quot;</span></code>).</p></li>
<li><p>Les paramètres de configuration suivants ont été supprimés et doivent être retirés de votre fichier de configuration (<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>) s’ils sont présents :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> (si vous aviez renommé votre logo, déplacez le dans <code class="docutils literal notranslate"><span class="pre">geonature/custom/images/logo_structure.png</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPLOAD_FOLDER</span></code> (si vous l’aviez déplacé, renommez votre dossier d’upload en <code class="docutils literal notranslate"><span class="pre">attachments</span></code> et placez-le dans le dossier des médias (<code class="docutils literal notranslate"><span class="pre">geonature/backend/media/</span></code> par défaut, paramétrable via <code class="docutils literal notranslate"><span class="pre">MEDIA_FOLDER</span></code>))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BASE_DIR</span></code></p></li>
</ul>
</li>
<li><p>Occtax et champs additionnels :</p>
<ul>
<li><p>Les champs additionnels de type <code class="docutils literal notranslate"><span class="pre">bool_radio</span></code> ne sont plus supportés.
Si vous utilisiez ce type de widget dans vos champs additionnels d’Occtax, ils seront automatiquement remplacés par un widget de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>.
Vous devez changer le champs <code class="docutils literal notranslate"><span class="pre">field_values</span></code> sur le modèle suivant : <code class="docutils literal notranslate"><span class="pre">[{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">vrai&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">true</span> <span class="pre">},</span> <span class="pre">{&quot;label&quot;:</span> <span class="pre">&quot;Mon</span> <span class="pre">label</span> <span class="pre">faux&quot;,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">false</span> <span class="pre">}]</span></code>.</p></li>
<li><p>Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent désormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)<br />
La rétrocompatibilité avec des listes simples est maintenue, mais vous êtes invités à modifier ces champs dans le backoffice.<br />
Pour conserver le bon affichage lors de l’édition des données, renseignez l’ancienne valeur deux fois dans la clé <code class="docutils literal notranslate"><span class="pre">value</span></code> et la clé <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></li>
</ul>
</li>
</ul>
<p>✅ Exemple de procédure de mise à jour depuis une version 2.11 : https://geonature.fr/documents/procedures/2023-04-GN-211to212.txt</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul>
<li><p>Configuration dynamique du frontend : le frontend récupère dynamiquement sa configuration depuis le backend. Pour cela, il nécessite uniquement l’adresse de l’<code class="docutils literal notranslate"><span class="pre">API_ENDPOINT</span></code> qui doit être renseignée dans le fichier <code class="docutils literal notranslate"><span class="pre">frontend/src/assets/config.json</span></code>. En conséquence, il n’est plus nécessaire de rebuilder le frontend lors d’une modification de la configuration de GeoNature ou de ses modules (#2205)</p></li>
<li><p>Personnalisation de la page d’accueil : ajout d’une section <code class="docutils literal notranslate"><span class="pre">[HOME]</span></code> contenant les paramètres <code class="docutils literal notranslate"><span class="pre">TITLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTRODUCTION</span></code> et <code class="docutils literal notranslate"><span class="pre">FOOTER</span></code>. Ceux-ci peuvent contenir du code HTML qui est chargé dynamiquement avec la configuration, évitant ainsi la nécessité d’un rebuild du frontend (#2300)</p></li>
<li><p>Synthèse : Agrégation des observations ayant la même géométrie pour ne les charger qu’une seule fois, et ainsi améliorer les performances et la lisibilité (#1847)</p></li>
<li><p>Synthèse : Possibilité d’afficher les données agrégées par maille (#1878). La fonctionnalité est configurable avec les paramètres suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[SYNTHESE]</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_ENABLED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;M10&quot;</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_BY_DEFAULT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">    </span><span class="c1"># affichage groupé par défaut</span>
<span class="w">    </span><span class="n">AREA_AGGREGATION_LEGEND_CLASSES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">.   # voir fichier de configuration d’exemple</span>
</pre></div>
</div>
</li>
<li><p>Synthèse : Possibilité de définir des filtres par défaut avec le paramètre <code class="docutils literal notranslate"><span class="pre">SYNTHESE.DEFAULT_FILTERS</span></code> (#2261)</p></li>
<li><p>Métadonnées : Chargement des jeux de données seulement quand on clique sur un cadre d’acquisition dans la liste des métadonnées, pour améliorer les performances du module, en ne chargeant pas tous les jeux de données par défaut (#2004)</p></li>
<li><p>Champs additionnels : Les champs de formulaire de type <code class="docutils literal notranslate"><span class="pre">radio</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> et <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, attendent désormais une liste de dictionnaire <code class="docutils literal notranslate"><span class="pre">{value,</span> <span class="pre">label}</span></code> (voir doc des champs additionnels) (#2214)</p></li>
<li><p>Admin : Possibilité de gérer la table des applications mobiles (<code class="docutils literal notranslate"><span class="pre">t_mobile_apps</span></code>) dans le module « Admin » de GeoNature, notamment pour faciliter la gestion des mises à jour de Occtax-mobile (#2352)</p></li>
<li><p>Possibilité de configurer les modules (picto, doc, label) directement depuis le module Admin (#2409)</p></li>
<li><p>Possibilité d’afficher un bouton de géolocalisation sur les cartes des formulaires Occtax et Occhab (#2338), activable avec le paramètre suivant :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[MAPCONFIG]</span>
<span class="w">    </span><span class="n">GEOLOCATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</li>
<li><p>Profils mis à jour automatiquement par Celery Beat, toutes les nuits par défaut (#2412)</p></li>
<li><p>Ajout de l’intégration de Redis à l’outil de logs Sentry, pour améliorer la précisions des traces</p></li>
<li><p>Possibilité de définir des règles de notifications par défaut, s’appliquant aux utilisateurs n’ayant pas de règle spécifique. Pour cela, il suffit d’insérer une règle dans la table <code class="docutils literal notranslate"><span class="pre">gn_notifications.t_notifications_rules</span></code> avec <code class="docutils literal notranslate"><span class="pre">id_role=NULL</span></code> (#2267)</p></li>
<li><p>Publication automatique de deux images Docker <code class="docutils literal notranslate"><span class="pre">geonature-backend</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature-frontend</span></code> (#2206). Leur utilisation n’a pas encore été éprouvée et leur utilisation en production n’est de ce fait pas recommandée.</p></li>
<li><p>Amélioration de la fiabilité du processus de migration</p></li>
<li><p>Ajout d’un index sur la colonne <code class="docutils literal notranslate"><span class="pre">gn_synthese.cor_area_synthese.id_area</span></code>. La colonne <code class="docutils literal notranslate"><span class="pre">id_synthese</span></code> est déjà couverte par l’index multiple <code class="docutils literal notranslate"><span class="pre">(id_synthese,</span> <span class="pre">id_area)</span></code>.</p></li>
<li><p>Intégration de TaxRef v16 et du référentiel de sensibilité associé pour les nouvelles installations de GeoNature</p></li>
<li><p>Évolution de la gestion des fichiers statiques et des médias (#2306) :</p>
<ul>
<li><p>Séparation des fichiers statiques (applicatif, fournis par GeoNature) et des fichiers médias (générés par l’applications). Sont déplacés du dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code> vers le dossier <code class="docutils literal notranslate"><span class="pre">backend/media</span></code> les sous-dossiers suivants : <code class="docutils literal notranslate"><span class="pre">medias</span></code>, <code class="docutils literal notranslate"><span class="pre">exports</span></code>, <code class="docutils literal notranslate"><span class="pre">geopackages</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile</span></code>, <code class="docutils literal notranslate"><span class="pre">pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">shapefiles</span></code>. De plus, l’ancien dossier <code class="docutils literal notranslate"><span class="pre">medias</span></code> est renommé <code class="docutils literal notranslate"><span class="pre">attachments</span></code>.</p></li>
<li><p>Ajout des paramètres de configuration suivants :</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">ROOT_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dossier absolu du backend&quot;</span>
<span class="n">STATIC_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;static&quot;</span><span class="w">    </span><span class="c1"># dossier absolu ou relatif à ROOT_PATH</span>
<span class="n">STATIC_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/static&quot;</span><span class="w">      </span><span class="c1"># URL d’accès aux fichiers statiques</span>
<span class="n">MEDIA_FOLDER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;media&quot;</span><span class="w">      </span><span class="c1"># dossier absolu ou relatif à ROOT_PATH</span>
<span class="n">MEDIA_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/media&quot;</span><span class="w">        </span><span class="c1"># URL d’accès aux médias</span>
</pre></div>
</div>
</li>
<li><p>Ajout d’un dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> à la racine de GeoNature et du paramètre associé <code class="docutils literal notranslate"><span class="pre">CUSTOM_STATIC_FOLDER</span></code>. Les fichiers statiques réclamés sont cherchés en priorité dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code>, puis, si non trouvés, dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>. Ainsi, si besoin de modifier un fichier statique, on placera un fichier du même nom dans le dossier <code class="docutils literal notranslate"><span class="pre">custom</span></code> plutôt que de modifier le fichier original (par exemple, <code class="docutils literal notranslate"><span class="pre">custom/images/logo_structure.png</span></code>). Voir la <a class="reference external" href="https://docs.geonature.fr/admin-manual.html#customisation">documentation sur la customisation</a>.</p></li>
<li><p>Retrait du préfixe <code class="docutils literal notranslate"><span class="pre">static/media/</span></code> aux chemins d’accès des fichiers joints (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias.media_path</span></code>)</p></li>
<li><p>Retrait du préfixe <code class="docutils literal notranslate"><span class="pre">static/mobile/</span></code> aux chemins d’accès des APK des applications mobiles (colonne <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps.relative_path_apk</span></code>)</p></li>
<li><p>Certains fichiers statiques sont renommés :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">static/css/custom.css</span></code> → <code class="docutils literal notranslate"><span class="pre">static/css/metadata_pdf_custom.css</span></code></p></li>
</ul>
</li>
<li><p>Certains assets du frontend sont déplacés vers les fichiers statiques du backend pour profiter du mécanisme de customisation :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> → <code class="docutils literal notranslate"><span class="pre">backend/static/css/frontend.css</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/favicon.ico</span></code> → <code class="docutils literal notranslate"><span class="pre">backend/static/images/favicon.ico</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/login_background.jpg</span></code> → <code class="docutils literal notranslate"><span class="pre">backend/static/images/login_background.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_sidebar.jpg</span></code> → <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_sidebar.jpg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/logo_structure.png</span></code> → <code class="docutils literal notranslate"><span class="pre">backend/static/images/logo_structure.png</span></code></p></li>
</ul>
</li>
<li><p>Le lien symbolique <code class="docutils literal notranslate"><span class="pre">static/images/logo_structure.jpg</span></code> est supprimé au profit de l’utilisation de <code class="docutils literal notranslate"><span class="pre">logo_sidebar.jpg</span></code></p></li>
<li><p>Les déplacements mentionnés ci-dessus sont effectués par le script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code></p></li>
</ul>
</li>
<li><p>Mise à jour des dépendances :</p>
<ul class="simple">
<li><p>TaxHub 1.11.1</p></li>
<li><p>UsersHub 2.3.3</p></li>
<li><p>UsersHub-authentification-module 1.6.5</p></li>
<li><p>Habref-api-module 0.3.2</p></li>
<li><p>Nomenclature-api-module 1.5.4</p></li>
<li><p>RefGeo 1.3.0</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.2</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.7</p></li>
</ul>
</li>
<li><p>Refonte des permissions et suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_roles_permissions</span></code> qui posait des problèmes de performances du nombre d’utilisateurs (#2196 et #2360)</p></li>
<li><p>La recherche du fichier de configuration des modules sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (code du module en minuscule) dans le répertoire de configuration de GeoNature devient prioritaire devant l’utilisation du fichier <code class="docutils literal notranslate"><span class="pre">conf_gn_module.toml</span></code> dans le répertoire de configuration du module.
Le script de mise à jour déplace les fichiers de configuration des modules vers le dossier centralisé de configuration de GeoNature (#2423)</p></li>
<li><p>Rechargement automatique de GeoNature quand on modifie un fichier de configuration d’un module dans l » dossier centralisé (#2418)</p></li>
<li><p>Évolution de la configuration Apache <code class="docutils literal notranslate"><span class="pre">/etc/apache2/conf-available/geonature.conf</span></code> pour activer la compression gzip des réponses de l’API (#2266) et pour servir les médias et les fichiers statiques par Apache (#2430).
À reporter dans votre configuration Apache si celle-ci n’importe pas cette configuration fournie par défaut.</p></li>
<li><p>Le script de mise à jour (<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) peut prendre en argument le chemin vers l’ancienne installation GeoNature.
Il peut s’agir du même dossier que la nouvelle installation GeoNature (cas d’une mise à jour d’un dossier GeoNature avec Git).</p></li>
<li><p>Ajout d’une historisation des suppressions de la synthèse à travers un trigger peuplant la nouvelle table <code class="docutils literal notranslate"><span class="pre">gn_synthese.t_log_synthese</span></code> (#789)
Une API <code class="docutils literal notranslate"><span class="pre">/synthese/log</span></code> permet d’obtenir l’historique des insertions, mises à jour et suppressions dans la synthèse (notamment utile pour GN2PG).</p></li>
<li><p>Amélioration de la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> qui détecte désormais automatiquement le code du module (#2396)</p></li>
<li><p>Synthèse : Optimisation de la requête par statuts de protection (#2329)</p></li>
<li><p>Occtax : Optimisation des triggers de calcul automatique des altitudes pour ne les lancer que quand la géométrie du relevé est modifiée (#2137)</p></li>
<li><p>Occtax et Occhab : Ajout d’une pastille indiquant le nombre de filtres activés</p></li>
<li><p>Amélioration du message renvoyé à l’utilisateur en cas de Timout (#2417)</p></li>
<li><p>Amélioration du composant générique de selection d’un jeu de données, en selectionnant automatiquement le JDD si la liste n’en contient qu’un et que le champs est obligatoire (#1049)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Synthèse : changement du type de <code class="docutils literal notranslate"><span class="pre">entity_source_pk_value</span></code> de <code class="docutils literal notranslate"><span class="pre">Integer</span></code> à <code class="docutils literal notranslate"><span class="pre">Unicode</span></code> dans le modèle pour correspondre à la base de données</p></li>
<li><p>Correction de l’accès public automatique activable avec <code class="docutils literal notranslate"><span class="pre">?access=public</span></code> dans l’URL (#1650)</p></li>
<li><p>Correction de la fonctionnalité de récupération du mot de passe</p></li>
<li><p>Correction de la commande d’import du référentiel sensibilité pour correctement gérer les critères comportementales</p></li>
<li><p>Occtax : correction du filtre sur les organismes</p></li>
<li><p>Synthèse : correction d’un problème de performance de l’export (vue <code class="docutils literal notranslate"><span class="pre">v_synthese_for_export</span></code>) (#1434)</p></li>
<li><p>Correction d’un problème de détection de l’emplacement des modules avec les versions récentes de <code class="docutils literal notranslate"><span class="pre">pip</span></code> (#2365, #2364)</p></li>
<li><p>Occhab : correction du CRUVED sur la liste des jeux de données ouvert à la saisie</p></li>
<li><p>Occtax : correction du contrôle des dates du formulaire d’édition des relevés (#2318)</p></li>
<li><p>Correction des acteurs dans les exports PDF des métadonnées (#2034)</p></li>
<li><p>Correction des graphiques dans les exports PDF des cadres d’acquisition (#2231)</p></li>
<li><p>Correction du script de synchronisation des métadonnées depuis MTD INPN (#2314)</p></li>
<li><p>Correction de l’appel en double de la route des notifications (#2356)</p></li>
<li><p>Correction de l’URL vers la documentation depuis la page d’accueil</p></li>
<li><p>Correction du formulaire Occtax quand un relevé n’a pas d”<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> (#2421)</p></li>
<li><p>Correction de l’affichage des tooltips sur la liste des obsrvations de la Synthèse (#2348)</p></li>
<li><p>Correction du chargement des dates début et date fin quand on modifie un relevé dans Occtax ou une station dans OCchab (#2071)</p></li>
<li><p>Correction de la récupération des emails dans l’interface « Mon compte » (#2346)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Suppression du support du paramètre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du décorateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2162)</p></li>
<li><p>Suppression des paramètres <code class="docutils literal notranslate"><span class="pre">redirect_on_expiration</span></code> et <code class="docutils literal notranslate"><span class="pre">redirect_on_invalid_token</span></code> du décorateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> (#2360)</p></li>
<li><p>Remplacement des usages du paramètre <code class="docutils literal notranslate"><span class="pre">get_role</span></code> du décorateur <code class="docutils literal notranslate"><span class="pre">check_cruved_scope</span></code> par <code class="docutils literal notranslate"><span class="pre">get_scope</span></code> dans le code de GeoNature et des modules <em>contrib</em> (#2164, #2199)</p></li>
<li><p>Suppression de multiples fonctions du package <code class="docutils literal notranslate"><span class="pre">geonature.core.gn_permissions.tools</span></code>, notamment la classe <code class="docutils literal notranslate"><span class="pre">UserCruved</span></code> ; se reporter à la documentation développeur afin de connaître les fonctions utilisables dans votre code (#2360)</p></li>
<li><p>Migration GeoNature : le venv est mis à jour plutôt que d’être supprimé et recréé (#2332)</p></li>
<li><p>Les erreurs de validation Marshmallow sont automatiquement converties en erreur 400 (BadRequest)</p></li>
<li><p>Les modules <em>contrib</em> doivent également être formatés avec <code class="docutils literal notranslate"><span class="pre">prettier</span></code></p></li>
<li><p>Fiabilisation des exports PDF (#2232)</p></li>
<li><p>Le composant de carte <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code> a un nouvel input <code class="docutils literal notranslate"><span class="pre">geolocation</span></code> permettant d’activer le bouton de géolocalisation</p></li>
<li><p>Ajout du mixin <code class="docutils literal notranslate"><span class="pre">geonature.utils.schema.CruvedSchemaMixin</span></code> permettant d’ajouter la propriété (exclue par défaut) <code class="docutils literal notranslate"><span class="pre">cruved</span></code> à un schéma Marshmallow</p></li>
<li><p>L’accès aux paramètre de configuration ne se fait plus à partir des fichiers générés <code class="docutils literal notranslate"><span class="pre">AppConfig</span></code> (GeoNature) ou <code class="docutils literal notranslate"><span class="pre">ModuleConfig</span></code> (modules), mais uniquement à partir du <code class="docutils literal notranslate"><span class="pre">ConfigService</span></code> en charge de la récupération dynamique de la configuration (#2205).</p></li>
<li><p>Mise à jour d’Angular version 12 à 15 et mise à jour de nombreuses dépendances frontend (#2154)</p></li>
<li><p>Nettoyage des dépendances frontend de GeoNature. Si vous utilisiez certaines dépendances supprimées de GeoNature dans vos modules, vous devez les rajouter dans un fichier <code class="docutils literal notranslate"><span class="pre">package-lock.json</span></code> dans le dossier frontend de votre module.</p></li>
<li><p>Suppression de la route obsolète <code class="docutils literal notranslate"><span class="pre">/config</span></code></p></li>
<li><p>Ajout du context manager <code class="docutils literal notranslate"><span class="pre">start_sentry_child</span></code> permettant de rapporter dans les traces Sentry le temps d’exécution de certaines tâches coûteuses (#2289)</p></li>
<li><p>Refactorisation du module Occhab (#2324) avec passage à Marshmallow.
Ajout à cette occasion de plusieurs fonctions et classes utilitaires au dépôt <em>Utils-Flask-SQLAlchemy-Geo</em>.
Suppression de la vue <code class="docutils literal notranslate"><span class="pre">v_releve_occtax</span></code>.
Module de référence pour les développements et documentation associée (#2331)</p></li>
<li><p>Déplacement des routes géographiques et des tests associés vers le dépôt <em>RefGeo</em> (#2342)</p></li>
<li><p>Amélioration des tests des permissions</p></li>
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">get_scopes_by_module</span></code> cherche dans le contexte applicatif (variable <code class="docutils literal notranslate"><span class="pre">g</span></code>) la présence de <code class="docutils literal notranslate"><span class="pre">g.current_module</span></code> et <code class="docutils literal notranslate"><span class="pre">g.current_object</span></code> lorsqu’ils ne sont pas fournis en paramètre.</p></li>
<li><p>Travaux en cours : compatibilité SQLAlchemy 1.3 &amp; 1.4 / Flask-SQLAlchemy 2 &amp; 3 (#1812)</p></li>
<li><p>Mise à jour de Chart.js de la version 2 à 4</p></li>
<li><p>Possibilité de définir l’URL par défaut de la documentation d’un module par un entrypoint nommé <code class="docutils literal notranslate"><span class="pre">doc_url</span></code></p></li>
</ul>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;ch-cbna / &#64;bouttier / &#64;TheoLechemia / &#64;jpm-cbna / &#64;bastyen / &#64;Gaetanbrl / &#64;VincentCauchois / &#64;joelclems / &#64;amandine-sahl / &#64;andriacap / &#64;mvergez / &#64;DonovanMaillard / &#64;dece / &#64;lpofredc / &#64;MathRdt / &#64;gildeluermoz / &#64;maximetoma / &#64;pierre56 / &#64;cecchi-a / &#64;jbrieuclp / &#64;camillemonchicourt</p>
</section>
<section id="id14">
<h2>2.11.2 (2023-01-19)<a class="headerlink" href="#id14" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’un import manquant dans un fichier de migration des données d’exemple d’Occtax (#2285)</p></li>
<li><p>Correction d’un problème de l’installation globale en mode développement</p></li>
</ul>
</section>
<section id="id15">
<h2>2.11.1 (2023-01-18)<a class="headerlink" href="#id15" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la documentation de la sensibilité (#2234)</p></li>
<li><p>Correction de l’accès aux notifications lorsque la gestion des comptes utilisateurs est activée</p></li>
<li><p>Correction des migrations Alembic des données d’exemple Occtax afin de supporter les migrations depuis GeoNature ≤ 2.9 (#2240, #2248)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> afin de supporter les anciens modules dont le passage à Alembic nécessite un stamp manuel</p></li>
</ul>
</section>
<section id="ilex-aquifolium-2022-12-21">
<h2>2.11.0 - Ilex aquifolium 🎄 (2022-12-21)<a class="headerlink" href="#ilex-aquifolium-2022-12-21" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>⏩ En bref</strong></p>
<ul class="simple">
<li><p>Utilisation de la BDC statuts dans la Synthèse pour les filtres et infos sur les statuts des espèces</p></li>
<li><p>Mise à jour des règles de sensibilité du SINP</p></li>
<li><p>Notifications (changement de statut de validation de mes observations)</p></li>
<li><p>Filtre des métadonnées par zonage géographique</p></li>
<li><p>Affichage de zonages sur les cartes (depuis le ref_geo, un WMS, un WFS ou un GeoJSON)</p></li>
<li><p>Suppression du support des modules non packagés</p></li>
<li><p>Simplification et amélioration des commandes d’installation et de mise à jour des modules</p></li>
<li><p>Amélioration du script <code class="docutils literal notranslate"><span class="pre">migration.sh</span></code> de mise à jour de GeoNature</p></li>
<li><p>Nettoyage du frontend et amélioration de la séparation backend/frontend</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul>
<li><p>Mettre à jour TaxHub en version 1.10.7</p></li>
<li><p>Si vous utilisez des modules spécifiques (hors Import, Export, Dashboard, Monitoring), vérifiez qu’ils disposent d’une version packagée compatible avec GeoNature 2.11 (#2058)</p></li>
<li><p>Si vous aviez mis en place l’accès public à GeoNature, adaptez sa configuration avec le nouveau paramètre unique <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature (<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Attention, le script de migration de la version 2.11 a une régression et ne récupère plus automatiquement la configuration des modules fournis avec GeoNature (Occtax, Occhab, Validation). Rapatriez manuellement vos éventuels fichiers de configuration de ces modules si vous en avez créé :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>geonature_old/contrib/occtax/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/occtax/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_validation/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_validation/config/conf_gn_module.toml
cp<span class="w"> </span>geonature_old/contrib/gn_module_occhab/config/conf_gn_module.toml<span class="w"> </span>geonature/contrib/gn_module_occhab/config/conf_gn_module.toml
</pre></div>
</div>
</li>
<li><p>Si vous les utilisez, mettre à jour les modules Dashboard en version 1.2.1 (ou plus) et Monitoring en version 0.4.0 (ou plus), <strong>après</strong> la mise à jour de GeoNature</p></li>
<li><p>Vous pouvez désactiver les textes de la BDC statuts ne correspondant par à votre territoire.
Voir rubrique « 5. Configurer les filtres des statuts de protection et des listes rouges » de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>Vous pouvez mettre à jour vos règles de sensibilité si vous utilisez TaxRef versions 14 ou 15 :</p>
<ul>
<li><p>Désinstallez les règles fournies par Alembic :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>~/geonature/backend/venv/bin/activate
geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_sensitivity_inpn@base
</pre></div>
</div>
</li>
<li><p>Vous n’avez probablement plus besoin des anciennes régions que vous pouvez alors supprimer de votre référentiel géographique :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>downgrade<span class="w"> </span>ref_geo_fr_regions_1970@base
</pre></div>
</div>
</li>
<li><p>Assurez-vous que votre référientiel géographique contienne les départements :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>upgrade<span class="w"> </span>ref_geo_fr_departments@head
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v15, insérez les nouvelles règles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;Référentiel sensibilité TAXREF v15 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401875<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV15_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V15_31032022/RefSensibilite_15.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>Si vous avez TaxRef v14, insérez les nouvelles règles ainsi :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>add-referential<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-name<span class="w"> </span><span class="s2">&quot;Référentiel sensibilité TAXREF v14 20220331&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--url<span class="w"> </span>https://inpn.mnhn.fr/docs-web/docs/download/401876<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--zipfile<span class="w"> </span>RefSensibiliteV14_20220331.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--csvfile<span class="w"> </span>RefSensibilite_V14_31032022/RefSensibilite_14.csv<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>--encoding<span class="o">=</span>iso-8859-15
</pre></div>
</div>
</li>
<li><p>Rafraîchissez la vue matérialisée pré-calculant les taxons enfants :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>refresh-rules-cache
</pre></div>
</div>
</li>
<li><p>Relancez le calcul de la sensibilité des observations de la synthèse :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>sensitivity<span class="w"> </span>update-synthese
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
<p>✅ Exemple de procédure de mise à jour depuis une version 2.9 : https://geonature.fr/documents/procedures/2023-01-GN-29to211.txt</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>[Synthèse] Ajout de filtres sur les statuts de protection et les listes rouges dans le fenêtre de recherche avancée basés sur la <a class="reference external" href="https://inpn.mnhn.fr/programme/base-de-connaissance-statuts/presentation">BDC Statuts</a>.
Ajout des paramètres de configuration <code class="docutils literal notranslate"><span class="pre">STATUS_FILTERS</span></code> et <code class="docutils literal notranslate"><span class="pre">RED_LISTS_FILTERS</span></code> dans la section <code class="docutils literal notranslate"><span class="pre">SYNTHESE</span></code>. Il est possible de modifier les listes et statuts affichés comme indiqué dans la documentation de la configuration du module SYNTHESE. (#1492)</p></li>
<li><p>[Synthèse] Affichage dans la fiche d’une observation, onglet <em>Taxonomie</em>, des informations issues de la <em>BDC Statuts</em> (statuts de protection, listes rouges) en rapport avec le taxon et l’emplacement géographique de l’observation sélectionnée (#1492)</p></li>
<li><p>[Synthèse] L’export des statuts de protection est maintenant basé sur les données de la <em>BDC Statuts</em> (#1492)</p></li>
<li><p>Documentation dans la rubrique « 5. Configurer les filtres des statuts de protection et des listes rouges » de https://docs.geonature.fr/admin-manual.html#module-synthese</p></li>
<li><p>Possibilité d’afficher des zonages sur les cartes (#974).
Ces derniers peuvent provenir :</p>
<ul>
<li><p>d’un flux WMS ou WFS</p></li>
<li><p>d’un fichier ou flux GeoJSON</p></li>
<li><p>du référentiel géographique interne
Les couches sont configurables via le paramètre <code class="docutils literal notranslate"><span class="pre">REF_LAYERS</span></code> de la section <code class="docutils literal notranslate"><span class="pre">MAPCONFIG</span></code>.
Par défaut un WMS des limites administrativs de l’IGN et un WMS des ZNIEFF 1 continentales en métropole sont affichés.</p></li>
</ul>
</li>
<li><p>Ajout d’un mécanisme de notifications (#1873).
L’utilisateur peut choisir de souscrire, pour chaque type de notificaton, s’il veut être notifié dans GeoNature et/ou par e-mail.
Les templates de notifications peuvent être modifiés par l’administrateur dans le module Admin.
Actuellement seule la notification du changement du statut de validation des observations est implémentée.
Les fonctionnalités de notifications sont activées par défaut, mais peuvent être désactivées globalement en passant le paramètre de GeoNature <code class="docutils literal notranslate"><span class="pre">NOTIFICATIONS_ENABLED</span></code> à <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>Recherche des métadonnées par emprise géographique des observations (#1768)
Le paramètre <code class="docutils literal notranslate"><span class="pre">METADATA_AREA_FILTERS</span></code> permet de spécifier les types de zonages géographiques disponibles à la recherche (communes, départements et régions activés par défaut).</p></li>
<li><p>Mise à jour des règles de sensibilité des observations (incluant les règles nationales et régionales mises à plat au niveau des départements) pour TaxRef version 14 et 15 (#1891)</p></li>
<li><p>Intégration et mise à jour de la documentation sur les régles et le calcul de la sensibilité</p></li>
<li><p>Ajout de sous-commandes pour la gestion du référentiel de sensibilité :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">info</span></code> : information sur les règles présentes dans la base de données</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">remove-referential</span></code> : supprimer les règles d’une source donnée</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">add-referential</span></code> : ajouter de nouvelles règles
Les nouvelles installations de GeoNature reposent sur l’utilisation de ces commandes pour fournir les règles SINP de sensibilité du 31/03/2022.
Ces dernières sont fournies à l’échelle du département et non plus des anciennes régions.
La branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_sensitivity_inpn</span></code> ne doit plus être utilisée et sera supprimée dans une prochaine version de GeoNature.</p></li>
</ul>
</li>
<li><p>Deux Dockerfiles permettant de générer une image frontend et une image backend ont été intégrés.
La dockerisation de GeoNature reste toutefois un travail en cours, et l’utilisation de ces images n’est pas encore officiellement supportée (#2206)</p></li>
<li><p>Les colonnes <code class="docutils literal notranslate"><span class="pre">id_source</span></code> de la synthèse et <code class="docutils literal notranslate"><span class="pre">id_module</span></code> des relevés Occtax sont désormais <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> (#2186)</p></li>
<li><p>Suppression de la section <code class="docutils literal notranslate"><span class="pre">[PUBLIC_ACCESS]</span></code> dans les paramètres de configuration, remplacée par un unique paramètre <code class="docutils literal notranslate"><span class="pre">PUBLIC_ACCESS_USERNAME</span></code> (#2202)</p></li>
<li><p>Blocage de la possibilité de modifier son compte pour l’utilisateur public (#2218)</p></li>
<li><p>Possibilité d’accéder directement à une page de GeoNature avec l’utilisateur public, sans passer par la page d’authentification (#1650)</p></li>
<li><p>Support de la configuration par variable d’environnement préfixée par <code class="docutils literal notranslate"><span class="pre">GEONATURE_</span></code> (<em>e.g</em> <code class="docutils literal notranslate"><span class="pre">GEONATURE_SQLALCHEMY_DATABASE_URI</span></code>). Les paramètres définis ainsi peuvent être exclus de la configuration TOML, y compris les paramètres obligatoires</p></li>
<li><p>Activation de <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/periodic-tasks.html">Celery Beat</a> permettant de lancer des tâches périodiquement</p></li>
<li><p>Mise à jour des dépendances :</p>
<ul>
<li><p>TaxHub 1.10.7</p></li>
<li><p>UsersHub</p></li>
<li><p>UsersHub-authentification-module 1.6.2</p></li>
<li><p>Utils-Flask-SQLAlchemy 0.3.1</p></li>
<li><p>Utils-Flask-SQLAlchemy-Geo 0.2.6</p></li>
</ul>
</li>
<li><p>Modules GeoNature et séparation backend/frontend (#2088) :</p>
<ul>
<li><p>Suppression du support des modules non packagés (#2058).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">install-packaged-gn-module</span></code> devient <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>.</p></li>
<li><p>Suppression des paramètres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules, (#2165).</p></li>
<li><p>Recherche de la configuration des modules également dans le dossier <code class="docutils literal notranslate"><span class="pre">config</span></code> de GeoNature, sous le nom <code class="docutils literal notranslate"><span class="pre">{module_code}_config.toml</span></code> (le code du module étant en minuscule).</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-module-configuration</span></code> est renommée <code class="docutils literal notranslate"><span class="pre">generate-frontend-module-config</span></code> par homogénéité avec la commande <code class="docutils literal notranslate"><span class="pre">generate-frontend-config</span></code>.</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">update-configuration</span></code> génère la configuration frontend de tous les modules actifs en plus de la configuration GeoNature (puis lance le build du frontend).</p></li>
<li><p>Les liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> sont supprimés au profit de liens symboliques dans le dossier <code class="docutils literal notranslate"><span class="pre">frontend/external_modules</span></code> pointant directement vers le dossier <code class="docutils literal notranslate"><span class="pre">frontend</span></code> des modules considérés. Ces liens sont créés par la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code>. Le processus de migration convertit automatiquement vos liens symboliques existants.</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">upgrade-modules-db</span></code> permettant d’insérer le module dans la table <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> et de monter sa branche Alembic afin de créer ou mettre à jour son schéma de base de données.
Il n’est pas nécessaire de lancer cette commande manuellement pour les modules installés avec la commande <code class="docutils literal notranslate"><span class="pre">install-gn-module</span></code> sauf lorsque cette dernière est appelée avec le paramètre <code class="docutils literal notranslate"><span class="pre">--upgrade-db=false</span></code>.</p></li>
<li><p>Les assets frontend ne sont plus collectés dans un dossier portant le nom du module. Le mainteneur du module doit donc créer cette arborescence lui-même.</p></li>
</ul>
</li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Installation d’une dépendance Debian manquante pour Cypress (#2125)</p></li>
<li><p>Les fichiers de service systemd ont été corrigés pour fonctionner sur une machine sans PostgreSQL (BDD sur un autre hôte)</p></li>
<li><p>La <em>BDC Statuts</em> est maintenance chargée lors de l’intégration continue juste après le chargement des départements (#1492)</p></li>
<li><p>Ajout de l’<code class="docutils literal notranslate"><span class="pre">id_module</span></code> aux relevés des données d’exemple Occtax</p></li>
<li><p>Correction du chargement du module Validation (#2183)</p></li>
<li><p>Correction du script de migration pour gérer la migration de l’ensemble des modules externes</p></li>
<li><p>Correction de la gestion du protocole (http / https) lors des redirections automatique de Flask (redirection en cas de slash manquant en fin d’URL)</p></li>
<li><p>Rafraîchissement du cache des règles de sensibilité en fin d’installation</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Nettoyage du frontend : dépendances, configuration Angular</p></li>
<li><p>Révision importante de la documentation, de développement notamment</p></li>
<li><p>Les fichiers <code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code> et <code class="docutils literal notranslate"><span class="pre">tsconfig.app.json</span></code> n’ont plus besoin d’être générés (#2088)</p></li>
<li><p>Suppression des paramètres <code class="docutils literal notranslate"><span class="pre">ID_MODULE</span></code>, <code class="docutils literal notranslate"><span class="pre">FRONTEND_PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">MODULE_URL</span></code> de la configuration frontend des modules à répercuter dans les modules (#2165)</p></li>
<li><p>Homogénéisation de la configuration entre <code class="docutils literal notranslate"><span class="pre">current_app.config</span></code> et <code class="docutils literal notranslate"><span class="pre">geonature.utils.config.config</span></code></p></li>
<li><p>Compilation en production sans AOT (#1855)</p></li>
<li><p>L’installation du backend, du frontend et des modules peut désormais être faite sans disposer de la BDD (#1359)</p></li>
<li><p>Ajout de UsersHub aux dépendances (développement uniquement)</p></li>
<li><p>Correction du chemin du marqueur Leaflet (#2223)</p></li>
</ul>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;jpm-cbna / &#64;pierrejego / &#64;Gaetanbrl / &#64;amandine-sahl / &#64;VincentCauchois / &#64;antoinececchimnhn / &#64;metourneau / &#64;bouttier / &#64;TheoLechemia / &#64;camillemonchicourt</p>
</section>
<section id="id16">
<h2>2.10.4 (2022-11-30)<a class="headerlink" href="#id16" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Mise à jour du RefGeo en version 1.2.1 afin de corriger une
régression des performances dans la synthèse</p></li>
<li><p>Correction de la génération du rapport de sensibilité dans les
fiches des métadonnées</p></li>
<li><p>Correction d’un filtre de permissions sur les jeux de données
(#2160)</p></li>
<li><p>Correction des boutons d’ajout de données dans les jeux de données
(#2152)</p></li>
<li><p>Ajout d’une dépendance à GeoNature dans les migrations Occtax pour
corriger un problème aléatoire lors du passage des migrations
(#2178)</p></li>
</ul>
</section>
<section id="id17">
<h2>2.10.3 (2022-11-15)<a class="headerlink" href="#id17" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Optimisation d’une migration Occtax particulièrement lente en
désactivant temporairement les triggers (#2138)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonctionnalité d’inscription des utilisateurs
(#1874)</p></li>
<li><p>Correction d’une régression des performances de la routes <code class="docutils literal notranslate"><span class="pre">/modules</span></code>
(#2136)</p></li>
</ul>
</section>
<section id="id18">
<h2>2.10.2 (2022-11-09)<a class="headerlink" href="#id18" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Documentation de la fonctionnalité de duplication d’Occtax</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script de migration pour générer la configuration
frontend des modules</p></li>
<li><p>Correction des triggers d’Occtax pour correctement identifier la
bonne source</p></li>
</ul>
</section>
<section id="id19">
<h2>2.10.1 (2022-11-08)<a class="headerlink" href="#id19" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout du paramètre de configuration <code class="docutils literal notranslate"><span class="pre">DISABLED_MODULES</span></code></p></li>
<li><p>Installation des dépendances frontend des modules dans le dossier
frontend des modules eux-mêmes</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code> ignore les modules dont le chargement a
rencontré une erreur (#2109)</p></li>
<li><p>Correction et amélioration du script de mise à jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#2110)</p></li>
<li><p>Correction de la commande d’installation des modules non packagés
avec le routing dynamique (#2107)</p></li>
<li><p>Correction du message de confirmation d’enregistrement d’un cadre
d’acquisition (#2108)</p></li>
<li><p>Correction d’une régression de la 2.10.0 sur la route de
récupération des jeux de données impactant Occtax-mobile</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Passez directement à cette version plutôt que la 2.10.0, mais en
suivant les notes de version de la 2.10.0, en vous aidant
éventuellement de l’exemple de migration.</p></li>
</ul>
</section>
<section id="alouatta-macconnelli-2022-11-02">
<h2>2.10.0 - Alouatta macconnelli 🐒 (2022-11-02)<a class="headerlink" href="#alouatta-macconnelli-2022-11-02" title="Lien vers cette rubrique">¶</a></h2>
<ul class="simple">
<li><p><strong>Angular 12, tests automatisés frontend et backend</strong></p></li>
<li><p><strong>Discussions, signalement, partage, épinglage d’une occurrence</strong></p></li>
</ul>
<p>🔧 Passage de la version 7 à 12 d’Angular. Avant de mettre à jour
GeoNature sur cette version, vérifiez que les modules que vous utilisez
sont disponibles dans une version compatible avec GeoNature 2.10.0 ou
plus (compatibilité Angular 12).</p>
<p>Modules compatibles à date de la publication de la version 2.10 de
GeoNature :</p>
<ul class="simple">
<li><p>Import</p></li>
<li><p>Export</p></li>
<li><p>Dashboard</p></li>
<li><p>Monitoring</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p><strong>Avant</strong> de mettre à jour GeoNature :</p>
<ul>
<li><p>Mettre à jour les versions de TaxHub (1.10.4) et UsersHub
(2.3.1), sans la partie migration de la base de données avec
Alembic (elle sera faite lors de la mise à jour de GeoNature)</p></li>
<li><p>Mettre à jour les modules compatibles avec GeoNature 2.10, en
vous limitant aux étapes « Téléchargement de la nouvelle version
du module », « Renommage des répertoires » et « Rapatriement de
la configuration ». La compilation de chaque module sera faite
automatiquement lors de la mise à jour de GeoNature</p></li>
<li><p>Les nouveaux fichiers de logs seront placés dans le dossier
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/</span></code>. Vous pouvez archiver ou supprimer les
anciens fichiers de log (<code class="docutils literal notranslate"><span class="pre">/var/log/geonature.log*</span></code>).</p></li>
<li><p>Supprimer les paramètres de configuration qui ont disparu s’ils
sont présents dans votre fichier de configuration
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code></p></li>
</ul>
</li>
<li><p>Installation du worker Celery : il vous faut installer le broker
<code class="docutils literal notranslate"><span class="pre">redis</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>redis
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Suivez la procédure de mise à jour classique de GeoNature
(<a class="reference external" href="https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application">https://docs.geonature.fr/installation.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Suivez les éventuelles notes de version spécifiques des modules
installés (SQL de migration de leur schéma de BDD, stamp Alembic de
la BDD)</p></li>
</ul>
<p>✅ Un <a class="reference external" href="https://geonature.fr/documents/procedures/2022-11-GN-210-Migrate.txt">exemple de migration complète de GeoNature 2.9 à 2.10, ses
dépendances et ses modules principaux est disponible</a>
(pour information et à adapter à votre contexte).</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Possibilité de dupliquer le module Occtax (#621)</p></li>
<li><p>Amélioration des fiches des observations dans les modules Synthèse
et Validation (#1474)</p></li>
<li><p>Ajout d’un permalien sur les fiches des observations dans les
modules Synthèse et Validation (#1727)</p></li>
<li><p>Signaler une occurrence et paramètre <code class="docutils literal notranslate"><span class="pre">ALERT_MODULES</span></code> associé
(#1750)</p></li>
<li><p>Epingler une occurrence et son paramètre <code class="docutils literal notranslate"><span class="pre">PIN_MODULES</span></code> associé
(#1819)</p></li>
<li><p>Discussions sur une occurrence et ses paramètres
<code class="docutils literal notranslate"><span class="pre">DISCUSSION_MODULES</span></code> et <code class="docutils literal notranslate"><span class="pre">DISCUSSION_MAX_LENGTH</span></code> associés (#1731)</p></li>
<li><p>Mise à jour d’Angular de la version 7 à 12 et des dépendances
javascript liées (#1547)</p></li>
<li><p>Mise en place de tests automatisés frontend avec Cypress, simulant
les actions de l’utilisateur et vérifiant la conformité des
résultats dans les modules Occtax, Synthèse et Métadonnées</p></li>
<li><p>Renforcement et nettoyage des tests automatisés backend
(augmentation de la couverture de code de 49,8% à 63,1%)</p></li>
<li><p>Documentation de l’utilisation et de la mise en place des tests
automatisés backend et frontend.</p></li>
<li><p>Simplification du CRUVED minimum pour accéder à GeoNature, ne
nécessitant plus d’avoir obligatoirement un CRUVED défini au niveau
global de GeoNature (#1622)</p></li>
<li><p>[Métadonnées] Remplacement de la liste des imports par la liste
des sources dans la fiche des JDD (#1249)</p></li>
<li><p>[Métadonnées] Lister les cadres d’acquisition par ordre
alphabétique</p></li>
<li><p>[Admin] Amélioration de l’interface (#2101)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">status</span></code> permettant de lister les
migrations Alembic, leurs dépendances et identifier celles qui ont
été appliquées ou non (#1574)</p></li>
<li><p>Ajout d’un worker Celery pour l’exécution de tâches asynchrones</p></li>
<li><p>Déplacement du fichier de log GeoNature vers
<code class="docutils literal notranslate"><span class="pre">/var/log/geonature/geonature.log</span></code>.</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_sensitivity.cor_sensitivity_synthese</span></code> et
des triggers associés (#1710)</p></li>
<li><p>Suppression du paramètre <code class="docutils literal notranslate"><span class="pre">CRUVED_SEARCH_WITH_OBSERVER_AS_TXT</span></code>
permettant d’ajouter le filtre sur l’observers_txt en ILIKE sur
les portée 1 et 2 du CRUVED</p></li>
<li><p>Documentation : Ajout d’exemples de configuration pour utiliser les
fonds IGN (#1703)</p></li>
<li><p>Documentation : Complément de la documentation sur les calculs de la
sensibilité</p></li>
<li><p>Suppression du paramètre de configuration <code class="docutils literal notranslate"><span class="pre">LOCAL_SRID</span></code>. Le SRID
local est fourni à l’installation, puis auto-détecté depuis la base
de données à l’usage.</p></li>
<li><p>Suppression du paramètre de configuration
<code class="docutils literal notranslate"><span class="pre">id_area_type_municipality</span></code>.</p></li>
<li><p>[Occtax] Révision du style des fiches d’information des relevés
(#1876)</p></li>
<li><p>[Occtax] Ajout des valeurs par défaut directement dans la base de
données (#1857)</p></li>
<li><p>[Monitoring] Ajout d’un trigger calculant automatiquement
l’altitude des sites</p></li>
<li><p>[Profils] Ajout des paramètres <code class="docutils literal notranslate"><span class="pre">default_spatial_precision</span></code>,
<code class="docutils literal notranslate"><span class="pre">default_temporal_precision_days</span></code> et <code class="docutils literal notranslate"><span class="pre">default_active_life_stage</span></code>
dans la table <code class="docutils literal notranslate"><span class="pre">gn_profiles.t_parameters</span></code>, remplaçant les valeurs par
défaut définies au niveau du règne dans la table
<code class="docutils literal notranslate"><span class="pre">gn_profiles.cor_taxons_parameters</span></code></p></li>
<li><p>Ajout d’une couche d’objets linéaires dans le référentiel
géographique (<a class="reference external" href="https://github.com/PnX-SI/RefGeo/pull/4">https://github.com/PnX-SI/RefGeo/pull/4</a>)</p></li>
<li><p>Installation de la version 15 de Taxref par défaut lors des
nouvelles installations</p></li>
<li><p>Possibilité de limiter la recherche de lieux à un ou plusieurs pays
avec le paramètre <code class="docutils literal notranslate"><span class="pre">OSM_RESTRICT_COUNTRY_CODES</span></code> (#2010)</p></li>
<li><p>On ne peut pas fermer un cadre d’acquisition qui ne contient que
des jeux de données sans données</p></li>
<li><p>Rechargement (<code class="docutils literal notranslate"><span class="pre">reload</span></code>) automatique de GeoNature quand on modifie la
configuration de GeoNature (#2045)</p></li>
<li><p>Redémarrage (<code class="docutils literal notranslate"><span class="pre">restart</span></code>) automatique du worker Celery lors du
redémarrage de GeoNature (#2045)</p></li>
<li><p>Synthèse : ajout d’un message lors du chargement des données
(#1637)</p></li>
<li><p>Cartes : Faire remonter la géométrie de l’objet selectionné dans la
liste (#2036)</p></li>
<li><p>Ajout du paramètre <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code>, suite à la suppression du
paramètre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> (#1635)</p></li>
<li><p>[Metadonnées] Formulaire des CA : correction de la saisie des CA
parents (#2097)</p></li>
<li><p>[Accueil] Amélioration du formatage des nombres dans le bloc de
statistiques (#2085)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Remise en place de la rotation automatique des fichiers de logs
(#1627)</p></li>
<li><p>[OCCTAX] Ajout des valeurs par défaut des nomenclatures au niveau
de la base de données (#1857)</p></li>
<li><p>[OCCTAX] Correction d’un bug d’édition de géométrie non pris en
compte</p></li>
<li><p>Map List: à la selection d’une ligne dans le tableau, placement de
la géométrie correspondante au dessus des autres géométries (#2036)</p></li>
<li><p>Correction de l’URL pour la mise à jour des mots de passe (#1620)</p></li>
<li><p>Statistiques sur la page d’accueil : utilisation des bonnes
permissions (action R du module SYNTHESE). Les données et la carte
sont masquées si les permissions sont manquantes.</p></li>
<li><p>Amélioration du responsive de la page d’accueil (#1682)</p></li>
<li><p>Correction de l’intégration des régions quand GeoNature n’est pas
installé avec la projection 2154 (#1695)</p></li>
<li><p>[Occtax] Correction de l’affichage de la liste tronquée des
habitats (#1701)</p></li>
<li><p>Correction du style des tooltips (#1775)</p></li>
<li><p>[Validation] Correction du filtre par observations disposant d’un
média (#1757)</p></li>
<li><p>[Validation] Chargement des observations ayant un UUID uniquement</p></li>
<li><p>[Synthèse] Amélioration de la liste dans la recherche des taxons
(#1803)</p></li>
<li><p>Correction des URL et redirection de renouvellement du mot de passe
(#1810 / #1620)</p></li>
<li><p>Correction du CSS du bloc introduction de la page d’accueil
(#1824)</p></li>
<li><p>Suppression de l’accès à la gestion du compte pour l’utilisateur
« public » (#1844)</p></li>
<li><p>Réduction du niveau de logs de l’outil Fiona pour améliorer les
performances des exports en format SIG (#1875)</p></li>
<li><p>Correction de la concaténation des champs additionnels au niveau des
triggers de Occtax vers Synthèse et correction des données dans la
Synthèse (#1467)</p></li>
<li><p>Correction des données dans la Synthèse suite au problème
d’enregistrement des dénombrements dans Occtax, corrigé dans la
version 2.9.0 (#1479)</p></li>
<li><p>Correction des triggers de Occtax vers Synthèse lors de la
modification de dénombrements multiples et correction des données
dans la Synthèse (#1821)</p></li>
<li><p>Modification du script de démarrage <code class="docutils literal notranslate"><span class="pre">systemd</span></code> pour lancer GeoNature
et son worker Celery après PostgreSQL (#1970)</p></li>
<li><p>Correction de l’installation de psycopg2 (#1994)</p></li>
<li><p>Correction de la route de récupération des jeux de données quand on
lui passe plusieurs filtres</p></li>
<li><p>Correction de la fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code> en cas
de valeurs nulles</p></li>
<li><p>[OCCTAX] Correction d’un bug d’édition de géométrie non pris en
compte (#2023)</p></li>
<li><p>[OCCTAX] Correction de l’affichage des dates en utilisant l’UTC
pour éviter les soucis de fuseaux horaires différents entre le
serveur et le navigateur de l’utilisateur (#2005)</p></li>
<li><p>[Métadonnées] Correction de l’affichage des boutons de création
d’un JDD et d’un CA seulement si l’utilisateur en a les droits
(#1822)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Mise à jour d’Angular de la version 7 à 12 à répercuter dans les
modules spécifiques (<a class="reference external" href="https://update.angular.io/?v=7.2-12.0">https://update.angular.io/?v=7.2-12.0</a>)</p></li>
<li><p>Mise à jour des dépendances backend et frontend</p></li>
<li><p>Mise à jour de Flask version 1.1 à 2.2</p></li>
<li><p>Routage dynamique des modules, supprimant la nécessité de générer le
fichier de routage du frontend (#2059)</p></li>
<li><p>Ajout de Celery pour les traitements asynchrones</p></li>
<li><p>Possibilité de configurer GeoNature avec un fichier python en
définissant le nom du module dans la variable d’environnement
<code class="docutils literal notranslate"><span class="pre">GEONATURE_SETTINGS</span></code></p></li>
<li><p>Utilisation de la pagination fournit par Flask-SQLAlchemy pour
<code class="docutils literal notranslate"><span class="pre">get_color_taxon()</span></code></p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_exports.t_config_export</span></code> et du schéma
<code class="docutils literal notranslate"><span class="pre">gn_exports</span></code> créés par GeoNature (si le module Export n’est pas
déjà installé) (#1642)</p></li>
<li><p>Suppression des commandes GeoNature <code class="docutils literal notranslate"><span class="pre">dev-front</span></code> et <code class="docutils literal notranslate"><span class="pre">frontend-build</span></code>
(#1800, #2088) :</p></li>
<li><p>Rétablissement de l’utilisation de <code class="docutils literal notranslate"><span class="pre">nvm</span></code> pour installer NodeJS
(#1726)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">default-config</span></code></p></li>
<li><p>Externalisation du <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>, de son schéma de données et de ses
modèles en tant que module indépendant dans un dépôt dédié (#228)</p></li>
<li><p>Intégration des régions par défaut lors de l’installation de
GeoNature</p></li>
<li><p>Amélioration des composants frontend DynamicForm</p></li>
<li><p>Possibilité de filtrer le composant frontend « nomenclature » par
règne ou Goup2INPN</p></li>
<li><p>Amélioration du style des tooltips (#1717)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">refresh-rules-cache</span></code>
pour rafraichir la vue matérialisé
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules_cd_ref</span></code> (à lancer à chaque
modification de règles dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.t_sensitivity_rules</span></code>)</p></li>
<li><p>La configuration du module n’est pas écrasée lors d’une
réinstallation de ce dernier</p></li>
<li><p>Suppression de la vue <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_decode_nomenclatures</span></code></p></li>
<li><p>Génération automatique de la documentation quand on publie une
nouvelle version</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">ref_geo</span> <span class="pre">info</span></code> qui compte le nombre
de zonages par type</p></li>
<li><p>Suppression des dépendances « geog » et « numpy » en utilisation la
fonction PostGIS <code class="docutils literal notranslate"><span class="pre">ST_DWithin</span></code> pour la recherche par cercle (#1972)</p></li>
<li><p>La variable d’environnement <code class="docutils literal notranslate"><span class="pre">DATA_DIRECTORY</span></code> permet de définir un
dossier pour la mise en cache et réutilisation des ressources
téléchargées lors de la création de la base de données</p></li>
<li><p>Chargement de la configuration des modules packagés directement lors
de l’import du module <code class="docutils literal notranslate"><span class="pre">config</span></code> (avant même l’appel à <code class="docutils literal notranslate"><span class="pre">create_app</span></code>)
(#2055)</p></li>
</ul>
<p><strong>📝 Merci aux contributeurs</strong></p>
<p>&#64;bouttier / &#64;antoinececchimnhn / &#64;TheoLechemia / &#64;jpm-cbna /
&#64;mvergez / &#64;ophdlv / &#64;Adrien-Pajot / &#64;Gaetanbrl / &#64;pierrejego /
&#64;jbrieuclp / &#64;amandine-sahl / &#64;joelclems / &#64;metourneau /
&#64;gildeluermoz / &#64;camillemonchicourt</p>
</section>
<section id="id20">
<h2>2.9.2 (2022-02-15)<a class="headerlink" href="#id20" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Optimisation du nombre d’informations renvoyées par l’API pour les
utilisateurs et les organismes</p></li>
<li><p>Ajout d’une commande pour relancer le calcul de la sensibilité,
utile en cas de modification du référentiel de sensibilité :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">sensitivity</span> <span class="pre">update-synthese</span></code>. Elle s’appuie sur la
fonction <code class="docutils literal notranslate"><span class="pre">gn_synthese.update_sensitivity()</span></code>.</p></li>
<li><p>Le niveau de diffusion dans la synthèse n’est plus calculé
automatiquement à partir du niveau de sensibilité (#1711)</p></li>
<li><p>Le niveau de sensibilité tient compte du comportement de
l’occurrence (<code class="docutils literal notranslate"><span class="pre">OCC_COMPORTEMENT</span></code>), en plus du statut biologique
(<code class="docutils literal notranslate"><span class="pre">STATUT_BIO</span></code>)</p></li>
<li><p>Optimisation du recalcul de la sensibilité lors de la mise à jour de
la synthèse (trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>)</p></li>
<li><p>Ajout de tests unitaires sur les fonctions de calcul de la
sensibilité</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’une régression sur la récupération de la liste des
taxons (#1672)</p></li>
<li><p>Correction de l’authentification au CAS de l’INPN</p></li>
<li><p>Correction du calcul de la sensibilité (#1284) :</p>
<ul>
<li><p>Gestion correcte de la présence de plusieurs règles avec et sans
critère statut biologique</p></li>
<li><p>Utilisation de la règle la plus sensible quand plusieurs règles
s’appliquent</p></li>
</ul>
</li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p>La correction de la fonction de calcul de la sensibilité est suivie
d’un recalcul automatique du niveau de sensibilité des données
présentes dans la synthèse. Si vous ne souhaitez pas procéder à ce
recalcul, ajoutez le paramètre <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">recompute-sensitivity=false</span></code> lors
de la mise à jour de la base de données avec la commande
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code> (lancée automatiquement par le script
<code class="docutils literal notranslate"><span class="pre">migration.sh</span></code>) :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x recompute-sensitivity=false
</pre></div>
</div>
</li>
<li><p>Le niveau de diffusion des données dans la synthèse est remis à
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> si celui-ci équivaut au niveau de sensibilité. Seuls les
niveaux de diffusion qui différent sont laissés intacts. Si vous
souhaitez rectifier vous-mêmes vos niveaux de diffusion et ne pas
les remettre à <code class="docutils literal notranslate"><span class="pre">NULL</span></code> quand ils sont équivalents au niveau de
sensibilité, vous pouvez ajouter le paramètre
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">clear-diffusion-level=false</span></code> lors de la mise à jour de la base
de données :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(venv)$ geonature db autoupgrade -x clear-diffusion-level=false
</pre></div>
</div>
<p>Si vous redescendez à l’état antérieur de votre base de données, les
niveaux de diffusion seront restaurés à partir du niveau de
sensibilité ; vous pouvez éviter ceci avec
<code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">restore-diffusion-level=false</span></code>.</p>
</li>
</ul>
</section>
<section id="id21">
<h2>2.9.1 (2022-01-27)<a class="headerlink" href="#id21" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Utilisation du paramètre <code class="docutils literal notranslate"><span class="pre">page</span></code> de Flask à la place du paramètre
maison <code class="docutils literal notranslate"><span class="pre">offset</span></code> pour la pagination des routes (rétro-compatible)</p></li>
<li><p>Installation de TaxHub en version 1.9.4 (version corrective) par
défaut</p></li>
<li><p>Ajout du paramètre de configuration <code class="docutils literal notranslate"><span class="pre">CODE_APPLICATION</span></code> (par défaut
<code class="docutils literal notranslate"><span class="pre">GN</span></code>) (#1635)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’URL de réinitialisation de mot passe envoyée par
email (#1620)</p></li>
<li><p>Correction d’un problème d’authentification avec le CAS</p></li>
<li><p>Occtax : Correction des listes déroulantes masquées dans le bloc
dénombrement, en rajoutant un scroll</p></li>
<li><p>Correction de l’URL de l’API de TaxHub (slash final manquant) pour
l’affichage des photos sur la fiche d’un profil de taxon</p></li>
<li><p>Correction de la synchronisation des métadonnées depuis MTD</p></li>
<li><p>Correction de la génération du token quand on utilise le CAS de
l’INPN pour se connecter à GeoNature</p></li>
<li><p>Correction des permissions trop restrictives d’accès aux données de
la synthèse</p></li>
<li><p>Correction de la pagination de la route <code class="docutils literal notranslate"><span class="pre">/color_taxon</span></code> en rajoutant
un ordonnancement par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> et <code class="docutils literal notranslate"><span class="pre">id_area</span></code> (utilisé par
Occtax-mobile)</p></li>
<li><p>Contournement d’un problème de redirection incorrecte par l’API de
TaxHub lorsque celui-ci est mal configuré (#1438, #1616)</p></li>
</ul>
</section>
<section id="actias-luna-2022-01-13">
<h2>2.9.0 - Actias luna 🦋 (2022-01-13)<a class="headerlink" href="#actias-luna-2022-01-13" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Profils de taxons</strong></p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Construction automatique d’une fiche d’identité (profil) par taxon
grâce aux observations validées présentes dans la base de données
(altitude min/max, distribution spatiale, date de première/dernière
observation, nombre de données valides, phénologie) (#917 par
&#64;DonovanMaillard, &#64;lepontois, &#64;Adrien-Pajot, &#64;TheoLechemia,
&#64;bouttier, &#64;amandine-sahl, &#64;jpm-cbna)</p>
<ul>
<li><p>Création d’un schéma <code class="docutils literal notranslate"><span class="pre">gn_profiles</span></code> dans la BDD contenant les
tables, les vues, les fonctions et les paramètres de calcul des
profils de taxons
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql">https://github.com/PnX-SI/GeoNature/blob/develop/data/core/profiles.sql</a>)
(#1103)</p></li>
<li><p>Mise en place de l’API des profils de taxons (#1104)</p></li>
<li><p>Affichage des scores de chaque observation par rapport au profil
du taxon dans la liste des observations du module Validation,
ainsi que dans les fiches détails des observations dans les
modules Synthèse et Validation (#1105)</p></li>
<li><p>Ajout de filtres des observations par score ou critère des
profils de taxon dans le module Validation (#1105)</p></li>
<li><p>Ajout d’une alerte de contextualisation d’une observation par
rapport au profil de taxon, lors de sa saisie dans le module
Occtax</p></li>
<li><p>Mise en place de paramètres pour activer ou non les profils de
taxons, paramétrer leurs règles et définir les statut de
validation pris en compte pour le calcul des profils
(« Certain-très probable » et « Probable » par défaut)</p></li>
<li><p>Documentation des profils de taxons et de leur paramètrage
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#profils-de-taxons">https://docs.geonature.fr/admin-manual.html#profils-de-taxons</a>)</p></li>
<li><p>Suppression de la vue matérialisée
<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code> et de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon()</span></code> qui n’étaient
pas utilisées</p></li>
</ul>
</li>
<li><p>[OCCTAX] Ajout d’un bouton permettant d’annuler la modification
d’un taxon (#1508 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Ajout de valeurs par défaut aux champs additionnels
(<code class="docutils literal notranslate"><span class="pre">gn_commons.t_additional_fields.default_value</span></code>)</p></li>
<li><p>[OCCTAX] Ajout d’un filtre avancé par <code class="docutils literal notranslate"><span class="pre">id_releve</span></code></p></li>
<li><p>[SYNTHESE] Ajout d’un filtre avancé par UUID d’observation
(#973)</p></li>
<li><p>Amélioration des listes déroulantes en passant à la librairie
<code class="docutils literal notranslate"><span class="pre">ng-select2</span></code> pour les composants multiselects (#616
par &#64;jbrieuclp)</p></li>
<li><p>Gestion du référentiel des régions par Alembic (#1475)</p></li>
<li><p>Ajout des anciennes régions (1970-2016), inactives par défaut, mais
utiles pour les règles régionales de sensibilité</p></li>
<li><p>Gestion du référentiel de sensibilité (règles nationales et
régionales) par Alembic (#1576)</p></li>
<li><p>Ajout d’une documentation sur le calcul de la sensibilité des
observations
(<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite">https://docs.geonature.fr/admin-manual.html#gestion-de-la-sensibilite</a>,
par &#64;mvergez)</p></li>
<li><p>[SYNTHESE] Amélioration de la fenêtre de limite d’affichage
atteinte (#1520 par &#64;jpm-cbna)</p></li>
<li><p>[OCCHAB] Utilisation de tout Habref par défaut si aucune liste
d’habitats n’est renseignée dans la configuration du module</p></li>
<li><p>[METADONNEES] Attribuer des droits à un utilisateur sur un JDD si
il a des droits sur son cadre d’acquisition</p></li>
<li><p>Association automatique et paramétrable des jeux de données
personnels auto-générés à des modules (Occtax par défaut) (#1555)</p></li>
<li><p>Utilisation du C du CRUVED de l’utilisateur pour lister les jeux de
données dans lesquels il peut ajouter des données dans les
différents modules (et non plus le R du CRUVED sur GeoNature)
(#659)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>[OCCTAX] Correction de l’enregistrement des dénombrements lors de
l’enchainement des relevés (#1479 par &#64;jbrieuclp)</p></li>
<li><p>[OCCTAX] Correction du filtre du champs « Habitat » par typologie
d’habitat</p></li>
<li><p>[ADMIN] Correction de l’affichage du module (#1427
par &#64;jbrieuclp)</p></li>
<li><p>[ADMIN] Sécurisation du module (#839)</p></li>
<li><p>[VALIDATION] Corrections de la validation des observations (#1485
/ #1529)</p></li>
<li><p>[METADONNEES] Amélioration des performances (#1559)</p></li>
<li><p>[METADONNEES] Correction de la suppression des JDD</p></li>
<li><p>[METADONNEES] Correction de l’export PDF des JDD (#1544)</p></li>
<li><p>[METADONNEES] Correction des permissions (#1528)</p></li>
<li><p>[METADONNEES] Correction de la recherche avancée</p></li>
<li><p>[SYNTHESE] Correction de la recherche sur les champs génériques de
type nombre entier (#1519 par &#64;jpm-cbna)</p></li>
<li><p>[SYNTHESE] Correction des permissions</p></li>
<li><p>[SYNTHESE] Correction du lien entre les filtres CA et JDD (#1530)</p></li>
<li><p>[OCCHAB] Correction du chargement de la configuration, des fiches
info et de la modification d’une station</p></li>
<li><p>[METADONNEES] Améliorations des performances et des contrôles du
formulaire des acteurs pour les JDD et les CA (par &#64;joelclems)</p></li>
<li><p>Correction de la redirection vers le formulaire de login en cas de
cookie corrompu (#1550 par &#64;antoinececchimnhn)</p></li>
<li><p>Correction de la création de compte utilisateur (#1527)</p></li>
<li><p>Mise à jour du module Habref-api-module pour corrections de
certaines données d’Habref</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Migration vers la librairie <code class="docutils literal notranslate"><span class="pre">gn-select2</span></code> pour les listes déroulantes
des formulaires (#616 / #1285 par &#64;jbrieuclp)</p></li>
<li><p>Documentation de développement backend revue et complétée (#1559,
<a class="reference external" href="https://docs.geonature.fr/development.html#developpement-backend">https://docs.geonature.fr/development.html#developpement-backend</a>)</p></li>
<li><p>Amélioration de nombreuses routes et fonctions du backend</p></li>
<li><p>Ajouts de tests automatisés du backend</p></li>
<li><p>Mise en place d’une intégration continue pour exécuter
automatiquement les tests backend et leur couverture de code avec
GitHub Actions, à chaque commit ou pull request dans les branches
<code class="docutils literal notranslate"><span class="pre">develop</span></code> ou <code class="docutils literal notranslate"><span class="pre">master</span></code> (#1568,
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/actions">https://github.com/PnX-SI/GeoNature/actions</a>)</p></li>
<li><p>[VALIDATION] Suppression des vues SQL et optimisation des routes</p></li>
<li><p>Génération automatique et aléatoire du paramètre <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p>[SYNTHESE] Remplacement de <code class="docutils literal notranslate"><span class="pre">as_literal</span></code> par <code class="docutils literal notranslate"><span class="pre">json.loads</span></code>, plus
performant (par &#64;antoinececchimnhn)</p></li>
<li><p>Possibilité de filter la route <code class="docutils literal notranslate"><span class="pre">synthese/taxa_distribution</span></code> par
<code class="docutils literal notranslate"><span class="pre">id_source</span></code> (#1446 par &#64;mvergez)</p></li>
<li><p>Factorisation du composant <code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code> avec le composant
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Ajout du composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> dans dynamic-form</p></li>
<li><p>Ajout d’un input <code class="docutils literal notranslate"><span class="pre">valueFieldName</span></code> aux composants <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-municipalities</span></code>.</p></li>
<li><p>Mise à jour de nombreuses dépendances</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p>La liste des JDD dans les modules de saisie (Occtax, Occhab,
Monitoring et Import) se base désormais sur le C du CRUVED de
l’utilisateur au niveau du module (ou du C du CRUVED de GeoNature
si l’utilisateur n’a pas de CRUVED sur le module), au lieu du R de
GeoNature jusqu’à présent. Vous devrez donc potentiellement adapter
vos permissions à ce changement de comportement (#659)</p></li>
<li><p>Si vous avez surcouché le paramètre de configuration <code class="docutils literal notranslate"><span class="pre">AREA_FILTERS</span></code>
de la section <code class="docutils literal notranslate"><span class="pre">[SYNTHESE]</span></code>, veuillez remplacer <code class="docutils literal notranslate"><span class="pre">id_type</span></code> par
<code class="docutils literal notranslate"><span class="pre">type_code</span></code> (voir <code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">id_type</span> <span class="o">=</span> <span class="mi">25</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>devient</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">AREA_FILTERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Communes&quot;</span><span class="p">,</span> <span class="n">type_code</span> <span class="o">=</span> <span class="s2">&quot;COM&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Si vous aviez modifié les colonnes de la liste des observations du
module Validation en adaptant la vue
<code class="docutils literal notranslate"><span class="pre">gn_validation.v_synthese_validation_forwebapp</span></code>, celle-ci a été
supprimée et il suffit désormais d’indiquer les colonnes souhaitées
dans la configuration du module. Voir documentation
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles">http://docs.geonature.fr/admin-manual.html#liste-des-champs-visibles</a>)</p></li>
<li><p>Les nouvelles fonctionnalités liées aux profils de taxons
nécessitent de rafraichir des vues materialisées à intervalles
réguliers et donc de créer une tâche planfiée (cron). Voir
documentation
(<a class="reference external" href="https://docs.geonature.fr/installation.html#taches-planifiees">https://docs.geonature.fr/installation.html#taches-planifiees</a>)</p></li>
<li><p>Les régions sont maintenant disponibles via des migrations Alembic.
Si vous possédez déjà les régions, vous pouvez l’indiquer à Alembic
:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_geo@head
geonature db stamp d02f4563bebe
</pre></div>
</div>
</li>
<li><p>Le référentiel de sensibilité est désormais disponible via une
migration Alembic. Celui-ci nécessite le référentiel des régions
(branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions</span></code>), ainsi que le référentiel des
anciennes régions (branche Alembic <code class="docutils literal notranslate"><span class="pre">ref_geo_fr_regions_1970</span></code>) –
l’installation de ces référentiels est automatique avec
l’installation des règles de sensibilité.</p>
<ul>
<li><p>Si vous possédez déjà le référentiel, vous pouvez l’indiquer à
Alembic :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db stamp 7dfd0a813f86
</pre></div>
</div>
</li>
<li><p>Si vous avez installé GeoNature 2.8.X, le référentiel de
sensibilité n’a pas été installé automatiquement. Vous pouvez
l’installer manuellement :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature db upgrade ref_sensitivity_inpn@head
</pre></div>
</div>
</li>
</ul>
<p>Par défaut, seule les règles nationales sont activées, vous laissant
le soin d’activer vos règles locales en base vous-même. Vous pouvez
également demander, lors de l’installation du référentiel, à activer
(resp. désactiver) toutes les règles en ajout à la commande Alembic
l’option <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=true</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">active=false</span></code>).</p>
</li>
<li><p>Si vous souhaitez surcoucher les paramètres par défaut de Gunicorn
(app_name, timeout…), depuis le passage à <code class="docutils literal notranslate"><span class="pre">systemd</span></code> dans la
version 2.8.0, c’est désormais à faire dans un fichier <code class="docutils literal notranslate"><span class="pre">environ</span></code> à
la racine du dossier de votre GeoNature (#1588,
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#parametres-gunicorn">https://docs.geonature.fr/admin-manual.html#parametres-gunicorn</a>)</p></li>
<li><p>Si vous les utilisez, mettez à jour les modules Import, Export et
Monitoring dans leurs dernières versions compatibles avec le version
2.9.0 de GeoNature</p></li>
</ul>
</section>
<section id="id22">
<h2>2.8.1 (2021-10-17)<a class="headerlink" href="#id22" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout de l’indication du département au formulaire des communes
(#1480)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">group2inpn</span></code> et <code class="docutils literal notranslate"><span class="pre">regne</span></code> au formulaire des
nomenclatures (#1481)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
<li><p>Mise-à-jour corrective de <a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.7">UsersHub-authentification-module
1.5.7</a></p></li>
</ul>
</section>
<section id="vaccinium-myrtillus-2021-10-18">
<h2>2.8.0 - Vaccinium myrtillus 🌿 (2021-10-18)<a class="headerlink" href="#vaccinium-myrtillus-2021-10-18" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Gestion de la base de données avec Alembic</strong></p>
<p>⚠️ Avant de mettre à jour GeoNature, vérifiez que les modules que vous
utilisez disposent d’une version compatible avec la 2.8.0, suite au
passage à la version 3 de Marshmallow.</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Support de Debian 11 / Python 3.9</p></li>
<li><p>Passage de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> à <code class="docutils literal notranslate"><span class="pre">systemd</span></code></p></li>
<li><p>Gestion de la base de données et de ses évolutions avec Alembic
(#880)</p></li>
<li><p>Mise à jour de la procédure d’installation afin d’utiliser Alembic
(#880)</p></li>
<li><p>Révision et réorganisation des scripts et de la documentation
d’installation</p></li>
<li><p>Passage à la version 3 de Marshmallow (#1451)</p></li>
<li><p>Suppression du paramètre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code>, celui-ci est automatiquement
déterminé à partir de la base de données et du code de l’application</p></li>
<li><p>Ajout d’un index sur le champs <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code></p></li>
<li><p>Mise à jour des dépendances</p>
<ul>
<li><p><a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub
1.9.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module/releases/tag/1.5.6">UsersHub-authentification-module
1.5.6</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/releases/tag/1.4.4">Nomenclature-api-module
1.4.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Habref-api-module/releases/tag/0.2.0">Habref-api-module
0.2.0</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy/releases/tag/0.2.4">Utils-Flask-SQLAlchemy
0.2.4</a></p></li>
<li><p><a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo/releases/tag/0.2.1">Utils-Flask-SQLAlchemy-Geo
0.2.1</a></p></li>
</ul>
</li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Corrections et améliorations des formulaires dynamiques et des
champs additionnels</p></li>
<li><p>Correction de l’envoi d’email lors de la récupération du mot de
passe (#1471)</p></li>
<li><p>Occtax : Correction du focus sur le champs « taxon » quand on
enchaine les taxons (#1462)</p></li>
<li><p>Occtax : Correction du formulaire de modification quand le relevé
est une ligne ou un polygone (#1461)</p></li>
<li><p>Occtax : Correction de la conservation de la date quand on enchaine
les relevés (#1442)</p></li>
<li><p>Occtax : Correction du paramètre d’export des champs additionnels
(#1440)</p></li>
<li><p>Synthèse : correction de la recherche par jeu de données (#1494)</p></li>
<li><p>Correction de l’affichage des longues listes déroulantes dans les
champs additionnels (#1442)</p></li>
<li><p>Mise à jour de la table <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> lors de l’ajout de
nouvelles zones via un trigger sur la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code> (#1433)</p></li>
<li><p>Correction de l’export PDF des fiches de métadonnées (#1449)</p></li>
<li><p>Jeux de données : correction de l’affichage des imports sources</p></li>
<li><p>Correction de la configuration Apache et de la gestion par flask
d’un GeoNature accessible sur un préfix (e.g. <code class="docutils literal notranslate"><span class="pre">/geonature</span></code>) (#1463)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
<li><p>Correction des champs additionnels de type boutons radios (#1464 et
#1472)</p></li>
<li><p>Occtax : Correction du contrôle des heures quand on est sur 2 mois
distincts (#1468)</p></li>
<li><p>Suppression de nombreux identifiants en dur dans les scripts SQL de
création de la BDD</p></li>
<li><p>Correction du trigger d’Occtax vers la Synthèse pour le champs
<code class="docutils literal notranslate"><span class="pre">Comportement</span></code> (#1469)</p></li>
<li><p>Correction des fonctions <code class="docutils literal notranslate"><span class="pre">get_default_nomenclature_value</span></code></p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">multiselect</span></code> (#1488)</p></li>
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> pour récupérer le fichier
<code class="docutils literal notranslate"><span class="pre">custom.scss</span></code> depuis son nouvel emplacement (#1430)</p></li>
<li><p>Correction du paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_OBSERVERS_COL</span></code></p></li>
<li><p>Métadonnées : Suppression en cascade sur les tables
<code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_territory</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_meta.cor_dataset_protocol</span></code>
(#1452)</p></li>
<li><p>Correction de la commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code> :
rechargement des entry points après installation avec pip d’un
module packagé</p></li>
<li><p>Correction d’un bug lors de l’ajout d’un cadre d’acquisition</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Mise à jour de plusieurs dépendances</p></li>
<li><p>Packetage des modules fournis avec GeoNature</p></li>
<li><p>L’utilisateur connecté est maintenant accessible via
<code class="docutils literal notranslate"><span class="pre">g.current_user</span></code></p></li>
<li><p>Nettoyage et refactoring divers</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p>Mettre à jour <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases/tag/2.2.1">UsersHub en version
2.2.1</a> et
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.9.0">TaxHub en version
1.9.0</a> (si vous
les utilisez) <strong>en sautant leur étape de passage à Alembic</strong> (car la
mise à jour de GeoNature se charge désormais de mettre à jour aussi
les schémas <code class="docutils literal notranslate"><span class="pre">taxonomie</span></code> et <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>)</p></li>
<li><p>Suppression de <code class="docutils literal notranslate"><span class="pre">supervisor</span></code> :</p>
<ul class="simple">
<li><p>Stopper GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">stop</span> <span class="pre">geonature2</span></code></p></li>
<li><p>Supprimer le fichier de configuration supervisor de GeoNature :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code></p></li>
<li><p>Si supervisor n’est plus utilisé par aucun service (répertoire
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/</span></code> vide), il peut être désinstallé
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span> <span class="pre">supervisor</span></code>)</p></li>
</ul>
</li>
<li><p>Suivre la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Passage à <code class="docutils literal notranslate"><span class="pre">systemd</span></code> :</p>
<ul class="simple">
<li><p>Copier le fichier <code class="docutils literal notranslate"><span class="pre">install/assets/geonature.service</span></code> dans
<code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code></p></li>
<li><p>Éditer <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/geonature.service</span></code> et remplacer les
variables <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> (votre utilisateur linux courant) et
<code class="docutils literal notranslate"><span class="pre">${BASE_DIR}</span></code> (chemin absolu du répertoire de GeoNature) par les
valeurs appropriées</p></li>
<li><p>Lancer la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code></p></li>
<li><p>Pour démarrer GeoNature : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">geonature</span></code></p></li>
<li><p>Pour lancer GeoNature automatiquement au démarrage du serveur :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">geonature</span></code></p></li>
</ul>
</li>
<li><p>Correction de la configuration Apache : si vous servez GeoNature sur
un préfixe (typiquement <code class="docutils literal notranslate"><span class="pre">/geonature/api</span></code>), assurez vous que ce
préfixe figure bien également à la fin des directives <code class="docutils literal notranslate"><span class="pre">ProxyPass</span></code> et
<code class="docutils literal notranslate"><span class="pre">ProxyPassReverse</span></code> comme dans l’exemple suivant :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/geonature/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/geonature/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/geonature/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Si vous servez GeoNature sur un sous-domaine, vérifiez ou modifier
la configuration Apache :</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Location</span><span class="w"> </span><span class="s">/api</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ProxyPass</span><span class="w"> </span>http://127.0.0.1:8000/api
<span class="w">    </span><span class="nb">ProxyPassReverse</span><span class="w">  </span>http://127.0.0.1:8000/api
<span class="nt">&lt;/Location&gt;</span>
</pre></div>
</div>
<p>Pensez à recharger Apache si vous êtes amené à en changer la
configuration : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">reload</span> <span class="pre">apache2</span></code></p>
</li>
<li><p>Passage à Alembic :</p>
<ul class="simple">
<li><p>S’assurer d’avoir une base de données de GeoNature en version
2.7.5</p></li>
<li><p>Si vous avez UsersHub installé, ajoutez dans votre configuration
GeoNature la section suivante (en adaptant le chemin) :</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ALEMBIC]</span>
<span class="na">VERSION_LOCATIONS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;/path/to/usershub/app/migrations/versions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Entrer dans le virtualenv afin d’avoir la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
disponible : <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">backend/venv/bin/activate</span></code></p></li>
<li><p>Exécuter les commandes suivantes afin d’indiquer à Alembic
l’état de votre base de données :</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>f06cc80cc8ba<span class="w">  </span><span class="c1"># GeoNature 2.7.5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>0dfdbfbccd63<span class="w">  </span><span class="c1"># référentiel géographique des communes</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>3fdaa1805575<span class="w">  </span><span class="c1"># référentiel géographique des départements</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>586613e2faeb<span class="w">  </span><span class="c1"># référentiel géographique des mailles 1×1</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>7d6e98441e4c<span class="w">  </span><span class="c1"># référentiel géographique des mailles 5×5</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>ede150d9afd9<span class="w">  </span><span class="c1"># référentiel géographique des mailles 10×10</span>
geonature<span class="w"> </span>db<span class="w"> </span>stamp<span class="w"> </span>1715cf31a75d<span class="w">  </span><span class="c1"># MNT de l’IGN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si vous aviez déjà intallé certains modules, vous devez
l’indiquer à Alembic :</p>
<ul>
<li><p>Module <em>Occtax</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">f57107d2d0ad</span></code></p></li>
<li><p>Module <em>Occhab</em> : <code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">stamp</span> <span class="pre">2984569d5df6</span></code></p></li>
</ul>
</li>
<li><p>Mettre sa base de données à jour avec Alembic :
<code class="docutils literal notranslate"><span class="pre">geonature</span> <span class="pre">db</span> <span class="pre">autoupgrade</span></code></p></li>
</ul>
<p>Pour plus d’information sur l’utilisation d’Alembic, voir la
<a class="reference external" href="https://docs.geonature.fr/admin-manual.html#administration-avec-alembic">documentation administrateur de
GeoNature</a>.</p>
</li>
</ul>
</section>
<section id="id23">
<h2>2.7.5 (2021-07-28)<a class="headerlink" href="#id23" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Compatibilité avec Occtax-mobile 1.3. Possibilité d’ajouter la
query string <code class="docutils literal notranslate"><span class="pre">fields</span></code> sur la route <code class="docutils literal notranslate"><span class="pre">meta/datasets</span></code> pour choisir les
champs renvoyés par l’API</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
</ul>
</section>
<section id="id24">
<h2>2.7.4 (2021-07-23)<a class="headerlink" href="#id24" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’un import manquant entrainant un problème de
compilation du frontend (#1424)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
</ul>
</section>
<section id="id25">
<h2>2.7.3 (2021-07-22)<a class="headerlink" href="#id25" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Métadonnées : ajout des paramètres <code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_DS</span></code> et
<code class="docutils literal notranslate"><span class="pre">CD_NOMENCLATURE_ROLE_TYPE_AF</span></code> pour limiter les rôles utilisables au
niveau des jeux de données et des cadres d’acquisition (#1417)</p></li>
<li><p>Ajout de la commande <code class="docutils literal notranslate"><span class="pre">mtd_sync</span></code> qui permet de synchroniser les
métadonnées de toute une instance depuis le flux MTD du SINP</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’affichage des jeux de données sur les fiches des
cadres d’acquisition (#1410)</p></li>
<li><p>Doc : Précision des OS supportés (Debian 10 uniquement en
production)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Support des commandes Flask au niveau de la commande <code class="docutils literal notranslate"><span class="pre">geonature</span></code>
(<code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, <code class="docutils literal notranslate"><span class="pre">shell</span></code>…)</p></li>
<li><p>Ajout des sous-modules en tant que dépendances</p></li>
<li><p>Ajout d’une commande <code class="docutils literal notranslate"><span class="pre">install_packaged_gn_module</span></code></p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
</ul>
</section>
<section id="id26">
<h2>2.7.2 (2021-07-05)<a class="headerlink" href="#id26" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>OCCTAX : correction de la vérification du CRUVED (#1413)</p></li>
<li><p>OCCTAX : correction du dégrisement du formulaire au chargement de la
fonctionnalité « mes lieux » (#1414)</p></li>
<li><p>OCCTAX : Déplacement des champs additionnels pour les dénombrements
avant les médias (#1409)</p></li>
<li><p>Suppression des champs additionnels de type « taxonomy » qui
n’étaient pas supportés</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.7.1to2.7.2.sql</a>)</p></li>
</ul>
</section>
<section id="id27">
<h2>2.7.1 (2021-07-02)<a class="headerlink" href="#id27" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Installation des dépendances javascript des modules lors de la
migration de version de GeoNature (#1252)</p></li>
<li><p>Installation de la version 1.8.1 de TaxHub par défaut à la place de
la 1.8.0</p></li>
<li><p>Intégration de la documentation permettant de mettre en place
l’accès public à GeoNature</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
</ul>
</section>
<section id="androsace-delphinensis-2021-06-30">
<h2>2.7.0 - Androsace delphinensis 🌼 (2021-06-30)<a class="headerlink" href="#androsace-delphinensis-2021-06-30" title="Lien vers cette rubrique">¶</a></h2>
<p>Nécessite la version 1.8.x de TaxHub.</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Compatible avec TaxHub 1.8.x qui inclut notamment la migration
(optionnelle) vers Taxref version 14 et l’ajout de la BDC statuts</p></li>
<li><p>Installation globale migrée de Taxref version 13 à 14</p></li>
<li><p>Occtax : Possibilité d’ajouter des champs additionels par JDD ou
globaux au module et documentation liée (#1007)</p></li>
<li><p>Occtax/Synthese : Ajout des champs additionnels dans les exports
(#1114)</p></li>
<li><p>Occtax/Synthese : Affichage des champs additionnels dans les fiches
info</p></li>
<li><p>Customisation : possibilité de changer le CSS sans rebuilder
l’application</p></li>
<li><p>Admin : Création d’un backoffice d’administration des champs
additionels (#1007)</p></li>
<li><p>Admin : Création d’une documentation d’administration des champs
additionnels (#1007)</p></li>
<li><p>Occtax : Possibilité de désactiver la recherche de taxon par liste
(#1315)</p></li>
<li><p>Occtax : Par défaut la recherche de taxon n’interroge pas une liste
mais tout Taxref, si aucune liste de taxons n’a été spécifiée dans
la configuration du module Occtax (voir notes de version) (#1315)</p></li>
<li><p>Occtax/Metadonnées : possibilité d’associer une liste de taxons à
un JDD (implémenté uniquement dans Occtax) (#1315)</p></li>
<li><p>Occtax : Possibilité d’ajouter les infos sur les médias dans les
exports (paramètre <code class="docutils literal notranslate"><span class="pre">ADD_MEDIA_IN_EXPORT</span></code>) (#1326)</p></li>
<li><p>Occtax : Possibilité de paramétrer l’affichage des champs du
composant MEDIA dans OCCTAX (paramètre <code class="docutils literal notranslate"><span class="pre">MEDIA_FIELDS_DETAILS</span></code> -
#1287)</p></li>
<li><p>Occtax : Possibilité de filtrer la liste des habitats du formulaire
avec les nouveaux paramètres <code class="docutils literal notranslate"><span class="pre">ID_LIST_HABITAT</span></code> et <code class="docutils literal notranslate"><span class="pre">CD_TYPO_HABITAT</span></code></p></li>
<li><p>Occtax : Possibilité d’ouvrir le module avec un JDD pré-selectionné
en passant le paramètre <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code> dans l’URL (#1071)</p></li>
<li><p>Accueil : Réorganisation des blocs (#1375)</p></li>
<li><p>Accueil : Ajout d’un paramètre controlant la fréquence de MAJ du
cache des statistiques de la page d’accueil (<code class="docutils literal notranslate"><span class="pre">STAT_BLOC_TTL</span></code>, par
défaut 1h: 3600 secondes) (#1320)</p></li>
<li><p>Amélioration des performances de récupération des modules et du
CRUVED</p></li>
<li><p>Monitoring : Ajout d’un trigger garantissant la cohérence entre
<code class="docutils literal notranslate"><span class="pre">date_min</span></code> et <code class="docutils literal notranslate"><span class="pre">date_max</span></code> et historisation de la table
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_visit_observer</span></code> (#1247)</p></li>
<li><p>La page d’authentification affiche désormais le nom de
l’application (<code class="docutils literal notranslate"><span class="pre">appName</span></code>) défini dans la configuration de GeoNature
(#1277)</p></li>
<li><p>Possibilité d’ouvrir l’accès à GeoNature sans authentification
(voir documentation d’administration) (#1323)</p></li>
<li><p>Métadonnées : Optimisation du temps de chargement des listes des CA
et JDD (#1291)</p></li>
<li><p>Métadonnées : Passage de la version 1.3.9 du standard SINP à la
version 1.3.10 et ajout des champs liés dans les formulaires
(#1291)</p></li>
<li><p>Métadonnées : Révision du design la partie « Acteurs » du formulaire
et mise à part de l’acteur de type « Contact principal »,
obligatoire dans le standard SINP</p></li>
<li><p>Métadonnées : Ordonnancement des JDD par leur nom</p></li>
<li><p>Métadonnées : Ajout de la suppression en cascade au niveau des
tables des CA et des JDD</p></li>
<li><p>Métadonnées : Ajout d’un message quand un CA ou JDD n’a pas
d’acteur (#1404)</p></li>
<li><p>Synthèse et validation : Ajout d’un filtre avancé
<code class="docutils literal notranslate"><span class="pre">Possède</span> <span class="pre">des</span> <span class="pre">médias</span></code> (#1179, #1338, #1180)</p></li>
<li><p>Synthèse : Affichage du contenu json du champs des données
additionnelles, dans la fiche détail d’une observation</p></li>
<li><p>Synthèse : Ajout de la possibilité d’afficher la colonne
« Effectif » dans la liste des observations</p></li>
<li><p>DynamicForm : enrichissement des formulaires dynamiques pour les
médias, l’ajout de liens externes</p></li>
<li><p>Ajout d’une contrainte d’unicité de la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">area_code</span></code> dans <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#1270)</p></li>
<li><p>Ajout d’une contrainte d’unicité du champs <code class="docutils literal notranslate"><span class="pre">type_code</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">ref_geo.bib_areas_types</span></code></p></li>
<li><p>Mise à jour des versions de nombreuses dépendances Python et
Javascript</p></li>
<li><p>Support du gestionnaire d’erreurs Sentry</p></li>
<li><p>Compression des images</p></li>
<li><p>Ajout d’un script permettant d’identifier les doublons dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/duplicates_deletion</span></code> (#1324)</p></li>
<li><p>Validation : possibilité de passer des fonctions dans la liste des
colonnes affichées (pour décoder une nomenclature)</p></li>
<li><p>Validation : Les paramètres <code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code> et
<code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> sont regroupés en un seul paramètre
nommé <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : Correction d’un bug sur le champs observateur lors de la
modification d’un relevé (#1177)</p></li>
<li><p>Occtax : Renseignement par défaut de l’utilisateur connecté à la
création d’un relevé en mode « observers_txt » (#1292)</p></li>
<li><p>Occtax : Déplacement des boutons d’action à gauche dans la liste
des taxons d’un relevé pour éviter qu’ils soient masqués quand les
noms de taxon sont longs (#1299 et #1337)</p></li>
<li><p>Occtax : Correction de la possibilité de modifier un relevé si U=1
(#1365)</p></li>
<li><p>Occtax : Suppression du zoom quand on localise le relevé (#1317)</p></li>
<li><p>Occtax : Correction du nombre de lignes affichées après une
recherche</p></li>
<li><p>Occtax : Correction de la suppression d’un habitat lors de la
modification d’un relevé (#1296)</p></li>
<li><p>Occtax : Correction des champs « Habitat » et « Lieu » quand on
enchaine des relevés (#1191)</p></li>
<li><p>Occtax : Correction de l’enchainement des saisies (#1300)</p></li>
<li><p>Occtax : Correction de l’affichage des taxons quand le nom est long
(#1299, #1337)</p></li>
<li><p>Occtax : Correction de l’observateur par défaut en mode
<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code></p></li>
<li><p>Occtax : Correction des messages d’information multiples (#1367)</p></li>
<li><p>Occtax : Correction de la mise à jour du « digitiser » lors d’une
édition de relevé (#1392)</p></li>
<li><p>Occtax : Correction du trigger alimentant les observateurs de la
synthèse depuis Occtax (#1399)</p></li>
<li><p>Métadonnées : Correction de la suppression d’un JDD sans données,
depuis la liste des JDD (#1312)</p></li>
<li><p>Métadonnées : Correction de la récupération des valeurs de
nomenclature depuis MTD n’existant pas dans GeoNature (#1297)</p></li>
<li><p>Authentification : Redirection vers la page login après une période
d’inactivité (#1193)</p></li>
<li><p>Résolution des problèmes de permission sur le fichier
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> (#1003)</p></li>
</ul>
<p><strong>💻 Développement</strong></p>
<ul class="simple">
<li><p>Possibilité d’utiliser la commande <code class="docutils literal notranslate"><span class="pre">flask</span></code> (eg <code class="docutils literal notranslate"><span class="pre">flask</span> <span class="pre">shell</span></code>)</p></li>
<li><p>Préparation de l’utilisation d’Alembic pour la gestion des
migrations de la structure de la BDD (#880)</p></li>
<li><p>Possibilité d’importer des modules packagés (#1272)</p></li>
<li><p>Réorganisation des fichiers <code class="docutils literal notranslate"><span class="pre">requirements</span></code> et installation des
branches <code class="docutils literal notranslate"><span class="pre">develop</span></code> des dépendances du fichier <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code></p></li>
<li><p>Simplification de la gestion des erreurs</p></li>
<li><p>Création de templates pour les configurations Apache de GeoNature,
TaxHub et UsersHub, utilisés par le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Ajout du plugon <code class="docutils literal notranslate"><span class="pre">leaflet-image</span></code></p></li>
<li><p>Ajout d’un champs <code class="docutils literal notranslate"><span class="pre">type</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> pour
gérer le polymorphisme, utilisé dans le module Monitoring</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">meta_create_date</span></code> et <code class="docutils literal notranslate"><span class="pre">meta_update_date</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code></p></li>
<li><p>Diverses améliorations mineures de l’architecture du code</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul>
<li><p>Mettez à jour TaxHub 1.8.x avant d’effectuer la mise à jour de
GeoNature : <a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a></p></li>
<li><p>Si vous utilisez le module Monitoring, mettez le à jour en version
0.2.4 minimum avant de mettre à jour GeoNature</p></li>
<li><p>Si vous n’aviez pas renseigné de valeur pour le paramètre
<code class="docutils literal notranslate"><span class="pre">id_taxon_list</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code> du module Occtax, la
liste 100 n’est plus passée par defaut et le module va rechercher
sur tout Taxref. Si vous souhaitez utiliser une liste de taxons dans
la saisie Occtax, veuillez renseigner l’identifiant de votre liste
dans la configuration du module</p></li>
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.2to2.7.0.sql</a>)</p></li>
<li><p>Le script SQL de mise à jour va supprimer et recréer les vues
<code class="docutils literal notranslate"><span class="pre">pr_occtax.v_export_occtax</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>
pour y intégrer les champs additionnels. Si vous aviez modifié ces
vues, adaptez le script de mise à jour de GeoNature 2.6.2 à 2.7.0,
ou répercuter vos modifications après la mise à jour, à appliquer
aussi dans votre éventuelle surcouche des paramètres
<code class="docutils literal notranslate"><span class="pre">default_columns_export</span></code> (dans
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml</span></code>) et <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code>
(dans <code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>)</p></li>
<li><p>Le fichier de customisation CSS a été déplacé de
<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/custom.scss</span></code> vers
<code class="docutils literal notranslate"><span class="pre">frontend/src/assets/custom.css</span></code> pour pouvoir être modifié sans
devoir rebuilder l’application. Son déplacement est fait
automatiquement lors de la mise à jour de GeoNature. Si vous avez
customisé les styles dans ce fichier et notamment fait référence à
d’autres fichiers, vérifiez ou adaptez leurs chemins</p></li>
<li><p>Si vous aviez renseigner un des deux paramètres
<code class="docutils literal notranslate"><span class="pre">LIST_COLUMNS_FRONTEND</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_VALIDATION_WEB_APP</span></code> dans le
module Validation, il est nécessaire de les remplacer par le nouveau
paramètre <code class="docutils literal notranslate"><span class="pre">COLUMN_LIST</span></code>. Voir le fichier
<code class="docutils literal notranslate"><span class="pre">contrib/gn_module_validation/config/conf_gn_module.toml.example</span></code></p></li>
<li><p>Modifier dans le fichier
<code class="docutils literal notranslate"><span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>, remplacer
<code class="docutils literal notranslate"><span class="pre">gn_errors.log</span></code> par <code class="docutils literal notranslate"><span class="pre">supervisor.log</span></code> dans la variable
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s|\(stdout_logfile = .*\)/gn_errors.log|\1/supervisor.log|&#39;</span><span class="w"> </span>/etc/supervisor/conf.d/geonature-service.conf
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>reload
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id28">
<h2>2.6.2 (2021-02-15)<a class="headerlink" href="#id28" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Metadonnées : correction d’un bug sur la fiche JDD si le module
d’import n’est pas installé</p></li>
<li><p>Metadonnées : correction de l’affichage de certains champs sur la
fiche des cadres d’acquisition</p></li>
<li><p>Metadonnées : la recherche rapide n’est plus sensible à la casse
casse</p></li>
</ul>
</section>
<section id="id29">
<h2>2.6.1 (2021-02-11)<a class="headerlink" href="#id29" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_tri_cal_sensi_diff_level_on_each_statement()</span></code> non
compatible avec PostgreSQL 10 (#1255)</p></li>
<li><p>Synthèse : correction de l’affichage du filtre « statut de
validation » (#1267)</p></li>
<li><p>Permissions : correction de l’URL de redirection après
l’édition des permissions (#1253)</p></li>
<li><p>Précision de la documentation de mise à jour de GeoNature (#1251)</p></li>
<li><p>Ajout du paramètre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> dans le fichier
d’exemple de configuration (#1066 par &#64;jbdesbas)</p></li>
<li><p>Sécurité : suppression d’une route inutile</p></li>
<li><p>Correction de l’URL de la doc sur la page d’accueil</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter le script de mise à jour de la BDD du sous-module de
nomenclature :
https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.5to1.3.6.sql</p></li>
<li><p>Exécuter ensuite le script SQL de mise à jour de la BDD de GeoNature
(https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.6.0to2.6.1.sql)</p></li>
<li><p>Suivez la procédure classique de mise à jour de GeoNature
(http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application)</p></li>
</ul>
</section>
<section id="saxifraga-2021-02-04">
<h2>2.6.0 - Saxifraga 🌸 (2021-02-04)<a class="headerlink" href="#saxifraga-2021-02-04" title="Lien vers cette rubrique">¶</a></h2>
<p>Nécessite Debian 10, car cette nouvelle version nécessite PostgreSQL 10
minimum (qui n’est pas fourni par défaut avec Debian 9) pour les
triggers déclenchés « on each statement », plus performants.</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Sensibilité : Ajout d’un trigger sur la synthèse déclenchant
automatiquement le calcul de la sensibilité des observations et
calculant ensuite leur niveau de diffusion (si celui-ci est NULL) en
fonction de la sensibilité (#413 et #871)</p></li>
<li><p>Ajout du format GeoPackage (GPKG) pour les exports SIG, plus simple,
plus léger, plus performant et unique que le SHAPEFILE. Les exports
au format SHP restent pour le moment utilisés par défaut (modifiable
dans la configuration des modules Occtax, Occhab et Synthèse)
(#898)</p></li>
<li><p>Performances : Suppression du trigger le plus lourd calculant les
couleurs des taxons par unités géographiques. Il est remplacé par
une vue utilisant le nouveau paramètre
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>, définissant le
code du type de zonage à utiliser pour les unités géographiques dans
Occtax-mobile (Mailles de 5km par défaut) (#997)</p></li>
<li><p>Performances : Amélioration du trigger de la Synthèse calculant les
zonages d’une observation en ne faisant un <code class="docutils literal notranslate"><span class="pre">ST_Touches()</span></code> seulement
si l’observation n’est pas un point et en le passant
<code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">each</span> <span class="pre">statement</span></code> (#716)</p></li>
<li><p>Métadonnées : Refonte de la liste des CA et JDD avec l’ajout
d’informations et d’actions, ainsi qu’une recherche avancée
(#889)</p></li>
<li><p>Métadonnées : Révision des fiches info des CA et JDD avec l’ajout
d’actions, du tableau des imports et du téléchargement des rapports
d’UUID et de sensibilité (#889)</p></li>
<li><p>Métadonnées: Ajout de la fonctionnalité de fermeture (dépot) au
niveau du CA (qui ferme tous les JDD du CA), seulement si le CA a au
moins un JDD. Désactivée par défaut via le paramètre
<code class="docutils literal notranslate"><span class="pre">ENABLE_CLOSE_AF</span></code> (#889 par &#64;alainlaupinmnhn)</p></li>
<li><p>Métadonnées : Possibilité d’envoyer un email automatique au
créateur et à l’utilisateur d’un CA quand celui-ci est fermé
(#889)</p></li>
<li><p>Métadonnées : Possibilité d’ajouter un titre spécifique aux exports
PDF des CA quand ceux-ci sont fermés, par exemple pour en faire un
certificat (#889)</p></li>
<li><p>Métadonnées : Possibilité d’importer directement dans un JDD actif
depuis le module Métadonnées, désactivé par défaut (#889)</p></li>
<li><p>Métadonnées : Amélioration des possibilités de customisation des PDF
des fiches de métadonnées</p></li>
<li><p>Métadonnées : Amélioration des fiches détail des CA et JDD et ajout
de la liste des imports dans les fiches des JDD (#889)</p></li>
<li><p>Métadonnées : Ajout d’un spinner lors du chargement de la liste des
métadonnées et parallélisation du calcul du nombre de données par
JDD (#1231)</p></li>
<li><p>Synthèse : Possibilité d’ouvrir le module avec un JDD
préselectionné (<code class="docutils literal notranslate"><span class="pre">&lt;URL_GeoNature&gt;/#/synthese?id_dataset=2</span></code>) et ajout
d’un lien direct depuis le module Métadonnées (#889)</p></li>
<li><p>Synthèse : ajout de web service pour le calcul du nombre
d’observations par un paramètre donné (JDD, module, observateur),
et du calcul de la bounding-box par jeu de données</p></li>
<li><p>Synthese : ajout d’un filtre avancé <code class="docutils literal notranslate"><span class="pre">Possède</span> <span class="pre">médias</span></code></p></li>
<li><p>Exports au format SHP remplacés par défaut par le format GeoPackage
(GPKG) plus simple, plus léger, plus performant et unique. Les
exports SHP restent activables dans la configuration des modules
(#898)</p></li>
<li><p>Occtax : ajout du paramètre <code class="docutils literal notranslate"><span class="pre">DISPLAY_VERNACULAR_NAME</span></code> qui contrôle
l’affichage du nom vernaculaire vs nom complet sur les interfaces
(Defaut = true: afffiche le nom vernaculaire)</p></li>
<li><p>Validation : Préremplir l’email à l’observateur avec des
informations paramétrables sur l’occurrence (date, nom du taxon,
commune, médias) (#981)</p></li>
<li><p>Validation : Possibilité de paramètrer les colonnes affichées dans
la liste des observations (#980)</p></li>
<li><p>Possibilité de customiser le logo principal (GeoNature par défaut)
dans <code class="docutils literal notranslate"><span class="pre">frontend/src/custom/images/</span></code></p></li>
<li><p>Ajout d’un champs json <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">l_areas</span></code>
(#1111)</p></li>
<li><p>Complément des scripts de migration des données depuis GINCO
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/</span></code>)</p></li>
<li><p>Barre de navigation : Mention plus générique et générale des auteurs
et contributeurs</p></li>
<li><p>Redirection vers le formulaire d’authentification si on tente
d’accéder à une page directement sans être authentifié et sans
passer par le frontend (#1193)</p></li>
<li><p>Connexion à MTD : possibilité de filtrer les JDD par instance, avec
le paramètre <code class="docutils literal notranslate"><span class="pre">ID_INSTANCE_FILTER</span></code>, par exemple pour ne récupérer que
les JDD de sa région (#1195)</p></li>
<li><p>Connexion à MTD : récupération du créateur et des acteurs (#922,
#1008 et #1196)</p></li>
<li><p>Connexion à MTD : récupération du nouveau champs
<code class="docutils literal notranslate"><span class="pre">statutDonneesSource</span></code> pour indiquer si le JDD est d’origine
publique ou privée</p></li>
<li><p>Création d’une commande GeoNature permettant de récupérer les JDD,
CA et acteurs depuis le webservice MTD de l’INPN, en refactorisant
les outils existants d’import depuis ce webservice</p></li>
<li><p>Ajout de contraintes d’unicité sur certains champs des tables de
métadonnées et de la table des sources (#1215)</p></li>
<li><p>Création d’un script permettant de remplacer les règles de
sensibilité nationales et régionales, par les règles départementales
plus précises (<code class="docutils literal notranslate"><span class="pre">data/scripts/sensi/import_sensi_depobio.sh</span></code>),
uniquement utilisé pour DEPOBIO pour le moment, en attendant de
clarifier dans une prochaine release le fonctionnement que l’on
retient par défaut dans GeoNature (#413)</p></li>
<li><p>Création d’un script permettant d’importer les régions dans le
référentiel géographique (<code class="docutils literal notranslate"><span class="pre">data/migrations/insert_reg.sh</span></code>)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Occhab : Export SIG (GPKG ou SHP) corrigé (#898)</p></li>
<li><p>Meilleur nettoyage des sessions enregistrées dans le navigateur
(#1178)</p></li>
<li><p>Correction des droits CRUVED et de leur héritage (#1170)</p></li>
<li><p>Synthèse : Retour du bouton pour revenir à l’observation dans son
module d’origine (Occtax par exemple) depuis la fiche info d’une
observation (#1147)</p></li>
<li><p>Synthèse : Suppression du message « Aucun historique de validation »
quand une observation n’a pas encore de validation (#1147)</p></li>
<li><p>Synthèse : Correction du CRUVED sur le R = 1 (ajout des JDD de
l’utilisateur)</p></li>
<li><p>Synthèse : Correction de l’export des statuts basé sur une
recherche géographique (#1203)</p></li>
<li><p>Occtax : Correction de l’erreur de chargement de l’observateur
lors de la modification d’un relevé (#1177)</p></li>
<li><p>Occtax : Suppression de l’obligation de remplir les champs
« Déterminateur » et « Méthode de détermination »</p></li>
<li><p>Métadonnées : Suppression du graphique de répartition des espèces
dans les exports PDF car il était partiellement fonctionnel</p></li>
<li><p>Synthèse : Fonction <code class="docutils literal notranslate"><span class="pre">import_row_from_table</span></code>, test sur
<code class="docutils literal notranslate"><span class="pre">LOWER(tbl_name)</span></code></p></li>
<li><p>Redirection vers le formulaire d’authentification si l’on essaie
d’accéder à une URL sans être authentifié et sans passer par le
frontend (#1193)</p></li>
<li><p>Script d’installation globale : prise en compte du paramètre
<code class="docutils literal notranslate"><span class="pre">install_grid_layer</span></code> permettant d’intégrer ou non les mailles dans
le <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> lors de l’installation initiale (#1133)</p></li>
<li><p>Synthèse : Changement de la longueur du champs <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> de
la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> (de 255 à 5000 caractères)</p></li>
<li><p>Sensibilité : Corrections des contraintes NOT VALID (#1245)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter ensuite le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0.sql</a>)</p></li>
<li><p>Toutes les nouvelles données intégrées dans le Synthèse auront leur
niveau de sensibilité et de diffusion calculés automatiquement. Vous
pouvez ajouter ou désactiver des règles de sensibilité dans la table
<code class="docutils literal notranslate"><span class="pre">gn_sensivity.t_sensitivity_rules</span></code></p></li>
<li><p>Vous pouvez aussi exécuter le script qui va calculer automatiquement
le niveau de sensibilité et de diffusion de toutes les données déjà
présentes dans la Synthèse, éventuellement en l’adaptant à votre
contexte :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.5to2.6.0-update-sensitivity.sql</a></p></li>
<li><p>Mettez à jour de la longueur du champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese.reference_biblio</span></code> à 5000 charactères. Exécutez
la commande suivante dans la console :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">geonature2db</span> <span class="pre">-c</span> <span class="pre">&quot;UPDATE</span> <span class="pre">pg_attribute</span> <span class="pre">SET</span> <span class="pre">atttypmod</span> <span class="pre">=</span> <span class="pre">5004</span> <span class="pre">WHERE</span> <span class="pre">attrelid</span> <span class="pre">=</span> <span class="pre">'gn_synthese.synthese'::regclass</span> <span class="pre">AND</span> <span class="pre">attname</span> <span class="pre">=</span> <span class="pre">'reference_biblio';&quot;</span></code></p></li>
<li><p>Exécuter le script de mise à jour de la BDD du sous-module de
nomenclature :
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.4to1.3.5.sql</a></p></li>
<li><p>Suivez la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous utilisez Occtax-mobile, vous pouvez modifier la valeur du
nouveau paramètre <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters.occtaxmobile_area_type</span></code>
pour lui indiquer le code du type de zonage que vous utilisez pour
les unités géographiques (mailles de 5km par défaut)</p></li>
<li><p>Si vous disposez du module d’import, vous devez le mettre à jour en
version 1.1.1</p></li>
</ul>
</section>
<section id="id30">
<h2>2.5.5 (2020-11-19)<a class="headerlink" href="#id30" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout d’un composant fil d’ariane (#1143)</p></li>
<li><p>Ajout de la possiblité de désactiver les composants <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code> et
<code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code> (#1142)</p></li>
<li><p>Ajout de tests sur les routes pour assurer la compatibilité avec les
applications mobiles</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’un bug de récupération du CRUVED sur les modules
(#1146)</p></li>
<li><p>Correction des validateurs sur les preuves d’existence (#1134)</p></li>
<li><p>Correction de la récupération des dossiers dans <code class="docutils literal notranslate"><span class="pre">backend/static</span></code>
dans le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code></p></li>
<li><p>Correction de l’affichage de l’utilisateur dans la navbar
lorsqu’on est connecté via le CAS INPN</p></li>
</ul>
</section>
<section id="id31">
<h2>2.5.4 (2020-11-17)<a class="headerlink" href="#id31" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout de scripts <code class="docutils literal notranslate"><span class="pre">sql</span></code> et <code class="docutils literal notranslate"><span class="pre">sh</span></code> de restauration des medias dans
<code class="docutils literal notranslate"><span class="pre">data/medias</span></code> (#1148)</p></li>
<li><p>Ajout d’un service pour pouvoir récupérer les informations sur
l’utilisateur connecté</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction des médias qui sont actuellement tous supprimés
automatiquement après 24h, et non pas seulement ceux orphelins
(#1148)</p></li>
<li><p>Correction des permissions sur les fiches info des relevés dans
Occtax avec la désactivation du bouton de modification du relevé
quand l’utilisateur n’en a pas les droits</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous aviez associé des médias à des observations dans Occtax ou
autre et qu’ils ont été supprimés, vous pouvez les retrouver dans
la table d’historisation des actions
(<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">gn_commons.t_history_actions</span> <span class="pre">WHERE</span> <span class="pre">table_content-&gt;'id_media'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span> <span class="pre">AND</span> <span class="pre">operation_type</span> <span class="pre">=</span> <span class="pre">'D'</span></code>)</p></li>
<li><p>Pour restaurer les médias supprimés depuis la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_history_actions</span></code> vous pouvez :</p>
<ul>
<li><p>exécuter le script SQL <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sql</span></code> qui va
recréer les médias supprimés dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code></p></li>
<li><p>exécuter le script BASH <code class="docutils literal notranslate"><span class="pre">data/medias/restore_medias.sh</span></code>
(<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">/home/`whoami`/geonature/data/medias/restore_medias.sh</span></code>
en <code class="docutils literal notranslate"><span class="pre">sudo</span></code> si besoin) qui va renommer des fichiers supprimés en
supprimant le préfixe <code class="docutils literal notranslate"><span class="pre">deleted_</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id32">
<h2>2.5.3 (2020-11-04)<a class="headerlink" href="#id32" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Mise en place de l’héritage du CRUVED au niveau des objets des
modules (#1028)</p></li>
<li><p>Révision de l’export des observations de la Synthèse (noms plus
lisibles, ajout des communes et d’informations taxonomiques,
complément des champs existants (#755)</p></li>
<li><p>Ajout d’un paramètre permettant d’ajouter un message personnalisé
à la fin des emails (inscriptions, exports…) (#1050
par &#64;jpm-cbna)</p></li>
<li><p>Ajout d’une alerte de dépréciation sur les fonctions
<code class="docutils literal notranslate"><span class="pre">utils-sqlalchemy</span></code> présentes dans GeoNature</p></li>
<li><p>Ajout d’un widget de type « HTML » dans les formulaires dynamiques,
permettant d’ajouter des informations dans un formulaire (#1043 et
#1068 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilité d’ajouter un texte d’aide sur les champs
des formulaires dynamiques (#1065 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilité de définir un min et un max au composant
commun <code class="docutils literal notranslate"><span class="pre">date</span></code> (#1069 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilité de définir le nombre de lignes du composant
commun <code class="docutils literal notranslate"><span class="pre">textarea</span></code> (#1067 par &#64;jpm-cbna)</p></li>
<li><p>Ajout de la possibilité de contrôler par une expression régulière le
contenu d’un champs de type <code class="docutils literal notranslate"><span class="pre">text</span></code> des formulaires dynamiques
(#1073 par &#64;FlorentRICHARD44)</p></li>
<li><p>Ajout de la possibilité de masquer certains champs du composant
<code class="docutils literal notranslate"><span class="pre">media</span></code> (#1072, #1078 et #1083 par &#64;metourneau)</p></li>
<li><p>Ajout d’un spinner sur les statistiques de la page d’accueil
(#1086 par &#64;jpm-cbna)</p></li>
<li><p>Ajout d’un composant d’autocomplete multiselect <code class="docutils literal notranslate"><span class="pre">pnx-taxa</span></code>
permettant de rechercher des taxons dans tout l’arbre taxonomique
et de limiter la recherche à un rang</p></li>
<li><p>Possibilité d’ajouter plusieurs cartes sur la même page à l’aide
du composant <code class="docutils literal notranslate"><span class="pre">pnx-map</span></code></p></li>
<li><p>Homogénéisation du style du code et documentation des pratiques de
développement</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’affichage des noms des validateurs sur la liste
dans le module validation (#1091 par &#64;lpofredc)</p></li>
<li><p>Corrections mineures de l’export des observations de la Synthèse
(#1108)</p></li>
<li><p>Synthèse : Correction du masquage de la recherche par arbre
taxonomique (#1057 par &#64;jpm-cbna)</p></li>
<li><p>Ajout du champs <code class="docutils literal notranslate"><span class="pre">id_nomenclature_biogeo_status</span></code> dans la Synthese
(correspondance standard : statut biogéographique). La BDD est
remplie avec la valeur par défaut de la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.default_nomenclature_value</span></code> (valeur = non renseignée)</p></li>
<li><p>Accueil : Correction de l’affichage du nom du module (#1087)</p></li>
<li><p>Correction du trigger de mise à jour d’Occtax vers la Synthèse
(champs <code class="docutils literal notranslate"><span class="pre">the_geom_local</span></code> non mis à jour) (#1117 par &#64;jbrieuclp)</p></li>
<li><p>Correction du paramètre stockant la version de Taxref, passé à 13.0
pour les nouvelles installations (#1097 par &#64;RomainBaghi)</p></li>
<li><p>Correction de l’affichage en double des markers dans Leaflet.draw
(#1095 par &#64;FlorentRICHARD44)</p></li>
<li><p>Synthèse : Correction des filtres avancés par technique
d’observation et méthode de détermination (#1110 par &#64;jbrieuclp)</p></li>
<li><p>Recréation du fichier de configuration à chaque installation (#1074
par &#64;etot)</p></li>
<li><p>Annulation de l’insertion du module lorsqu’une erreur est levée à
l’installation d’un module</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Désormais les objets des modules (par exemple les objets
’Permissions’ et ’Nomenclatures’ du module ’ADMIN’) héritent
automatiquement des permissions définies au niveau du module parent
et à défaut au niveau de GeoNature (#1028). Il s’agit d’une
évolution de mise en cohérence puisque les modules héritaient déjà
des permissions de GeoNature, mais pas leurs objets. Si vous avez
défini des permissions particulières aux niveaux des objets,
vérifier leur cohérence avec le nouveau fonctionnement. NB : si vous
aviez mis des droits R=0 pour un groupe au module ’ADMIN’, les
utilisateurs de ce groupe ne pourront pas accéder aux sous-modules
’permissions’ et ’nomenclatures’.</p></li>
<li><p>Exécuter ensuite le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.2to2.5.3.sql</a>).
Attention, si vous avez customisé les vues des exports Occtax et
Synthèse, elles seront supprimées et recrées automatiquement par le
script SQL de mise à jour de la BDD de GeoNature pour intégrer leurs
évolutions réalisées dans cette nouvelle version. Révisez
éventuellement ces vues avant et/ou après la mise à jour.</p></li>
<li><p>Suivez la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
<li><p>Les noms de colonnes de l’export de la Synthèse ont été entièrement
revus dans la vue fournie par défaut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouché le
paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vérifiez les noms des colonnes.</p></li>
<li><p>Vérifiez que la valeur du paramètre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> correspond bien à votre version actuelle
de Taxref (11.0 ou 13.0).</p></li>
</ul>
</section>
<section id="id33">
<h2>2.5.2 (2020-10-13)<a class="headerlink" href="#id33" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Occtax : correction du problème d’installation du module dans le
fichier <code class="docutils literal notranslate"><span class="pre">schemas.py</span></code></p></li>
<li><p>Synthese : correction de la fonctions SQL
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table</span></code> et répercussion dans le fichier
<code class="docutils literal notranslate"><span class="pre">gn_synthese/process.py</span></code></p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter ensuite le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.5.1to2.5.2.sql</a>)</p></li>
</ul>
</section>
<section id="id34">
<h2>2.5.1 (2020-10-06)<a class="headerlink" href="#id34" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Ajout d’un paramètre <code class="docutils literal notranslate"><span class="pre">DISPLAY_EMAIL_INFO_OBS</span></code> définissant si les
adresses email des observateurs sont affichées ou non dans les
fiches info des observations des modules Synthèse et Validation
(#1066)</p></li>
<li><p>Occtax : correction de l’affichage du champs « Technique de
collecte Campanule » (#1059)</p></li>
<li><p>Occtax : correction du fichier d’exemple de configuration
<code class="docutils literal notranslate"><span class="pre">contrib/occtax/config/conf_gn_module.toml.example</span></code> (#1059)</p></li>
<li><p>Occtax : paramètre <code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> renommé
<code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> et désactivé par défaut (#1060)</p></li>
<li><p>Occtax : quand le paramètre <code class="docutils literal notranslate"><span class="pre">ENABLE_SETTINGS_TOOLS</span></code> est désactivé,
remise en place du fonctionnement de l’outil « Echainer les
relevés ». Dans ce cas, quand on enchaine les relevés, on conserve
le JDD, les observateurs, les dates et heures d’un relevé à
l’autre (#1060)</p></li>
<li><p>Occtax : correction de l’observateur par défaut en mode
<code class="docutils literal notranslate"><span class="pre">observers_as_txt</span></code></p></li>
<li><p>Verification des UUID : autoriser toutes les versions (#1063)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
</ul>
</section>
<section id="manidae-2020-09-30">
<h2>2.5.0 - Manidae (2020-09-30)<a class="headerlink" href="#manidae-2020-09-30" title="Lien vers cette rubrique">¶</a></h2>
<p>Occtax v2 et médias</p>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Refonte de l’ergonomie et du fonctionnement du module de saisie
Occtax (#758 et #860 par &#64;jbrieuclp et &#64;TheoLechemia)</p>
<ul>
<li><p>Enregistrement continu au fur et à mesure de la saisie d’un
relevé</p></li>
<li><p>Découpage en 2 onglets (Un pour le relevé et un onglet pour les
taxons)</p></li>
<li><p>Amélioration de la liste des taxons saisis sur un relevé (#635
et #682)</p></li>
<li><p>Amélioration de la saisie au clavier</p></li>
<li><p>Zoom réalisé dans la liste des relevé conservé quand on saisit
un nouveau relevé (#436 et #912)</p></li>
<li><p>Filtres conservés quand on revient à la liste des relevés
(#772)</p></li>
<li><p>Possibilité de conserver les informations saisies entre 2 taxons
ou relevés, désactivable avec le paramètre
<code class="docutils literal notranslate"><span class="pre">DISPLAY_SETTINGS_TOOLS</span></code> (#692)</p></li>
<li><p>Correction de la mise à jour des dates de début et de fin
(#977)</p></li>
<li><p>Affichage d’une alerte si on saisit 2 fois le même taxon sur un
même relevé</p></li>
<li><p>Fiche d’information d’un relevé complétée et mise à jour</p></li>
</ul>
</li>
<li><p>Passage de la version 1.2.1 à la version 2.0.0 du standard
Occurrences de taxon (dans les modules Occtax, Synthèse et
Validation) (#516)</p>
<ul>
<li><p>Ajout des champs « Comportement », « NomLieu », « Habitat »,
« Méthode de regroupement », « Type de regroupement » et
« Profondeur »</p></li>
<li><p>Ajout du champs « Précision » dans Occtax et suppression de sa
valeur par défaut à 100 m</p></li>
<li><p>Renommage du champs « Méthode d’observation » en « Technique
d’observation »</p></li>
<li><p>Suppression du champs « Technique d’observation » actuel de la
synthèse</p></li>
<li><p>Renommage du champs « Technique d’observation » actuel
d’Occtax en « Technique de collecte Campanule »</p></li>
<li><p>Ajout et mise à jour de quelques nomenclatures</p></li>
<li><p>Ajout d’un document de suivi de l’implémentation du standard
Occurrences de taxon dans GeoNature
(<code class="docutils literal notranslate"><span class="pre">docs/implementation_gn_standard_occtax2.0.ods</span></code>) (#516)</p></li>
</ul>
</li>
<li><p>Passage de la version 1.3.9 à la version 1.3.10 du standard de
Métadonnées. Mise à jour des nomenclatures « CA_OBJECTIFS » et mise
à jour des métadonnées existantes en conséquence
(par &#64;DonovanMaillard)</p></li>
<li><p>Ajout d’un champs <code class="docutils literal notranslate"><span class="pre">addtional_data</span></code> de type <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code>, en prévision de l’ajout des champs
additionnels dans Occtax et Synthèse (#1007)</p></li>
<li><p>Mise en place de la gestion transversale et générique des médias
(images, audios, vidéos, PDF…) dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_medias</span></code> et le
Dynamic-Form (#336) et implémentation dans le module Occtax
(désactivables avec le paramètre <code class="docutils literal notranslate"><span class="pre">ENABLE_MEDIAS</span></code>) (#620
par &#64;joelclems)</p></li>
<li><p>Mise en place de miniatures et d’aperçus des médias, ainsi que de
nombreux contrôles des fichiers et de leurs formats</p></li>
<li><p>Affichage des médias dans les fiches d’information des modules de
saisie, ainsi que dans les modules Synthèse et Validation</p></li>
<li><p>Ajout de la fonctionnalité « Mes lieux » (<code class="docutils literal notranslate"><span class="pre">gn_commons.t_places</span></code>),
permettant de stocker la géométrie de ieux individuels fréquemment
utilisés, implémentée dans le module cartographique d’Occtax
(désactivable avec le paramètre <code class="docutils literal notranslate"><span class="pre">ENABLE_MY_PLACES</span></code>) (#246
par &#64;metourneau)</p></li>
<li><p>Tri de l’ordre des modules dans le menu latéral par ordre
alphabétique par défaut et possibilité de les ordonner avec le
nouveau champs <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules.module_order</span></code> (#787
par &#64;alainlaupinmnhn)</p></li>
<li><p>Arrêt du support de l’installation packagée sur Debian 9 et Ubuntu
16 pour passer à Python version 3.6 et plus</p></li>
<li><p>Prise en charge de PostGIS 3 et notamment l’installation de
l’extension <code class="docutils literal notranslate"><span class="pre">postgis_raster</span></code> (#946 par &#64;jpm-cbna)</p></li>
<li><p>Création de compte : Envoi automatique d’un email à l’utilisateur
quand son compte est validé. Nécessite la version 2.1.3 de UsersHub
(#862 et #1035 par &#64;jpm-cbna)</p></li>
</ul>
<p><strong>Ajouts mineurs</strong></p>
<ul class="simple">
<li><p>Homogénéisation des styles des boutons (#1026)</p></li>
<li><p>Factorisation du code des fiches infos d’une observation dans les
modules Synthèse et Validation (#1053)</p></li>
<li><p>Métadonnées : Ajout d’un paramètre permettant de définir le nombre
de CA affichés sur la page (100 par défaut)</p></li>
<li><p>Métadonnées : Tri des CA et JDD par ordre alphabétique</p></li>
<li><p>Métadonnées : Ajout d’un champs <code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code> dans la table des CA
et des JDD, utilisé en plus des acteurs pour le CRUVED des JDD
(#921)</p></li>
<li><p>Dynamic-Form : Ajout d’un composant « select » prenant une API en
entrée (#1029)</p></li>
<li><p>Dynamic-Form : Ajout de la possibilité d’afficher une définition
d’un champs sous forme de tooltip</p></li>
<li><p>CAS INPN : Redirection vers la page de connexion de GeoNature quand
on se déconnecte</p></li>
<li><p>Ajout d’une contrainte d’unicité sur <code class="docutils literal notranslate"><span class="pre">schema_name</span></code> et <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
sur la table <code class="docutils literal notranslate"><span class="pre">gn_commons_bib_tables_location_unique</span></code> (#962)</p></li>
<li><p>Ajout d’une contrainte d’unicité sur <code class="docutils literal notranslate"><span class="pre">id_organism</span></code> et
<code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code> (#988)</p></li>
<li><p>Ajout de la possibilité de filtrer le composant <code class="docutils literal notranslate"><span class="pre">dataset</span></code> du
Dynamic-Form par <code class="docutils literal notranslate"><span class="pre">module_code</span></code> pour pouvoir choisir parmis les JDD
associées à un module (#964)</p></li>
<li><p>Mise à jour de <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> en version 2.8.5, sqlalchemy en 1.3.19,
marshmallow en 2.15.6, virtualenv en 20.0.31 (par &#64;jpm-cbna)</p></li>
<li><p>Mises à jour de sécurité diverses</p></li>
<li><p>Améliorations des scripts <code class="docutils literal notranslate"><span class="pre">install/install_db.sh</span></code> et
<code class="docutils literal notranslate"><span class="pre">install/install_app.sh</span></code> (par &#64;jpm-cbna)</p></li>
<li><p>Ajout de l’autocomplétion des commandes <code class="docutils literal notranslate"><span class="pre">geonature</span></code> (#999
par &#64;jpm-cbna)</p></li>
<li><p>Suppression du fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh.sample</span></code></p></li>
<li><p>Amélioration du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code> en vérifiant
la présence des dossiers optionnels avant de les copier</p></li>
<li><p>Amélioration des fonctions
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row_format_insert_data</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row</span></code> pour prendre en charge la génération
des geojson dans PostGIS 3</p></li>
<li><p>Documentation administrateur : Précisions sur les labels, pictos et
ordres des modules dans le menu de navigation latéral</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Module Validation : Affichage des commentaires du relevé et de
l’observation (#978 et #854)</p></li>
<li><p>Module Validation : Ne lister que les observations ayant un UUID et
vérification de sa validité (#936)</p></li>
<li><p>Module Validation : Correction et homogénéisation de l’affichage et
du tri des observations par date (#971)</p></li>
<li><p>Module Validation : Correction de l’affichage du statut de
validation après mise à jour dans la liste des observations (#831)</p></li>
<li><p>Module Validation : Correction de l’affichage du nom du validateur</p></li>
<li><p>Module Validation : Amélioration des performances avec l’ajout
d’un index sur le champs <code class="docutils literal notranslate"><span class="pre">uuid_attached_row</span></code> de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> (#923 par &#64;jbdesbas)</p></li>
<li><p>Suppression du trigger en double
<code class="docutils literal notranslate"><span class="pre">tri_insert_synthese_cor_role_releves_occtax</span></code> sur
<code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> (#762 par &#64;jbrieuclp)</p></li>
<li><p>Passage des requêtes d’export de la synthèse en POST plutôt qu’en
GET (#883)</p></li>
<li><p>Correction du traitement du paramètre <code class="docutils literal notranslate"><span class="pre">offset</span></code> de la route
<code class="docutils literal notranslate"><span class="pre">synthese/color_taxon</span></code> utilisé par Occtax-mobile (#994)</p></li>
<li><p>Correction et complément des scripts de migration de données depuis
GINCO v1 (<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco/occtax.sql</span></code>)</p></li>
<li><p>Import des utilisateurs depuis le CAS INPN : Activer les
utilisateurs importés par défaut et récupérer leur email</p></li>
<li><p>Calcul automatique de la sensibilité : Ajout de la récursivité dans
la récupération des critères de sensibilité au niveau de la fonction
<code class="docutils literal notranslate"><span class="pre">gn_sensitivity.get_id_nomenclature_sensitivity</span></code> (#284)</p></li>
<li><p>Typo sur le terme « Preuve d’existence » (par &#64;RomainBaghi)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Nomenclatures : Commencer par exécuter le script SQL de mise à jour
du schéma <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> de la BDD
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.3to1.3.4.sql</a>)</p></li>
<li><p>Exécuter ensuite le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.1to2.5.0.sql</a>).
Attention, si vous avez customisé les vues des exports Occtax et
Synthèse, elles seront supprimées et recrées automatiquement par le
script SQL de mise à jour de la BDD de GeoNature pour s’adapter aux
évolutions du standard Occtax en version 2.0.0. Révisez
éventuellement ces vues avant et/ou après la mise à jour. Le script
SQL de mise à jour vérifiera aussi si vous avez d’autres vues (dans
le module Export notamment) qui utilisent le champs
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> qui doit être renommé et
l’indiquera dès le début de l’exécution du script, en l’arrêtant
pour que vous puissiez modifier ou supprimer ces vues bloquant la
mise à jour.</p></li>
<li><p>Les colonnes de l’export de la Synthèse ont été partiellement revus
dans la vue fournie par défaut
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.v_synthese_for_export</span></code>). Si vous aviez surcouché le
paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_COLUMNS</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">config/geonature_config.toml</span></code>, vérifiez les noms des colonnes.</p></li>
<li><p>A partir la version 2.5.0 de GeoNature, la version 3.5 de Python
n’est plus supportée. Seules les versions 3.6 et + le sont. Si vous
êtes encore sur Debian 9 (fourni par défaut avec Python 3.5),
veuillez suivre les instructions de mise à jour de Python sur cette
version
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9">https://github.com/PnX-SI/GeoNature/blob/master/docs/installation-standalone.rst#python-37-sur-debian-9</a>).
Il est cependant plutôt conseillé de passer sur Debian 10 pour
rester à jour sur des versions maintenues</p></li>
<li><p>Suivez la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>A noter, quelques changements dans les paramètres du module Occtax.
Les paramètres d’affichage/masquage des champs du formulaire ont
évolué ainsi :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_meth</span></code> devient <code class="docutils literal notranslate"><span class="pre">obs_tech</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obs_technique</span></code> devient <code class="docutils literal notranslate"><span class="pre">tech_collect</span></code></p></li>
</ul>
</li>
<li><p>A noter aussi que cette version de GeoNature est compatible avec la
version 1.1.0 minimum d’Occtax-mobile (du fait de la mise du
standard Occurrence de taxons)</p></li>
</ul>
</section>
<section id="id35">
<h2>2.4.1 (2020-06-25)<a class="headerlink" href="#id35" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Occurrences sans géométrie précise : Ajout d’un champs
<code class="docutils literal notranslate"><span class="pre">id_area_attachment</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> permettant
d’associer une observation à un zonage dans le référentiel
géographique (<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas.id_area</span></code>) (#845 et #867)</p></li>
<li><p>Ajout d’un champs <code class="docutils literal notranslate"><span class="pre">geojson_4326</span></code> dans la table <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code>
pour pouvoir afficher les zonages du référentiel géographique sur
les cartes (#867)</p></li>
<li><p>Ajout de l’import par défaut des départements de France métropole
dans le référentiel géographique lors de l’installation de
GeoNature (en plus des actuelles communes et grilles)</p></li>
<li><p>Mise à jour des communes importées sur la version de février 2020
d’Admin express IGN pour les nouvelles installations</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’un bug d’affichage des fonds de carte WMTS de l’IGN,
apparu dans la version 2.4.0 avec l’ajout du support des fonds WMS
(#890)</p></li>
<li><p>Gestion des exceptions de type <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> lors de l’import
des commandes d’un module</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature :</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter le script SQL de mise à jour de la BDD de GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1.sql</a></p></li>
<li><p>Suivez la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Vous pouvez alors lancer le script d’insertion des départements de
France métropole dans le réferentiel géographique (optionnel) :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.4.0to2.4.1_insert_departments.sh</a>.
Vérifier le déroulement de l’import dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/insert_departements.log</span></code></p></li>
</ul>
</section>
<section id="fiches-de-metadonnees-2020-06-22">
<h2>2.4.0 - Fiches de métadonnées (2020-06-22)<a class="headerlink" href="#fiches-de-metadonnees-2020-06-22" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Métadonnées : Ajout d’une fiche pour chaque jeu de données et
cadres d’acquisition, incluant une carte de l’étendue des
observations et un graphique de répartition des taxons par Groupe
INPN (#846 par &#64;FloVollmer)</p></li>
<li><p>Métadonnées : Possibilité d’exporter les fiches des JDD et des CA
en PDF, générés par le serveur avec WeasyPrint. Logo et entêtes
modifiables dans le dossier <code class="docutils literal notranslate"><span class="pre">backend/static/images/</span></code> (#882
par &#64;FloVollmer)</p></li>
<li><p>Métadonnées : Implémentation du CRUVED sur la liste des CA et JDD
(#911)</p></li>
<li><p>Métadonnées : Affichage de tous les CA des JDD pour lequels
l’utilisateur connecté a des droits (#908)</p></li>
<li><p>Compatible avec TaxHub 1.7.0 qui inclut notamment la migration
(optionnelle) vers Taxref version 13</p></li>
<li><p>Installation globale migrée de Taxref version 11 à 13</p></li>
<li><p>Synthèse et zonages : Ne pas inclure l’association aux zonages
limitrophes d’une observation quand sa géométrie est égale à un
zonage (maille, commune…) (#716 par &#64;jbdesbas)</p></li>
<li><p>Synthèse : Ajout de la possibilité d’activer la recherche par
observateur à travers une liste, avec ajout des paramètres
<code class="docutils literal notranslate"><span class="pre">SEARCH_OBSERVER_WITH_LIST</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> par défaut) et
<code class="docutils literal notranslate"><span class="pre">ID_SEARCH_OBSERVER_LIST</span></code> (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synthèse : Amélioration de la recherche des observateurs. Non prise
en compte de l’ordre des noms saisis (#834 par &#64;jbrieuclp)</p></li>
<li><p>Synthèse : Ajout de filtres avancés (<code class="docutils literal notranslate"><span class="pre">Saisie</span> <span class="pre">par</span></code> basé sur
<code class="docutils literal notranslate"><span class="pre">id_digitiser</span></code>, <code class="docutils literal notranslate"><span class="pre">Commentaire</span></code> du relevé et de l’occurrence,
<code class="docutils literal notranslate"><span class="pre">Déterminateur</span></code>) (#834 par &#64;jbrieuclp)</p></li>
<li><p>Occtax : Création d’un trigger générique de calcul de l’altitude
qui n’est exécuté que si l’altitude n’est pas postée (#848)</p></li>
<li><p>Ajout d’une table <code class="docutils literal notranslate"><span class="pre">gn_commons.t_mobile_apps</span></code> permettant de lister
les applications mobiles, l’URL de leur APK et d’une API pour
interroger le contenu de cette table. Les fichiers des applications
et leurs fichiers de configurations peuvent être chargés dans le
dossier <code class="docutils literal notranslate"><span class="pre">backend/static/mobile</span></code> (#852)</p></li>
<li><p>Ajout d’un offset et d’une limite sur la route de la couleur des
taxons (utilisée uniquement par Occtax-mobile actuellement)</p></li>
<li><p>Support des fonds de carte au format WMS
(<a class="reference external" href="https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms">https://leafletjs.com/reference-1.6.0.html#tilelayer-wms-l-tilelayer-wms</a>),
(#890 par &#64;jbdesbas)</p></li>
<li><p>Ajout d’un champs texte <code class="docutils literal notranslate"><span class="pre">reference_biblio</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code></p></li>
<li><p>Amélioration des perfomances du module de validation, en revoyant la
vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_synthese_validation_forwebapp</span></code>, en revoyant les
requêtes et en générant le GeoJSON au niveau de la BDD (#923)</p></li>
<li><p>Ajout d’une fonction SQL d’insertion de données dans la synthese
(et une fonction python associée)</p></li>
<li><p>Compléments de la documentation (Permissions des utilisateurs,
Occhab…)</p></li>
<li><p>Ajout de scripts de migration des données de GINCO1 vers GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/scripts/import_ginco</span></code>)</p></li>
<li><p>Trigger Occtax vers Synthèse : Amélioration du formatage des heures
avec <code class="docutils literal notranslate"><span class="pre">date_trunc()</span></code> dans la fonction
<code class="docutils literal notranslate"><span class="pre">pr_occtax.insert_in_synthese()</span></code> (#896 par &#64;jbdesbas)</p></li>
<li><p>Barre de navigation : Clarification de l’icône d’ouverture du
menu, ajout d’un paramètre <code class="docutils literal notranslate"><span class="pre">LOGO_STRUCTURE_FILE</span></code> permettant de
changer le nom du fichier du logo de l’application (#897
par &#64;jbrieuclp)</p></li>
<li><p>Médias : Amélioration des fonctions backend</p></li>
<li><p>Mise à jour de jQuery en version 3.5.0</p></li>
<li><p>Suppression de la table <code class="docutils literal notranslate"><span class="pre">gn_synthese.taxons_synthese_autocomplete</span></code>
et du trigger sur la Synthèse qui la remplissait pour utiliser la
vue matérialisée <code class="docutils literal notranslate"><span class="pre">taxonomie.vm_taxref_list_forautocomplete</span></code> listant
les noms de recherche de tous les taxons de Taxref, entièrement
revue dans TaxHub 1.7.0</p></li>
<li><p>Monitoring : Correction du backend pour utiliser la nouvelle syntaxe
de jointure des tables</p></li>
<li><p>Ajout de fonctions SQL d’insertion de données dans la Synthèse
(<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_json_row()</span></code> et
<code class="docutils literal notranslate"><span class="pre">gn_synthese.import_row_from_table()</span></code>) et de la fonction Python
associée
(<code class="docutils literal notranslate"><span class="pre">import_from_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">field_name,</span> <span class="pre">value)</span></code>)
pour l’API permettant de poster dans la Synthèse (#736). Utilisée
par le module Monitoring.</p></li>
<li><p>Ajout du plugin Leaflet.Deflate (#934 par &#64;jpm-cbna)</p></li>
<li><p>Connexion au CAS INPN : Association des JDD aux modules Occtax et
Occhab (paramétrable) quand on importe les JDD de l’utilisateur qui
se connecte (dans la table <code class="docutils literal notranslate"><span class="pre">gn_commons.cor_module_dataset</span></code>)</p></li>
<li><p>Mise à jour des librairies Python Utils-Flask-SQLAlchemy (en version
0.1.1) et Utils-Flask-SQLAlchemy-Geo (en version 0.1.0) permettant
de mettre en place les exports au format GeoPackage et corrigeant
les exports de SHP contenant des géométries multiples</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Mise à jour des URL de la documentation utilisateur des modules,
renvoyant vers <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
<li><p>Validation : Correction de l’ouverture de la fiche d’information
d’une observation (#858)</p></li>
<li><p>Modification de l’attribution de la hauteur du composant
<code class="docutils literal notranslate"><span class="pre">map-container</span></code> pour permettre d’adapter la hauteur de la carte si
la hauteur d’un conteneur parent est modifié. Et que
<code class="docutils literal notranslate"><span class="pre">&lt;pnx-map</span> <span class="pre">height=&quot;100%&quot;&gt;</span></code> fonctionne (#844 par &#64;jbrieuclp)</p></li>
<li><p>Mise à jour de la librairie python Markupsafe en version 1.1,
corrigeant un problème de setuptools (#881)</p></li>
<li><p>Page Maintenance : Correction de l’affichage de l’image
(par &#64;jpm-cbna)</p></li>
<li><p>Correction du multiselect du composant <code class="docutils literal notranslate"><span class="pre">pnx-nomenclatures</span></code> (#885
par &#64;jpm-cbna)</p></li>
<li><p>Correction de l’<code class="docutils literal notranslate"><span class="pre">input('coordinates')</span></code> du composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> (#901
par &#64;jbrieuclp)</p></li>
<li><p>Utilisation de NVM quand on installe les dépendances javascript
(#926 par &#64;jpm-cbna)</p></li>
<li><p>Formulaire JDD : Correction de l’affichage de la liste des modules
(#861)</p></li>
<li><p>Correction de l’utilisation des paramètres du proxy (#944)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Si vous mettez à jour GeoNature.</p>
<ul>
<li><p>Vous devez d’abord mettre à jour TaxHub en version 1.7.0</p></li>
<li><p>Si vous mettez à jour TaxHub, vous pouvez mettre à jour Taxref en
version 13. Il est aussi possible de le faire en différé, plus tard</p></li>
<li><p>Vous pouvez mettre à jour UsersHub en version 2.1.2</p></li>
<li><p>Exécuter le script SQL de mise à jour des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update1.3.2to1.3.3.sql</a>).</p></li>
<li><p>Si vous avez mis à jour Taxref en version 13, répercutez les
évolutions au niveau des nomenclatures avec le script SQL
<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/master/data/update_taxref_v13.sql</a>.
Sinon vous devrez l’exécuter plus tard, après avoir mis à jour
Taxref en version 13. Après avoir mis à jour Taxref en version 13,
pensez à mettre à jour le paramètre <code class="docutils literal notranslate"><span class="pre">taxref_version</span></code> dans la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_parameters</span></code>.</p></li>
<li><p>Exécuter le script SQL de mise à jour de la BDD de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.3.2to2.4.0.sql</a>)</p></li>
<li><p>Installer les dépendances de la librairie Python WeasyPrint :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libcairo2
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpango-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libpangocairo-1.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libgdk-pixbuf2.0-0
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libffi-dev
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>shared-mime-info
</pre></div>
</div>
</li>
<li><p>Corriger l’utilisation des paramètres du proxy (#944) dans le
fichier <code class="docutils literal notranslate"><span class="pre">backend/gunicorn_start.sh</span></code> en remplaçant les 2 lignes :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
<p>par :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Activation de la configuration des proxy si necessaire</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_http</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_http</span><span class="s2">&#39;&quot;</span>
<span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$proxy_https</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&quot;&#39;</span><span class="nv">$proxy_https</span><span class="s2">&#39;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Vous pouvez supprimer les associations des observations de la
synthèse aux zonages limitrophes, si vous n’avez pas
d’observations sans géométrie (#719) :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">cor_area_synthese</span><span class="w"> </span><span class="n">cas</span>
<span class="k">USING</span><span class="w"> </span><span class="n">gn_synthese</span><span class="p">.</span><span class="n">synthese</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">ref_geo</span><span class="p">.</span><span class="n">l_areas</span><span class="w"> </span><span class="n">a</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">id_synthese</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">id_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cas</span><span class="p">.</span><span class="n">id_area</span>
<span class="k">AND</span><span class="w"> </span><span class="k">public</span><span class="p">.</span><span class="n">ST_TOUCHES</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">the_geom_local</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="id36">
<h2>2.3.2 (2020-02-24)<a class="headerlink" href="#id36" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Possibilité de charger les commandes d’un module dans les commandes
de GeoNature</p></li>
<li><p>Ajout de commentaires dans le fichier d’exemple de configuration
<code class="docutils literal notranslate"><span class="pre">config/default_config.toml.example</span></code></p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’une incohérence dans le décompte des JDD sur la page
d’accueil en leur appliquant le CRUVED (#752)</p></li>
<li><p>Montée de version de la librairie <code class="docutils literal notranslate"><span class="pre">utils-flask-sqlalchemy-geo</span></code> pour
compatibilité avec la version 1.0.0 du module d’export</p></li>
</ul>
</section>
<section id="id37">
<h2>2.3.1 (2020-02-18)<a class="headerlink" href="#id37" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Installation globale : Compatibilité Debian 10 (PostgreSQL 11,
PostGIS 2.5)</p></li>
<li><p>Installation globale : Passage à Taxhub 1.6.4 et UsersHub 2.1.1</p></li>
<li><p>Utilisation généralisée des nouvelles librairies externalisées de
sérialisation (<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>)</p></li>
<li><p>Possibilité de régler le timeout de Gunicorn pour éviter le plantage
lors de requêtes longues</p></li>
<li><p>Ne pas zoomer sur les observations au premier chargement de la carte
(#838)</p></li>
<li><p>Leaflet-draw : Ajout de la possibilité de zoomer sur le point
(par &#64;joelclems)</p></li>
<li><p>Ajout du nom vernaculaire dans les fiches d’information des relevés
d’Occtax (par &#64;FloVollmer / #826)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’installation de Node.js et npm par l’utilisation
généralisée de nvm (#832 et #837)</p></li>
<li><p>Fixation de la version de Node.js en 10.15.3 (dans le fichier
<code class="docutils literal notranslate"><span class="pre">fronted/.nvmrc</span></code>)</p></li>
<li><p>Ajout d’une référence de l’objet Leaflet <code class="docutils literal notranslate"><span class="pre">L</span></code> afin qu’il soit
utilisé dans les modules et changement du typage de l’évenement
Leaflet <code class="docutils literal notranslate"><span class="pre">MouseEvent</span></code> en <code class="docutils literal notranslate"><span class="pre">L.LeafletMouseEvent</span></code></p></li>
<li><p>Fixation de la version de vitualenv en 20.0.1 (par &#64;sogalgeeko)</p></li>
<li><p>Corrections de typos dans la documentation d’administration
(#840 - par &#64;sogalgeeko)</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement à cette version depuis la 2.2.x, mais
en suivant les notes des versions intermédiaires (NB : il n’est pas
nécessaire d’exécuter le script <code class="docutils literal notranslate"><span class="pre">migrate.sh</span></code> des versions
précédentes)</p></li>
<li><p>Installez <code class="docutils literal notranslate"><span class="pre">pip3</span></code> et <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install python3-pip
sudo pip3 install virtualenv==20.0.1
</pre></div>
</div>
</li>
<li><p>Rajoutez la ligne <code class="docutils literal notranslate"><span class="pre">gun_timeout=30</span></code> au fichier <code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>
puis rechargez supervisor (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code>). Il s’agit
du temps maximal (en seconde) autorisé pour chaque requête. A
augmenter, si vous avez déjà rencontré des problèmes de timeout.</p></li>
<li><p>Depuis le répertoire <code class="docutils literal notranslate"><span class="pre">frontend</span></code>, lancez la commande <code class="docutils literal notranslate"><span class="pre">nvm</span> <span class="pre">install</span></code></p></li>
</ul>
</section>
<section id="occhab-de-noel-2019-12-27">
<h2>2.3.0 - Occhab de Noël (2019-12-27)<a class="headerlink" href="#occhab-de-noel-2019-12-27" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Développement du module Occhab (Occurrences d’habitats) basé sur
une version minimale du standard SINP du même nom et s’appuyant sur
le référentiel Habref du SINP (#735)</p>
<ul>
<li><p>Consultation (carte-liste) des stations et affichage de leurs
habitats</p></li>
<li><p>Recherche (et export) des stations par jeu de données, habitats
ou dates</p></li>
<li><p>Saisie d’une station et de ses habitats</p></li>
<li><p>Possibilité de saisir plusieurs habitats par station</p></li>
<li><p>Saisie des habitats basée sur une liste pré-définie à partir
d’Habref. Possibilité d’intégrer toutes les typologies
d’habitat ou de faire des listes réduites d’habitats</p></li>
<li><p>Possibilité de charger un fichier GeoJson, KML ou GPX sur la
carte et d’utiliser un de ses objets comme géométrie de station</p></li>
<li><p>Mise en place d’une API Occhab (Get, Post, Delete, Export
stations et habitats et récupérer les valeurs par défaut des
nomenclatures)</p></li>
<li><p>Calcul automatique des altitudes (min/max) et de la surface
d’une station</p></li>
<li><p>Gestion des droits (en fonction du CRUVED de l’utilisateur
connecté)</p></li>
<li><p>Définition des valeurs par défaut dans la BDD (paramétrable par
organisme)</p></li>
<li><p>Possibilité de masquer des champs du formulaire</p></li>
</ul>
</li>
<li><p>Création d’un sous-module autonome ou intégré pour gérer l’API
d’Habref (<a class="reference external" href="https://github.com/PnX-SI/Habref-api-module">https://github.com/PnX-SI/Habref-api-module</a>) pour :</p>
<ul>
<li><p>Rechercher un habitat dans Habref (avec usage du trigramme pour
la pertinence du résultat)</p></li>
<li><p>Obtenir les infos d’un habitat et de ses correspondances à
partir de son cd_hab</p></li>
<li><p>Obtenir les habitats d’une liste (avec ou sans leur code en
plus de leur nom et filtrable par typologie)</p></li>
<li><p>Obtenir la liste des typologies (filtrable par liste
d’habitats)</p></li>
</ul>
</li>
<li><p>Mise à jour du module des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>) en version
1.3.2 incluant notamment :</p>
<ul>
<li><p>Ajout de nomenclatures SINP concernant les habitats</p></li>
<li><p>Ajout d’une contrainte d’unicité sur la combinaison des champs
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> et <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code> de la table <code class="docutils literal notranslate"><span class="pre">t_nomenclatures</span></code></p></li>
</ul>
</li>
<li><p>Association des JDD à des modules pour filtrer les JDD utilisés dans
Occtax ou dans Occhab notamment (#399)</p></li>
<li><p>Mise à jour de Angular 4 à Angular 7 (performances, ….) par
&#64;jbrieuclp</p></li>
<li><p>Ajout d’une documentation utilisateur pour le module Synthèse :
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>
(par &#64;amandine-sahl)</p></li>
<li><p>OCCTAX : Amélioration importante des performances de la liste des
relevés (par &#64;jbrieuclp) (#690, #740)</p></li>
<li><p>Améliorations des performances des exports de Occtax et de Synthèse
et ajout d’index dans Occtax (par &#64;gildeluermoz) (#560)</p></li>
<li><p>Partage de scripts de sauvegarde de l’application et de la BDD dans
<code class="docutils literal notranslate"><span class="pre">data/scripts/backup/</span></code> (par &#64;gildeluermoz)</p></li>
<li><p>Externalisation des librairies d’outils Flask et SQLAlchemy
(<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy</a> et
<a class="reference external" href="https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo">https://github.com/PnX-SI/Utils-Flask-SQLAlchemy-Geo</a>) pour pouvoir
les factoriser et les utiliser dans d’autres applications. Cela
améliore aussi les performances des jointures.</p></li>
<li><p>SYNTHESE : Ajout d’un export de la liste des espèces (#805)</p></li>
<li><p>SYNTHESE : Baser la portée de tous les exports (y compris Statuts)
sur l’action E (#804)</p></li>
<li><p>METADONNEES : Affichage des ID des JDD et CA</p></li>
<li><p>OCCTAX : Conserver le fichier GPX ou GeoJSON chargé sur la carte
quand on enchaine des relevés et ajouter de la transparence sur les
géométries utilisés dans les relevés précédents (#813)</p></li>
<li><p>OCCTAX : Clarification de l’ergonomie pour ajouter un dénombrement
sur un taxon (#780)</p></li>
<li><p>Ajout des dates de creation et de modification dans les tables
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> et
triggers pour les calculer automatiquement</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">geom_local</span></code>, <code class="docutils literal notranslate"><span class="pre">altitude_min</span></code> et <code class="docutils literal notranslate"><span class="pre">altitude_max</span></code> dans
la table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_sites</span></code> et triggers pour les calculer
automatiquement (#812)</p></li>
<li><p>Ajout des champs <code class="docutils literal notranslate"><span class="pre">id_dataset</span></code>, <code class="docutils literal notranslate"><span class="pre">id_module</span></code>,
<code class="docutils literal notranslate"><span class="pre">id_nomenclature_obs_technique</span></code> et <code class="docutils literal notranslate"><span class="pre">id_nomenclature_grp_typ</span></code> dans la
table <code class="docutils literal notranslate"><span class="pre">gn_monitoring.t_base_visits</span></code> (#812)</p></li>
<li><p>Le composant générique FileLayer expose un <code class="docutils literal notranslate"><span class="pre">output</span></code> pour récuperer
la géométrie sélectionnée (un observable de MapService était utilisé
auparavant)</p></li>
<li><p>Support des markers sur le composant <code class="docutils literal notranslate"><span class="pre">leaflet-draw</span></code></p></li>
<li><p>Possibilité de ne pas activer le composant <code class="docutils literal notranslate"><span class="pre">marker</span></code> au lancement
lorsque celui-ci est utilisé (input <code class="docutils literal notranslate"><span class="pre">defaultEnable</span></code>)</p></li>
<li><p>Ajout d’inputs <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">medias</span></code> et <code class="docutils literal notranslate"><span class="pre">datalist</span></code> au
composant DynamicForm permettant de générer des formulaires
dynamiques.</p></li>
<li><p>Améliorations diverses du composant DynamicForm (par &#64;joelclems)</p></li>
<li><p>Ajout d’un paramètre dans le cas où le serveur se trouve derrière
un proxy (<code class="docutils literal notranslate"><span class="pre">proxy_http</span></code> ou dans <code class="docutils literal notranslate"><span class="pre">proxy_https</span></code> dans
<code class="docutils literal notranslate"><span class="pre">config/settings.ini</span></code>)</p></li>
<li><p>Ajout d’une route permettant de récupérer la liste des rôles d’une
liste à partir de son code (par &#64;joelclems)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>MENU Side nav : Correction pour ne pas afficher les modules pour
lesquels le paramètre <code class="docutils literal notranslate"><span class="pre">active_frontend</span></code> est False (#822)</p></li>
<li><p>OCCTAX : Gestion de l’édition des occurrences où le JDD a été
désactivé, en ne permettant pas de modifier le JDD (#694)</p></li>
<li><p>OCCTAX : Correction d’une faiblesse lors de la récupération des
informations taxonomiques d’un relevé (utilisation d’une jointure
plutôt que l’API TaxHub) (#751)</p></li>
<li><p>OCCTAX : Correction des longues listes de taxons dans les tooltip
des relevés en y ajoutant un scroll (par &#64;jbrieuclp) (#666)</p></li>
<li><p>OCCTAX : Masquer le bouton <code class="docutils literal notranslate"><span class="pre">Télécharger</span></code> si l’utilisateur n’a pas
de droits d’export dans le module (E = 0)</p></li>
<li><p>OCCTAX : Correction de l’affichage des relevés dans la liste
(#777)</p></li>
<li><p>OCCTAX : Correction des exports quand on filtre sur un obervateur en
texte</p></li>
<li><p>SYNTHESE : Filtre sur <code class="docutils literal notranslate"><span class="pre">date_max</span></code> en prenant <code class="docutils literal notranslate"><span class="pre">date_max</span> <span class="pre">&lt;=</span> <span class="pre">23:59:59</span></code>
pour prendre en compte les observations avec un horaire (#778)</p></li>
<li><p>SYNTHESE : Correction des boutons radios pour les filtres
taxonomiques avancés basés sur les attributs TaxHub (#763)</p></li>
<li><p>SYNTHESE : Correction de la recherche par <code class="docutils literal notranslate"><span class="pre">cd_nom</span></code> dans le composant
<code class="docutils literal notranslate"><span class="pre">SearchTaxon</span></code> (#824)</p></li>
<li><p>VALIDATION : Corrections mineures (par &#64;jbrieuclp) (#715)</p></li>
<li><p>INSCRIPTION : Correction si aucun champ additionnel n’a été ajouté
au formulaire (par &#64;jbrieuclp) (#746)</p></li>
<li><p>INSCRIPTION : Correction de l’usage des paramètres <code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code>
et <code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code> (#791)</p></li>
<li><p>Simplification de l’écriture des logs dans le script
<code class="docutils literal notranslate"><span class="pre">install_db.sh</span></code></p></li>
<li><p>Correction de l’installation des requirements.txt lors de
l’installation d’un module (#764 par &#64;joelclems)</p></li>
<li><p>COMMONS : Modification des champs de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code> de type
CHARACTER(n) en CHARACTER VARYING(n) (<code class="docutils literal notranslate"><span class="pre">module_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">module_target</span></code>, <code class="docutils literal notranslate"><span class="pre">module_external_url</span></code>) (#799)</p></li>
<li><p>COMMONS : Ajout de contraintes d’unicité pour les champs
<code class="docutils literal notranslate"><span class="pre">module_path</span></code> et <code class="docutils literal notranslate"><span class="pre">module_code</span></code> de <code class="docutils literal notranslate"><span class="pre">t_modules</span></code></p></li>
<li><p>pnx-geojson : Amélioration du zoom, gestion des styles</p></li>
<li><p>Migration des données GeoNature V1 vers V2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2/</span></code>) : ajustements mineurs</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>NB: La version 2.3.0 n’est pas compatible avec le module Dashboard. Si
vous avez le module Dashboard installé, ne passez pas à cette nouvelle
version. Compatibilité dans la 2.3.1.</p>
<ul>
<li><p>Lancer le script de migration qui va installer et remplir le nouveau
schéma <code class="docutils literal notranslate"><span class="pre">ref_habitats</span></code> avec Habref et mettre à jour le schéma
<code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/install/migration
chmod<span class="w"> </span>+x<span class="w"> </span><span class="m">2</span>.2.1to2.3.0.sh
./2.2.1to2.3.0.sh
</pre></div>
</div>
</li>
</ul>
<p>Vérifier que la migration s’est bien déroulée dans le fichier
<code class="docutils literal notranslate"><span class="pre">var/log/2.2.1to2.3.0.log</span></code>.</p>
<ul>
<li><p>Lancer le script SQL de mise à jour de la BDD de GeoNature
<a class="reference external" href="https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql">https://raw.githubusercontent.com/PnX-SI/GeoNature/2.3.0/data/migrations/2.2.1to2.3.0.sql</a></p></li>
<li><p>Vous pouvez installer le nouveau module Occhab (Occurrences
d’habitats) si vous le souhaitez :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/backend
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
geonature<span class="w"> </span>install_gn_module<span class="w"> </span>/home/<span class="sb">`</span>whoami<span class="sb">`</span>/geonature/contrib/gn_module_occhab<span class="w"> </span>/occhab
deactivate
</pre></div>
</div>
</li>
<li><p>Lors de la migration (<code class="docutils literal notranslate"><span class="pre">/data/migrations/2.2.1to2.3.0.sql</span></code>), tous les
JDD actifs sont associés par défaut au module Occtax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.2.1to2.3.0.sql#L17-L22</a>).
A chacun d’adapter si besoin, en en retirant certains. Pour
utiliser le module Occhab, vous devez y associer au moins un JDD.</p></li>
</ul>
</section>
<section id="id38">
<h2>2.2.1 (2019-10-09)<a class="headerlink" href="#id38" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>La route de changement de mot de passe était désactivée par le
mauvais paramètre (<code class="docutils literal notranslate"><span class="pre">ENABLE_SIGN_UP</span></code> au lieu de
<code class="docutils literal notranslate"><span class="pre">ENABLE_USER_MANAGEMENT</span></code>)</p></li>
<li><p>Désactivation du mode « enchainement des relevés » en mode édition
(#669). Correction effacement du même relevé (#744)</p></li>
<li><p>Correction d’affichage du module métadonnées lorsque les AF n’ont
pas de JDD pour des raisons de droit (#743)</p></li>
<li><p>Diverses corrections de doublons d’import et de logs de débugs
(#742)</p></li>
<li><p>Montée de version du sous-module d’authentification: 1.4.2</p></li>
</ul>
</section>
<section id="module-utilisateurs-2019-09-18">
<h2>2.2.0 - Module utilisateurs (2019-09-18)<a class="headerlink" href="#module-utilisateurs-2019-09-18" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout d’interfaces et de paramètres de création de compte, de
récupération de son mot de passe et d’administration de son profil,
basé sur l’API UsersHub 2.1.0 (par &#64;jbrieuclp et &#64;TheoLechemia)
#615</p></li>
<li><p>Ajout d’une fonctionnalité de création automatique d’un CA et
d’un JDD personnel lors de la validation d’un compte créé
automatiquement (paramétrable)</p></li>
<li><p>Amélioration du composant de création dynamique de formulaire
(support de text-area, checkbox simple et multiple et exemple
d’utilisation à partir de la conf GeoNature)</p></li>
<li><p>Le composant ’observateur’ permet de rechercher sur le nom ou le
prénom (utilisation des RegEx) #567</p></li>
<li><p>Mise à jour de Flask en version 1.1.1</p></li>
<li><p>Nouvelle version du sous-module d’authentification (1.4.1),
compatible avec UsersHub 2.1.0</p></li>
<li><p>Mise à jour du sous-module de nomenclatures (version 1.3.0)</p></li>
<li><p>Mise à jour et clarification du MCD
(<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#base-de-donnees">http://docs.geonature.fr/admin-manual.html#base-de-donnees</a>) par
&#64;jpm-cbna</p></li>
<li><p>Ajout d’une tutoriel vidéo d’installation dans la documentation
(<a class="reference external" href="https://www.youtube.com/watch?v=JYgH7cV9AjE">https://www.youtube.com/watch?v=JYgH7cV9AjE</a>, par &#64;olivier8064)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Correction d’un bug sur les export CSV en utilisant la librairie
Python standard <code class="docutils literal notranslate"><span class="pre">csv</span></code> (#733)</p></li>
<li><p>SYNTHESE API : Passage de la route principale de récupération des
données en POST plutôt qu’en GET (#704)</p></li>
<li><p>SYNTHESE BDD : Suppression automatique des aires intersectées
(<code class="docutils literal notranslate"><span class="pre">synthese.cor_area_synthese</span></code>) lorsqu’une observation est supprimée
(DELETE CASCADE)</p></li>
<li><p>SYNTHESE : Prise en compte du paramètre <code class="docutils literal notranslate"><span class="pre">EXPORT_ID_SYNTHESE_COL</span></code>
(#707)</p></li>
<li><p>OCCTAX : Correction d’une autocomplétion automatique erronée de la
date max en mode édition (#706)</p></li>
<li><p>VALIDATION : Améliorations des performances, par &#64;jbrieuclp (#710)</p></li>
<li><p>Prise en compte des sous-taxons pour le calcul des règles de
sensibilité</p></li>
<li><p>Correction des contraintes CHECK sur les tables liées à la
sensibilité</p></li>
<li><p>Complément et correction des scripts de migration
<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
<li><p>Correction et clarification de la documentation d’administration
des listes de taxons et de sauvegarde et restauration de la BDD
(par &#64;lpofredc)</p></li>
<li><p>Correction de la rotation des logs</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer le script de migration suivant:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.1.2to2.2.0.sql</a></p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Si vous souhaitez activer les fonctionnalités de création de compte,
veuillez lire <strong>attentivement</strong> cette documentation :
<a class="reference external" href="http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte">http://docs.geonature.fr/admin-manual.html#configuration-de-la-creation-de-compte</a></p></li>
<li><p>Si vous activez la création de compte, UsersHub 2.1.0 doit être
installé. Voir sa <a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">note de
version</a>.</p></li>
</ul>
</section>
<section id="id39">
<h2>2.1.2 (2019-07-25)<a class="headerlink" href="#id39" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>SYNTHESE : Correction d’une URL en dur pour la recherche de rangs
taxonomiques</p></li>
<li><p>OCCTAX : Affichage uniquement des JDD actifs</p></li>
<li><p>VALIDATION : Abaissement de la limite d’affichage de données sur la
carte par défaut + message indicatif</p></li>
<li><p>Migration : Suppression d’un lien symbolique qui créait des liens
en cascade</p></li>
<li><p>Amélioration de la documentation (&#64;dthonon)</p></li>
<li><p>Amélioration de la rapidité d’installation du MNT grâce à la
suppression d’un paramètre inutile</p></li>
<li><p>BACKOFFICE : Correction d’une URL incorrecte et customisation</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<p>Ceci est une version corrective mineure. Si vous migrez depuis la 2.1.0,
passez directement à cette version en suivant les notes de version de la
2.1.1.</p>
</section>
<section id="id40">
<h2>2.1.1 (2019-07-18)<a class="headerlink" href="#id40" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>SYNTHESE: Factorisation du formulaire de recherche (utilisé dans le
module synthese et validation)</p></li>
<li><p>SYNTHESE: Simplification et correction du module de recherche
avancée d’un taxon en le limitant à l’ordre (performances)</p></li>
<li><p>SYNTHESE: Ajout d’un composant de recherche taxonomique avancé basé
sur les rangs taxonomiques (modules synthese et validation), basé
sur la nouvelle fonction <code class="docutils literal notranslate"><span class="pre">taxonomie.find_all_taxons_children</span></code>
ajoutée à TaxHub</p></li>
<li><p>Création d’un backoffice d’admnistration dans le coeur de
GeoNature. Basé sur Flask-admin, les modules peuvent alimenter
dynamiquement le backoffice avec leur configuration</p></li>
<li><p>Mise en place d’une documentation développeur automatique de l’API
à partir des docstring et des composants frontend, générée par
Travis et désormais accessible à l’adresse
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a> (#673)</p></li>
<li><p>Amélioration de la documentation (triggers, installation, module
validation)</p></li>
<li><p>Suppression du module d’exemple, remplacé par un template de module
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_template">https://github.com/PnX-SI/gn_module_template</a>)</p></li>
<li><p>Ajout d’un champ <code class="docutils literal notranslate"><span class="pre">validable</span></code> sur la table <code class="docutils literal notranslate"><span class="pre">gn_meta.t_datasets</span></code>
controlant les données présentes dans le module VALIDATION
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/31">https://github.com/PnX-SI/gn_module_validation/issues/31</a>)</p></li>
<li><p>VALIDATION: Lister toutes les données de la synthèse ayant un
<code class="docutils literal notranslate"><span class="pre">uuid_sinp</span></code> dans le module validation, et plus seulement celles qui
ont un enregistrement dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code></p></li>
<li><p>VALIDATION: On ne liste plus les <code class="docutils literal notranslate"><span class="pre">id_nomenclatures</span></code> des types de
validation à utiliser, dans la configuration du module. Mais on
utilise toutes les nomenclatures activées du type de nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_VALID</span></code>.
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/30">https://github.com/PnX-SI/gn_module_validation/issues/30</a>)</p></li>
<li><p>Ajout de tests sur les ajouts de JDD et CA</p></li>
<li><p>Ajout d’une fonctionnalité d’envoie d’email via Flask-Mail dans
le coeur de GeoNature</p></li>
<li><p>Amélioration des performances: ajout d’index sur Occtax et
Metadonnées</p></li>
<li><p>Script d’import des métadonnées à partir du webservice MTD de
l’INPN (&#64;DonovanMaillard)</p></li>
<li><p>Complément, correction et compatibilité 2.1.0 des scripts de
migration <code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code></p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Nombreuses corrections du module de validation (non utilisation des
id_nomenclature, simplification des vues et de la table
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code>)</p></li>
<li><p>Ordonnancement de listes déroulantes (#685)</p></li>
<li><p>OCCTAX : correction de l’édition d’un relevé à la géométrie de
type Polyline (#684)</p></li>
<li><p>OCCTAX : correction l’édition et du contrôle conditionnel des
champs de « preuves » (preuve d’existence numérique / non
numérique) (#679)</p></li>
<li><p>OCCTAX : correction du parametre <code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span></code> non pris en
compte (#670)</p></li>
<li><p>OCCTAX: correction de la date_max non remplie lorsque
<code class="docutils literal notranslate"><span class="pre">DATE_FORM_WITH_TODAY</span> <span class="pre">=</span> <span class="pre">false</span></code></p></li>
<li><p>OCCTAX: correction d’un bug lors de l’enchainement de relevé
lorsque l’heure est remplie</p></li>
<li><p>SYNTHESE: correction des doublons lorsqu’il y a plusieurs
observateurs</p></li>
<li><p>Correction du composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> sur les champs de recherche de
type texte (recherche sur Preuve numérique) (#530)</p></li>
<li><p>Désactivation du mode « enchainer les relevés » en mode édition
(#699)</p></li>
<li><p>Correction de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> : utiliser <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code> à la
place de <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code> pour associer des sites de
suivi à des modules</p></li>
<li><p>Fix de SQLalchemy 1.3.3 et jointure sur objet Table</p></li>
<li><p>Le trigger remplissant <code class="docutils literal notranslate"><span class="pre">cor_area_synthese</span></code> en intersectant
<code class="docutils literal notranslate"><span class="pre">gn_synthese.synthese</span></code> avec <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> ne prend plus que les
zonages ayant le champs <code class="docutils literal notranslate"><span class="pre">enabled=true</span></code></p></li>
<li><p>Correction <code class="docutils literal notranslate"><span class="pre">dict()</span></code> et version de Python (par &#64;jpm-cbna)</p></li>
<li><p>MAJ de sécurité de Bootstrap (en version 4.3.1)</p></li>
<li><p>L’ancien module export du coeur est enlevé en vue de la sortie du
nouveau module export</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Passer TaxHub en version 1.6.3
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3">https://github.com/PnX-SI/TaxHub/releases/tag/1.6.3</a>)</p></li>
<li><p>Passer le script de migration <code class="docutils literal notranslate"><span class="pre">data/2.1.0to2.1.1.sql</span></code></p></li>
<li><p>Si vous aviez modifier les <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> dans la surcouche de la
configuration du module validation, supprimer les car on se base
maintenant sur les <code class="docutils literal notranslate"><span class="pre">cd_nomenclature</span></code></p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Nouvelle localisation de la doc : <a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
</section>
<section id="module-validation-2019-06-01">
<h2>2.1.0 - Module validation (2019-06-01)<a class="headerlink" href="#module-validation-2019-06-01" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Intégration du module Validation dans GeoNature (développé par
&#64;JulienCorny, financé par &#64;sig-pnrnm)</p></li>
<li><p>Ajout de tables, règles et fonctions permettant de calculer la
sensibilité des occurrences de taxon de la synthèse (#284)</p></li>
<li><p>Occtax - Possibilité d’enchainer les saisies de relevés et de
garder les informations du relevé (#633)</p></li>
<li><p>Occtax - Amélioration de l’ergonomie de l’interface MapList pour
clarifier la recherche et l’ajout d’un relevé + ajout compteur
(#467)</p></li>
<li><p>Révision de l’interface du module Métadonnées, listant les cadres
d’acquisition et leurs jeux de données (par &#64;jbrieuclp)</p></li>
<li><p>Ajout d’un mécanisme du calcul des taxons observés par zonage
géographique (#617)</p></li>
<li><p>Les mailles INPN (1, 5, 10km) sont intégrées à l’installation (avec
un paramètre)</p></li>
<li><p>Statistiques de la page d’accueil - Ajout d’un paramètre
permettant de les désactiver (#599)</p></li>
<li><p>Occtax - Date par défaut paramétrable (#351)</p></li>
<li><p>Support des géometries multiples (MultiPoint, MultiPolygone,
MultiLigne) dans la synthèse et Occtax (#609)</p></li>
<li><p>Synthese - Affichage des zonages intersectés dans un onglet séparé
(#579)</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Révision complète des scripts de migration de GeoNature v1 à v2
(<code class="docutils literal notranslate"><span class="pre">data/migrations/v1tov2</span></code>)</p></li>
<li><p>Masquer l’export du module Synthèse si son CRUVED est défini à 0
(#608)</p></li>
<li><p>Correction de la vérification du CRUVED du module METADONNEES
(#601)</p></li>
<li><p>Correction de la vérification du CRUVED lorsque get_role = False</p></li>
<li><p>Correction de la traduction sur la page de connexion
(par &#64;jbrieuclp)</p></li>
<li><p>Occtax - Retour du composant GPS permettant de charger un marker à
partir de coordonnées X et Y (#624)</p></li>
<li><p>Correction lors d’import de fichier GPX ayant une altitude (#631)</p></li>
<li><p>Occtax - Correction du filtre Observateur texte libre (#598)</p></li>
<li><p>Métadonnées - Inversion des domaines terrestre/marin
(par &#64;xavyeah39)</p></li>
<li><p>Métadonnées - Correction de l’édition des cadres d’acquisition
(#654, par &#64;DonovanMaillard)</p></li>
<li><p>Mise à jour de sécurité de Jinja2 et SQLAlchemy</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement à cette version, mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Lancer le script de migration de la base de données :</p>
<p>Cette nouvelle version de GeoNature intègre les mailles INPN (1, 5,
10km) dans le réferentiel géographique. Si vous ne souhaitez pas les
installer, lancer le script ci dessous en passant le paramètre
<code class="docutils literal notranslate"><span class="pre">no-grid</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/data/migrations
# avec les mailles
./2.0.1to2.1.0.sh
# sans les mailles:
# ./2.0.1to2.1.0.sh no-grid
</pre></div>
</div>
</li>
<li><p>Installer le module VALIDATION si vous le souhaitez :</p>
<p>Se placer dans le virtualenv de GeoNature</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd /home/`whoami`/geonature/backend
source venv/bin/activate
</pre></div>
</div>
<p>Lancer la commande d’installation du module puis sortir du
virtualenv</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>geonature install_gn_module /home/`whoami`/geonature/contrib/gn_module_validation/ /validation
deactivate
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id41">
<h2>2.0.1 (2019-03-18)<a class="headerlink" href="#id41" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>🚀 Nouveautés</strong></p>
<ul class="simple">
<li><p>Développement : ajout d’une fonction de génération dynamique de
requête SQL (avec vérification et cast des types)</p></li>
<li><p>Synthese : Ajout d’un message indiquant que le module affiche les
dernières observations par défaut</p></li>
</ul>
<p><strong>🐛 Corrections</strong></p>
<ul class="simple">
<li><p>Synthese : correction du filtre CRUVED pour les portées 1 et 2 sur
la route <code class="docutils literal notranslate"><span class="pre">synthese/for_web</span></code> (#584)</p></li>
<li><p>Synthese : correction du bug lorsque la géométrie est null (#580)</p></li>
<li><p>Synthese : Correction de la redirection vers le module de saisie
(#586)</p></li>
<li><p>Synthese : Correction de la valeur par défaut de la nomenclature
<code class="docutils literal notranslate"><span class="pre">STATUT_OBS</span></code> (<code class="docutils literal notranslate"><span class="pre">Présent</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">NSP</span></code>)</p></li>
<li><p>Configuration carto : correction du bug d’arrondissement des
coordonnées géographiques (#582)</p></li>
<li><p>Correction du trigger de calcul de la geom locale</p></li>
<li><p>Recréation de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.export_occtax_sinp</span></code> qui avait été
supprimée lors de la migration RC3 vers RC4</p></li>
<li><p>Correction de la vue <code class="docutils literal notranslate"><span class="pre">pr_occtax.v_releve_list</span></code></p></li>
<li><p>Correction ajout rang et cd_nom sur l’autocomplete de la synthese,
absent dans le script de migration</p></li>
<li><p>DEPOBIO : Correction de la déconnexion au CAS INPN</p></li>
<li><p>Occtax et Metadata: correction lors de la mise à jour d’un élement
(Merge mal géré par SQLAlchemy lorsqu’on n’a pas une valeur NULL)
(#588)</p></li>
<li><p>Composant « jeu de données » : retour à l’affichage du nom long
(#583)</p></li>
<li><p>Amélioration du style du composant multiselect</p></li>
<li><p>Metadata : formulaire cadre d’acquisition - listage uniquement des
cadres d’acquisition parent pour ne pas avoir de cadres
d’acquisition imbriqués</p></li>
<li><p>Ajouts de tests automatisés complémentaires</p></li>
</ul>
<p><strong>⚠️ Notes de version</strong></p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version, mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécuter le script de migration SQL du sous-module Nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.4/data/update1.2.3to1.2.4.sql</a>)</p></li>
<li><p>Exécuter le script de migration SQL de GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql">https://github.com/PnX-SI/GeoNature/blob/master/data/migrations/2.0.0to2.0.1.sql</a>)</p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="la-refonte-2019-02-28">
<h2>2.0.0 - La refonte (2019-02-28)<a class="headerlink" href="#la-refonte-2019-02-28" title="Lien vers cette rubrique">¶</a></h2>
<p>La version 2 de GeoNature est une refonte complète de l’application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers à
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l’architecture du code pour rendre GeoNature plus
générique et modulaire</p></li>
<li><p>Refonte de la base de données pour la rendre plus standardisée, plus
générique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l’application</p></li>
</ul>
<p>Pour plus de détails sur les évolutions apportées dans la version 2,
consultez les détails des versions RC (Release Candidate) ci-dessous.</p>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Possibilité de charger un fichier (GPX, GeoJson ou KML) sur la carte
pour la saisie dans le module Occtax (#256)</p></li>
<li><p>Ajout d’un moteur de recherche de lieu (basé sur l’API
OpenStreetMap Nominatim) sur les modules cartographiques (#476)</p></li>
<li><p>Intégration du plugin leaflet markerCluster permettant d’afficher
d’avantage d’observations sur les cartes et de gérer leurs
superposition (#559)</p></li>
<li><p>Synthèse : possibilité de grouper plusieurs types de zonages dans le
composant <code class="docutils literal notranslate"><span class="pre">pnx-areas</span></code></p></li>
<li><p>Design de la page de login</p></li>
<li><p>Intégration d’un bloc stat sur la page d’accueil</p></li>
<li><p>Ajout d’un export des métadonnées dans la synthèse</p></li>
<li><p>Centralisation de la configuration cartographique dans la
configuration globale de GeoNature (<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>)</p></li>
<li><p>Cartographie : zoom sur l’emprise des résultats après une recherche</p></li>
<li><p>Migration de la gestion des métadonnées dans un module à part :
’METADATA’ (#550)</p></li>
<li><p>Export vue synthèse customisable (voir doc)</p></li>
<li><p>Lien vers doc par module (customisables dans <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>)
(#556)</p></li>
<li><p>Ajout du code du département dans les filtres par commune (#555)</p></li>
<li><p>Ajout du rang taxonomique et du cd_nom après les noms de taxons
dans la recherche taxonomique (#549)</p></li>
<li><p>Mise à jour des communes fournies lors de l’installation (IGN admin
express 2019) (#537)</p></li>
<li><p>Synthèse : Ajout du filtre par organisme (#531), affichage des
acteurs dans les fiches détail et les exports</p></li>
<li><p>Synthese: possibilité de filtrer dans les listes déroulantes des
jeux de données et cadres d’acquisition</p></li>
<li><p>Filtre de la recherche taxonomique par règne et groupe INPN retiré
des formulaires de recherche (#531)</p></li>
<li><p>Suppression du champ validation dans le schéma de BDD Occtax car
cette information est stockée dans la table verticale
<code class="docutils literal notranslate"><span class="pre">gn_commons.t_validations</span></code> + affichage du statut de validation dans
les fiches Occtax et Synthèse</p></li>
<li><p>Ajout d’une vue <code class="docutils literal notranslate"><span class="pre">gn_commons.v_lastest_validation</span></code> pour faciliter la
récupération du dernier statut de validation d’une observation</p></li>
<li><p>Suppression de toutes les références à <code class="docutils literal notranslate"><span class="pre">taxonomie.bib_noms</span></code> en vue
de le supprimer de TaxHub</p></li>
<li><p>Séparation des commentaires sur l’observation et sur le contexte
(relevé) dans la Synthèse et simplification des triggers de Occtax
vers Synthèse (#478)</p></li>
<li><p>Nouveau logo GeoNature (#346)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Améliorations importantes des performances de la synthèse (#560)</p></li>
<li><p>Synthèse : correction liée aux filtres multiples et aux filtres
géographiques de type cercle</p></li>
<li><p>Ajout d’une contrainte <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> entre
<code class="docutils literal notranslate"><span class="pre">ref_geo.li_municialities</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code> (#554)</p></li>
<li><p>Occtax : possibilité de saisir un dénombrement égal à 0 (cas des
occurrences d’absence)</p></li>
<li><p>Occtax : retour à l’emprise cartographique précédente lorsqu’on
enchaine les relevés (#570)</p></li>
<li><p>Occtax : correction de l’automplissage du champ <code class="docutils literal notranslate"><span class="pre">hour_max</span></code> lors de
l’édition d’un relevé</p></li>
<li><p>Divers compléments de la documentation (merci &#64;jbdesbas,
&#64;xavyeah39 et &#64;DonovanMaillard)</p></li>
<li><p>Ajout de contraintes d’unicité sur les UUID_SINP pour empêcher les
doublons (#536)</p></li>
<li><p>Corrections et compléments des tests automatiques</p></li>
<li><p>Amélioration de l’installation des modules GeoNature</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s’agit pas de mettre à jour GeoNature mais d’en installer une
nouvelle version. En effet, il s’agit d’une refonte complète.</p>
<ul class="simple">
<li><p>Sauvegarder toutes ses données car l’opération est complexe et
non-automatisée</p></li>
<li><p>Passer à la dernière version 1 de GeoNature (1.9.1)</p></li>
<li><p>Passer aux dernières versions de UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complète</p></li>
<li><p>Adaptez les scripts présents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
exécutez-les pas à pas. Attention ces scripts ont été faits pour la
version 2.0.0-rc.1 et sont donc à ajuster, tester, compléter et
adapter à votre contexte</p></li>
</ul>
<p><strong>2.</strong> Pour les utilisateurs utilisant une version RC de GeoNature 2 :</p>
<p>Veuillez bien lire ces quelques consignes avant de vous lancer dans la
migration.</p>
<ul class="simple">
<li><p>Vous pouvez passer directement à cette version, mais en suivant les
notes des versions intermédiaires.</p></li>
<li><p>Les personnes ayant configuré leur fichier <code class="docutils literal notranslate"><span class="pre">map.config.ts</span></code> devront
le répercuter dans <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>, suite à la
centralisation de la configuration cartographique (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section <code class="docutils literal notranslate"><span class="pre">[MAPCONFIG]</span></code>).</p></li>
<li><p>La configuration des exports du module synthèse a été modifiée (voir
<a class="reference external" href="http://docs.geonature.fr/user-manual.html#synthese">http://docs.geonature.fr/user-manual.html#synthese</a>). Supprimer la
variable<code class="docutils literal notranslate"><span class="pre">[SYNTHESE.EXPORT_COLUMNS]</span></code> dans le fichier
<code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>. Voir l’exemple dans le fichier (voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example">https://github.com/PnX-SI/GeoNature/blob/2.0.0/config/default_config.toml.example</a>
section) pour configurer les exports.</p></li>
<li><p>Supprimer la variable <code class="docutils literal notranslate"><span class="pre">COLUMNS_API_SYNTHESE_WEB_APP</span></code> si elle a été
ajoutée dans le fichier <code class="docutils literal notranslate"><span class="pre">geonature_config.toml</span></code>.</p></li>
<li><p>Pour simplifier son édition, le template personalisable de la page
d’accueil
(<code class="docutils literal notranslate"><span class="pre">frontend/src/custom/components/introduction/introduction.component.html</span></code>)
a été modifié (la carte des 100 dernière observations n’y figure
plus). Veuillez supprimer tout ce qui se situe à partir de la ligne
21 (<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;row</span> <span class="pre">row-0&quot;&gt;</span></code>) dans ce fichier.</p></li>
<li><p>Exécuter le script de migration SQL:
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql">https://github.com/PnX-SI/GeoNature/blob/2.0.0/data/migrations/2.0.0rc4.2to2.0.0.sql</a>.</p></li>
<li><p>Le backoffice de gestion des métadonnées est dorénavant un module
GeoNature à part. Le script migration précédemment lancé prévoit de
mettre un CRUVED au groupe_admin et groupe_en_poste pour le
nouveau module METADATA. Les groupes nouvellement créés par les
administrateurs et n’ayant de CRUVED pour l’objet METADATA (du
module Admin), se retrouvent avec le CRUVED hérité de GeoNature.
L’administrateur devra changer lui-même le CRUVED de ces groupes
pour le nouveau module METADATA via le backoffice des permissions.</p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>).</p></li>
</ul>
</section>
<section id="rc-4-2-2019-01-23">
<h2>2.0.0-rc.4.2 (2019-01-23)<a class="headerlink" href="#rc-4-2-2019-01-23" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Mise en place de logs rotatifs pour éviter de surcharger le serveur</p></li>
<li><p>Centralisation des logs applicatifs dans le dossier
<code class="docutils literal notranslate"><span class="pre">var/log/gn_errors.log</span></code> de GeoNature</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Synthèse - Correction et amélioration de la gestion des dates
(#540)</p></li>
<li><p>Amélioration des tests automatisés</p></li>
<li><p>Correction et complément ds scripts d’installation des modules
GeoNature</p></li>
<li><p>Remplacement de <code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> par
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code></p></li>
<li><p>Complément des documentations de customisation, d’administration et
de développement</p></li>
<li><p>Ajout d’une documentation de migration de données Serena vers
GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/serena</a>)
par &#64;xavyeah39</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul>
<li><p>Vous pouvez passer directement à cette version, mais en suivant les
notes des versions intermédiaires</p></li>
<li><p>Exécutez la mise à jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>)</p></li>
<li><p>Depuis la version 2.0.0-rc.4, on ne stocke plus les modules de
GeoNature dans <code class="docutils literal notranslate"><span class="pre">utilisateurs.t_applications</span></code>. On ne peut donc plus
associer les sites de suivi de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> à des applications,
utilisé par les modules de suivi (Flore, habitat, chiro). Le
mécanisme est remplacé par une association des sites de suivi aux
modules. La création de la nouvelle table est automatisée
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc4.1to2.0.0rc4.2.sql</span></code>), mais pas la
migration des éventuelles données existantes de
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_application</span></code> vers
<code class="docutils literal notranslate"><span class="pre">gn_monitoring.cor_site_module</span></code>, à faire manuellement.</p></li>
<li><p>Afin que les logs de l’application soient tous écrits au même
endroit, modifier le fichier <code class="docutils literal notranslate"><span class="pre">geonature-service.conf</span></code>
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/supervisor/conf.d/geonature-service.conf</span></code>). A la
ligne <code class="docutils literal notranslate"><span class="pre">stdout_logfile</span></code>, remplacer la ligne existante par
<code class="docutils literal notranslate"><span class="pre">stdout_logfile</span> <span class="pre">=</span> <span class="pre">/home/&lt;MON_USER&gt;/geonature/var/log/gn_errors.log</span></code>
(en remplaçant &lt;MON_USER&gt; par votre utilisateur linux).</p></li>
<li><p>Vous pouvez également mettre en place un système de logs rotatifs
(système permettant d’archiver les fichiers de logs afin qu’ils ne
surchargent pas le serveur - conseillé si votre serveur a une
capacité disque limitée). Créer le fichier suivant
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/logrotate.d/geonature</span></code> puis copiez les lignes
suivantes dans le fichier nouvellement créé (en remplaçant
&lt;MON_USER&gt; par votre utilisateur linux)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/&lt;MON_USER&gt;/geonature/var/log/*.log {
daily
rotate 8
size 100M
create
compress
}
</pre></div>
</div>
<p>Exécutez ensuite la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">logrotate</span> <span class="pre">-f</span> <span class="pre">/etc/logrotate.conf</span></code></p>
</li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
</section>
<section id="rc-4-1-2019-01-21">
<h2>2.0.0-rc.4.1 (2019-01-21)<a class="headerlink" href="#rc-4-1-2019-01-21" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Mise à jour des paquets du frontend (#538)</p></li>
<li><p>Correction d’un conflit entre Marker et Leaflet-draw</p></li>
<li><p>Utilisation du paramètre <code class="docutils literal notranslate"><span class="pre">ID_APP</span></code> au niveau de l’application</p></li>
<li><p>Corrections mineures diverses</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Sortie de versions correctives de UsersHub (2.0.2 -
<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) et TaxHub (1.6.1 -
<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) à appliquer aussi</p></li>
<li><p>Vous pouvez vous référer à la documentation globale de mise à jour
de GeoNature RC3 vers RC4 par &#64;DonovanMaillard
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst">https://github.com/PnX-SI/GeoNature/blob/master/docs/update-all-RC3-to-RC4.rst</a>)</p></li>
</ul>
</section>
<section id="rc-4-2019-01-15">
<h2>2.0.0-rc.4 (2019-01-15)<a class="headerlink" href="#rc-4-2019-01-15" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Intégration de la gestion des permissions (CRUVED) dans la BDD de
GeoNature, géré via une interface d’administration dédié (#517)</p></li>
<li><p>Mise en place d’un système de permissions plus fin par module et
par objet (#517)</p></li>
<li><p>Mise en place d’un mécanimse générique pour la gestion des
permissions via des filtres : filtre de type portée (SCOPE),
taxonomique, géographique etc… (#517)</p></li>
<li><p>Compatibilité avec UsersHub version 2</p></li>
<li><p>L’administration des permissions ne propose que les rôles qui sont
actif et qui ont un profil dans GeoNature</p></li>
<li><p>Ajout du composant Leaflet.FileLayer dans le module Synthèse pour
pouvoir charger un GeoJSON, un GPS ou KML sur la carte comme
géométrie de recherche (#256)</p></li>
<li><p>Ajout et utilisation de l’extension PostgreSQL <code class="docutils literal notranslate"><span class="pre">pg_tgrm</span></code> permettant
d’améliorer l’API d’autocomplétion de taxon dans la synthèse, en
utilisant l’algorithme des trigrammes
(<a class="reference external" href="http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html">http://si.ecrins-parcnational.com/blog/2019-01-fuzzy-search-taxons.html</a>),
fonctionnel aussi dans les autres modules si vous mettez à jour
TaxHub en version 1.6.0.</p></li>
<li><p>Nouvel exemple d’import de données historiques vers GeoNature V2 :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql">https://github.com/PnX-SI/Ressources-techniques/blob/master/GeoNature/V2/2018-12-csv-vers-synthese-FLAVIA.sql</a>
(par &#64;DonovanMaillard)</p></li>
<li><p>Complément de la documentation HTTPS et ajout d’une documentation
Apache (par &#64;DonovanMaillard, &#64;RomainBaghi et &#64;lpofredc)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de l’id_digitiser lors de la mise à jour (#481)</p></li>
<li><p>Corrections multiples de la prise en compte du CRUVED (#496)</p></li>
<li><p>Deconnexion apres inactivité de l’utilisateur (#490)</p></li>
<li><p>Suppression des heures au niveau des dates de l’export occtax
(#485)</p></li>
<li><p>Correction du message d’erreur quand on n’a pas de JDD (#479)</p></li>
<li><p>Correction du champs commentaire dans les exports d’Occtax séparé
entre relevé et occurrence (#478)</p></li>
<li><p>Correction des paramètres de la fonction
<code class="docutils literal notranslate"><span class="pre">GenericQuery.build_query_filter()</span></code> (par &#64;patkap)</p></li>
<li><p>Correction de l’administration des métadonnées (#466 #420)</p></li>
<li><p>Métadonnées (JDD et CA) : ne pas afficher les utilisateurs qui sont
des groupes dans les acteurs</p></li>
<li><p>Ajout d’un champs dans la Synthèse permettant de stocker de quel
module provient une occurrence et fonctions SQL associées (#412)</p></li>
<li><p>Amélioration du style des champs obligatoires</p></li>
<li><p>Améliorations mineures de l’ergonomie d’Occtax</p></li>
<li><p>Correction du spinner qui tournait en boucle lors de l’export CSV
de la Synthèse (#451)</p></li>
<li><p>Correction des tests automatisés</p></li>
<li><p>Amélioration des performances des intersections avec les zonages de
<code class="docutils literal notranslate"><span class="pre">ref_geo.l_areas</span></code></p></li>
<li><p>Complément de la documentation de développement</p></li>
<li><p>Simplification de la configuration des gn_modules</p></li>
<li><p>Occtax : ordonnancement des observation par date (#467)</p></li>
<li><p>Occtax : Remplissage automatique de l’heure_max à partir de
l’heure_min (#522)</p></li>
<li><p>Suppression des warnings lors du build du frontend</p></li>
<li><p>Correction de l’installation des modules GeoNature</p></li>
<li><p>Ajout d’un message quand on n’a pas accès à une donnée d’un
module</p></li>
<li><p>Affichage du nom du module dans le Header (#398)</p></li>
<li><p>Correction des outils cartographiques dans Occtax</p></li>
<li><p>Correction complémentaire des styles des lignes sans remplissage
(#458)</p></li>
<li><p>MaplistService : correction du zoom sur les polygones et polylignes</p></li>
<li><p>Composant Areas et Municipalities : remise à zéro de la liste
déroulante quand on efface la recherche ou remet à jour les filtres</p></li>
<li><p>Composant Taxonomy : la recherche autocompletée est lancée même si
on tape plus de 20 caractères. Le nombre de résultat renvoyé est
désormais paramétrable (#518)</p></li>
<li><p>Limitation du nombre de connexions à la BDD en partageant
l’instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> avec les sous-modules</p></li>
<li><p>Installation : utilisation d’un répertoire <code class="docutils literal notranslate"><span class="pre">tmp</span></code> local et non plus
au niveau système pour limiter les problèmes de droits (#503)</p></li>
<li><p>Evolution du template d’exemple de module GeoNature
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example">https://github.com/PnX-SI/GeoNature/tree/master/contrib/module_example</a>)
pour utiliser l’instance DB et utiliser les nouveaux décorateurs de
permissions (CRUVED)</p></li>
</ul>
<p><strong>Note de version</strong></p>
<ul class="simple">
<li><p>Si vous effectuez une migration de GeoNature RC3 vers cette nouvelle
version, il est nécessaire d’avoir installé UsersHub version 2.x au
préalable. Suivez donc sa documentation
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/releases">https://github.com/PnX-SI/UsersHub/releases</a>) avant de procéder à
la montée de version de GeoNature.</p></li>
<li><p>Exécuter la commande suivante pour ajouter l’extension <code class="docutils literal notranslate"><span class="pre">pg_trgm</span></code>,
en remplaçant la variable <code class="docutils literal notranslate"><span class="pre">$db_name</span></code> par le nom de votre BDD :
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-n</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">-s</span> <span class="pre">psql</span> <span class="pre">-d</span> <span class="pre">$db_name</span> <span class="pre">-c</span> <span class="pre">&quot;CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">pg_trgm;&quot;</span></code></p></li>
<li><p>Mettez à jour TaxHub en version 1.6.0 pour bénéficier de
l’amélioration de la recherche taxonomique dans tous les modules</p></li>
<li><p>Exécutez la mise à jour de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc3.1-to-2.0.0rc4.sql</span></code>)</p></li>
<li><p>Suivez ensuite la procédure classique de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Note développeurs</strong></p>
<ul class="simple">
<li><p>Vous pouvez faire évoluer les modules GeoNature en utilisant
l’instance <code class="docutils literal notranslate"><span class="pre">DB</span></code> de GeoNature pour lancer les scripts
d’installation (#498)</p></li>
<li><p>Il n’est plus nécéssaire de définir un <code class="docutils literal notranslate"><span class="pre">id_application</span></code> dans la
configuration des modules GeoNature.</p></li>
<li><p>La gestion des permissions a été revue et est désormais internalisée
dans GeoNature (voir
<a class="reference external" href="http://docs.geonature.fr/development.html#developpement-backend">http://docs.geonature.fr/development.html#developpement-backend</a>),
il est donc necessaire d’utiliser les nouveaux décorateurs décrit
dans la doc pour récupérer le CRUVED.</p></li>
</ul>
</section>
<section id="rc-3-1-2018-10-21">
<h2>2.0.0-rc.3.1 (2018-10-21)<a class="headerlink" href="#rc-3-1-2018-10-21" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">ìnstall_all.sh</span></code> au niveau de la génération de
la configuration Apache de TaxHub et UsersHub (#493)</p></li>
<li><p>Suppression du Servername dans la configuration Apache de TaxHub du
script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
<li><p>Complément de la documentation de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Si vous migrez depuis une version 2.0.0-rc.2, installez directement
cette version corrective plutôt que la 2.0.0-rc.3, mais en suivant
les notes de versions de la 2.0.0-rc.3</p></li>
<li><p>Pour mettre en place la redirection de TaxHub sans <code class="docutils literal notranslate"><span class="pre">/</span></code>, consultez sa
documentation
<a class="reference external" href="https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache">https://taxhub.readthedocs.io/fr/latest/installation.html#configuration-apache</a></p></li>
<li><p>Le script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> actuel ne semble pas fonctionner sur
Debian 8, problème de version de PostGIS qui ne s’installe pas
correctement</p></li>
</ul>
</section>
<section id="rc-3-2018-10-18">
<h2>2.0.0-rc.3 (2018-10-18)<a class="headerlink" href="#rc-3-2018-10-18" title="Lien vers cette rubrique">¶</a></h2>
<ul class="simple">
<li><p>Possibilité d’utiliser le MNT en raster ou en vecteur dans la BDD
(+ doc MNT) #439 (merci &#64;mathieubossaert)</p></li>
<li><p>INSTALL_ALL - gestion du format date du serveur PostgreSQL (#435)</p></li>
<li><p>INSTALL_ALL - Amélioration de la conf Apache de TaxHub pour gérer
son URL sans <code class="docutils literal notranslate"><span class="pre">/</span></code> à la fin</p></li>
<li><p>Dessin cartographique d’une autre couleur (rouge) que les
observations (bleu)</p></li>
<li><p>Occtax : retour au zoom précédent lors de l’enchainement de relevé
(#436)</p></li>
<li><p>Occtax : observateur rempli par défaut avec l’utilisateur connecté
(#438)</p></li>
<li><p>Prise en compte des géométries nulles dans la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Gestion plus complète des données exemple intégrées ou non lors de
l’installation (#446)</p></li>
<li><p>Complément des différentes documentations</p></li>
<li><p>Complément FAQ (#441)</p></li>
<li><p>Documentation de la customisation (merci &#64;DonovanMaillard)</p></li>
<li><p>Amélioration de l’architecture du gn_module d’exemple</p></li>
<li><p>Clarification de la configuration des gn_modules</p></li>
<li><p>Lire le fichier <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> pour l’afficher dans l’interface (#421)</p></li>
<li><p>Utilisation de la vue <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et non plus
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> par défaut pour les exports Occtax (#462)</p></li>
<li><p>Complément et correction des vues <code class="docutils literal notranslate"><span class="pre">export_occtax_sinp</span></code> et
<code class="docutils literal notranslate"><span class="pre">export_occtax_dlb</span></code> (#462)</p></li>
<li><p>Mise à jour de Marshmallow (2.5.0 =&gt; 2.5.1)</p></li>
<li><p>Améliorations des routes de <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de la configuration
des modules de suivi pour pouvoir utiliser le nom d’une application
plutôt que son identifiant</p></li>
<li><p>Export Synthèse - Remplacement de la barre de téléchargement par un
spinner (#451)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Doc Import niveau 2 : Corrections et compléments</p></li>
<li><p>Correction du trigger Occtax &gt; Synthèse qui met à jour le champs
<code class="docutils literal notranslate"><span class="pre">gn_synthese.observers_txt</span></code> et les commentaires (#448 et #459)</p></li>
<li><p>Correction et amélioration de la fonction <code class="docutils literal notranslate"><span class="pre">install_gn_module</span></code></p></li>
<li><p>Correction coquille dans le modèle <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et la fonction
<code class="docutils literal notranslate"><span class="pre">serializegeofn</span></code></p></li>
<li><p>Installation uniquement sur un environnement 64 bits
(documentation + vérification) #442 (merci &#64;jbrieuclp
et &#64;sig-pnrnm)</p></li>
<li><p>Correction et découpage des scripts de mise à jour de la BDD depuis
la version Beta5</p></li>
<li><p>Correction de l’édition des date_debut et date_fin de Occtax
(#457)</p></li>
<li><p>Correction des exports depuis la Synthèse et intégration de la
géométrie des observations (#461 et #456)</p></li>
<li><p>Ne pas remplir <code class="docutils literal notranslate"><span class="pre">pr_occtax.cor_role_releves_occtax</span></code> si
<code class="docutils literal notranslate"><span class="pre">observers_txt</span> <span class="pre">=</span> <span class="pre">true</span></code> (#463)</p></li>
<li><p>Edition d’un relevé Occtax - Ne pas recalculer l’altitude
existante (#424)</p></li>
<li><p>Correction de l’activation du formulaire Occtax après localisation
du relevé (#469 et #471)</p></li>
<li><p>Carte - Enlever le remplissage des lignes (#458)</p></li>
<li><p>Amélioration du script de mise à jour de GeoNature
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) (#465)</p></li>
<li><p>Suppression d’un doublon dans le modèle de <code class="docutils literal notranslate"><span class="pre">gn_commons.t_modules</span></code>
(merci &#64;lpofredc)</p></li>
</ul>
<p><strong>Autres</strong></p>
<ul class="simple">
<li><p>Mise à jour de TaxHub (Doc utilisateur, configuration Apache, script
d’import des médias depuis API INPN Taxref et remise à zéro des
séquences)</p></li>
<li><p>Script de migration des données SICEN (ObsOcc) vers GeoNature :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/sicen</a></p></li>
<li><p>Script d’import continu depuis une BDD externe vivante (avec
exemple SICEN) :
<a class="reference external" href="https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic">https://github.com/PnX-SI/Ressources-techniques/tree/master/GeoNature/migration/generic</a></p></li>
<li><p>Module Suivi Flore Territoire fonctionnel et installable
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Chiro fonctionnel et installable
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) ainsi que
son Frontend générique pour les protocoles de suivi
(<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend/">https://github.com/PnCevennes/projet_suivis_frontend/</a>)</p></li>
<li><p>Ebauche d’un module pour les protocoles CMR
(Capture-Marquage-Recapture) :
<a class="reference external" href="https://github.com/PnX-SI/gn_module_cmr">https://github.com/PnX-SI/gn_module_cmr</a></p></li>
<li><p>MCD du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>MCD du module Flore Prioritaire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_flore_prioritaire">https://github.com/PnX-SI/gn_module_flore_prioritaire</a>)</p></li>
<li><p>Consolidation du backend et premiers développements du frontend de
GeoNature-citizen (<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen">https://github.com/PnX-SI/GeoNature-citizen</a>)</p></li>
<li><p>Création d’un script expérimental d’installation de
GeoNature-atlas compatible avec GeoNature V2 dt pouvant utiliser son
schéma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> pour les communes, le territoire et les mailles
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/install_db_gn2.sh</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procédure standard de mise à jour de GeoNature
(<a class="reference external" href="http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application">http://docs.geonature.fr/installation-standalone.html#mise-a-jour-de-l-application</a>)</p></li>
<li><p>Exécutez l’update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc2-to-2.0.0rc3.sql</span></code>)</p></li>
<li><p>Il est aussi conseillé de mettre à jour TaxHub en 1.5.1
(<a class="reference external" href="https://github.com/PnX-SI/TaxHub/releases">https://github.com/PnX-SI/TaxHub/releases</a>) ainsi que sa
configuration pour qu’il fonctionne sans <code class="docutils literal notranslate"><span class="pre">/</span></code> à la fin de son URL</p></li>
<li><p>Attention, si vous installez cette version avec le script global
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code>, il créé un problème dans la configuration Apache
de UserHub (<code class="docutils literal notranslate"><span class="pre">/etc/apache2/sites-available/usershub.conf</span></code>) et
supprime tous les <code class="docutils literal notranslate"><span class="pre">/</span></code>. Les ajouter sur la page de la documentation
de UsersHub
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache">https://github.com/PnX-SI/UsersHub/blob/master/docs/installation.rst#configuration-apache</a>)
puis relancer Apache
(<code class="docutils literal notranslate"><span class="pre">https://github.com/PnX-SI/GeoNature-atlas/blob/develop/docs/installation.rst</span></code>).
Il est conseillé d’installer plutôt la version corrective.</p></li>
</ul>
</section>
<section id="rc-2-2018-09-24">
<h2>2.0.0-rc.2 (2018-09-24)<a class="headerlink" href="#rc-2-2018-09-24" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Script <code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code> compatible Ubuntu (16 et 18)</p></li>
<li><p>Amélioration du composant Download</p></li>
<li><p>Amélioration du ShapeService</p></li>
<li><p>Compléments de la documentation</p></li>
<li><p>Intégration de la documentation Développement backend dans la
documentation</p></li>
<li><p>Nettoyage du code</p></li>
<li><p>Mise à jour de la doc de l’API :
<a class="reference external" href="https://documenter.getpostman.com/view/2640883/RWaPskTw">https://documenter.getpostman.com/view/2640883/RWaPskTw</a></p></li>
<li><p>Configuration de la carte (<code class="docutils literal notranslate"><span class="pre">frontend/src/conf/map.config.ts</span></code>) : OSM
par défaut car OpenTopoMap ne s’affiche pas à petite échelle</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction du script <code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code></p></li>
<li><p>Ne pas afficher le debug dans le recherche de la synthèse</p></li>
<li><p>Correction du bug de déconnexion entre TaxHub et GeoNature (#423)</p></li>
<li><p>Correction de la fiche info d’Occtax</p></li>
<li><p>Champs Multiselect : Ne pas afficher les valeurs selectionnées dans
la liste quand on modifie un objet</p></li>
<li><p>Trigger Occtax vers Synthèse : Correction des problèmes d’heure de
relevés mal copiés dans la Synthèse</p></li>
<li><p>Correction des altitudes (non abouti) (#424)</p></li>
<li><p>Données exemple : Suppression de l’<code class="docutils literal notranslate"><span class="pre">observers_txt</span></code> dans la synthèse</p></li>
<li><p>Suppression d’un <code class="docutils literal notranslate"><span class="pre">id_municipality</span></code> en dur dans une route</p></li>
<li><p>Suppression de la librairie Certifi non utilisée</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<ul class="simple">
<li><p>Suivez la procédure standard de mise à jour de GeoNature</p></li>
<li><p>Exécuter l’update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0rc1-to-2.0.0rc2.sql</span></code>)</p></li>
</ul>
</section>
<section id="rc-1-2018-09-21">
<h2>2.0.0-rc.1 (2018-09-21)<a class="headerlink" href="#rc-1-2018-09-21" title="Lien vers cette rubrique">¶</a></h2>
<p>La version 2 de GeoNature est une refonte complète de l’application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers à
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l’architecture du code pour rendre GeoNature plus
générique et modulaire</p></li>
<li><p>Refonte de la base de données pour la rendre plus standarde, plus
générique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l’application</p></li>
</ul>
<p>Présentation et suivi des développements :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Accueil</strong></p>
<ul class="simple">
<li><p>Message d’introduction customisable</p></li>
<li><p>Carte des 100 dernières observations</p></li>
<li><p>CSS général de l’application surcouchable</p></li>
</ul>
<p><strong>Occtax</strong></p>
<p>Module permettant de saisir, consulter, rechercher et exporter des
données Faune, Flore et Fonge de type Contact selon le standard
Occurrences de taxon du SINP
(<a class="reference external" href="https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon">https://inpn.mnhn.fr/telechargement/standard-occurrence-taxon</a>).</p>
<ul class="simple">
<li><p>Développement des formulaires de saisie, page de recherche, fiche
détail, API, CRUVED et export</p></li>
<li><p>Possibilité de masquer ou afficher les différents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>Développement du formulaire de manière générique pour pouvoir
réutiliser ses différents éléments dans d’autres modules sous forme
de composants Angular</p></li>
<li><p>Configuration possible du module (Niveau de zoom, champs affichées,
export…)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d’Occtax à partir du
composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de créer dynamiquement un
formulaire en déclarant ses champs et leur type (#318)</p></li>
<li><p>Amélioration du composant de recherche d’un taxon en ne recherchant
que sur les débuts de mot et en affichant en premier les noms de
référence (<code class="docutils literal notranslate"><span class="pre">ordrer_by</span> <span class="pre">cd_nom=cd_ref</span> <span class="pre">DESC</span></code>) #334</p></li>
<li><p>Multilingue fourni avec français et anglais (extensible à d’autres
langues)</p></li>
<li><p>Mise en place d’un export CSV, SHP, GeoJSON paramétrable dans
Occtax. #363 et #366</p></li>
<li><p>Ajout d’un message d’erreur si l’utilisateur n’a pas de jeu de
données ou si il y a eu un problème lors de la récupération des JDD
depuis MTD</p></li>
<li><p>Prise en compte du CRUVED au niveau des routes et du front pour
adapter les contenus et fonctionnalités aux droits de l’utilisateur</p></li>
<li><p>Mise en place des triggers alimentant la synthèse à partir des
données saisies et modifiées dans Occtax</p></li>
</ul>
<p><strong>Synthèse</strong></p>
<p>Module permettant de rechercher parmi les données des différentes
sources présentes ou intégrées dans la base de données de GeoNature</p>
<ul class="simple">
<li><p>Mise en place du backend, de l’API et du frontend #345</p></li>
<li><p>Interface de consultation, de recherche et d’export dans la
Synthèse</p></li>
<li><p>Synthèse : Calcul automatique (trigger) des zonages de chaque
observation (communes, zonages réglementaires et naturels)</p></li>
<li><p>Recherche sur les zonages générique et paramétrable</p></li>
<li><p>Recherche par taxon, liste de taxons, par rang, groupe, liste rouge,
milieu, attribut taxonomique, nomenclature, date, période, commune,
zonage, cadre d’acquisition, jeu de données, observateur, polygone,
rectange ou cercle dessiné</p></li>
<li><p>Retour à la fiche source possible si l’observation a été saisie
dans un module de GeoNature</p></li>
<li><p>Affichage de la fiche détail de chaque observation</p></li>
<li><p>Attributs TaxHub dynamiques et paramétrables</p></li>
<li><p>Configuration possible du module (colonnes, limites de recherche et
d’export, zoom, export…)</p></li>
<li><p>Export basé sur une vue (observations et statuts)</p></li>
<li><p>Prise en compte du CRUVED pour définir les données à afficher et à
exporter #412</p></li>
<li><p>Recherche de taxons : Liste basée sur une table alimentée
automatiquement par les taxons présents au moins une fois dans la
Synthèse</p></li>
</ul>
<p><strong>Export</strong></p>
<p>Module permettant de proposer des exports basés sur des vues</p>
<ul class="simple">
<li><p>Mise en place temporaire d’un export unique, basé sur une vue
s’appuyant sur les données de Occtax, par jeu de données</p></li>
<li><p>A remplacer par le module générique
<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a> (en cours de
développement) permettant de générer des exports à volonté en créant
des vues et en les affectant à des utilisateurs ou des groupes.
Chaque export sera accompagné de son API standardisée et documentée</p></li>
</ul>
<p><strong>Admin</strong></p>
<p>Module d’administration des tables centrales de GeoNature</p>
<ul class="simple">
<li><p>Mise en place d’un module (incomplet) permettant de gérer les
métadonnées et les nomenclatures</p></li>
</ul>
<p><strong>Gestion des droits</strong></p>
<ul class="simple">
<li><p>Mise en place d’un système baptisé CRUVED permettant de définir
globalement ou par module 6 actions sont possibles (Create / Read /
Update / Validate / Export / Delete) sur 3 portées possibles (Mes
données / Les données de mon organisme / Toutes les données)</p></li>
<li><p>Ces évolutions ont été intégrées au niveau du schéma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code>
de la base de données de UsersHub, de son module
(<a class="reference external" href="https://github.com/PnX-SI/UsersHub-authentification-module">https://github.com/PnX-SI/UsersHub-authentification-module</a>), des
routes de l’API GeoNature et des interfaces</p></li>
</ul>
<p><strong>Bases de données</strong></p>
<ul class="simple">
<li><p>Développement d’un module et d’une API générique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
d’avoir un mécanisme générique de centralisation des listes de
valeurs (nomenclatures) pour ne pas créer des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature s’adaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>Mise en place de tables de stockage verticales (historique, médias
et validation) #339</p></li>
<li><p>Mise en place d’un référentiel géographique avec un schéma dédié
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d’autres applications comprenant une
table des communes, une table générique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schéma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d’une
gestion des droits avec 6 niveaux à un mécanisme plus générique,
souple et complet. Il permet d’attribuer des actions possibles à un
rôle (utilisateur ou groupe), sur une portée; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 portées
de ces actions sont possibles : Mes données / Les données de mon
organisme / Toutes les données.</p></li>
<li><p>Droits CRUVED : La définition du CRUVED d’un rôle (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
même si ils sont inférieurs. Si une action du CRUVED n’est pas
définie au niveau du module, on prend celle de l’application
parente. #292</p></li>
<li><p>Si un rôle a un R du CRUVED à 0 pour un module, alors celui-ci ne
lui est pas listé dans le Menu et il ne lui est pas accessible si il
en connait l’URL. #360</p></li>
<li><p>Développement des métadonnées dans la BDD (schéma <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard Métadonnées du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de gérer des jeux de données, des cadres
d’acquisition, des acteurs (propriétaire, financeur,
producteur…) et des protocoles. Chaque relevé est associé à un
jeu de données.</p></li>
<li><p>Développement d’un mécanisme de calcul automatique de la
sensibilité d’une espèce directement dans la BDD (sur la base des
règles nationales et régionales du SINP + locales éventuellement)</p></li>
<li><p>Intégration du calcul automatique de l’identifiant permanent SINP
(#209)</p></li>
<li><p>Création du schéma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gérer la partie générique
des modules de suivi (sites et visites centralisés) et les routes
associées</p></li>
<li><p>Mise en place d’un schéma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de manière générique des informations qui peuvent être
communes aux autres modules : l’historique des actions sur chaque
objet de la BDD, la validation d’une donnée et les médias associés
à une donnée. Accompagné de fonctions génériques d’historisation et
de validation des données mises en place sur le module Occtax. #339</p></li>
<li><p>Ajout d’une vue matérialisée (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et d’une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes d’un taxon (étendue des observations, date min et max,
altitude min et max, nombre d’observations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>).
Désactivée pour le moment.</p></li>
<li><p>Ajout d’un trigger générique pour calculer la géométrie dans la
projection locale à partir de la géométrie 4326 (#370)</p></li>
<li><p>Ajout d’un trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Gestion des conflits de nomenclatures en n’utilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> lors de la création de leur
contenu (code_nomenclature) (#384)</p></li>
<li><p>Mise en place d’un schéma <code class="docutils literal notranslate"><span class="pre">gn_imports</span></code> intégrant des fonctions SQL
permettant d’importer un CSV dans la BDD et de mapper des champs de
tables importées avec ceux d’une table de GeoNature pour générer le
script <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code></p></li>
<li><p>Début de script de migration GeoNature V1 vers GeoNature V2</p></li>
<li><p>Nombreuses fonctions intégrées dans les schémas de la BDD</p></li>
</ul>
<p><strong>Installation</strong></p>
<ul class="simple">
<li><p>Scripts d’installation autonome ou globale de GeoNature sur Debian
(8 et 9) et Ubuntu (16 et 18)</p></li>
<li><p>Scripts de déploiement spécifiques de DEPOBIO (MTES-MNHN)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Rédaction d’une documentation concernant l’installation (autonome
ou globale), l’utilisation, l’administration et le développement :
<a class="reference external" href="http://docs.geonature.fr">http://docs.geonature.fr</a></p></li>
</ul>
<p><strong>Développement</strong></p>
<ul class="simple">
<li><p>Découpage de l’application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l’interface et des listes de valeurs avec
français et anglais intégrés mais extensible à d’autres langues
(#173)</p></li>
<li><p>Développement de composants Angular génériques pour pouvoir les
utiliser dans plusieurs modules sans avoir à les redévelopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURES, SelectSearch, Municipalities,
Observers, DynamicForm, MapList…)</p></li>
<li><p>Implémentation de la gestion des droits au niveau de l’API (pour
limiter les données affichées à un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par défaut, l’authentification et les utilisateurs sont gérés
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature directement au CAS de l’INPN, sans UsersHub (cas de
l’instance nationale INPN de GeoNature).</p></li>
<li><p>Connexion possible au webservice METADONNEES de l’INPN pour y
récupérer les jeux de données en fonction de l’utilisateur
connecté, avec mise à jour des JDD à chaque appel de la route</p></li>
<li><p>Mise en place d’un mécanisme standardisé de développement de
modules dans GeoNature (#306)</p></li>
<li><p>Ajout de tests unitaires au niveau du backend et du frontend</p></li>
<li><p>Ajout d’un mécanisme de log par email (paramètres MAILERROR)</p></li>
<li><p>Début de création du module de gestion des médias (backend
uniquement)</p></li>
<li><p>Mise en place d’une configuration globale et d’une configuration
par module</p></li>
<li><p>Fonction d’installation d’un module et de génération des fichiers
de configuration</p></li>
<li><p>Gestion de l’installation d’un module qui n’a pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place d’une route générique permettant de requêter dans une
vue non mappée</p></li>
<li><p>Mise en place d’un script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Autres modules</strong></p>
<ul class="simple">
<li><p>Module Export en cours de développement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_export">https://github.com/PnX-SI/gn_module_export</a>). Chaque export
s’appuie sur une vue. Il sera possible aux administrateurs d’une
GeoNature d’ajouter autant de vues que nécessaires dans son
GeoNature.</p></li>
<li><p>Module de validation des données en cours de développement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/4">https://github.com/PnX-SI/gn_module_validation/issues/4</a>)</p></li>
<li><p>Module Suivi Flore territoire en cours de développement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_flore_territoire">https://github.com/PnX-SI/gn_module_suivi_flore_territoire</a>)</p></li>
<li><p>Module Suivi Habitat en cours de développement
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire/issues/1</a>)</p></li>
<li><p>gn_module_suivi_chiro refondu pour devenir un module de GeoNature
V2 (<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>)</p></li>
<li><p>Projet suivi utilisé comme Frontend générique et autonome pour le
Suivi chiro (<a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a>)</p></li>
<li><p>GeoNature-citizen en cours de développement
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-citizen/issues/2">https://github.com/PnX-SI/GeoNature-citizen/issues/2</a>)</p></li>
<li><p>GeoNature-mobile en cours de refonte pour compatibilité avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnEcrins/GeoNature-mobile/issues/19">https://github.com/PnEcrins/GeoNature-mobile/issues/19</a>)</p></li>
<li><p>GeoNature-atlas en cours d’ajustements pour compatibilité avec
GeoNature V2
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature-atlas/issues/162">https://github.com/PnX-SI/GeoNature-atlas/issues/162</a>)</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p><strong>1.</strong> Pour les utilisateurs utilisant la version 1 de GeoNature :</p>
<p>Il ne s’agit pas de mettre à jour GeoNature mais d’en installer une
nouvelle version. En effet, il s’agit d’une refonte complète.</p>
<ul class="simple">
<li><p>Passer à la dernière version 1 de GeoNature (1.9.1)</p></li>
<li><p>Idem pour UsersHub et TaxHub</p></li>
<li><p>Installer GeoNature standalone ou refaire une installation complète</p></li>
<li><p>Adaptez les scripts présents dans <code class="docutils literal notranslate"><span class="pre">/data/migrations/v1tov2</span></code> et
éxécutez-les</p></li>
</ul>
<p><em>TODO : MAJ depuis V1 à tester et compléter</em></p>
<p><strong>2.</strong> Pour les utilisateurs utilisant la version 2.0.0.beta5 :</p>
<ul>
<li><p>Supprimer le schéma <code class="docutils literal notranslate"><span class="pre">gn_synthese</span></code> puis le recréer dans sa version
RC1 (#430)</p></li>
<li><p>Exécuter l’update de la BDD GeoNature
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta5-to-2.0.0rc1.sql</span></code>) ainsi que celui du
sous-module Nomenclature
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql">https://github.com/PnX-SI/Nomenclature-api-module/blob/1.2.1/data/update1.1.0to1.2.1.sql</a>)</p></li>
<li><p>Suivre la procédure habituelle de mise à jour</p></li>
<li><p>Exécuter les commandes suivantes :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd geonature/backend
source venv/bin/activate
geonature generate_frontend_modules_route
geonature frontend_build
</pre></div>
</div>
</li>
</ul>
</section>
<section id="beta5-2018-07-16">
<h2>2.0.0.beta5 (2018-07-16)<a class="headerlink" href="#beta5-2018-07-16" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Ajout d’un message d’erreur si l’utilisateur n’a pas de JDD ou
si il y a eu un problème lors de la récupération des JDD de MTD</p></li>
<li><p>Ajout d’une vue matérialisée (<code class="docutils literal notranslate"><span class="pre">gn_synthese.vm_min_max_for_taxons</span></code>)
et d’une fonction (<code class="docutils literal notranslate"><span class="pre">gn_synthese.fct_calculate_min_max_for_taxon</span></code>)
permettant de renvoyer des informations sur les observations
existantes d’un taxon (étendue des observations, date min et max,
altitude min et max, nombre d’observations) pour orienter la
validation et la saisie
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation/issues/5">https://github.com/PnX-SI/gn_module_validation/issues/5</a>)</p></li>
<li><p>L’export OccTax est désormais basé sur une vue qu’il est possible
d’adapter</p></li>
<li><p>Ajouts de nouveaux tests automatisés du code et mise en place de
Travis pour les lancer automatiquement à chaque commit
(<a class="reference external" href="https://travis-ci.org/PnX-SI/GeoNature">https://travis-ci.org/PnX-SI/GeoNature</a>)</p></li>
<li><p>Ajout de données test</p></li>
<li><p>Mise à jour des scripts de déploiement spécifiques de DEPOBIO (MTES)</p></li>
<li><p>Déplacement de la table centrale de gestion des paramètres
<code class="docutils literal notranslate"><span class="pre">t_parameters</span></code> dans le schéma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> (#376)</p></li>
<li><p>Ajout d’un trigger générique pour calculer la géométrie dans la
projection locale à partir de la géométrie 4326 (#370)</p></li>
<li><p>Regroupement des fichiers liés à l’installation et la mise à jour
dans un répertoire dédié (<code class="docutils literal notranslate"><span class="pre">install</span></code>) (#383)</p></li>
<li><p>Mise en place de scripts de migration global de la BDD
(<code class="docutils literal notranslate"><span class="pre">data/migrations/2.0.0beta4to2.00beta5.sql</span></code>) et du schéma
<code class="docutils literal notranslate"><span class="pre">pr_occtax</span></code>
(<code class="docutils literal notranslate"><span class="pre">contrib/occtax/data/migration_2.0.0.beta4to2.0.0.beta5.sql</span></code>),
d’un script générique de migration de l’application
(<code class="docutils literal notranslate"><span class="pre">install/migration/migration.sh</span></code>) et d’une doc de mise à jour
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-%C3%A0-jour-de-lapplication">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst#mise-à-jour-de-lapplication</a>)</p></li>
<li><p>Réintégration des fichiers de configuration, de logs et des modules
externes dans les répertoires de l’application (#375)</p></li>
<li><p>Ajout de routes à <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code></p></li>
<li><p>Ajout d’un trigger pour calculer automatiquement les zonages des
sites de suivi (<code class="docutils literal notranslate"><span class="pre">gn_monitoring.fct_trg_cor_site_area()</span></code>)</p></li>
<li><p>Améliorations et documentation des commandes d’installation d’un
module</p></li>
<li><p>Ajout des unités géographiques dans le schéma <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code></p></li>
<li><p>Ajout d’un bouton <code class="docutils literal notranslate"><span class="pre">Annuler</span></code> dans le formulaire Occtax</p></li>
<li><p>Gestion des conflits de nomenclatures en n’utilisant plus leur
<code class="docutils literal notranslate"><span class="pre">id_type</span></code> ni leur <code class="docutils literal notranslate"><span class="pre">id_nomenclature</span></code> (#384)</p></li>
<li><p>Migration du SQL de <code class="docutils literal notranslate"><span class="pre">ref_nomenclautres</span></code> dans le dépôt du sous-module
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>)</p></li>
<li><p>Début de mise en place d’un backoffice (métadonnées et
nomenclatures)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>OccTax : Correction du double post</p></li>
<li><p>OccTax : Correction des droits dans les JDD</p></li>
<li><p>OccTax : Correction de l’affichage des observers_txt dans la fiche
d’un relevé</p></li>
<li><p>Correction de la gestion générique des médias</p></li>
<li><p>Suppression du lien entre <code class="docutils literal notranslate"><span class="pre">ref_geo</span></code> et <code class="docutils literal notranslate"><span class="pre">ref_nomenclatures</span></code> (#374)</p></li>
<li><p>Compléments et relecture de la documentation</p></li>
<li><p>Correction</p></li>
</ul>
<p><strong>Notes de version</strong></p>
<p>Si vous mettez à jour votre GeoNature depuis une Beta4 :</p>
<ul>
<li><p>Téléchargez la beta5 et renommer les répertoires :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/myuser
wget<span class="w"> </span>https://github.com/PnX-SI/GeoNature/archive/geonature2beta.zip
unzip<span class="w"> </span>geonature2beta.zip
mv<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/<span class="w"> </span>/home/&lt;mon_user&gt;/geonature_old/
mv<span class="w"> </span>GeoNature-geonature2beta<span class="w"> </span>/home/&lt;mon_user&gt;/geonature/
</pre></div>
</div>
</li>
<li><p>Exécutez le script de migration <code class="docutils literal notranslate"><span class="pre">install/migration/beta4tobeta5.sh</span></code>
depuis la racine de votre GeoNature :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>geonature
./install/migration/beta4tobeta5.sh
</pre></div>
</div>
</li>
</ul>
<p>Celui-ci va récupérer vos fichiers de configuration, déplacer les
modules et appliquer les changements de la BDD.</p>
<ul class="simple">
<li><p>Si vous avez développé des modules externes, voir
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/375">https://github.com/PnX-SI/GeoNature/issues/375</a>, en ajoutant un
lien symbolique depuis le répertoire <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> et en
réintégrant la configuration du module dans son répertoire <code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
</ul>
</section>
<section id="beta4-2018-05-25">
<h2>2.0.0.beta4 (2018-05-25)<a class="headerlink" href="#beta4-2018-05-25" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Synthèse : début de mise en place du backend, de l’API et du
frontend #345</p></li>
<li><p>Complément de la nomenclature des Méthodes de détermination et
suppression du champs Complement_Determination.
Merci &#64;DonovanMaillard. #341</p></li>
<li><p>Nouveaux composants Angular (SelectSearch, Municipalities,
Observers)</p></li>
<li><p>Amélioration de composants Angular (Date du jour par défaut, Option
de tri des nomenclatures, DynamicForm</p></li>
<li><p>Connexion à MTD INPN : Mise à jour des JDD à chaque appel de la
route</p></li>
<li><p>Finalisation du renommage de Contact en OccTax (BDD, API, backend)</p></li>
<li><p>Droits CRUVED : La définition du CRUVED d’un rôle (utilisateur ou
groupe) sur un module de GeoNature surcouche ses droits GeoNature
même si ils sont inférieurs. Si une action du CRUVED n’est pas
définie au niveau du module, on prend celle de l’application
parente. #292</p></li>
<li><p>Si un rôle a un R du CRUVED à 0 pour un module, alors celui-ci ne
lui est pas listé dans le Menu et il ne lui ai pas accessible si il
en connait l’URL. #360</p></li>
<li><p>Mise en place d’un schéma <code class="docutils literal notranslate"><span class="pre">gn_commons</span></code> dans la BDD qui permet de
stocker de manière générique des informations qui peuvent être
communes aux autres modules : l’historique des actions sur chaque
objet de la BDD, la validation d’une donnée et les médias associés
à une donnée. Accompagné de fonctions génériques d’historisation et
de validation des données mises en place sur le module Occtax. #339</p></li>
<li><p>Amélioration de l’ergonomie du MapList de OccTax. #361</p></li>
<li><p>Mise en place d’un export CSV, SHP, GeoJSON paramétrable dans
OccTax. #363 et #366</p></li>
<li><p>Amélioration du module générique <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> et de ses
sous-modules <a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>
et <a class="reference external" href="https://github.com/PnCevennes/projet_suivis_frontend">https://github.com/PnCevennes/projet_suivis_frontend</a></p></li>
<li><p>Amélioration et compléments des scripts d’installation</p></li>
<li><p>Mise en place d’un script pour la customisation de la plateforme
nationale
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh">https://github.com/PnX-SI/GeoNature/blob/develop/install_all/configuration_mtes.sh</a>)</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Complément des différentes documentations</p></li>
<li><p>Ajout d’une documentation d’administration d’OccTax
(<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst#module-occtax</a>)</p></li>
</ul>
</section>
<section id="beta3-2018-03-28">
<h2>2.0.0.beta3 (2018-03-28)<a class="headerlink" href="#beta3-2018-03-28" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Travail sur le module générique de Suivi intégré à GeoNature
(<code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code>). Gestion des fichiers de configuration</p></li>
<li><p>Gestion de l’installation d’un module qui n’a pas de Frontend
dans GeoNature</p></li>
<li><p>Mise en place de tests automatiques au niveau du Frontend</p></li>
<li><p>Ménage et réorganisation du code du Frontend</p></li>
<li><p>Factorisation et harmonisation des composants génériques Angular</p></li>
<li><p>Suppression des blocs non fonctionnels sur la Home</p></li>
<li><p>Mise à jour de la doc et du MCD</p></li>
<li><p>Possibilité de masquer ou afficher les différents champs dans le
formulaire Occtax (#344)</p></li>
<li><p>Ajout des nomenclatures dans les filtres d’OccTax à partir du
nouveau composant <code class="docutils literal notranslate"><span class="pre">dynamicForm</span></code> qui permet de créer dynamiquement un
formulaire en déclarant les champs (#318)</p></li>
<li><p>Amélioration du composant de recherche d’un taxon en ne recherchant
que sur les débuts de mot et en affichant en premier les noms de
référence (ordrer_by cd_nom=cd_ref DESC) - #334</p></li>
<li><p>Mise en place d’une route générique permettant de requêter dans une
vue non mappée</p></li>
<li><p>Suppression des options vides dans les listes déroulantes des
nomenclatures</p></li>
<li><p>Ajout de quelques paramètres (niveau de zoom mini dans chaque
module, ID de la liste des taxons saisissables dans Occtax…)</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Correction de la pagination du composant MapList</p></li>
<li><p>Correction des droits attribués automatiquement quand on se connecte
avec le CAS</p></li>
<li><p>Correction de l’installation optionnelle de UsersHub dans le script
<code class="docutils literal notranslate"><span class="pre">install_all.sh</span></code></p></li>
</ul>
<p><strong>Modules annexes</strong></p>
<ul class="simple">
<li><p>Début de refonte du module Suivi chiro
(<a class="reference external" href="https://github.com/PnCevennes/gn_module_suivi_chiro">https://github.com/PnCevennes/gn_module_suivi_chiro</a>) connecté au
module générique de suivi de GeoNature, dont le front sera externe à
GeoNature (<a class="reference external" href="https://github.com/PnCevennes/projet_suivi">https://github.com/PnCevennes/projet_suivi</a>)</p></li>
<li><p>Maquettage et avancée sur le module Validation
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_validation">https://github.com/PnX-SI/gn_module_validation</a>)</p></li>
<li><p>Définition du module Suivi Habitat Territoire
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_suivi_habitat_territoire">https://github.com/PnX-SI/gn_module_suivi_habitat_territoire</a>)</p></li>
<li><p>Piste de définition du module Interopérabilité
(<a class="reference external" href="https://github.com/PnX-SI/gn_module_interoperabilite">https://github.com/PnX-SI/gn_module_interoperabilite</a>)</p></li>
</ul>
</section>
<section id="beta2-2018-03-16">
<h2>2.0.0.beta2 (2018-03-16)<a class="headerlink" href="#beta2-2018-03-16" title="Lien vers cette rubrique">¶</a></h2>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Compléments de la documentation (schéma architecture,
administration, installation, développement, FAQ…)</p></li>
<li><p>Amélioration de l’ergonomie du module OccTax (composant MapList,
filtres, colonnes et formulaires) et du module Exports</p></li>
<li><p>Amélioration du composant de recherche d’un taxon (#324)</p></li>
<li><p>Amélioration et optimisation de la sérialisation des données</p></li>
<li><p>Ajout de tests unitaires au niveau du backend</p></li>
<li><p>Ajout d’un mécanisme de log par email (paramètres MAILERROR)</p></li>
<li><p>Migration du module occtax dans le répertoire <code class="docutils literal notranslate"><span class="pre">/contrib</span></code> pour
homogénéiser les modules</p></li>
<li><p>Création du schéma <code class="docutils literal notranslate"><span class="pre">gn_monitoring</span></code> pour gérer la partie générique
des modules de suivi (sites et visites centralisés)</p></li>
<li><p>Début de création du module générique des protocoles de suivi</p></li>
<li><p>Début de création du module de gestion des médias</p></li>
</ul>
<p><strong>Corrections</strong></p>
<ul class="simple">
<li><p>Corrections de l’installation globale et autonome</p></li>
<li><p>Renommage Contact en OccTax (en cours)</p></li>
<li><p>Nettoyage du schéma des métadonnées (<code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>)</p></li>
</ul>
</section>
<section id="beta1-2018-02-16">
<h2>2.0.0.beta1 (2018-02-16)<a class="headerlink" href="#beta1-2018-02-16" title="Lien vers cette rubrique">¶</a></h2>
<p>La version 2 de GeoNature est une refonte complète de l’application.</p>
<ul class="simple">
<li><p>Refonte technologique en migrant de PHP/Symfony/ExtJS/Openlayers à
Python3/Flask/Angular4/Leaflet</p></li>
<li><p>Refonte de l’architecture du code pour rendre GeoNature plus
générique et modulaire</p></li>
<li><p>Refonte de la base de données pour la rendre plus standarde, plus
générique et modulaire</p></li>
<li><p>Refonte ergonomique pour moderniser l’application</p></li>
</ul>
<p>Présentation et suivi du projet :
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/issues/168">https://github.com/PnX-SI/GeoNature/issues/168</a></p>
<p><strong>Nouveautés</strong></p>
<ul class="simple">
<li><p>Refonte de la base de données du module Contact, renommé en OccTax,
s’appuyant sur le standard Occurrence de taxons du SINP (#183)</p></li>
<li><p>Développement du module OccTax regroupant les contacts Faune, Flore,
Fonge et Mortalité (avec formulaire de consultation et de saisie des
données)</p></li>
<li><p>Développement d’un module et d’une API générique et autonome pour
la gestion des nomenclatures
(<a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>). Il permet
d’avoir un mécanisme générique de centralisation des listes de
valeurs (nomenclatures) pour ne pas créer des tables pour chaque
liste : <a class="reference external" href="https://github.com/PnX-SI/Nomenclature-api-module">https://github.com/PnX-SI/Nomenclature-api-module</a>. Les
valeurs de chaque nomenclature s’adaptent en fonction des regnes et
groupe 2 INPN des taxons.</p></li>
<li><p>Découpage de l’application en backend / API / Frontend</p></li>
<li><p>Multilingue au niveau de l’interface et des listes de valeurs avec
français et anglais intégrés mais extensible à d’autres langues
(#173)</p></li>
<li><p>Développement de composants génériques pour pouvoir les utiliser
dans plusieurs modules sans avoir à les redévelopper ni les
dupliquer (composant CARTE, composant RECHERCHE TAXON, composant
OBSERVATEURS, composant NOMENCLATURES…)</p></li>
<li><p>Mise en place d’un référentiel géographique avec un schéma dédié
(<code class="docutils literal notranslate"><span class="pre">ref_geo</span></code>), partageable avec d’autres applications comprenant une
table des communes, une table générique des zonages, une table pour
le MNT et des fonctions pour intersecter point/ligne/polygones avec
les zonages et le MNT (#228)</p></li>
<li><p>Evolution du schéma <code class="docutils literal notranslate"><span class="pre">utilisateurs</span></code> de UsersHub pour passer d’une
gestion des droits avec 6 niveaux à un mécanisme plus générique,
souple et complet. Il permet d’attribuer des actions possibles à un
rôle (utilisateur ou groupe), sur une portée; dans une application
ou un module. 6 actions sont possibles dans GeoNature : Create /
Read / Update / Validate / Export / Delete (aka CRUVED). 3 portées
de ces actions sont possibles : Mes données / Les données de mon
organisme / Toutes les données.</p></li>
<li><p>Implémentation de la gestion des droits au niveau de l’API (pour
limiter les données affichées à un utilisateur en fonction de ses
droits) et au niveau du Frontend (pour afficher ou non certains
boutons aux utilisateurs en fonction de leurs droits).</p></li>
<li><p>Par défaut, l’authentification et les utilisateurs sont gérés
localement dans UsersHub, mais il est aussi possible de connecter
GeoNature au CAS de l’INPN, sans utiliser GeoNature (utilisé pour
l’instance nationale INPN de GeoNature). GeoNature peut aussi se
connecter au webservice METADONNEES de l’INPN pour y récupérer les
jeux de données en fonction de l’utilisateur connecté.</p></li>
<li><p>Mise en place d’un module d’export. Chaque export s’appuie sur
une vue. Il sera possible à chaque administrateur d’ajouter autant
de vues que nécessaires dans son GeoNature. Pour le moment, un
export au format SINP Occurrence de taxons a été intégré par défaut.</p></li>
<li><p>Développement des métadonnées dans la BDD (schema <code class="docutils literal notranslate"><span class="pre">gn_meta</span></code>) sur la
base du standard Métadonnées du SINP
(<a class="reference external" href="http://standards-sinp.mnhn.fr/category/standards/metadonnees/">http://standards-sinp.mnhn.fr/category/standards/metadonnees/</a>).
Elles permettent de gérer des jeux de données, des cadres
d’acquisition, des acteurs (propriétaire, financeur,
producteur…) et des protocoles. Chaque relevé est associé à un
jeu de données.</p></li>
<li><p>Développement d’un mécanisme de calcul automatique de la
sensibilité d’une espèce directement dans la BDD (sur la base des
règles nationales et régionales du SINP + locales éventuellement)</p></li>
<li><p>Intégration du calcul automatique de l’identifiant permanent SINP
(#209)</p></li>
<li><p>Mise en place d’un mécanisme standardisé de développement de
modules dans GeoNature (#306)</p></li>
<li><p>Scripts d’installation autonome ou globale de GeoNature sur Debian
8 et 9</p></li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li><p>Installation globale de GeoNature (avec TaxHub et UsersHub) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-all.rst</a></p></li>
<li><p>Installation autonome de GeoNature /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/installation-standalone.rst</a></p></li>
<li><p>Manuel utilisateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/user-manual.rst</a></p></li>
<li><p>Manuel administrateur /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/admin-manual.rst</a></p></li>
<li><p>Développement (API, modules et composants) /
<a class="reference external" href="https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst">https://github.com/PnX-SI/GeoNature/blob/develop/docs/development.rst</a></p></li>
</ul>
<p>Documentation complète disponible sur
<a class="reference external" href="http://geonature.fr/docs/2-0-0-beta1">http://geonature.fr/docs/2-0-0-beta1</a></p>
<p><strong>A venir</strong></p>
<ul class="simple">
<li><p>Finalisation MCD du module Synthèse</p></li>
<li><p>Triggers d’alimentation automatique de la Synthèse depuis le module
OccTax</p></li>
<li><p>Développement de l’interface du module Synthèse</p></li>
<li><p>Amélioration et généricité du module OccTax (médias, import GPX,
champs masquables et pseudo-champs)</p></li>
<li><p>Généricité du module d’export</p></li>
<li><p>Développement du module de validation (#181)</p></li>
<li><p>Développement d’un module de suivi des habitats avec une gestion
générique des sites et visites de suivi</p></li>
<li><p>Développement d’un module de collecte citoyenne (#242)</p></li>
</ul>
</section>
<section id="versions-1-2014-2018">
<h2>Versions 1 (2014-2018)<a class="headerlink" href="#versions-1-2014-2018" title="Lien vers cette rubrique">¶</a></h2>
<p>Pour consulter les notes des versions 1 de GeoNature, elles sont disponibles dans la branche dédiée : https://github.com/PnX-SI/GeoNature/blob/v1/docs/changelog.rst</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api-references.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API REFERENCES</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="authors.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Auteurs</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2018-2024, Parc National des Écrins, Parc National des Cévennes
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CHANGELOG</a><ul>
<li><a class="reference internal" href="#id1">2.15.4 (2025-02-25)</a></li>
<li><a class="reference internal" href="#id2">2.15.3 (2025-02-14)</a></li>
<li><a class="reference internal" href="#id3">2.15.2 (2025-01-16)</a></li>
<li><a class="reference internal" href="#id4">2.15.1 (2025-01-10)</a></li>
<li><a class="reference internal" href="#pavo-cristatus-2025-12-11">2.15.0 - Pavo cristatus 🦚 (2025-12-11)</a></li>
<li><a class="reference internal" href="#id5">2.14.2 (2024-05-28)</a></li>
<li><a class="reference internal" href="#id6">2.14.1 (2024-04-29)</a></li>
<li><a class="reference internal" href="#talpa-europaea-2024-02-28">2.14.0 - Talpa europaea 👓 (2024-02-28)</a></li>
<li><a class="reference internal" href="#id7">2.13.4 (2023-12-15)</a></li>
<li><a class="reference internal" href="#id8">2.13.3 (2023-10-17)</a></li>
<li><a class="reference internal" href="#id9">2.13.2 (2023-09-28)</a></li>
<li><a class="reference internal" href="#id10">2.13.1 (2023-09-15)</a></li>
<li><a class="reference internal" href="#carpodacus-erythrinus-2023-08-23">2.13.0 - Carpodacus erythrinus 🐤 (2023-08-23)</a></li>
<li><a class="reference internal" href="#id11">2.12.3 (2023-05-09)</a></li>
<li><a class="reference internal" href="#id12">2.12.2 (2023-04-18)</a></li>
<li><a class="reference internal" href="#id13">2.12.1 (2023-04-11)</a></li>
<li><a class="reference internal" href="#cyathea-borbonica-2023-03-27">2.12.0 - Cyathea borbonica 🌴 (2023-03-27)</a></li>
<li><a class="reference internal" href="#id14">2.11.2 (2023-01-19)</a></li>
<li><a class="reference internal" href="#id15">2.11.1 (2023-01-18)</a></li>
<li><a class="reference internal" href="#ilex-aquifolium-2022-12-21">2.11.0 - Ilex aquifolium 🎄 (2022-12-21)</a></li>
<li><a class="reference internal" href="#id16">2.10.4 (2022-11-30)</a></li>
<li><a class="reference internal" href="#id17">2.10.3 (2022-11-15)</a></li>
<li><a class="reference internal" href="#id18">2.10.2 (2022-11-09)</a></li>
<li><a class="reference internal" href="#id19">2.10.1 (2022-11-08)</a></li>
<li><a class="reference internal" href="#alouatta-macconnelli-2022-11-02">2.10.0 - Alouatta macconnelli 🐒 (2022-11-02)</a></li>
<li><a class="reference internal" href="#id20">2.9.2 (2022-02-15)</a></li>
<li><a class="reference internal" href="#id21">2.9.1 (2022-01-27)</a></li>
<li><a class="reference internal" href="#actias-luna-2022-01-13">2.9.0 - Actias luna 🦋 (2022-01-13)</a></li>
<li><a class="reference internal" href="#id22">2.8.1 (2021-10-17)</a></li>
<li><a class="reference internal" href="#vaccinium-myrtillus-2021-10-18">2.8.0 - Vaccinium myrtillus 🌿 (2021-10-18)</a></li>
<li><a class="reference internal" href="#id23">2.7.5 (2021-07-28)</a></li>
<li><a class="reference internal" href="#id24">2.7.4 (2021-07-23)</a></li>
<li><a class="reference internal" href="#id25">2.7.3 (2021-07-22)</a></li>
<li><a class="reference internal" href="#id26">2.7.2 (2021-07-05)</a></li>
<li><a class="reference internal" href="#id27">2.7.1 (2021-07-02)</a></li>
<li><a class="reference internal" href="#androsace-delphinensis-2021-06-30">2.7.0 - Androsace delphinensis 🌼 (2021-06-30)</a></li>
<li><a class="reference internal" href="#id28">2.6.2 (2021-02-15)</a></li>
<li><a class="reference internal" href="#id29">2.6.1 (2021-02-11)</a></li>
<li><a class="reference internal" href="#saxifraga-2021-02-04">2.6.0 - Saxifraga 🌸 (2021-02-04)</a></li>
<li><a class="reference internal" href="#id30">2.5.5 (2020-11-19)</a></li>
<li><a class="reference internal" href="#id31">2.5.4 (2020-11-17)</a></li>
<li><a class="reference internal" href="#id32">2.5.3 (2020-11-04)</a></li>
<li><a class="reference internal" href="#id33">2.5.2 (2020-10-13)</a></li>
<li><a class="reference internal" href="#id34">2.5.1 (2020-10-06)</a></li>
<li><a class="reference internal" href="#manidae-2020-09-30">2.5.0 - Manidae (2020-09-30)</a></li>
<li><a class="reference internal" href="#id35">2.4.1 (2020-06-25)</a></li>
<li><a class="reference internal" href="#fiches-de-metadonnees-2020-06-22">2.4.0 - Fiches de métadonnées (2020-06-22)</a></li>
<li><a class="reference internal" href="#id36">2.3.2 (2020-02-24)</a></li>
<li><a class="reference internal" href="#id37">2.3.1 (2020-02-18)</a></li>
<li><a class="reference internal" href="#occhab-de-noel-2019-12-27">2.3.0 - Occhab de Noël (2019-12-27)</a></li>
<li><a class="reference internal" href="#id38">2.2.1 (2019-10-09)</a></li>
<li><a class="reference internal" href="#module-utilisateurs-2019-09-18">2.2.0 - Module utilisateurs (2019-09-18)</a></li>
<li><a class="reference internal" href="#id39">2.1.2 (2019-07-25)</a></li>
<li><a class="reference internal" href="#id40">2.1.1 (2019-07-18)</a></li>
<li><a class="reference internal" href="#module-validation-2019-06-01">2.1.0 - Module validation (2019-06-01)</a></li>
<li><a class="reference internal" href="#id41">2.0.1 (2019-03-18)</a></li>
<li><a class="reference internal" href="#la-refonte-2019-02-28">2.0.0 - La refonte (2019-02-28)</a></li>
<li><a class="reference internal" href="#rc-4-2-2019-01-23">2.0.0-rc.4.2 (2019-01-23)</a></li>
<li><a class="reference internal" href="#rc-4-1-2019-01-21">2.0.0-rc.4.1 (2019-01-21)</a></li>
<li><a class="reference internal" href="#rc-4-2019-01-15">2.0.0-rc.4 (2019-01-15)</a></li>
<li><a class="reference internal" href="#rc-3-1-2018-10-21">2.0.0-rc.3.1 (2018-10-21)</a></li>
<li><a class="reference internal" href="#rc-3-2018-10-18">2.0.0-rc.3 (2018-10-18)</a></li>
<li><a class="reference internal" href="#rc-2-2018-09-24">2.0.0-rc.2 (2018-09-24)</a></li>
<li><a class="reference internal" href="#rc-1-2018-09-21">2.0.0-rc.1 (2018-09-21)</a></li>
<li><a class="reference internal" href="#beta5-2018-07-16">2.0.0.beta5 (2018-07-16)</a></li>
<li><a class="reference internal" href="#beta4-2018-05-25">2.0.0.beta4 (2018-05-25)</a></li>
<li><a class="reference internal" href="#beta3-2018-03-28">2.0.0.beta3 (2018-03-28)</a></li>
<li><a class="reference internal" href="#beta2-2018-03-16">2.0.0.beta2 (2018-03-16)</a></li>
<li><a class="reference internal" href="#beta1-2018-02-16">2.0.0.beta1 (2018-02-16)</a></li>
<li><a class="reference internal" href="#versions-1-2014-2018">Versions 1 (2014-2018)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=7e9e99ef"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=041d0952"></script>
    </body>
</html>