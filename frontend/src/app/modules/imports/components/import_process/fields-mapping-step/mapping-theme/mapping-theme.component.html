<div class="entities-tab__content" [formGroup]="_fm.mappingFormGroup">
  <fieldset>
    <legend class="px-1">
      {{ themeData.theme.label }}
    </legend>
    <div class="row m-0">
      <ng-container *ngFor="let field of themeData.fields">
        <!-- *ngIf="!getValue(field) || displayAllValues" -->
        <div class="col-6">
          <div *ngIf="!field.autogenerated" class="form-group">
            <small
              >{{ field.fr_label }} :
              <i
                *ngIf="field.comment"
                matTooltip="{{ field.comment }}"
                matTooltipClass="custom-tooltip"
                class="fa fa-info-circle"
                aria-hidden="true"
              ></i>
            </small>
            {{ item }}{{ isMapped('comment_releve') }}
            <ng-select
              id="{{ field.name_field }}"
              [items]="sourceFields"
              [multiple]="field.multi"
              [clearable]="true"
              [virtualScroll]="true"
              formControlName="{{ field.name_field }}"
            >
              <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                <div>
                  <span [ngClass]="{ in_use: isMapped(item) }" class="pre-wrap">
                    {{ item }}
                  </span>
                </div>
              </ng-template>
            </ng-select>
            <!-- <div
              *ngIf="_fm.mappingFormGroup[field.name_field].hasError('required')"
              class="invalid-feedback d-block"
            >
              Sélectionnez {{ field.name_field }}
            </div> -->
            <div *ngIf="field.name_field == 'WKT'">
              <small>*si pas de WKT, indiquez longitude et latitude.</small>
            </div>

            <div
              *ngIf="_fm.mappingFormGroup.controls[field.name_field].hasError('conflict')"
              class="invalid-feedback d-block"
            >
              {{ _fm.mappingFormGroup.controls[field.name_field].getError('conflict') }}
            </div>
          </div>
          <div *ngIf="field.autogenerated" class="form-group">
            <p *ngIf="displayAlert(field)" class="text-warning text-sm">
              Attention les identifiants SINP ne seront pas générés
            </p>
            <label for="{{ field.name_field }}">
              <small>{{ field.fr_label }} :</small>
            </label>
            <input
              class="ml-1"
              type="checkbox"
              id="{{ field.name_field }}"
              formControlName="{{ field.name_field }}"
            />
          </div>
        </div>
      </ng-container>
    </div>
  </fieldset>
</div>
