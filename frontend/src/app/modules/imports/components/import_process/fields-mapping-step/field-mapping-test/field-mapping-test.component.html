<div class="card">
  <div class="card-header">
    <h5 class="card-title mb-0">Correspondance des champs avec le modèle</h5>
  </div>
  <div class="card-body">
    <pnx-mapping-selection></pnx-mapping-selection>
    <ng-container *ngIf="isReady" class="">
      <mat-tab-group [(selectedIndex)]="selectedIndex" animationDuration="0ms" class="entities-tab">
        <mat-tab *ngFor="let entitythemes of targetFields">
          <ng-template mat-tab-label>
            <span
              matBadgeColor="warn"
              matBadgeSize="small"
              class="entity-tab-label"
              [matBadge]="invalidEntityControls(entitythemes.entity.label)"
              [matBadgeHidden]="invalidEntityControls(entitythemes.entity.label) < 1"
            >
              {{ entitythemes.entity.label }}
            </span>
          </ng-template>
          <div *ngFor="let themefields of entitythemes.themes" class="entities-tab__content">
            <pnx-mapping-theme
              [themeData]="themefields"
              [sourceFields]="sourceFields"
            ></pnx-mapping-theme>
          </div>
        </mat-tab>
      </mat-tab-group>
      <div class="d-flex flex-row justify-content-between">
        <button
          mat-raised-button
          class="d-flex justify-content-center align-content-between"
          (click)="onPreviousStep()"
          color="primary"
        >
          <mat-icon>navigate_before</mat-icon>

          Précédent
        </button>
        <button
          class="d-flex justify-content-center align-content-between"
          mat-raised-button
          color="primary"
          [disabled]="_fieldMappingService.mappingFormControl?.valid"
          (click)="onNextStep()"
        >
          Suivant
          <mat-icon>navigate_next</mat-icon>
        </button>
      </div>
    </ng-container>
  </div>
</div>
