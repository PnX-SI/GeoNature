<div
  id="cover-spin"
  *ngIf="!searchService.dataLoaded"
>
  <div
    class="alert alert-warning"
    id="cover-message"
  >
    <span>Chargement des données en cours (cela peut prendre du temps)…</span>
  </div>
</div>

<div
  class="wrapper"
  data-qa="pnx-synthese"
>
  <nav
    id="sidebar"
    #navBar
    [(ngbCollapse)]="isSearchBarReduced"
  >
    <pnx-synthese-search (searchClicked)="onSearchEvent()"></pnx-synthese-search>
  </nav>

  <div class="row row-sm page-content">
    <button
      id="sidebarCollapse"
      class="btn btn-toogle-sidenav box-shadow"
      type="button"
      (click)="isSearchBarReduced = !isSearchBarReduced"
      [attr.aria-expanded]="!isSearchBarReduced"
    >
      <i
        [hidden]="isSearchBarReduced"
        class="fa fa-caret-left"
      ></i>
      <i
        [hidden]="!isSearchBarReduced"
        class="fa fa-caret-right"
      ></i>
    </button>
    <div class="col-sm-12 col-md-7 padding-sm">
      <pnx-synthese-carte
        (onAreasToggle)="fetchOrRenderData($event)"
        [inputSyntheseData]="mapListService.geojsonData"
      ></pnx-synthese-carte>
    </div>
    <div class="col-sm-12 col-md-5 padding-sm">
      <pnx-synthese-list
        [inputSyntheseData]="mapListService.tableData"
        [searchBarHidden]="isSearchBarReduced"
        data-qa="pnx-synthese-list"
      ></pnx-synthese-list>
    </div>
  </div>
</div>
<router-outlet></router-outlet>
