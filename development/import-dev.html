<!doctype html>
<html class="no-js" lang="fr" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Recherche" href="../search.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>Intégrer l’import de données dans votre module - Documentation GeoNature 2.15.4</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Documentation GeoNature 2.15.4</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/LogoGeonature.jpg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Documentation GeoNature 2.15.4</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual.html">Manuel utilisateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual.html">Manuel administrateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Développement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Auteurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">CHANGELOG</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api-references.html">API REFERENCES</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API REFERENCES</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../autoapi/geonature/index.html">geonature</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of geonature</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/geonature/app/index.html">geonature.app</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/geonature/core/index.html">geonature.core</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of geonature.core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/admin/index.html">geonature.core.admin</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of geonature.core.admin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/admin/admin/index.html">geonature.core.admin.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/admin/utils/index.html">geonature.core.admin.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/command/index.html">geonature.core.command</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of geonature.core.command</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/command/__main__/index.html">geonature.core.command.__main__</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/command/create_gn_module/index.html">geonature.core.command.create_gn_module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/command/main/index.html">geonature.core.command.main</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/core/errors/index.html">geonature.core.errors</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/index.html">geonature.core.gn_commons</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/admin/index.html">geonature.core.gn_commons.admin</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/medias/index.html">geonature.core.gn_commons.medias</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.medias</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/medias/routes/index.html">geonature.core.gn_commons.medias.routes</a></li>
</ul>
</li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/models/index.html">geonature.core.gn_commons.models</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/models/additional_fields/index.html">geonature.core.gn_commons.models.additional_fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/models/base/index.html">geonature.core.gn_commons.models.base</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/repositories/index.html">geonature.core.gn_commons.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/routes/index.html">geonature.core.gn_commons.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/schemas/index.html">geonature.core.gn_commons.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/tasks/index.html">geonature.core.gn_commons.tasks</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/validation/index.html">geonature.core.gn_commons.validation</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of geonature.core.gn_commons.validation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_commons/validation/routes/index.html">geonature.core.gn_commons.validation.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/index.html">geonature.core.gn_meta</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/models/index.html">geonature.core.gn_meta.models</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of geonature.core.gn_meta.models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/models/aframework/index.html">geonature.core.gn_meta.models.aframework</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/models/commons/index.html">geonature.core.gn_meta.models.commons</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/models/datasets/index.html">geonature.core.gn_meta.models.datasets</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/repositories/index.html">geonature.core.gn_meta.repositories</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/routes/index.html">geonature.core.gn_meta.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_meta/schemas/index.html">geonature.core.gn_meta.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_monitoring/index.html">geonature.core.gn_monitoring</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of geonature.core.gn_monitoring</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_monitoring/models/index.html">geonature.core.gn_monitoring.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_monitoring/routes/index.html">geonature.core.gn_monitoring.routes</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/index.html">geonature.core.gn_permissions</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of geonature.core.gn_permissions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/admin/index.html">geonature.core.gn_permissions.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/commands/index.html">geonature.core.gn_permissions.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/decorators/index.html">geonature.core.gn_permissions.decorators</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/models/index.html">geonature.core.gn_permissions.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/routes/index.html">geonature.core.gn_permissions.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/schemas/index.html">geonature.core.gn_permissions.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_permissions/tools/index.html">geonature.core.gn_permissions.tools</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_profiles/index.html">geonature.core.gn_profiles</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of geonature.core.gn_profiles</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_profiles/models/index.html">geonature.core.gn_profiles.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_profiles/routes/index.html">geonature.core.gn_profiles.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_profiles/tasks/index.html">geonature.core.gn_profiles.tasks</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/index.html">geonature.core.gn_synthese</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/imports/index.html">geonature.core.gn_synthese.imports</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/imports/actions/index.html">geonature.core.gn_synthese.imports.actions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/imports/geo/index.html">geonature.core.gn_synthese.imports.geo</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/imports/plot/index.html">geonature.core.gn_synthese.imports.plot</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/models/index.html">geonature.core.gn_synthese.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/module/index.html">geonature.core.gn_synthese.module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/routes/index.html">geonature.core.gn_synthese.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/schemas/index.html">geonature.core.gn_synthese.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/synthese_config/index.html">geonature.core.gn_synthese.synthese_config</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/utils/index.html">geonature.core.gn_synthese.utils</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of geonature.core.gn_synthese.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/utils/blurring/index.html">geonature.core.gn_synthese.utils.blurring</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/utils/orm/index.html">geonature.core.gn_synthese.utils.orm</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/utils/process/index.html">geonature.core.gn_synthese.utils.process</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/gn_synthese/utils/query_select_sqla/index.html">geonature.core.gn_synthese.utils.query_select_sqla</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/imports/index.html">geonature.core.imports</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of geonature.core.imports</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/actions/index.html">geonature.core.imports.actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/admin/index.html">geonature.core.imports.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/blueprint/index.html">geonature.core.imports.blueprint</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/index.html">geonature.core.imports.checks</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6 has-children"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/index.html">geonature.core.imports.checks.dataframe</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.dataframe</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/cast/index.html">geonature.core.imports.checks.dataframe.cast</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/core/index.html">geonature.core.imports.checks.dataframe.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/dates/index.html">geonature.core.imports.checks.dataframe.dates</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/geometry/index.html">geonature.core.imports.checks.dataframe.geometry</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/dataframe/utils/index.html">geonature.core.imports.checks.dataframe.utils</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/errors/index.html">geonature.core.imports.checks.errors</a></li>
<li class="toctree-l6 has-children"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/index.html">geonature.core.imports.checks.sql</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of geonature.core.imports.checks.sql</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/core/index.html">geonature.core.imports.checks.sql.core</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/extra/index.html">geonature.core.imports.checks.sql.extra</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/geo/index.html">geonature.core.imports.checks.sql.geo</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/nomenclature/index.html">geonature.core.imports.checks.sql.nomenclature</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/parent/index.html">geonature.core.imports.checks.sql.parent</a></li>
<li class="toctree-l7"><a class="reference internal" href="../autoapi/geonature/core/imports/checks/sql/utils/index.html">geonature.core.imports.checks.sql.utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/commands/index.html">geonature.core.imports.commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/config_schema/index.html">geonature.core.imports.config_schema</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/logs/index.html">geonature.core.imports.logs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/models/index.html">geonature.core.imports.models</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/geonature/core/imports/routes/index.html">geonature.core.imports.routes</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of geonature.core.imports.routes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/imports/routes/fields/index.html">geonature.core.imports.routes.fields</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/imports/routes/imports/index.html">geonature.core.imports.routes.imports</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/geonature/core/imports/routes/mappings/index.html">geonature.core.imports.routes.mappings</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/schemas/index.html">geonature.core.imports.schemas</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/tasks/index.html">geonature.core.imports.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/templates/index.html">geonature.core.imports.templates</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/imports/utils/index.html">geonature.core.imports.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/notifications/index.html">geonature.core.notifications</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of geonature.core.notifications</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/notifications/admin/index.html">geonature.core.notifications.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/notifications/models/index.html">geonature.core.notifications.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/notifications/routes/index.html">geonature.core.notifications.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/notifications/tasks/index.html">geonature.core.notifications.tasks</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/notifications/utils/index.html">geonature.core.notifications.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/sensitivity/index.html">geonature.core.sensitivity</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of geonature.core.sensitivity</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/sensitivity/models/index.html">geonature.core.sensitivity.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/sensitivity/routes/index.html">geonature.core.sensitivity.routes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/sensitivity/utils/index.html">geonature.core.sensitivity.utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/taxonomie/index.html">geonature.core.taxonomie</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of geonature.core.taxonomie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/taxonomie/admin/index.html">geonature.core.taxonomie.admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/taxonomie/schemas/index.html">geonature.core.taxonomie.schemas</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/geonature/core/users/index.html">geonature.core.users</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of geonature.core.users</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/users/models/index.html">geonature.core.users.models</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/users/register_post_actions/index.html">geonature.core.users.register_post_actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/geonature/core/users/routes/index.html">geonature.core.users.routes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/geonature/middlewares/index.html">geonature.middlewares</a></li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/geonature/tasks/index.html">geonature.tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/geonature/utils/index.html">geonature.utils</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of geonature.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/celery/index.html">geonature.utils.celery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/command/index.html">geonature.utils.command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/config/index.html">geonature.utils.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/config_schema/index.html">geonature.utils.config_schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/env/index.html">geonature.utils.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/errors/index.html">geonature.utils.errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/filemanager/index.html">geonature.utils.filemanager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/logs/index.html">geonature.utils.logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/metaclass_utils/index.html">geonature.utils.metaclass_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/module/index.html">geonature.utils.module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/schema/index.html">geonature.utils.schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/sentry/index.html">geonature.utils.sentry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/utilsgeometrytools/index.html">geonature.utils.utilsgeometrytools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/utilsmails/index.html">geonature.utils.utilsmails</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/utilsrequests/index.html">geonature.utils.utilsrequests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/geonature/utils/utilstoml/index.html">geonature.utils.utilstoml</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/development/import-dev.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="integrer-limport-de-donnees-dans-votre-module">
<h1>Intégrer l’import de données dans votre module<a class="headerlink" href="#integrer-limport-de-donnees-dans-votre-module" title="Lien vers cette rubrique">¶</a></h1>
<p>A partir de la version 2.15, le module d’Import permet l’ajout de nouvelles destinations en plus de la Synthèse. Cela a été l’occasion d’ajouter la possibilité d’importer des données d’habitat dans le module Occhab.
Cette section présente le processus d’ajout de l’import dans votre module GeoNature.</p>
<section id="modification-a-apporter-sur-la-base-de-donnees">
<h2>Modification à apporter sur la base de données<a class="headerlink" href="#modification-a-apporter-sur-la-base-de-donnees" title="Lien vers cette rubrique">¶</a></h2>
<p>Plusieurs points sont essentiels au bon fonctionnement de l’import dans votre module :</p>
<ol class="arabic simple">
<li><p>Avoir une permission C sur votre module de destination</p></li>
<li><p>Créer un objet destination (<cite>bib_destinations</cite>) et autant d’entités (<cite>bib_entities</cite>) que vous avez d’objets dans votre module (e.g. habitat, station pour Occhab)</p></li>
<li><p>Créer une table transitoire permettant d’effectuer la complétion et le contrôle des données avant l’import des données vers la table de destination finale.</p></li>
<li><p>Pour chaque entité, déclarer les attributs rendus accessibles à l’import dans <cite>bib_fields</cite></p></li>
<li><p>Si de nouvelles erreurs de contrôle de données doivent être déclarées, ajouter ces dernières dans <cite>bib_errors_type</cite></p></li>
</ol>
<p>N.B. Comme dans le reste de GeoNature, il est conseillé d’effectuer les modifications de base de données à l’aide de migrations Alembic.</p>
<section id="permissions-requises">
<h3>Permissions requises<a class="headerlink" href="#permissions-requises" title="Lien vers cette rubrique">¶</a></h3>
<p>Si ce n’est pas le déjà cas, ajouter la permission de création de données dans votre module. Le code ci-dessous donne un exemple fonctionnant dans une révision alembic.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">op</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    INSERT INTO</span>
<span class="sd">        gn_permissions.t_permissions_available (id_module,id_object,id_action,label,scope_filter)</span>
<span class="sd">    SELECT</span>
<span class="sd">        m.id_module,o.id_object,a.id_action,v.label,v.scope_filter</span>
<span class="sd">    FROM</span>
<span class="sd">        (</span>
<span class="sd">            VALUES</span>
<span class="sd">                (&#39;[votreModuleCode&#39;, &#39;ALL&#39;, &#39;C&#39;, True, &#39;Créer [nomEntité]&#39;)</span>
<span class="sd">        ) AS v (module_code, object_code, action_code, scope_filter, label)</span>
<span class="sd">    JOIN</span>
<span class="sd">        gn_commons.t_modules m ON m.module_code = v.module_code</span>
<span class="sd">    JOIN</span>
<span class="sd">        gn_permissions.t_objects o ON o.code_object = v.object_code</span>
<span class="sd">    JOIN</span>
<span class="sd">        gn_permissions.bib_actions a ON a.code_action = v.action_code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creer-votre-destination-et-vos-entites">
<h3>Créer votre destination et vos entités<a class="headerlink" href="#creer-votre-destination-et-vos-entites" title="Lien vers cette rubrique">¶</a></h3>
<p>Dans un premier temps, il faut créer une « destination ». Pour cela, il faut enregistrer votre module dans <cite>bib_destinations</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Récupérer l&#39;identifiant de votre module</span>
<span class="n">id_de_votre_module</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
    <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id_module FROM gn_commons.t_modules WHERE module_code = &#39;CODE_DE_VOTRE_MODULE&#39;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">scalar</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1"># Ajouter la destination</span>
<span class="c1"># N.B. table_name correspond au nom de la future table transitoire</span>
<span class="n">destination</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;bib_destinations&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">)</span>
<span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
<span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
    <span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">id_module</span><span class="o">=</span><span class="n">id_de_votre_module</span><span class="p">,</span>
        <span class="n">code</span><span class="o">=</span><span class="s2">&quot;votre_module_code&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;VotreModule&quot;</span><span class="p">,</span>
        <span class="n">table_name</span><span class="o">=</span><span class="s2">&quot;t_imports_votre_module&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Dans votre module, plusieurs objets sont manipulés et stockés chacun dans une table. Pour prendre l’exemple du module Occhab, on a deux entités les stations et les habitats.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">id_dest_module</span><span class="o">=</span> <span class="p">(</span>
<span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
<span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id_destination FROM gn_imports.bib_destinations WHERE code = &#39;votre_module_code&#39;&quot;</span><span class="p">)</span>
<span class="o">.</span><span class="n">scalar</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">entity</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;bib_entities&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">)</span>
<span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
<span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">id_destination</span><span class="o">=</span><span class="n">id_dest_module</span><span class="p">,</span>
        <span class="n">code</span><span class="o">=</span><span class="s2">&quot;code_entite1&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Entite1&quot;</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">validity_column</span><span class="o">=</span><span class="s2">&quot;entite1_valid&quot;</span><span class="p">,</span>
        <span class="n">destination_table_schema</span><span class="o">=</span><span class="s2">&quot;votre_module_schema&quot;</span><span class="p">,</span>
        <span class="n">destination_table_name</span><span class="o">=</span><span class="s2">&quot;entite1_table_name&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creer-votre-table-transitoire">
<h3>Créer votre table transitoire<a class="headerlink" href="#creer-votre-table-transitoire" title="Lien vers cette rubrique">¶</a></h3>
<p>Nécessaire pour le contrôle de données, il est important de créer une table transitoire permettant d’effectuer la complétion et le contrôle des données avant l’import des données vers la table de destination finale. La table transitoire doit contenir les colonnes suivantes :</p>
<ul class="simple">
<li><p>id_import : identifiant de l’import</p></li>
<li><p>line_no : entier, numéro de la ligne dans le fichier source</p></li>
<li><p>entityname_valid : booleen, indique si une entité est valide</p></li>
<li><p>pour chaque champ de l’entité, il faudra une colonne VARCHAR contenant la donnée du fichier et une colonne du type du champ qui contiendra la données finales. La convention de nommage est la suivante: « src_nomchamp » pour colonne contenant la données du fichier source et « nomchamp » pour la colonne contenant les données finales. Il est conseillé que le nom de la colonne contenant les données finales soit identiques à celle du champs dans la table de destination.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">op</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
    <span class="s2">&quot;t_imports_votremodule&quot;</span><span class="p">,</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
        <span class="s2">&quot;id_import&quot;</span><span class="p">,</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;gn_imports.t_imports.id_import&quot;</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="s2">&quot;CASCADE&quot;</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;CASCADE&quot;</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;line_no&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;entite1_valid&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="n">sa</span><span class="o">.</span><span class="n">false</span><span class="p">()),</span>
    <span class="c1"># Station fields</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;src_id_entite&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">),</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id_entite&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;src_unique_dataset_id&quot;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;unique_dataset_id&quot;</span><span class="p">,</span> <span class="n">UUID</span><span class="p">(</span><span class="n">as_uuid</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="declarer-les-attributs-rendus-accessibles-a-limport-dans-bib-fields">
<h3>Déclarer les attributs rendus accessibles à l’import dans <strong>bib_fields</strong><a class="headerlink" href="#declarer-les-attributs-rendus-accessibles-a-limport-dans-bib-fields" title="Lien vers cette rubrique">¶</a></h3>
<p>Pour chaque entité (e.g. une station dans Occhab), il faut déclarer les champs du modèles accessibles à l’import dans <cite>bib_fields</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">theme</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;bib_themes&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">)</span>

<span class="n">id_theme_general</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
    <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">theme</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id_theme</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">theme</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name_theme</span> <span class="o">==</span> <span class="s2">&quot;general_info&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">scalar</span><span class="p">()</span>
<span class="p">)</span>


<span class="n">fields_entities</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;name_field&quot;</span><span class="p">:</span> <span class="s2">&quot;id_entite1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fr_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Identifiant entité1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># Obligatoire ou non</span>
            <span class="s2">&quot;autogenerated&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="c1"># généré automatique (ex. UUID)</span>
            <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="c1"># Afficher dans l&#39;UI</span>
            <span class="s2">&quot;mnemonique&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;source_field&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;dest_field&quot;</span><span class="p">:</span> <span class="s2">&quot;id_entite1&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="n">id_entity1</span><span class="p">:</span> <span class="p">{</span> <span class="c1"># récupérer l&#39;id de l&#39;entité entité1 précédement inséré</span>
                <span class="s2">&quot;id_theme&quot;</span><span class="p">:</span> <span class="n">id_theme_general</span><span class="p">,</span>
                <span class="s2">&quot;order_field&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1"># Utilisé comme tooltip</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">),</span>
    <span class="o">...</span>
<span class="p">]</span>

<span class="n">field</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;bib_fields&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">)</span>
<span class="n">id_fields</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">id_field</span>
    <span class="k">for</span> <span class="n">id_field</span><span class="p">,</span> <span class="ow">in</span> <span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">()</span>
    <span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="o">.</span><span class="n">values</span><span class="p">([{</span><span class="s2">&quot;id_destination&quot;</span><span class="p">:</span> <span class="n">id_votre_dest</span><span class="p">,</span> <span class="o">**</span><span class="n">field</span><span class="p">}</span> <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">fields_entities</span><span class="p">])</span>
        <span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id_field</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="p">]</span>
<span class="n">cor_entity_field</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;cor_entity_field&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">autoload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">)</span>
<span class="n">op</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">sa</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">cor_entity_field</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;id_entity&quot;</span><span class="p">:</span> <span class="n">id_entity</span><span class="p">,</span> <span class="s2">&quot;id_field&quot;</span><span class="p">:</span> <span class="n">id_field</span><span class="p">,</span> <span class="o">**</span><span class="n">props</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">id_field</span><span class="p">,</span> <span class="n">field_entities</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">id_fields</span><span class="p">,</span> <span class="n">fields_entities</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">id_entity</span><span class="p">,</span> <span class="n">props</span> <span class="ow">in</span> <span class="n">field_entities</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ajout-de-nouvelles-erreurs-de-controle-de-donnees">
<h3>Ajout de nouvelles erreurs de contrôle de données<a class="headerlink" href="#ajout-de-nouvelles-erreurs-de-controle-de-donnees" title="Lien vers cette rubrique">¶</a></h3>
<p>Il est possible que votre module nécessite de déclarer de nouveaux contrôles de données. Ces contrôles
peuvent provoquer de nouvelles erreurs que celle déclaré dans <cite>bib_errors_type</cite>. Il est possible d’en ajouter
comme dans l’exemple suivant :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">error_type</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;bib_errors_types&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;gn_imports&quot;</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">op</span><span class="o">.</span><span class="n">get_bind</span><span class="p">())</span>
<span class="n">op</span><span class="o">.</span><span class="n">bulk_insert</span><span class="p">(</span>
    <span class="n">error_type</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;error_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Erreur de format booléen&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;INVALID_BOOL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Le champ doit être renseigné avec une valeur binaire (0 ou 1, true ou false).&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_level&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;error_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Données incohérentes d&#39;une ou plusieurs entités&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;INCOHERENT_DATA&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Les données indiquées pour une ou plusieurs entités sont incohérentes sur différentes lignes.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_level&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Lien vers cette rubrique">¶</a></h2>
<p>Il faut d’abord créer une classe héritant de la classe <cite>ImportActions</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">VotreModuleImportActions</span><span class="p">(</span><span class="n">ImportActions</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">statistics_labels</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ImportStatisticsLabels</span><span class="p">]:</span>
    <span class="c1"># Retourne un objet contenant les labels pour les statistiques</span>

    <span class="k">def</span> <span class="nf">preprocess_transient_data</span><span class="p">(</span><span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
    <span class="c1"># Effectue un pré-traitement des données dans un dataframe</span>

    <span class="k">def</span> <span class="nf">check_transient_data</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Effectue la validation des données</span>

    <span class="k">def</span> <span class="nf">import_data_to_destination</span><span class="p">(</span><span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Importe les données dans la table de destination</span>

    <span class="k">def</span> <span class="nf">remove_data_from_destination</span><span class="p">(</span><span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Supprime les données de la table de destination</span>

    <span class="k">def</span> <span class="nf">report_plot</span><span class="p">(</span><span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StandaloneEmbedJson</span><span class="p">:</span>
    <span class="c1"># Retourne des graphiques sur l&#39;import</span>

    <span class="k">def</span> <span class="nf">compute_bounding_box</span><span class="p">(</span><span class="n">imprt</span><span class="p">:</span> <span class="n">TImports</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Calcule la bounding box</span>
</pre></div>
</div>
<p>Dans cette classe on retrouve toutes les fonctions obligatoires, à implementer pour pouvoir implementer l’import dans un module.</p>
<section id="methodes-a-implementer">
<h3>Méthodes à implémenter<a class="headerlink" href="#methodes-a-implementer" title="Lien vers cette rubrique">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">statistics_labels()</span></code></p>
<p>Fonction qui renvoie un objet de la forme suivante :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;station_count&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Nombre de stations importées&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;habitat_count&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Nombre d’habitats importés&quot;</span><span class="p">},</span>
</pre></div>
</div>
<p>Les statistiques sont calculées en amont, et ajoutés à l’objet import dans la section statistique.
Les valeurs des clés permettent de définir les labels à afficher pour les statistique affichées dans la liste d’imports.</p>
<p><code class="docutils literal notranslate"><span class="pre">preprocess_transient_data(imprt:</span> <span class="pre">TImports,</span> <span class="pre">df)</span></code></p>
<p>Fonction qui permet de faire un pré-traitement sur les données de l’import, elle retourne un dataframe panda.</p>
<p><code class="docutils literal notranslate"><span class="pre">check_transient_data(task,</span> <span class="pre">logger,</span> <span class="pre">imprt:</span> <span class="pre">TImports)</span></code></p>
<p>Dans cette fonction est effectuée la validation et le traitement des données de l’import.</p>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">check_dates</span></code>, par exemple, utilisée dans l’import Occhab permet de valider tous les champs de type date présents dans l’import.
Elle vérifie que le format est respecté.</p>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">check_transient_data</span></code> permet de génerer les uuid manquants dans l’import, elle permet notamment de générer un UUID commun à différentes lignes de l’import quand id_origin est le même.</p>
<p><code class="docutils literal notranslate"><span class="pre">import_data_to_destination(imprt:</span> <span class="pre">TImports)</span></code></p>
<p>Cette fonction permet d’implémenter l’import des données valides dans la table de destination une fois que toutes les vérifications ont été effectuées.</p>
<p><code class="docutils literal notranslate"><span class="pre">remove_data_from_destination(imprt:</span> <span class="pre">TImports)</span></code></p>
<p>Cette fonction permet de supprimer les données d’un import, lors de la suppression d’un import.
C’est notamment pour pouvoir implémenter cette fonction que la colonne <code class="docutils literal notranslate"><span class="pre">id_import</span></code> est préconisée dans les tables de destination.</p>
<p><code class="docutils literal notranslate"><span class="pre">report_plot(imprt:</span> <span class="pre">TImports)</span></code></p>
<p>Cette fonction permet de créer les graphiques affichés dans le raport d’import.
Pour créer ces graphiques on utilise la librairie bokeh (documentation : <a class="reference external" href="https://docs.bokeh.org/en/latest/">https://docs.bokeh.org/en/latest/</a>). Il y a des exemples de création de graphiques dans l’import Occhab.</p>
<p><code class="docutils literal notranslate"><span class="pre">compute_bounding_box(imprt:</span> <span class="pre">TImports)</span></code></p>
<p>Cette fonction sert à calculer la bounding box des données importées, c’est-à-dire le plus petit polygone dans lequel sont contenues toutes les données géographique importées.
Cette bounding box est affichée dans le rapport d’import une fois toutes les données validées.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2018-2024, Parc National des Écrins, Parc National des Cévennes
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Intégrer l’import de données dans votre module</a><ul>
<li><a class="reference internal" href="#modification-a-apporter-sur-la-base-de-donnees">Modification à apporter sur la base de données</a><ul>
<li><a class="reference internal" href="#permissions-requises">Permissions requises</a></li>
<li><a class="reference internal" href="#creer-votre-destination-et-vos-entites">Créer votre destination et vos entités</a></li>
<li><a class="reference internal" href="#creer-votre-table-transitoire">Créer votre table transitoire</a></li>
<li><a class="reference internal" href="#declarer-les-attributs-rendus-accessibles-a-limport-dans-bib-fields">Déclarer les attributs rendus accessibles à l’import dans <strong>bib_fields</strong></a></li>
<li><a class="reference internal" href="#ajout-de-nouvelles-erreurs-de-controle-de-donnees">Ajout de nouvelles erreurs de contrôle de données</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#methodes-a-implementer">Méthodes à implémenter</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=7e9e99ef"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/translations.js?v=041d0952"></script>
    </body>
</html>