<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tests frontend &mdash; Documentation GeoNature 2.0</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html" class="icon icon-home"> GeoNature
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">INSTALLATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">CHANGELOG</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tests frontend</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tests_frontend.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tests-frontend">
<h1>Tests frontend<a class="headerlink" href="#tests-frontend" title="Lien permanent vers cette rubrique"></a></h1>
<p>Cette documentation a pour objectif d’expliquer comment écrire des tests pour
le frontend de GeoNature.</p>
<p>L’écriture de tests frontend dans GeoNature se base sur l’outil <a class="reference external" href="https://www.cypress.io/">Cypress</a> dont il est necessaire de maitriser et comprendre le fonctionnement.</p>
<p>Principe de base ; Un test doit être concis.
Il vaut mieux écrire plusieurs tests pour tester différentes configurations plutôt qu’un seul les testant toutes d’un coup.
Cela permet d’identifier plus précisément le test qui n’a pas fonctionné.</p>
<section id="redaction">
<h2>Rédaction<a class="headerlink" href="#redaction" title="Lien permanent vers cette rubrique"></a></h2>
<p>La rédaction des fichiers de tests se fait dans le dossier frontend/cypress/integration.</p>
<section id="structure">
<h3>Structure<a class="headerlink" href="#structure" title="Lien permanent vers cette rubrique"></a></h3>
<p>La nomenclature des fichiers de test est XXXXXXX-spec.js (XXXX correspondant au nom du module testé).</p>
<p>Dans chaque fichier la structure des tests est de la forme</p>
<ul class="simple">
<li><dl class="simple">
<dt>une description</dt><dd><ul>
<li><p>test</p></li>
<li><p>test</p></li>
<li><p>…</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="exemple">
<h3>Exemple<a class="headerlink" href="#exemple" title="Lien permanent vers cette rubrique"></a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;description général de la partie testée&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;description du test 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//contenu du test 1</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;description du test 2&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//contenu du test 2</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="p">})</span><span class="w"></span>
</pre></div>
</div>
<p>Afin d’homogénéiser les descriptions des tests il est établi que l’on nomme un test en anglais en commençant par should.</p>
</section>
<section id="id1">
<h3>Exemple<a class="headerlink" href="#id1" title="Lien permanent vers cette rubrique"></a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should change the state&#39;</span><span class="p">,()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="implementation">
<h3>Implémentation<a class="headerlink" href="#implementation" title="Lien permanent vers cette rubrique"></a></h3>
<p>La réalisation des tests frontend passe par la sélection des objets HTML du DOM.
A fin de rendre ces sélections plus propres, on peut ajouter des tags HTML dans le dom.
Angular suggère l’ajout de tags de ce type:</p>
<ul class="simple">
<li><p>data-qa</p></li>
<li><p>test-qa</p></li>
<li><p>data-test</p></li>
</ul>
</section>
<section id="id2">
<h3>Exemple<a class="headerlink" href="#id2" title="Lien permanent vers cette rubrique"></a></h3>
<div class="highlight-HTML notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">data-qa</span><span class="o">=</span><span class="s">&quot;text_de_selection&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="lancement">
<h2>Lancement<a class="headerlink" href="#lancement" title="Lien permanent vers cette rubrique"></a></h2>
<p>Pour lancer Cypress et executer les tests à la main il faut exécuter la commande (nécessite qu’une instance GeoNature fonctionne (backend+frontend)):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm run cypress:open
</pre></div>
</div>
<p>Pour lancer les test en mode automatique, il faut exécuter la commande (utilisée dans l’intégration continue (GitHub Action)):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm run e2e:ci <span class="o">&amp;&amp;</span> npm run e2e:coverage
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2023, PnE, PnC.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>