

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FAQ &mdash; GeoNature 2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="AUTEURS" href="authors.html" />
    <link rel="prev" title="HTTPS" href="https.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> GeoNature
          

          
            
            <img src="_static/LogoGeonature.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation-all.html">INSTALLATION GLOBALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-standalone.html">INSTALLATION AUTONOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-mtes.html">SPECIFICITES DEPOBIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">MANUEL UTILISATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-manual.html">MANUEL ADMINISTRATEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-1.html">IMPORT NIVEAU 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-level-2.html">IMPORT NIVEAU 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">DEVELOPPEMENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions-compatibility.html">COMPATIBILITE</a></li>
<li class="toctree-l1"><a class="reference internal" href="conf-apache.html">CONFIGURATION APACHE</a></li>
<li class="toctree-l1"><a class="reference internal" href="https.html">HTTPS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problemes-lies-au-frontend">Problèmes liés au frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#message-d-erreur-lors-de-la-compilation-du-frontend">Message d’erreur lors de la compilation du frontend</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#problemes-lies-a-la-bdd">Problèmes liés à la BDD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#probleme-de-lancement-l-api-lie-a-supervisor">Problème de lancement l’API lié à supervisor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">AUTEURS</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">CHANGELOG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoNature</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>FAQ</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/FAQ.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problemes-lies-au-frontend">
<h2>Problèmes liés au frontend<a class="headerlink" href="#problemes-lies-au-frontend" title="Permalink to this headline">¶</a></h2>
<div class="section" id="message-d-erreur-lors-de-la-compilation-du-frontend">
<h3>Message d’erreur lors de la compilation du frontend<a class="headerlink" href="#message-d-erreur-lors-de-la-compilation-du-frontend" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>Probleme lié à Node-sass</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">at</span> <span class="n">module</span><span class="o">.</span><span class="n">exports</span> <span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">geonature2</span><span class="o">/</span><span class="n">frontend</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">sass</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">binding</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">13</span><span class="p">)</span> <span class="n">at</span> <span class="n">Object</span><span class="o">.&lt;</span><span class="n">anonymous</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">myuser</span><span class="o">/</span><span class="n">geonature2</span><span class="o">/</span><span class="n">frontend</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">sass</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Lancer la commande : <code class="docutils literal"><span class="pre">npm</span> <span class="pre">rebuild</span> <span class="pre">node-sass</span> <span class="pre">--force</span></code></p>
<ul class="simple">
<li><strong>Probleme de mémoire</strong></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">26098</span><span class="p">:</span><span class="mh">0x3d10640</span><span class="p">]</span>    <span class="mi">98298</span> <span class="n">ms</span><span class="p">:</span> <span class="n">Scavenge</span> <span class="mf">977.3</span> <span class="p">(</span><span class="mf">1059.9</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">962.2</span> <span class="p">(</span><span class="mf">1059.9</span><span class="p">)</span> <span class="n">MB</span><span class="p">,</span> <span class="mf">18.5</span> <span class="o">/</span> <span class="mf">0.0</span> <span class="n">ms</span>  <span class="n">allocation</span> <span class="n">failure</span>
<span class="o">&lt;---</span> <span class="n">JS</span> <span class="n">stacktrace</span> <span class="o">---&gt;</span>
<span class="n">Cannot</span> <span class="n">get</span> <span class="n">stack</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">GC</span><span class="o">.</span>
<span class="n">FATAL</span> <span class="n">ERROR</span><span class="p">:</span> <span class="n">MarkingDeque</span><span class="p">::</span><span class="n">EnsureCommitted</span> <span class="n">Allocation</span> <span class="n">failed</span> <span class="o">-</span> <span class="n">process</span> <span class="n">out</span> <span class="n">of</span> <span class="n">memory</span>
</pre></div>
</div>
<p>Cela vient d’un manque de mémoire vive lors de l’execution de la compilation frontend.</p>
<p>Executer les commandes suivantes pour libérer de l’espace mémoire (<a class="reference external" href="https://stackoverflow.com/questions/26193654/node-js-catch-enomem-error-thrown-after-spawn">https://stackoverflow.com/questions/26193654/node-js-catch-enomem-error-thrown-after-spawn</a>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">fallocate</span> <span class="o">-</span><span class="n">l</span> <span class="mi">4</span><span class="n">G</span> <span class="o">/</span><span class="n">swapfile</span> <span class="n">Create</span> <span class="n">a</span> <span class="mi">4</span> <span class="n">gigabyte</span> <span class="n">swapfile</span>
<span class="n">sudo</span> <span class="n">chmod</span> <span class="mi">600</span> <span class="o">/</span><span class="n">swapfile</span> <span class="n">Secure</span> <span class="n">the</span> <span class="n">swapfile</span> <span class="n">by</span> <span class="n">restricting</span> <span class="n">access</span> <span class="n">to</span> <span class="n">root</span>
<span class="n">sudo</span> <span class="n">mkswap</span> <span class="o">/</span><span class="n">swapfile</span> <span class="n">Mark</span> <span class="n">the</span> <span class="n">file</span> <span class="k">as</span> <span class="n">a</span> <span class="n">swap</span> <span class="n">space</span>
<span class="n">sudo</span> <span class="n">swapon</span> <span class="o">/</span><span class="n">swapfile</span> <span class="n">Enable</span> <span class="n">the</span> <span class="n">swap</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Problème pour trouver le chemin de lancement du frontend</strong></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Tried</span> <span class="n">to</span> <span class="n">find</span> <span class="n">bootstrap</span> <span class="n">code</span><span class="p">,</span> <span class="n">but</span> <span class="n">could</span> <span class="ow">not</span><span class="o">.</span> <span class="n">Specify</span> <span class="n">either</span> <span class="n">statically</span> <span class="n">analyzable</span> <span class="n">bootstrap</span> <span class="n">code</span> <span class="ow">or</span> <span class="k">pass</span> <span class="ow">in</span> <span class="n">an</span> <span class="n">entryModule</span> <span class="n">to</span> <span class="n">the</span> <span class="n">plugins</span> <span class="n">options</span><span class="o">.</span>
</pre></div>
</div>
<p>Editez le fichier <code class="docutils literal"><span class="pre">/home/&lt;my_user&gt;/geonature/frontend/tsconfig.json</span></code> et renseignez les bons chemins vers le frontend de GeoNature :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;@angular/*&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/home/&lt;my_user&gt;/geonature/frontend/node_modules/@angular/*&quot;</span><span class="p">],</span>
<span class="s2">&quot;@geonature_common/*&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/home/&lt;my_user&gt;/geonature/frontend/src/app/GN2CommonModule/*&quot;</span><span class="p">],</span>
<span class="s2">&quot;@geonature/*&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/home/&lt;my_user&gt;/geonature/frontend/src/app/*&quot;</span><span class="p">],</span>
<span class="s2">&quot;@geonature_config/*&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/home/&lt;my_user&gt;/geonaturefrontend/src/conf/*&quot;</span><span class="p">],</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Problème d’affichage du Frontend</strong></li>
</ul>
<p>Si vous rencontrez des problèmes de librairies Frontend qui n’ont pas bien été installées ou non accessibles, vous pouvez les réinstaller</p>
<ul class="simple">
<li>Supprimer le répertoire <code class="docutils literal"><span class="pre">frontend/node_modules</span></code></li>
<li>Réinstaller les dépendances du Frontend : Dans le répertoire frontend, lancez la commande <code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span></code></li>
<li>Reconstruire le Frontend : Dans le répertoire frontend, lancez la commande <code class="docutils literal"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code></li>
</ul>
</div>
</div>
<div class="section" id="problemes-lies-a-la-bdd">
<h2>Problèmes liés à la BDD<a class="headerlink" href="#problemes-lies-a-la-bdd" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Après un redémarrage de PostgreSQL (<code class="docutils literal"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">postgresql</span> <span class="pre">restart</span></code>), celle-ci ne sera plus accessible par l’application et si vous tentez de vous connecter, vous aurez un message du type <code class="docutils literal"><span class="pre">LoginError</span></code>. Cela est lié au fait que lorsqu’on redémarre PostgreSQL, il faut aussi relancer les API de GeoNature, car cela génère des erreurs de transaction et de session entre l’API et PostgreSQL.</li>
</ul>
<p>Donc à chaque <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">postgresql</span> <span class="pre">restart</span></code>, lancer un <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code></p>
</div>
<div class="section" id="probleme-de-lancement-l-api-lie-a-supervisor">
<h2>Problème de lancement l’API lié à supervisor<a class="headerlink" href="#probleme-de-lancement-l-api-lie-a-supervisor" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Suite à une montée de version, si la commande <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">supervisorctl</span> <span class="pre">reload</span></code> renvoie cette erreur:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>error: &lt;class &#39;socket.error&#39;&gt;, [Errno 2] No such file or directory: file: /usr/lib/python2.7/socket.py line: 228
</pre></div>
</div>
<p>Il s’agit d’une erreur lié à supervisor, qui se charge de lancer les applications. Redémarrer le service puis relancer la commande:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">supervisor</span> <span class="n">start</span>
<span class="n">sudo</span> <span class="n">supervisorctl</span> <span class="n">reload</span>
</pre></div>
</div>
<p>Retester le fonctionnement de l’application grâce à la commande <code class="docutils literal"><span class="pre">ps</span> <span class="pre">-aux</span> <span class="pre">|grep</span> <span class="pre">gunicorn</span></code>, celle ci doit renvoyer plus d’une ligne</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="authors.html" class="btn btn-neutral float-right" title="AUTEURS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="https.html" class="btn btn-neutral float-left" title="HTTPS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, PnE, PnC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>